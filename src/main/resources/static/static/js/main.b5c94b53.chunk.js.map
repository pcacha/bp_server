{"version":3,"sources":["components/NavigationItem.js","apiCalls/apiCalls.js","store/actionsTypes.js","store/authActions.js","components/Navigation.js","components/Footer.js","components/Layout.js","components/Jumbotron.js","components/ThemesCard.js","pages/HomePage.js","components/ButtonWithProgress.js","components/Input.js","pages/LoginPage.js","pages/SignupPage.js","store/authReducer.js","store/store.js","shared/failureHandler.js","pages/ProfilePage.js","components/Spinner.js","pages/CreateInstitutionPage.js","shared/sharedConstants.js","pages/UpdateInstitutionPage.js","pages/MyInstitutionPage.js","pages/AddLanguagesPage.js","components/LocationPickerSelect.js","components/LocationPicker.js","pages/AddExhibitPage.js","components/MyExhibitCard.js","pages/MyInstitutionExhibitsPage.js","pages/UpdateExhibitPage.js","components/InstitutionCard.js","pages/TranslateInstitutionsPage.js","components/TranslateExhibitCard.js","pages/TranslateExhibitPage.js","pages/NewTranslationPage.js","components/TranslatorRateTranslationCard.js","pages/TranslatorRatePage.js","components/ApproveExhibitCard.js","pages/ApproveExhibitPage.js","components/OwnerRateTranslationCard.js","pages/OwnerRatePage.js","components/MyTranslationSequenceCard.js","pages/MyTranslationsPage.js","components/MyTranslationCard.js","pages/TranslationSequencePage.js","components/UserManagerRow.js","pages/UserManagerPage.js","pages/UserDetailPage.js","components/BuildingCard.js","pages/BuildingsPage.js","pages/AddBuildingPage.js","pages/UpdateBuildingPage.js","components/RoomCard.js","pages/RoomsPage.js","pages/AddRoomPage.js","pages/UpdateRoomPage.js","components/ShowcaseCard.js","pages/ShowcasesPage.js","pages/AddShowcasePage.js","pages/UpdateShowcasePage.js","App.js","index.js"],"names":["navigationItem","props","className","exact","activeClassName","to","children","setAuthorizationHeader","token","isLoggedIn","axios","defaults","headers","common","updateUser","user","put","updatePassword","password","saveMyInstitution","institution","post","updateInstitutionImage","img","updateInstitution","addInstitutionLanguage","languageId","addExhibit","exhibit","deleteExhibit","exhibitId","delete","updateExhibitImage","updateExhibitInfoLabelImage","updateExhibit","addInstitutionManager","email","deleteInstitution","saveNewTranslation","translation","getRateOverview","get","setLike","translationId","value","setOfficial","deleteSequence","rollbackTranslation","adminUpdateUsername","userId","username","adminChangePassword","adminChangeTranslator","adminChangeBan","adminRemoveInstitution","getQRCode","getBuildings","saveBuilding","building","deleteBuilding","buildingId","updateBuilding","updatedBuilding","deleteRoom","roomId","getRooms","saveRoom","room","updateRoom","updatedRoom","deleteShowcase","showcaseId","getShowcases","saveShowcase","showcase","updateShowcase","updatedShowcase","LOGOUT_SUCCESS","LOGIN_SUCCESS","SET_USERNAME","SET_EMAIL","SET_IS_INSTITUTION_OWNER","login","credentials","dispatch","apiCalls","then","response","loginSuccess","data","decodedToken","jwt_decode","id","createdAt","isTranslator","isInstitutionOwner","isAdmin","expiredAt","exp","type","actionsTypes","payload","getFreshToken","signup","logout","setIsInstitutionOwner","Navigation","this","NavigationItem","role","href","onClick","e","preventDefault","Component","connect","state","authActions","Footer","layout","jumbotron","themesCard","title","info","home","Jumbotron","ThemesCard","ButtonWithProgress","disabled","pendingApiCall","hasChildren","text","Input","inputClassName","undefined","hasError","renderedInput","name","placeholder","onChange","accept","onlyImage","htmlFor","rows","label","boldLabel","error","LoginPage","apiError","event","setState","target","onClickLogin","body","history","push","catch","disabledSubmit","SignupPage","passwordRepeat","errors","passwordRepeatConfirmed","onClickSignup","validationErrors","initialState","authReducer","action","actions","localStorageData","localStorage","getItem","initState","persistedState","validToken","JSON","parse","currentTime","Date","now","console","log","store","reactReduxDevTools","window","__REDUX_DEVTOOLS_EXTENSION__","middleware","thunk","navigator","userAgent","includes","createStore","compose","applyMiddleware","subscribe","getState","setItem","stringify","setTimeout","handleError","Promise","resolve","reject","status","ProfilePage","pendingApiCallUpdateUser","pendingApiCallUpdatePassword","userUpdated","passwordUpdated","handleApiError","apiCall","onClickUserUpdate","setUsername","setEmail","onClickPasswordUpdate","toLocaleDateString","Spinner","CreateInstitutionPage","address","description","latitudeString","longitudeString","encodedImage","imageSelect","onImageSelect","files","length","file","reader","FileReader","onloadend","result","readAsDataURL","clearImage","onClickCreate","redirect","src","alt","SERVER_ROOT_URL","INSTITUTIONS_IMAGES_URL","EXHIBITS_IMAGES_URL","INFO_LABELS_IMAGES_URL","NOTHING_SELECTED_LABEL","UpdateInstitutionPage","latitude","longitude","image","pendingApiCallUpdateInstitution","pendingApiCallUpdateImage","pendingApiCallDeleteInstitution","pendingApiCallAddManager","institutionUpdated","imageUpdated","managerAdded","onClickImageUpdate","message","onEmailChange","onClickInstitutionUpdate","onClickInstitutionDelete","confirm","onClickManagerAdd","MyInstitutionPage","isOwner","path","AddLanguagesPage","pendingApiCallDownloadLanguages","possible","chosen","filtered","search","onSearchChange","filter","lan","toLowerCase","onLanguageAddClick","newFiltered","fil","newPossible","pos","newChosen","possibleLanguages","chosenLanguages","map","LocationPickerSelect","fetchedObjects","selectedId","currValue","selectedLabel","fetch","objects","newSelectedLabel","o","idName","options","isClearable","LocationPicker","fetchRooms","fetchShowcases","onBuildingChange","newVal","update","onRoomChange","onShowcaseChange","AddExhibitPage","infoLabelText","encodedInfoLabel","infoLabelSelect","created","onInfoLabelTextChange","editor","getData","currBuildingId","currRoomId","currShowcaseId","updateLocation","ClassicEditor","config","removePlugins","MyExhibitCard","onClickDownloadQRCode","onClickDelete","MyInstitutionExhibitsPage","exhibits","newExhibits","ex","a","document","createElement","download","click","content","UpdateExhibitPage","infoLabel","pendingApiCallGetInstitution","pendingApiCallUpdateInfoLabel","exhibitUpdated","infoLabelUpdated","encoded","updated","encode","select","onClickInfoImageUpdate","onClickExhibitUpdate","match","params","InstitutinCard","institutionId","TranslateInstitutionsPage","institutions","i","InstitutionCard","TranslateExhibitCard","languages","selectLang","lang","buttonsDisabled","TranslateExhibitPage","NewTranslationPage","exhibitName","languageName","pendingApiCallGetNewTranslation","pendingApiCallCreateTranslation","onTranslationCreate","onTextChange","TranslatorRateTranslationCard","cardStyle","isOfficial","btnClass","liked","authorUsername","translatedText","likesCount","onLikeChange","TranslatorRatePage","language","translations","newValue","newTranslations","t","ApproveExhibitCard","buttonDisabled","ApproveExhibitPage","OwnerRateTranslationCard","likeBtnClass","officialBtnClass","onOfficialChange","pendingApiCallSetOfficial","OwnerRatePage","MyTranslationSequenceCard","exhibitImage","institutionName","latestTranslationCreatedAt","MyTranslationsPage","sequences","newSequences","s","index","MyTranslationCard","order","onRollback","TranslationSequencePage","slice","translationsLength","UserManagerRow","UserManagerPage","users","u","scope","UserDetailPage","isBanned","pendingApiCallUsernameUpdate","pendingApiCallChangePassword","pendingApiCallTranslator","pendingApiCallBan","pendingApiCallRemoveInstitution","usernameUpdated","onClickUsernameUpdate","onPasswordChange","onTranslatorChange","onBanChange","onInstitutionRemove","BuildingCard","BuildingsPage","buildings","newBuildings","b","AddBuildingPage","onBuildingCreate","buildingDescription","UpdateBuildingPage","pendingApiCallGet","pendingApiCallUpdate","onBuildingUpdate","RoomCard","RoomsPage","rooms","newRooms","r","AddRoomPage","onRoomCreate","roomDescription","UpdateRoomPage","onRoomUpdate","ShowcaseCard","ShowcasePage","showcases","newShowcases","AddShowcasePage","onShowcaseCreate","showcaseDescription","UpdateShowcasePage","onShowcaseUpdate","App","routes","component","HomePage","ShowcasesPage","Layout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b5c94b53.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\n/**\r\n * component represents one navigation item\r\n * @param props props\r\n */\r\nconst navigationItem = (props) => (\r\n    <li className=\"nav-item\">\r\n        <NavLink exact activeClassName='active' className=\"nav-link\" to={props.to}>\r\n            {props.children}\r\n        </NavLink>\r\n    </li>\r\n);\r\n\r\nexport default navigationItem;","import axios from \"axios\";\r\n\r\n/**\r\n * Sets authorization jwt\r\n * @param token jwt\r\n * @param isLoggedIn whether user is logged in\r\n */\r\nexport const setAuthorizationHeader = ({token, isLoggedIn}) => {\r\n    if(isLoggedIn) {\r\n        axios.defaults.headers.common[\"Authorization\"] = token;\r\n    } else {\r\n        delete axios.defaults.headers.common[\"Authorization\"];\r\n    }\r\n}\r\n\r\n/**\r\n * Logs user in\r\n * @param credentials password and username\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const login = credentials => {\r\n    return axios.post(\"/users/login\", credentials);\r\n}\r\n\r\n/**\r\n * Registers new user\r\n * @param user user info\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const signup = user => {\r\n    return axios.post(\"/users/register\", user);\r\n}\r\n\r\n/**\r\n * Gets fresh jwt\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getFreshToken = () => {\r\n    return axios.get(\"/users/token\");\r\n}\r\n\r\n/**\r\n * Updates user info\r\n * @param user user info\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateUser = user => {\r\n    return axios.put(\"/users/updateUser\", user);\r\n}\r\n\r\n/**\r\n * Updates users password\r\n * @param password password\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updatePassword = password => {\r\n    return axios.put(\"/users/updatePassword\", password);\r\n}\r\n\r\n/**\r\n * Gets info of user's institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getMyInstitution = () => {\r\n    return axios.get(\"/institutions/myInstitution\");\r\n}\r\n\r\n/**\r\n * Saves new user's institution\r\n * @param institution institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const saveMyInstitution = institution => {\r\n    return axios.post(\"/institutions/myInstitution\", institution);\r\n}\r\n\r\n/**\r\n * Updates institution image\r\n * @param img image base64 encoded\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateInstitutionImage = img => {\r\n    return axios.put(\"/institutions/myInstitution/updateImage\", img);\r\n}\r\n\r\n/**\r\n * Updates institution info\r\n * @param institution updated institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateInstitution = institution => {\r\n    return axios.put(\"/institutions/myInstitution\", institution);\r\n}\r\n\r\n/**\r\n * Gets all languages of user's institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getMyInstitutionLanguages = () => {\r\n    return axios.get(\"/institutions/myInstitution/languages\");\r\n}\r\n\r\n/**\r\n * Adds new language to user's institution\r\n * @param languageId language id\r\n * @returns {Promise<AxiosResponse<any>>} reponse\r\n */\r\nexport const addInstitutionLanguage = languageId => {\r\n    return axios.post(\"/institutions/myInstitution/languages/\" + languageId);\r\n}\r\n\r\n/**\r\n * Adds new exhibit to institution\r\n * @param exhibit new exhibit\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const addExhibit = exhibit => {\r\n    return axios.post(\"/exhibits\", exhibit);\r\n}\r\n\r\n/**\r\n * Gets all exhibits of user's institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getAllExhibitsOfMyInstitution = () => {\r\n    return axios.get(\"/exhibits/all\");\r\n}\r\n\r\n/**\r\n * Deletes exhibit from user's institution\r\n * @param exhibitId exhibit id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteExhibit = exhibitId => {\r\n    return axios.delete(\"/exhibits/\" + exhibitId);\r\n}\r\n\r\n/**\r\n * Gets exhibit based on its id\r\n * @param exhibitId exhibit id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getExhibit = exhibitId => {\r\n    return axios.get(\"/exhibits/\" + exhibitId);\r\n}\r\n\r\n/**\r\n * Updates exhibit image\r\n * @param exhibitId exhibit id\r\n * @param img base64 encoded image\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateExhibitImage = (exhibitId, img) => {\r\n    return axios.put(\"/exhibits/\" + exhibitId + \"/updateImage\", img);\r\n}\r\n\r\n/**\r\n * Updates exhibit info label\r\n * @param exhibitId exhibit id\r\n * @param img base64 encoded info label image\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateExhibitInfoLabelImage = (exhibitId, img) => {\r\n    return axios.put(\"/exhibits/\" + exhibitId + \"/updateInfoLabel\", img);\r\n}\r\n\r\n/**\r\n * Updates exhibit information\r\n * @param exhibitId exhibit id\r\n * @param exhibit updated exhibit\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateExhibit = (exhibitId, exhibit) => {\r\n    return axios.put(\"/exhibits/\" + exhibitId, exhibit);\r\n}\r\n\r\n/**\r\n * Adds manager to institution\r\n * @param email new manager's email\r\n * @returns {Promise<AxiosResponse<ny>>} response\r\n */\r\nexport const addInstitutionManager = email => {\r\n    return axios.post(\"/institutions/myInstitution/addManager\", email);\r\n}\r\n\r\n/**\r\n * Deletes institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteInstitution = () => {\r\n    return axios.delete(\"/institutions/myInstitution\");\r\n}\r\n\r\n/**\r\n * Gets all registered institutions\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getAllInstitutions = () => {\r\n    return axios.get(\"/institutions\");\r\n}\r\n\r\n/**\r\n * Gets all exhibits and allowed languages of an institution\r\n * @param institutionId institution id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getExhibitsTranslate = institutionId => {\r\n    return axios.get(\"/exhibits/translate/\" + institutionId);\r\n}\r\n\r\n/**\r\n * Gets info for creating new translation\r\n * @param exhibitId exhibit id\r\n * @param languageId language id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getNewTranslation = (exhibitId, languageId) => {\r\n    return axios.get(\"/translations/new/\" + exhibitId + \"/\" + languageId);\r\n}\r\n\r\n/**\r\n * Saves new translation\r\n * @param exhibitId exhibit id\r\n * @param languageId language id\r\n * @param translation translation id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const saveNewTranslation = (exhibitId, languageId, translation) => {\r\n    return axios.post(\"/translations/new/\" + exhibitId + \"/\" + languageId, translation);\r\n}\r\n\r\n/**\r\n * Gets translations of given exhibit and language for rating\r\n * @param exhibitId exhibit id\r\n * @param languageId language id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getRateOverview = (exhibitId, languageId) => {\r\n    return axios.get(\"/translations/rate/\" + exhibitId + \"/\" + languageId);\r\n}\r\n\r\n/**\r\n * Sets like/unlike to given translation\r\n * @param translationId translation id\r\n * @param value new like value\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const setLike = (translationId, value) => {\r\n    return axios.put(\"/translations/like/\" + translationId, value);\r\n}\r\n\r\n/**\r\n * Gets all exhibits and allowed languages to user's instituion\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getExhibitsApproveTranslations = () => {\r\n    return axios.get(\"/exhibits/approveTranslations\");\r\n}\r\n\r\n/**\r\n * Sets translation official/unofficial\r\n * @param translationId translation id\r\n * @param value new official value\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const setOfficial = (translationId, value) => {\r\n    return axios.put(\"/translations/official/\" + translationId, value);\r\n}\r\n\r\n/**\r\n * Gets translator's translation sequences\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getMyTranslationSequences = () => {\r\n    return axios.get(\"/translations/sequences\");\r\n}\r\n\r\n/**\r\n * Deletes translation sequence\r\n * @param exhibitId exhibit id\r\n * @param languageId language id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteSequence = (exhibitId, languageId) => {\r\n    return axios.delete(\"/translations/sequences/\" + exhibitId + \"/\" + languageId);\r\n}\r\n\r\n/**\r\n * Gets translation of translation sequence\r\n * @param exhibitId exhibit id\r\n * @param languageId language id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getMyTranslationSequence = (exhibitId, languageId) => {\r\n    return axios.get(\"/translations/sequence/\" + exhibitId + \"/\" + languageId);\r\n}\r\n\r\n/**\r\n * Rollbacks translation sequence to given translation\r\n * @param translationId translation id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const rollbackTranslation = translationId => {\r\n    return axios.delete(\"/translations/sequence/\" + translationId);\r\n}\r\n\r\n/**\r\n * Gets all system users\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getUsers = () => {\r\n    return axios.get(\"/admin/users\");\r\n}\r\n\r\n/**\r\n * Gets users details\r\n * @param userId user id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getUser = userId => {\r\n    return axios.get(\"/admin/users/\" + userId);\r\n}\r\n\r\n/**\r\n * Updates username of user\r\n * @param userId user id\r\n * @param username new username\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const adminUpdateUsername = (userId, username) => {\r\n    return axios.put(\"/admin/users/\" + userId + \"/updateUsername\", username);\r\n}\r\n\r\n/**\r\n * Changes password of given user by sending it to his email\r\n * @param userId user id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const adminChangePassword = userId => {\r\n    return axios.put(\"/admin/users/\" + userId + \"/updatePassword\");\r\n}\r\n\r\n/**\r\n * Changes user's rights to translate\r\n * @param userId user id\r\n * @param value new rights value\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const adminChangeTranslator = (userId, value) => {\r\n    return axios.put(\"/admin/users/\" + userId + \"/updateTranslator\", value);\r\n}\r\n\r\n/**\r\n * Changes user's rights to log into the system and perform actions\r\n * @param userId user id\r\n * @param value new ban value\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const adminChangeBan = (userId, value) => {\r\n    return axios.put(\"/admin/users/\" + userId + \"/updateBan\", value);\r\n}\r\n\r\n/**\r\n * Removes institution from user\r\n * @param userId user ud\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const adminRemoveInstitution = userId => {\r\n    return axios.put(\"/admin/users/\" + userId + \"/removeInstitution\");\r\n}\r\n\r\n/**\r\n * Gets QR code for given exhibit\r\n * @param exhibitId exhibit id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getQRCode = exhibitId => {\r\n    return axios.get(\"/exhibits/\" + exhibitId + \"/qrcode\");\r\n}\r\n\r\n/**\r\n * Gets all buildings of institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getBuildings = () => {\r\n    return axios.get(\"/location/buildings\");\r\n}\r\n\r\n/**\r\n * Saves new building\r\n * @param building new building\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const saveBuilding = building => {\r\n    return axios.post(\"/location/buildings\", building);\r\n}\r\n\r\n/**\r\n * Deletes building\r\n * @param buildingId building id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteBuilding = buildingId => {\r\n    return axios.delete(\"/location/buildings/\" + buildingId);\r\n}\r\n\r\n/**\r\n * Gets details about building\r\n * @param buildingId building id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getBuilding = buildingId => {\r\n    return axios.get(\"/location/buildings/\" + buildingId);\r\n}\r\n\r\n/**\r\n * Updates building\r\n * @param updatedBuilding updated building\r\n * @param buildingId building id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateBuilding = (updatedBuilding, buildingId) => {\r\n    return axios.put(\"/location/buildings/\" + buildingId, updatedBuilding);\r\n}\r\n\r\n/**\r\n * Deletes room\r\n * @param roomId room id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteRoom = roomId => {\r\n    return axios.delete(\"/location/rooms/\" + roomId);\r\n}\r\n\r\n/**\r\n * Gets all rooms for given building\r\n * @param buildingId building id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getRooms = buildingId => {\r\n    return axios.get(\"/location/rooms/all/\" + buildingId);\r\n}\r\n\r\n/**\r\n * Saves new room\r\n * @param room new room\r\n * @param buildingId building id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const saveRoom = (room, buildingId) => {\r\n    return axios.post(\"/location/rooms/\" + buildingId, room);\r\n}\r\n\r\n/**\r\n * Gets details about room\r\n * @param roomId room id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getRoom = roomId => {\r\n    return axios.get(\"/location/rooms/\" + roomId);\r\n}\r\n\r\n/**\r\n * Updates room\r\n * @param updatedRoom updated room\r\n * @param roomId room id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateRoom = (updatedRoom, roomId) => {\r\n    return axios.put(\"/location/rooms/\" + roomId, updatedRoom);\r\n}\r\n\r\n/**\r\n * Deletes showcase\r\n * @param showcaseId showcase id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteShowcase = showcaseId => {\r\n    return axios.delete(\"/location/showcases/\" + showcaseId);\r\n}\r\n\r\n/**\r\n * Gets all showcases for given room\r\n * @param roomId room id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getShowcases = roomId => {\r\n    return axios.get(\"/location/showcases/all/\" + roomId);\r\n}\r\n\r\n/**\r\n * Saves new showcase\r\n * @param showcase new showcase\r\n * @param roomId room id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const saveShowcase = (showcase, roomId) => {\r\n    return axios.post(\"/location/showcases/\" + roomId, showcase);\r\n}\r\n\r\n/**\r\n * Gets details about showcase\r\n * @param showcaseId showcase id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getShowcase = showcaseId => {\r\n    return axios.get(\"/location/showcases/\" + showcaseId);\r\n}\r\n\r\n/**\r\n * Updates showcase\r\n * @param updatedShowcase updated showcase\r\n * @param showcaseId showcase id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateShowcase = (updatedShowcase, showcaseId) => {\r\n    return axios.put(\"/location/showcases/\" + showcaseId, updatedShowcase);\r\n}","/**\r\n * logout action\r\n */\r\nexport const LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\";\r\n/**\r\n * login action\r\n */\r\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\r\n/**\r\n * set username action\r\n */\r\nexport const SET_USERNAME = \"SET_USERNAME\";\r\n/**\r\n * set email action\r\n */\r\nexport const SET_EMAIL = \"SET_EMAIL\";\r\n/**\r\n * set if is institution owner action\r\n */\r\nexport const SET_IS_INSTITUTION_OWNER = \"SET_IS_INSTITUTION_OWNER\";\r\n","import * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport * as actionsTypes from \"./actionsTypes\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\n/**\r\n * logs user in\r\n * @param credentials login credentials\r\n */\r\nexport const login = (credentials) => {\r\n    return dispatch => {\r\n        return apiCalls.login(credentials).then(response => {\r\n            // when login is successful parse token and log in\r\n            dispatch(loginSuccess(response.data.token));\r\n            return response;\r\n        })\r\n    }\r\n}\r\n\r\n/**\r\n * logs user in based on information encoded in token\r\n * @param token jwt\r\n */\r\nconst loginSuccess = (token) => {\r\n    // decode jwt\r\n    const decodedToken = jwt_decode(token);\r\n\r\n    const user = {\r\n        id: decodedToken.id,\r\n        username: decodedToken.username,\r\n        email: decodedToken.email,\r\n        createdAt: decodedToken.createdAt,\r\n        isTranslator: decodedToken.isTranslator,\r\n        isInstitutionOwner: decodedToken.isInstitutionOwner,\r\n        isAdmin: decodedToken.isAdmin,\r\n        isLoggedIn: true,\r\n        token: token,\r\n        expiredAt: decodedToken.exp,\r\n    }\r\n\r\n    // return user\r\n    return {\r\n        type: actionsTypes.LOGIN_SUCCESS,\r\n        payload: user,\r\n    };\r\n}\r\n\r\n/**\r\n * gets fresh token from server\r\n */\r\nexport const getFreshToken = () => {\r\n    return dispatch => {\r\n        apiCalls.getFreshToken().then(response => {\r\n            // if fresh token acquire si successful set new token to redux\r\n            dispatch(loginSuccess(response.data.token));\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * registers new user in the system\r\n * @param user new user\r\n */\r\nexport const signup = (user) => {\r\n    return dispatch => {\r\n        return apiCalls.signup(user).then(response => {\r\n            const credentials = {\r\n                username: user.username,\r\n                password: user.password\r\n            }\r\n            // logs user in after successful sign up\r\n            return dispatch(login(credentials));\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * logs user out\r\n */\r\nexport const logout = () => {\r\n    return {\r\n        type: actionsTypes.LOGOUT_SUCCESS\r\n    }\r\n}\r\n\r\n/**\r\n * set username to redux state\r\n * @param username username\r\n */\r\nexport const setUsername = (username) => {\r\n    return {\r\n        type: actionsTypes.SET_USERNAME,\r\n        payload: username,\r\n    }\r\n}\r\n\r\n/**\r\n * set email to redux state\r\n * @param email email\r\n */\r\nexport const setEmail = (email) => {\r\n    return {\r\n        type: actionsTypes.SET_EMAIL,\r\n        payload: email,\r\n    }\r\n}\r\n\r\n/**\r\n * set if user is institution owner to redux state\r\n * @param value if user is institution owner\r\n */\r\nexport const setIsInstitutionOwner = (value) => {\r\n    return {\r\n        type: actionsTypes.SET_IS_INSTITUTION_OWNER,\r\n        payload: value,\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {Link, NavLink} from \"react-router-dom\";\r\nimport NavigationItem from \"../components/NavigationItem\";\r\nimport {connect} from \"react-redux\";\r\nimport * as authActions from \"../store/authActions\";\r\n\r\n/**\r\n * web navigation\r\n */\r\nclass Navigation extends Component {\r\n\r\n    // renders navigation in the top of webpage\r\n    render() {\r\n        const {user} = this.props;\r\n\r\n        // render navigation\r\n        return (\r\n            <div className=\"position-fixed w-100 fixed-header\">\r\n                <nav className=\"blue-nav navbar navbar-expand-lg navbar-light\" id=\"blue-nav\">\r\n                    <div className=\"container\">\r\n                        <Link className=\"navbar-brand\" to=\"/\">CTS</Link>\r\n                        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n                                data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"\r\n                                aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                            <span className=\"navbar-toggler-icon\"/>\r\n                        </button>\r\n\r\n                        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n                            <ul className=\"navbar-nav ml-auto d-flex align-items-center\">\r\n                                <NavigationItem to=\"/\">Home</NavigationItem>\r\n                                {user.isAdmin && <NavigationItem to=\"/users\">Users</NavigationItem>}\r\n                                {user.isTranslator && <NavigationItem to=\"/institutions\">Translate</NavigationItem>}\r\n                                {user.isInstitutionOwner && <NavigationItem to=\"/approve\">Approve</NavigationItem>}\r\n                                {\r\n                                    user.isLoggedIn ?\r\n                                        <li className=\"nav-item dropdown\">\r\n                                            <a className=\"nav-link\" id=\"navbarDropdown\" role=\"button\" href=\"/#\"\r\n                                               data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                                {user.username + \" \"}\r\n                                                <i className=\"fa fa-user\" aria-hidden=\"true\"/>\r\n                                            </a>\r\n\r\n                                            <div className=\"my-dropdown dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                                                {\r\n                                                    user.isTranslator &&\r\n                                                    <NavLink className=\"dropdown-item\" to=\"/myTranslations\">\r\n                                                        <i className=\"fa fa-globe\" /> My Translations\r\n                                                    </NavLink>\r\n                                                }\r\n                                                <NavLink className=\"dropdown-item\" to=\"/myInstitution\">\r\n                                                    <i className=\"fa fa-home\" /> My Institution\r\n                                                </NavLink>\r\n                                                <NavLink className=\"dropdown-item\" to=\"/profile\">\r\n                                                    <i className=\"fa fa-user\" /> My Profile\r\n                                                </NavLink>\r\n                                                <div className=\"dropdown-divider\"/>\r\n                                                <a onClick={(e) => {e.preventDefault(); this.props.logout();}} href=\"/#\" className=\"dropdown-item\" id=\"logout\">\r\n                                                    <i className=\"fa fa-sign-out\" /> Logout\r\n                                                </a>\r\n                                            </div>\r\n                                        </li>\r\n                                        :\r\n                                        <>\r\n                                            <NavigationItem to=\"/signup\">Signup</NavigationItem>\r\n                                            <NavigationItem to=\"/login\">Login</NavigationItem>\r\n                                        </>\r\n                                }\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </nav>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * maps redux state to props\r\n * @param state redux state\r\n */\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state,\r\n    };\r\n}\r\n\r\n/**\r\n * maps redux dispatch to props\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        logout: () => dispatch(authActions.logout()),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navigation);","import React from 'react';\r\n\r\n/**\r\n * web footer with information\r\n * @param props props\r\n */\r\nfunction Footer(props) {\r\n    return (\r\n        <footer className=\"position-fixed d-flex justify-content-center align-items-center w-100\">\r\n            Community Translation System ©Pavel Čácha\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","import React from \"react\";\r\nimport Navigation from \"./Navigation\"\r\nimport Footer from \"./Footer\"\r\n\r\n/**\r\n * web layout\r\n * @param props props\r\n */\r\nconst layout = (props) => (\r\n    <>\r\n        <Navigation />\r\n        {props.children}\r\n        <Footer />\r\n    </>\r\n);\r\n\r\nexport default layout;","import React from \"react\";\r\n\r\n/**\r\n * homepage jumbotron\r\n * @param props props\r\n */\r\nconst jumbotron = (props) => (\r\n    <div className=\"intro\">\r\n        <div className=\"jumbotron jumbotron-fluid bg-transparent\">\r\n            <div className=\"container\">\r\n                <div className=\"blurred-black p-3 rounded-lg\">\r\n                    <h1 className=\"display-4 font-weight-bold\">The System for Community Translation of Information Texts</h1>\r\n                    <p className=\"lead font-weight-bold\">The place where you can show your skill while helping cultural institutions to grow</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default jumbotron;","import React from \"react\";\r\n\r\n/**\r\n * card with web info showed on home page\r\n * @param props props\r\n */\r\nconst themesCard = (props) => (\r\n    <div className=\"col mt-2\">\r\n        <div className={\"my-card border rounded\"}>\r\n            <h3>{props.title}</h3>\r\n            <p>{props.info}</p>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default themesCard;","import React from \"react\";\r\nimport Jumbotron from \"../components/Jumbotron\";\r\nimport ThemesCard from \"../components/ThemesCard\";\r\n\r\n/**\r\n * home page definition\r\n * @param props page props\r\n * @returns {JSX.Element} home page\r\n */\r\nconst home = (props) => (\r\n    <div className=\"bg-white\">\r\n        <Jumbotron/>\r\n\r\n        <div className=\"container mt-5 pb-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col d-flex justify-content-center align-items-center flex-column\">\r\n                    <h3>Our goals</h3>\r\n                    <p>The site is intended for anyone who wants to participate in community translation of information texts of cultural institutions</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"row mt-3 bottom-padding\">\r\n                <ThemesCard title=\"Become a Translator\" info=\"Join the community of translators and start translating today!\"/>\r\n\r\n                <ThemesCard title=\"Register Your Institution\"\r\n                            info=\"Register your institution and let the community translate your chosen information texts!\"/>\r\n\r\n                <ThemesCard title=\"Mobile Application\"\r\n                            info=\"Visitors to your cultural institution will be able to find the translated texts in our mobile application!\"/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default home;","import React from \"react\";\r\n\r\n/**\r\n * button with progress spinner\r\n * @param props props\r\n */\r\nconst ButtonWithProgress = (props) => {\r\n    return (\r\n        <button disabled={props.disabled}\r\n                className={props.className || \"btn btn-primary\"} onClick={props.onClick}>\r\n\r\n            {\r\n                props.pendingApiCall &&\r\n                <div className=\"spinner-border\r\n                text-light spinner-border-sm mr-1\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n            }\r\n\r\n            {\r\n                props.hasChildren ?\r\n                    props.children\r\n                    :\r\n                    props.text\r\n            }\r\n\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default ButtonWithProgress;","import React from \"react\";\r\n\r\n/**\r\n * generic input used in forms\r\n * @param props props\r\n */\r\nconst Input = (props) => {\r\n    let inputClassName = \"form-control\";\r\n\r\n    if(props.type === \"file\") {\r\n        inputClassName += \" custom-file-input\";\r\n    }\r\n\r\n    if(props.hasError !== undefined) {\r\n        inputClassName += props.hasError ? \" is-invalid\" : \" is-valid\";\r\n    }\r\n\r\n    let renderedInput = (\r\n        <input className={inputClassName} type={props.type || \"text\"} name={props.name}\r\n               placeholder={props.placeholder} value={props.value} onChange={props.onChange} />\r\n    );\r\n\r\n    if(props.type === \"file\") {\r\n        renderedInput = (\r\n            <div className=\"custom-file\">\r\n                <input type=\"file\" className={inputClassName} id=\"institutionImageFile\" name={props.name} value={props.value} onChange={props.onChange}\r\n                       accept= {props.onlyImage && \".jpg, .png, .jpeg\"} />\r\n                <label className=\"custom-file-label\" htmlFor=\"institutionImageFile\">{props.placeholder}</label>\r\n            </div>\r\n        );\r\n    }\r\n    else if (props.type === \"textarea\") {\r\n        renderedInput = (\r\n            <textarea className={inputClassName} name={props.name} placeholder={props.placeholder} value={props.value}\r\n                      onChange={props.onChange} rows=\"3\" />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {\r\n                props.label &&\r\n                <label className={props.boldLabel && \"font-weight-bold\"}>{props.label}</label>\r\n            }\r\n\r\n            {renderedInput}\r\n\r\n            {\r\n                props.hasError &&\r\n                <div className=\"text-danger\">\r\n                    <small>{props.error}</small>\r\n                </div>\r\n            }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Input;","import React, {Component} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport * as authActions from \"../store/authActions\";\r\nimport Input from \"../components/Input\";\r\n\r\n/**\r\n * page for logging in to the system\r\n */\r\nclass LoginPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        username: \"\",\r\n        password: \"\",\r\n        apiError: {},\r\n        pendingApiCall: false\r\n    }\r\n\r\n    /**\r\n     * called on input text change\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // update new value in state\r\n        this.setState({[event.target.name]: event.target.value, apiError: {}});\r\n    }\r\n\r\n    /**\r\n     * called when user submit login\r\n     */\r\n    onClickLogin = (e) => {\r\n        e.preventDefault();\r\n\r\n        // extract credentials from state\r\n        const body = {\r\n            username: this.state.username,\r\n            password: this.state.password,\r\n        }\r\n        this.setState({pendingApiCall: true});\r\n\r\n        // send credentials to server\r\n        this.props.login(body)\r\n            .then(response => {\r\n                // set new state and redirect\r\n                this.setState({pendingApiCall: false}, () => {\r\n                    this.props.history.push(\"/\");\r\n                });\r\n            })\r\n            .catch(error => {\r\n                // handle errors in user input\r\n                if (error.response) {\r\n                    this.setState({apiError: error.response.data, pendingApiCall: false});\r\n                }\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Renders login page\r\n     * @returns {JSX.Element} login page\r\n     */\r\n    render() {\r\n        // defines whether submit button is enabled\r\n        let disabledSubmit = false;\r\n        if (this.state.username === \"\" || this.state.password === \"\") {\r\n            disabledSubmit = true;\r\n        }\r\n\r\n        return (\r\n            <form className=\"mx-auto bg-white mt-5 border rounded p-2 p-md-5 container auth-div gray-noise-background mb-3\">\r\n                <h4 className=\"mb-4 font-weight-bold\">Log in</h4>\r\n\r\n                <div className=\"form-group\">\r\n                    <Input label=\"Name\" name=\"username\" placeholder=\"Enter name\"\r\n                           value={this.state.username}\r\n                           onChange={this.onChange}\r\n                           hasError={this.state.apiError.username && true}\r\n                           error={this.state.apiError.username} />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <Input label=\"Password\" name=\"password\" placeholder=\"Enter password\" type=\"password\"\r\n                           value={this.state.password}\r\n                           onChange={this.onChange}\r\n                           hasError={this.state.apiError.password && true}\r\n                           error={this.state.apiError.password}/>\r\n                </div>\r\n\r\n                <ButtonWithProgress\r\n                    className=\"btn btn-primary w-100 my-2\"\r\n                    onClick={(e) => this.onClickLogin(e)}\r\n                    disabled={disabledSubmit || this.state.pendingApiCall}\r\n                    pendingApiCall={this.state.pendingApiCall}\r\n                    hasChildren>\r\n                    <i className=\"fa fa-paper-plane\" /> Log in\r\n                </ButtonWithProgress>\r\n\r\n                <Link to=\"/signup\">Don't have an account? Sign up</Link>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * maps redux state to page props\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        login: (body) => dispatch(authActions.login(body)),\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(LoginPage);","import React, {Component} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport * as authActions from \"../store/authActions\";\r\nimport Input from \"../components/Input\";\r\n\r\n/**\r\n * page for user registration\r\n */\r\nclass SignupPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        username: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        passwordRepeat: \"\",\r\n        pendingApiCall: false,\r\n        errors: {},\r\n        passwordRepeatConfirmed: true,\r\n    }\r\n\r\n    /**\r\n     * called when is some text input changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        if (event.target.name === \"passwordRepeat\") {\r\n            // for password repeat\r\n            const value = event.target.value;\r\n            // check if passwords are the same\r\n            const passwordRepeatConfirmed = this.state.password === value;\r\n            const errors = {...this.state.errors};\r\n            errors.passwordRepeat = passwordRepeatConfirmed ? \"\" : \"Passwords do not match\";\r\n            this.setState({passwordRepeatConfirmed, errors});\r\n        }\r\n        else if (event.target.name === \"password\") {\r\n            // for password\r\n            const value = event.target.value;\r\n            // check if passwords are the same\r\n            const passwordRepeatConfirmed = this.state.passwordRepeat === value;\r\n            const errors = {...this.state.errors};\r\n            errors.passwordRepeat = passwordRepeatConfirmed ? \"\" : \"Passwords do not match\";\r\n            delete errors[event.target.name];\r\n            this.setState({passwordRepeatConfirmed, errors});\r\n        }\r\n        else {\r\n            // for other fields\r\n            const errors = {...this.state.errors};\r\n            delete errors[event.target.name];\r\n            this.setState({errors});\r\n        }\r\n        // update value\r\n        this.setState({[event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * called when user clicks on sign up button\r\n     */\r\n    onClickSignup = (e) => {\r\n        e.preventDefault();\r\n\r\n        // extract user from state\r\n        const user = {\r\n            username: this.state.username,\r\n            email: this.state.email,\r\n            password: this.state.password\r\n        }\r\n        this.setState({pendingApiCall: true});\r\n\r\n        // send user sing up to server\r\n        this.props.signup(user).then(response => {\r\n            this.setState({pendingApiCall: false}, () => this.props.history.push(\"/\"));\r\n        }).catch(apiError => {\r\n                // react on errors in user input\r\n                let errors = {...this.state.errors};\r\n                if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                    errors = {...apiError.response.data.validationErrors}\r\n                }\r\n\r\n                this.setState({\r\n                    pendingApiCall: false,\r\n                    errors\r\n                })\r\n            }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * renders singup page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        // defines if sing up btn is enabled\r\n        let disabledSubmit = false;\r\n        if (this.state.username === \"\" || this.state.email === \"\" || this.state.password === \"\" || this.state.passwordRepeat === \"\") {\r\n            disabledSubmit = true;\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto bg-white mt-5 border rounded p-2 p-md-5 container auth-div gray-noise-background mb-3\">\r\n                <form>\r\n                    <h4 className=\"mb-4 font-weight-bold\">Sign up</h4>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"username\" value={this.state.username}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.username && true}\r\n                            error={this.state.errors.username}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"E-mail\"\r\n                            placeholder=\"Enter e-mail\" name=\"email\" value={this.state.email}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.email && true}\r\n                            error={this.state.errors.email}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Password\"\r\n                            placeholder=\"Enter password\" name=\"password\" value={this.state.password}\r\n                            onChange={this.onChange} type=\"password\"\r\n                            hasError={this.state.errors.password && true}\r\n                            error={this.state.errors.password}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Confirm Password\"\r\n                            placeholder=\"Enter password again\" name=\"passwordRepeat\" value={this.state.passwordRepeat}\r\n                            onChange={this.onChange} type=\"password\"\r\n                            hasError={this.state.errors.passwordRepeat && true}\r\n                            error={this.state.errors.passwordRepeat}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onClickSignup(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={this.state.pendingApiCall || !this.state.passwordRepeatConfirmed || disabledSubmit}\r\n                                         pendingApiCall={this.state.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Sign up\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * maps redux dispatch to page props\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signup: (user) => dispatch(authActions.signup(user)),\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(SignupPage);","import * as actions from \"./actionsTypes\";\r\n\r\n// init redux state\r\nconst initialState = {\r\n    id: 0,\r\n    username: \"\",\r\n    email: \"\",\r\n    createdAt: null,\r\n    isTranslator: false,\r\n    isInstitutionOwner: false,\r\n    isAdmin: false,\r\n    isLoggedIn: false,\r\n    token: \"\",\r\n    expiredAt: null,\r\n}\r\n\r\n/**\r\n * merges redux action outcome with current state\r\n * @param state current state\r\n * @param action redux action\r\n */\r\nexport default function authReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case actions.LOGOUT_SUCCESS:\r\n            return {...initialState};\r\n        case actions.LOGIN_SUCCESS:\r\n            return {\r\n                ...action.payload,\r\n            }\r\n        case actions.SET_USERNAME:\r\n            return {\r\n                ...state,\r\n                username: action.payload,\r\n            }\r\n        case actions.SET_EMAIL:\r\n            return {\r\n                ...state,\r\n                email: action.payload,\r\n            }\r\n        case actions.SET_IS_INSTITUTION_OWNER:\r\n            return {\r\n                ...state,\r\n                isInstitutionOwner: action.payload,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import {createStore, applyMiddleware, compose} from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport authReducer from \"./authReducer\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport * as authActions from \"./authActions\";\r\n\r\nlet localStorageData = localStorage.getItem(\"user\");\r\n\r\n// init redux state\r\nlet initState = {\r\n    id: 0,\r\n    username: \"\",\r\n    email: \"\",\r\n    createdAt: null,\r\n    isTranslator: false,\r\n    isInstitutionOwner: false,\r\n    isAdmin: false,\r\n    isLoggedIn: false,\r\n    token: \"\",\r\n    expiredAt: null,\r\n}\r\nlet persistedState = initState;\r\nlet validToken = false;\r\n\r\nif (localStorageData) {\r\n    try {\r\n        // try to parse stored redux state\r\n        persistedState = JSON.parse(localStorageData);\r\n        const currentTime = Date.now() / 1000;\r\n        if (persistedState.expiredAt > currentTime) {\r\n            // if token is not expired use this state\r\n            apiCalls.setAuthorizationHeader(persistedState);\r\n            validToken = true;\r\n        } else {\r\n            // if token is expired reset state to init state\r\n            persistedState = initState;\r\n        }\r\n    } catch (error) {\r\n        console.log(\"Error parsing stored user\");\r\n    }\r\n}\r\n\r\nconst reactReduxDevTools = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__();\r\nconst middleware = [thunk];\r\nlet store;\r\n\r\nif (window.navigator.userAgent.includes(\"Chrome\") && reactReduxDevTools) {\r\n    // create store including redux dev tools\r\n    store = createStore(\r\n        authReducer,\r\n        persistedState,\r\n        compose(\r\n            applyMiddleware(...middleware),\r\n            reactReduxDevTools\r\n        )\r\n    );\r\n} else {\r\n    // create store without redux dev tools\r\n    store = createStore(\r\n        authReducer,\r\n        persistedState,\r\n        compose(applyMiddleware(...middleware))\r\n    );\r\n}\r\n\r\n// subscribe to every state change\r\nstore.subscribe(() => {\r\n    const user = store.getState();\r\n    // save redux state\r\n    localStorage.setItem(\"user\", JSON.stringify(user));\r\n    // set new authorization header\r\n    apiCalls.setAuthorizationHeader(user);\r\n\r\n    // get fresh token before current one expire\r\n    setTimeout(() => {\r\n        if (user.id === store.getState().id) {\r\n            store.dispatch(authActions.getFreshToken());\r\n        }\r\n    }, 600000000);\r\n})\r\n\r\n// get fresh token\r\nif (validToken) {\r\n    store.dispatch(authActions.getFreshToken());\r\n}\r\n\r\nexport default store;\r\n","import store from \"../store/store\";\r\nimport * as authActions from \"../store/authActions\";\r\n\r\n/**\r\n * handles errors that were caused by lack of rights\r\n * @param error http error\r\n */\r\nexport default function handleError(error) {\r\n    return new Promise((resolve, reject) => {\r\n        const status = error.response.status;\r\n        if (status === 401 || status === 403) {\r\n            // logout when user is not authorized enough\r\n            store.dispatch(authActions.logout());\r\n        }\r\n        reject(error);\r\n    });\r\n}","import React, {Component} from 'react';\r\nimport Input from \"../components/Input\";\r\nimport * as authActions from \"../store/authActions\";\r\nimport {connect} from \"react-redux\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\n\r\n/**\r\n * page with user's profile\r\n */\r\nclass ProfilePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        username: this.props.user.username,\r\n        email: this.props.user.email,\r\n        password: \"\",\r\n        passwordRepeat: \"\",\r\n        passwordRepeatConfirmed: true,\r\n        pendingApiCallUpdateUser: false,\r\n        pendingApiCallUpdatePassword: false,\r\n        userUpdated: false,\r\n        passwordUpdated: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when some of the text inputs change value\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        if (event.target.name === \"passwordRepeat\") {\r\n            // for password repeat input\r\n            const value = event.target.value;\r\n            // checks if passwords are the same\r\n            const passwordRepeatConfirmed = this.state.password === value;\r\n            const errors = {...this.state.errors};\r\n            errors.passwordRepeat = passwordRepeatConfirmed ? \"\" : \"Passwords do not match\";\r\n            this.setState({passwordRepeatConfirmed, errors, passwordUpdated: false});\r\n        } else if (event.target.name === \"password\") {\r\n            // for password input\r\n            const value = event.target.value;\r\n            // check if password are the same\r\n            const passwordRepeatConfirmed = this.state.passwordRepeat === value;\r\n            const errors = {...this.state.errors};\r\n            errors.passwordRepeat = passwordRepeatConfirmed ? \"\" : \"Passwords do not match\";\r\n            delete errors[event.target.name];\r\n            // update password confirmed value and errors\r\n            this.setState({passwordRepeatConfirmed, errors, passwordUpdated: false});\r\n        } else {\r\n            // for other fields\r\n            const errors = {...this.state.errors};\r\n            delete errors[event.target.name];\r\n            this.setState({errors, userUpdated: false});\r\n        }\r\n        // change value for input\r\n        this.setState({[event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * handles error from http request\r\n     * @param apiError error\r\n     * @param apiCall api call name\r\n     */\r\n    handleApiError = (apiError, apiCall) => {\r\n        if (apiError.response.data && apiError.response.data.validationErrors) {\r\n            let errors = {\r\n                ...this.state.errors,\r\n                ...apiError.response.data.validationErrors\r\n            };\r\n            // set new errors and set api call to false\r\n            this.setState({\r\n                [apiCall]: false,\r\n                errors\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when user submit user info update\r\n     */\r\n    onClickUserUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdateUser: true});\r\n        const {username, email} = this.state;\r\n\r\n        // sends updated info to server\r\n        apiCalls.updateUser({username, email}).then(response => {\r\n            this.setState({pendingApiCallUpdateUser: false, userUpdated: true});\r\n            this.props.setUsername(username);\r\n            this.props.setEmail(email);\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in input\r\n            this.handleApiError(apiError, \"pendingApiCallUpdateUser\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when user submit password update\r\n     */\r\n    onClickPasswordUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdatePassword: true});\r\n        const {password} = this.state;\r\n\r\n        // sends new password to server\r\n        apiCalls.updatePassword({password}).then(response => {\r\n            let errors = {...this.state.errors};\r\n            delete errors[\"passwordRepeat\"];\r\n            this.setState({errors, pendingApiCallUpdatePassword: false, passwordUpdated: true, password: \"\", passwordRepeat: \"\"});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in input\r\n            this.handleApiError(apiError, \"pendingApiCallUpdatePassword\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders user profile page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            username,\r\n            email,\r\n            password,\r\n            passwordRepeat,\r\n            pendingApiCallUpdateUser,\r\n            pendingApiCallUpdatePassword,\r\n            passwordRepeatConfirmed,\r\n            userUpdated,\r\n            passwordUpdated,\r\n            errors,\r\n        } = this.state;\r\n        const {createdAt} = this.props.user;\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded p-md-5 p-2 container gray-noise-background mb-3\">\r\n                <h2 className=\"mb-4 font-weight-bold\">My Profile</h2>\r\n\r\n                <div className=\"mb-4\">\r\n                    <span className=\"font-weight-bold\">Registration date: </span>\r\n                    {new Date(createdAt * 1).toLocaleDateString(\"en-US\")}\r\n                </div>\r\n\r\n                <form className=\"mb-4\">\r\n                    {\r\n                        userUpdated &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            Personal information has been updated\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input label=\"Name\" name=\"username\"\r\n                               value={username}\r\n                               onChange={this.onChange} hasError={errors.username && true}\r\n                               error={errors.username}/>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input label=\"E-mail\" name=\"email\"\r\n                               value={email}\r\n                               onChange={this.onChange} hasError={errors.email && true}\r\n                               error={errors.email}/>\r\n                    </div>\r\n\r\n                    <ButtonWithProgress onClick={(e) => this.onClickUserUpdate(e)}\r\n                                        className=\"btn btn-primary w-100 my-2\"\r\n                                        disabled={pendingApiCallUpdateUser || username === \"\" || email === \"\"}\r\n                                        pendingApiCall={pendingApiCallUpdateUser}\r\n                                        hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Update information\r\n                    </ButtonWithProgress>\r\n                </form>\r\n\r\n                <form>\r\n                    {\r\n                        passwordUpdated &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            Password ha been updated\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Password\"\r\n                            placeholder=\"Enter password\" name=\"password\" value={password}\r\n                            onChange={this.onChange} type=\"password\"\r\n                            hasError={errors.password && true}\r\n                            error={errors.password}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Confirm Password\"\r\n                            placeholder=\"Enter password again\" name=\"passwordRepeat\" value={passwordRepeat}\r\n                            onChange={this.onChange} type=\"password\"\r\n                            hasError={errors.passwordRepeat && true}\r\n                            error={errors.passwordRepeat}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress onClick={(e) => this.onClickPasswordUpdate(e)}\r\n                                        className=\"btn btn-primary w-100 my-2\"\r\n                                        disabled={pendingApiCallUpdatePassword || !passwordRepeatConfirmed || password === \"\" || passwordRepeat === \"\"}\r\n                                        pendingApiCall={pendingApiCallUpdatePassword}\r\n                                        hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Change password\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * map redux state to page props\r\n * @param state redux state\r\n */\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state,\r\n    };\r\n}\r\n\r\n/**\r\n * map redux dispatch to props\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setUsername: (username) => dispatch(authActions.setUsername(username)),\r\n        setEmail: (email) => dispatch(authActions.setEmail(email))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePage);","import React from 'react';\r\n\r\n/**\r\n * spinner used for showing loading\r\n */\r\nconst Spinner = () => {\r\n    return (\r\n        <div className=\"d-flex\">\r\n            <div className=\"spinner-border text-black-50 m-auto\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Spinner;","import React, {Component} from 'react';\r\nimport Input from \"../components/Input\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport * as authActions from \"../store/authActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * page for creating new institution\r\n */\r\nclass CreateInstitutionPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        name: \"\",\r\n        address: \"\",\r\n        description: \"\",\r\n        latitudeString: \"\",\r\n        longitudeString: \"\",\r\n        encodedImage: null,\r\n        imageSelect: \"\",\r\n        pendingApiCall: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * called when new image is selected\r\n     * @param event input event\r\n     */\r\n    onImageSelect = (event) => {\r\n        // update state with no errors and new value\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"encodedImage\"];\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n        if (event.target.files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // if file is picked load it\r\n        const file = event.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onloadend = () => {\r\n            // set base64 encoded image to state\r\n            this.setState({encodedImage: reader.result});\r\n        }\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    /**\r\n     * clears image\r\n     */\r\n    clearImage = () => {\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"encodedImage\"];\r\n        // set state with no errors for img input and reset image properties\r\n        this.setState({errors, encodedImage: null, imageSelect: \"\",});\r\n    }\r\n\r\n    /**\r\n     * called when user click on create institution button\r\n     */\r\n    onClickCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCall: true});\r\n        // extract institution from state\r\n        const institution = {\r\n            name: this.state.name,\r\n            address: this.state.address,\r\n            description: this.state.description,\r\n            latitudeString: this.state.latitudeString,\r\n            longitudeString: this.state.longitudeString,\r\n            encodedImage: this.state.encodedImage,\r\n        }\r\n\r\n        // send new institution to server\r\n        apiCalls.saveMyInstitution(institution).then(response => {\r\n            this.setState({pendingApiCall: false}, () => {\r\n                // set that logged in user is isntituiton owner and redirect\r\n                this.props.setIsInstitutionOwner(true);\r\n                this.props.redirect(\"/myInstitution/addLanguages\");\r\n            });\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle state when user input contains errors\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            // set new state with fetched errors\r\n            this.setState({pendingApiCall: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders create institution page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        // determines if submit button is enabled\r\n        let disabledSubmit = false;\r\n        if (this.state.name === \"\" || this.state.address === \"\" || this.state.description === \"\" || this.state.latitudeString === \"\" || this.state.longitudeString === \"\") {\r\n            disabledSubmit = true;\r\n        }\r\n\r\n        // renders page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <form>\r\n                    <h2 className=\"mb-4 font-weight-bold\">Create Institution</h2>\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input type=\"file\"\r\n                               onlyImage\r\n                               value={this.state.imageSelect}\r\n                               name=\"imageSelect\"\r\n                               label=\"Institution image\"\r\n                               placeholder=\"Select institution image\"\r\n                               onChange={this.onImageSelect}\r\n                               hasError={this.state.errors.encodedImage && true}\r\n                               error={this.state.errors.encodedImage}\r\n                        />\r\n\r\n                        {\r\n                            this.state.encodedImage &&\r\n                            <div>\r\n                                <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={this.state.encodedImage} alt=\"upload\" />\r\n                                <br />\r\n                                <button className=\"btn btn-danger btn-lg mt-2\" onClick={this.clearImage}>\r\n                                    <i className=\"fa fa-times\" /> Clear\r\n                                </button>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={this.state.name}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.name && true}\r\n                            error={this.state.errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Address\"\r\n                            placeholder=\"Enter address\" name=\"address\" value={this.state.address}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.address && true}\r\n                            error={this.state.errors.address}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={this.state.description}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.description && true}\r\n                            error={this.state.errors.description}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Latitude\"\r\n                            placeholder=\"Enter latitude\" name=\"latitudeString\" value={this.state.latitudeString}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.latitudeString && true}\r\n                            error={this.state.errors.latitudeString}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Longitude\"\r\n                            placeholder=\"Enter longitude\" name=\"longitudeString\" value={this.state.longitudeString}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.longitudeString && true}\r\n                            error={this.state.errors.longitudeString}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onClickCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={this.state.pendingApiCall || disabledSubmit}\r\n                                         pendingApiCall={this.state.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create institution\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * maps redux state to page properties\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setIsInstitutionOwner: value => dispatch(authActions.setIsInstitutionOwner(value)),\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(CreateInstitutionPage);","/**\r\n * server root url\r\n */\r\nconst SERVER_ROOT_URL = \"http://localhost:8080/\";\r\n/**\r\n * institution images url\r\n */\r\nexport const INSTITUTIONS_IMAGES_URL = SERVER_ROOT_URL + \"institutions_images/\";\r\n/**\r\n * exhibits images url\r\n */\r\nexport const EXHIBITS_IMAGES_URL = SERVER_ROOT_URL + \"exhibits_images/\";\r\n/**\r\n * info labels images url\r\n */\r\nexport const INFO_LABELS_IMAGES_URL = SERVER_ROOT_URL + \"info_labels_images/\";\r\n/**\r\n * label showed in select boxes when nothing is selected\r\n */\r\nexport const NOTHING_SELECTED_LABEL = \"Select...\";","import React, {Component} from 'react';\r\nimport * as authActions from \"../store/authActions\";\r\nimport {connect} from \"react-redux\";\r\nimport Input from \"../components/Input\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport {INSTITUTIONS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n/**\r\n * page for updating institution\r\n */\r\nclass UpdateInstitutionPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        name: this.props.institution.name,\r\n        address: this.props.institution.address,\r\n        description: this.props.institution.description,\r\n        latitudeString: this.props.institution.latitude,\r\n        longitudeString: this.props.institution.longitude,\r\n        image: this.props.institution.image,\r\n        encodedImage: null,\r\n        imageSelect: \"\",\r\n        createdAt: this.props.institution.createdAt,\r\n        email: \"\",\r\n        pendingApiCallUpdateInstitution: false,\r\n        pendingApiCallUpdateImage: false,\r\n        pendingApiCallDeleteInstitution: false,\r\n        pendingApiCallAddManager: false,\r\n        institutionUpdated: false,\r\n        imageUpdated: false,\r\n        managerAdded: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when new institution image is selected\r\n     * @param event input event\r\n     */\r\n    onImageSelect = (event) => {\r\n        // delete errors and update value in state\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"encodedImage\"];\r\n        this.setState({errors, [event.target.name]: event.target.value, imageUpdated: false});\r\n        if (event.target.files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // read selected image if exists\r\n        const file = event.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onloadend = () => {\r\n            // set base64 encoded image to tate\r\n            this.setState({encodedImage: reader.result});\r\n        }\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    /**\r\n     * clear image from state\r\n     */\r\n    clearImage = () => {\r\n        // delete errors and clear image fields from state\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"encodedImage\"];\r\n        this.setState({errors, encodedImage: null, imageSelect: \"\",});\r\n    }\r\n\r\n    /**\r\n     * handles error from http request\r\n     * @param apiError error\r\n     * @param apiCall api call name\r\n     */\r\n    handleApiError = (apiError, apiCall) => {\r\n        if (apiError.response.data && apiError.response.data.validationErrors) {\r\n            let errors = {\r\n                ...this.state.errors,\r\n                ...apiError.response.data.validationErrors\r\n            };\r\n            // update input errors and api call state\r\n            this.setState({\r\n                [apiCall]: false,\r\n                errors\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when user submit institution image update\r\n     */\r\n    onClickImageUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdateImage: true});\r\n        const img = { encodedImage: this.state.encodedImage }\r\n\r\n        // send request to update image to server\r\n        apiCalls.updateInstitutionImage(img).then(response => {\r\n            this.setState({pendingApiCallUpdateImage: false, image: response.data.message, imageUpdated: true}, () => {\r\n                this.clearImage();\r\n            });\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in input\r\n            this.handleApiError(apiError, \"pendingApiCallUpdateImage\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when value in text inputs is changed\r\n     * @param event input event\r\n     */\r\n    onChange = event => {\r\n        // delete errors and update value in state\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        this.setState({errors, institutionUpdated: false, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * called when value of email text box is changed\r\n     * @param event input event\r\n     */\r\n    onEmailChange = event => {\r\n        // delete errors and set value to state\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        this.setState({errors, managerAdded: false, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * called when institution manager wants to update info about institution\r\n     */\r\n    onClickInstitutionUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdateInstitution: true});\r\n        // extract institution from state\r\n        const institution = {\r\n            name: this.state.name,\r\n            address: this.state.address,\r\n            description: this.state.description,\r\n            latitudeString: this.state.latitudeString,\r\n            longitudeString: this.state.longitudeString,\r\n        }\r\n\r\n        // sends request to server to update institution information\r\n        apiCalls.updateInstitution(institution).then(response => {\r\n            this.setState({pendingApiCallUpdateInstitution: false, institutionUpdated: true});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle input error\r\n            this.handleApiError(apiError, \"pendingApiCallUpdateInstitution\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when manager of institution wants to delete it\r\n     */\r\n    onClickInstitutionDelete = () => {\r\n        // ask before institution delete\r\n        if (window.confirm(\"Do you really want to delete your institution?\")) {\r\n            this.setState({pendingApiCallDeleteInstitution: true});\r\n\r\n            // send request to institution delete to server\r\n            apiCalls.deleteInstitution().then(response => {\r\n                this.setState({pendingApiCallDeleteInstitution: false}, () => {\r\n                    this.props.setIsInstitutionOwner(false);\r\n                    this.props.redirect(\"/\");\r\n                });\r\n            }).catch(error => {\r\n                // handle unauthorized state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when institution manager wants to add new manager\r\n     */\r\n    onClickManagerAdd = (e) => {\r\n        e.preventDefault();\r\n\r\n        // ask before adding manager\r\n        if (window.confirm(\"Do you really want to add a new manager to your institution?\")) {\r\n            this.setState({pendingApiCallAddManager: true});\r\n\r\n            // send request to server to add new manager to institution\r\n            apiCalls.addInstitutionManager({email: this.state.email}).then(response => {\r\n                this.setState({pendingApiCallAddManager: false, email: \"\"}, () => this.setState({managerAdded: true}));\r\n            }).catch(error => {\r\n                // handle unauthorized state\r\n                return handleError(error);\r\n            }).catch(apiError => {\r\n                // handle input errors\r\n                this.handleApiError(apiError, \"pendingApiCallAddManager\");\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renders institution update page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            address,\r\n            description,\r\n            latitudeString,\r\n            longitudeString,\r\n            image,\r\n            encodedImage,\r\n            imageSelect,\r\n            createdAt,\r\n            email,\r\n            pendingApiCallUpdateInstitution,\r\n            pendingApiCallUpdateImage,\r\n            pendingApiCallDeleteInstitution,\r\n            pendingApiCallAddManager,\r\n            institutionUpdated,\r\n            imageUpdated,\r\n            managerAdded,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded p-md-5 p-2 container gray-noise-background mb-3\">\r\n                <h2 className=\"mb-4 font-weight-bold\">My Institution</h2>\r\n\r\n                <div className=\"mb-4\">\r\n                    <span className=\"font-weight-bold\">Registration date: </span>\r\n                    {new Date(createdAt).toLocaleDateString(\"en-US\")}\r\n                </div>\r\n\r\n                <Link exact to=\"/myInstitution/addLanguages\" >\r\n                    <button type=\"button\" className=\"btn btn-lg btn-success\">\r\n                        <i className=\"fa fa-plus-circle\" /> Add languages\r\n                    </button>\r\n                </Link>\r\n\r\n                <br />\r\n                <Link exact to=\"/myInstitution/addExhibit\" >\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-success\">\r\n                        <i className=\"fa fa-plus-circle\" /> Add exhibit\r\n                    </button>\r\n                </Link>\r\n\r\n                <br />\r\n                <Link exact to=\"/myInstitution/exhibits\" >\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-info\">\r\n                        <i className=\"fa fa-bars\" /> View exhibits\r\n                    </button>\r\n                </Link>\r\n\r\n                <br />\r\n                <Link exact to=\"/myInstitution/buildings\" >\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-secondary\">\r\n                        <i className=\"fa fa-map-marker\" /> Buildings, rooms, show-cases\r\n                    </button>\r\n                </Link>\r\n\r\n                <form className=\"mb-4 mt-4\">\r\n                    {\r\n                        imageUpdated &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            Institution image updated\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input type=\"file\"\r\n                               onlyImage\r\n                               value={imageSelect}\r\n                               name=\"imageSelect\"\r\n                               label=\"Institution image\"\r\n                               placeholder=\"Select institution image\"\r\n                               onChange={this.onImageSelect}\r\n                               hasError={errors.encodedImage && true}\r\n                               error={errors.encodedImage}\r\n                        />\r\n\r\n                        {\r\n                            encodedImage ?\r\n                                <div>\r\n                                    <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={encodedImage} alt=\"upload\" />\r\n                                    <br />\r\n                                    <button className=\"btn btn-danger btn-lg mt-2\" disabled={pendingApiCallUpdateImage} onClick={this.clearImage}>\r\n                                        <i className=\"fa fa-times\" /> Clear\r\n                                    </button>\r\n                                    <ButtonWithProgress onClick={(e) => this.onClickImageUpdate(e)}\r\n                                                        className=\"btn btn-success btn-lg ml-2 mt-2\"\r\n                                                        disabled={pendingApiCallUpdateImage}\r\n                                                        pendingApiCall={pendingApiCallUpdateImage}\r\n                                                        hasChildren>\r\n                                        <i className=\"fa fa-paper-plane\" /> Update image\r\n                                    </ButtonWithProgress>\r\n                                </div>\r\n                                :\r\n                                <div>\r\n                                    <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={INSTITUTIONS_IMAGES_URL + image} alt=\"upload\" />\r\n                                </div>\r\n                        }\r\n                    </div>\r\n                </form>\r\n\r\n                <form>\r\n                    {\r\n                        institutionUpdated &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            Institution information updated\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Address\"\r\n                            placeholder=\"Enter address\" name=\"address\" value={address}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.address && true}\r\n                            error={errors.address}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Latitude\"\r\n                            placeholder=\"Enter latitude\" name=\"latitudeString\" value={latitudeString}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.latitudeString && true}\r\n                            error={errors.latitudeString}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Longitude\"\r\n                            placeholder=\"Enter longitude\" name=\"longitudeString\" value={longitudeString}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.longitudeString && true}\r\n                            error={errors.longitudeString}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onClickInstitutionUpdate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallUpdateInstitution || name === \"\" || address === \"\" || description === \"\" ||\r\n                                             latitudeString === \"\" || longitudeString === \"\"}\r\n                                         pendingApiCall={pendingApiCallUpdateInstitution}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Update institution information\r\n                    </ButtonWithProgress>\r\n\r\n                </form>\r\n\r\n                <form className=\"mt-4\">\r\n                    {\r\n                        managerAdded &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            New manager added\r\n                        </div>\r\n                    }\r\n\r\n                    <Input\r\n                        label=\"Add new institution manager\"\r\n                        placeholder=\"Enter new manager's email\" name=\"email\" value={email}\r\n                        onChange={this.onEmailChange}\r\n                        hasError={errors.email && true}\r\n                        error={errors.email}\r\n                    />\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onClickManagerAdd(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallAddManager || email === \"\"}\r\n                                         pendingApiCall={pendingApiCallAddManager}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Add new institution manager\r\n                    </ButtonWithProgress>\r\n                </form>\r\n\r\n                <br />\r\n                <ButtonWithProgress  onClick={this.onClickInstitutionDelete}\r\n                                     className=\"btn btn-lg mt-3 btn-danger\"\r\n                                     disabled={pendingApiCallDeleteInstitution}\r\n                                     pendingApiCall={pendingApiCallDeleteInstitution}\r\n                                     hasChildren>\r\n                    <i className=\"fa fa-times\" /> Delete institution\r\n                </ButtonWithProgress>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * maps redux dispatch to state props\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setIsInstitutionOwner: (value) => dispatch(authActions.setIsInstitutionOwner(value)),\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(UpdateInstitutionPage);","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport CreateInstitutionPage from \"./CreateInstitutionPage\";\r\nimport UpdateInstitutionPage from \"./UpdateInstitutionPage\";\r\n\r\n/**\r\n * Info page of instituion that is managed by logged in user\r\n */\r\nclass MyInstitutionPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        institution: {},\r\n        pendingApiCall: false,\r\n        isOwner: false,\r\n    };\r\n\r\n    /**\r\n     * Called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch institution info from server\r\n        apiCalls.getMyInstitution().then(response => {\r\n            this.setState({institution: response.data, pendingApiCall: false, isOwner: true});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        }).catch(error => {\r\n            // handles errors\r\n            if (error.response.data && error.response.data.message === \"User does not own an institution\") {\r\n                this.setState({pendingApiCall: false, isOwner: false});\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * utility for react browser redirecting\r\n     * @param path path to redirect\r\n     */\r\n    redirect = (path) => {\r\n        this.props.history.push(path);\r\n    }\r\n\r\n    /**\r\n     * renders user's institution page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {pendingApiCall, institution, isOwner} = this.state;\r\n\r\n        // if fetching from server is processing show spinner\r\n        if(pendingApiCall) {\r\n            return (\r\n                <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2\">\r\n                    <Spinner/>\r\n                </div>\r\n            );\r\n        }\r\n        else if(isOwner) {\r\n            // if user is owner of an institution show update page\r\n            return (\r\n                <UpdateInstitutionPage institution={institution} redirect={this.redirect} />\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                // if user does not own institution show create page\r\n                <CreateInstitutionPage redirect={this.redirect} />\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default MyInstitutionPage;","import React, {Component} from 'react';\r\nimport Spinner from \"../components/Spinner\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n/**\r\n * Page for adding languages to institution\r\n */\r\nclass AddLanguagesPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        pendingApiCallDownloadLanguages: false,\r\n        possible: [],\r\n        chosen: [],\r\n        filtered: [],\r\n        search: \"\",\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallDownloadLanguages: true})\r\n        // load languages\r\n        apiCalls.getMyInstitutionLanguages().then(response => {\r\n            let possible = response.data.possibleLanguages;\r\n            for (let possibleLan of possible) {\r\n                possibleLan.pendingApiCall = false;\r\n            }\r\n\r\n            // set fetched languages to state\r\n            const chosen = response.data.chosenLanguages;\r\n            this.setState({possible, chosen, pendingApiCallDownloadLanguages: false});\r\n        }).catch(error => {\r\n            // react on unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Called when search box value is changed\r\n     * @param event input event\r\n     */\r\n    onSearchChange = (event) => {\r\n        const value = event.target.value;\r\n        if(value === \"\") {\r\n            // no languages visible if box is empty\r\n            this.setState({[event.target.name]: value, filtered: []});\r\n        }\r\n        else {\r\n            // filter languages by value in box\r\n            const filtered = this.state.possible.filter(lan => lan.name.toLowerCase().includes(value.toLowerCase()));\r\n            this.setState({[event.target.name]: value, filtered});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when new language should be added\r\n     * @param lan added language\r\n     */\r\n    onLanguageAddClick = (lan) => {\r\n        // set pending api call for added language\r\n        let newFiltered = [];\r\n        const {filtered} = this.state;\r\n        for (let fil of filtered) {\r\n            if(fil === lan) {\r\n                newFiltered.push({...fil, pendingApiCall: true,});\r\n            }\r\n            else {\r\n                newFiltered.push({...fil});\r\n            }\r\n        }\r\n        this.setState({filtered: newFiltered});\r\n\r\n        // send added language to server\r\n        apiCalls.addInstitutionLanguage(lan.languageId).then(response => {\r\n            // remove language from possible and put it in chosen\r\n            newFiltered = [...filtered];\r\n            newFiltered = newFiltered.filter(fil => lan !== fil);\r\n            let newPossible = [...this.state.possible];\r\n            newPossible = newPossible.filter(pos => lan !== pos);\r\n            let newChosen = [...this.state.chosen];\r\n            newChosen.push({...lan});\r\n\r\n            // update state\r\n            this.setState({filtered: newFiltered, possible: newPossible, chosen: newChosen});\r\n        }).catch(error => {\r\n            // handle authentication error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders add language page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            pendingApiCallDownloadLanguages,\r\n            chosen,\r\n            filtered,\r\n            search,\r\n        } = this.state;\r\n\r\n        // if languages are loading show spinner\r\n        if (pendingApiCallDownloadLanguages) {\r\n            return (\r\n                <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                    <Spinner />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Add Languages</h2>\r\n\r\n                <Link exact to=\"/myInstitution\" >\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-info mb-4\">\r\n                        <i className=\"fa fa-search\" /> Institution overview\r\n                    </button>\r\n                </Link>\r\n\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6 \">\r\n                        <div className=\"input-group mb-4\">\r\n                            <input type=\"text\" className=\"form-control\" placeholder=\"Search language\" name=\"search\" value={search} onChange={this.onSearchChange} />\r\n                            <div className=\"input-group-append\">\r\n                                <span className=\"input-group-text\">\r\n                                    <i className=\"fa fa-search\" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            {\r\n                                filtered.map(lan =>\r\n                                    <ButtonWithProgress  key={lan.languageId}\r\n                                                         onClick={() => this.onLanguageAddClick(lan)}\r\n                                                         className=\"btn btn-success w-100 my-1\"\r\n                                                         disabled={lan.pendingApiCall}\r\n                                                         pendingApiCall={lan.pendingApiCall}\r\n                                                         hasChildren >\r\n                                        <i className=\"fa fa-plus-circle\" /> {lan.name}\r\n                                    </ButtonWithProgress>\r\n                                )\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-6 px-md-5\">\r\n                        {\r\n                            chosen.length === 0 ?\r\n                                <h4>No selected languages</h4>\r\n                                :\r\n                                <div className=\"card mt-md-0 mt-2\">\r\n                                    <ul className=\"list-group list-group-flush\">\r\n                                        { chosen.map(lan =>\r\n                                            <li key={lan.languageId} className=\"list-group-item\">{lan.name}</li>\r\n                                        )}\r\n                                    </ul>\r\n                                </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddLanguagesPage;","import React, {Component} from 'react';\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"./Spinner\";\r\nimport Select from 'react-select';\r\nimport {NOTHING_SELECTED_LABEL} from \"../shared/sharedConstants\";\r\n\r\n/**\r\n * component containing select of location (building/room/showcase)\r\n */\r\nclass LocationPickerSelect extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        fetchedObjects: [],\r\n        pendingApiCall: false,\r\n        selectedId: this.props.currValue ? this.props.currValue : null,\r\n        selectedLabel: NOTHING_SELECTED_LABEL,\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true});\r\n        // fetch all needed objects from server\r\n        this.props.fetch().then(response => {\r\n            const objects = response.data;\r\n            // add objects to select options\r\n            const fetchedObjects = [];\r\n            let newSelectedLabel = NOTHING_SELECTED_LABEL;\r\n            for(let o of objects) {\r\n                fetchedObjects.push({value: o[this.props.idName], label: o.name});\r\n                // if id match, set selected label\r\n                if(o[this.props.idName] === this.state.selectedId) {\r\n                    newSelectedLabel = o.name;\r\n                }\r\n            }\r\n            // update state\r\n            this.setState({fetchedObjects, pendingApiCall: false, selectedLabel: newSelectedLabel});\r\n        }).catch(error => {\r\n            // handle unauthorized error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when select value is changed\r\n     * @param e params\r\n     */\r\n    onChange = e => {\r\n        if(e === null) {\r\n            // pass to upper component when nothing is selected\r\n            this.props.onChange(null);\r\n            this.setState({selectedId: null, selectedLabel: NOTHING_SELECTED_LABEL});\r\n        }\r\n        else {\r\n            // pass to upper component when option is selected\r\n            this.props.onChange(e.value);\r\n            this.setState({selectedId: e.value, selectedLabel: e.label});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renders select\r\n     * @returns {JSX.Element} component with select\r\n     */\r\n    render() {\r\n        const {fetchedObjects, pendingApiCall, selectedId, selectedLabel} = this.state;\r\n\r\n        // return spinner if api call is processing\r\n        if(pendingApiCall) {\r\n            return <Spinner />;\r\n        }\r\n\r\n        return (\r\n            <div className=\"mt-2\">\r\n                <label>{this.props.label}</label>\r\n                <Select options={fetchedObjects} onChange={this.onChange} isClearable value={{value: selectedId, label: selectedLabel}} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LocationPickerSelect;","import React, {Component} from 'react';\r\nimport LocationPickerSelect from \"./LocationPickerSelect\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\n\r\n/**\r\n * component allowing to pick building, room and show-case using select boxes\r\n */\r\nclass LocationPicker extends Component {\r\n\r\n    /**\r\n     * current state\r\n     */\r\n    state = {\r\n        buildingId: this.props.buildingId ? this.props.buildingId : null,\r\n        roomId: this.props.roomId ? this.props.roomId : null,\r\n        showcaseId: this.props.showcaseId ? this.props.showcaseId : null,\r\n    }\r\n\r\n    /**\r\n     * function for getting all rooms depending on building in state\r\n     * @returns {Promise<AxiosResponse<*>>} promise\r\n     */\r\n    fetchRooms = () => {\r\n        return apiCalls.getRooms(this.state.buildingId);\r\n    }\r\n\r\n    /**\r\n     * function for getting all showcases depending on room in state\r\n     * @returns {Promise<AxiosResponse<*>>} promise\r\n     */\r\n    fetchShowcases = () => {\r\n        return apiCalls.getShowcases(this.state.roomId);\r\n    }\r\n\r\n    /**\r\n     * Reacts on building change\r\n     * @param newVal new building id\r\n     */\r\n    onBuildingChange = newVal => {\r\n        if(newVal !== this.state.buildingId) {\r\n            // update state with new val\r\n            this.setState({buildingId: newVal, roomId: null, showcaseId: null});\r\n            // update upper component\r\n            this.props.update(newVal, null, null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reacts on room change\r\n     * @param newVal new room id\r\n     */\r\n    onRoomChange = newVal => {\r\n        if(newVal !== this.state.roomId) {\r\n            // update state with new val\r\n            this.setState({roomId: newVal, showcaseId: null});\r\n            // update upper component\r\n            this.props.update(this.state.buildingId, newVal, null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reacts on showcase change\r\n     * @param newVal new showcase id\r\n     */\r\n    onShowcaseChange = newVal => {\r\n        if(newVal !== this.state.roomId) {\r\n            // update state with new val\r\n            this.setState({showcaseId: newVal});\r\n            // update upper component\r\n            this.props.update(this.state.buildingId, this.state.roomId, newVal);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renders component to pick location\r\n     * @returns {JSX.Element} component to pick location\r\n     */\r\n    render() {\r\n        const {buildingId, roomId, showcaseId} = this.state;\r\n\r\n        return (\r\n            <>\r\n                <LocationPickerSelect currValue={buildingId} label=\"Building\" idName=\"buildingId\" fetch={apiCalls.getBuildings} onChange={this.onBuildingChange} />\r\n                {buildingId && <LocationPickerSelect key={buildingId} currValue={roomId} label=\"Room\" idName=\"roomId\" fetch={this.fetchRooms} onChange={this.onRoomChange} />}\r\n                {roomId && <LocationPickerSelect key={roomId} currValue={showcaseId} label=\"Show-case\" idName=\"showcaseId\" fetch={this.fetchShowcases} onChange={this.onShowcaseChange} />}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LocationPicker;","import React, {Component} from 'react';\r\nimport {CKEditor} from '@ckeditor/ckeditor5-react';\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Input from \"../components/Input\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport LocationPicker from \"../components/LocationPicker\";\r\n\r\n/**\r\n * Page where institution manager can add new exhibits\r\n */\r\nclass AddExhibitPage extends Component {\r\n\r\n    /**\r\n     * initial state of page\r\n     */\r\n    initState = {\r\n        name: \"\",\r\n        infoLabelText: \"\",\r\n        buildingId: null,\r\n        roomId: null,\r\n        showcaseId: null,\r\n        encodedImage: null,\r\n        imageSelect: \"\",\r\n        encodedInfoLabel: null,\r\n        infoLabelSelect: \"\",\r\n        pendingApiCall: false,\r\n        created: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * page state\r\n     */\r\n    state = this.initState;\r\n\r\n    /**\r\n     * Called on text input values change\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete error to given field\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value, created: false});\r\n    }\r\n\r\n    /**\r\n     * Called when new image is selected\r\n     * @param event input event\r\n     */\r\n    onImageSelect = (event) => {\r\n        const errors = {...this.state.errors};\r\n        const name = event.target.name;\r\n\r\n        // delete input error message\r\n        if(name === \"imageSelect\") {\r\n            delete errors[\"encodedImage\"];\r\n        }\r\n        else {\r\n            delete errors[\"encodedInfoLabel\"];\r\n        }\r\n\r\n        // update state with new errors and close alert that new exhibit was created\r\n        this.setState({errors, [name]: event.target.value, created: false});\r\n        if (event.target.files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // if user chose file\r\n        const file = event.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onloadend = () => {\r\n            // update state with new base64 encoded selected image\r\n            if(name === \"imageSelect\") {\r\n                this.setState({encodedImage: reader.result});\r\n            }\r\n            else {\r\n                this.setState({encodedInfoLabel: reader.result});\r\n            }\r\n        }\r\n        // read image\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    /**\r\n     * Clears image from state\r\n     * @param name img name\r\n     */\r\n    clearImage = (name) => {\r\n        const errors = {...this.state.errors};\r\n        if(name === \"imageSelect\") {\r\n            // delete errors of image input and its fields in state\r\n            delete errors[\"encodedImage\"];\r\n            this.setState({errors, encodedImage: null, imageSelect: \"\",});\r\n        }\r\n        else {\r\n            // delete errors of image input and its fields in state\r\n            delete errors[\"encodedInfoLabel\"];\r\n            this.setState({errors, encodedInfoLabel: null, infoLabelSelect: \"\",});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when info label text is chagned\r\n     * @param event input event\r\n     * @param editor input editor\r\n     */\r\n    onInfoLabelTextChange = (event, editor) => {\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"infoLabelText\"];\r\n        // update state with new value, no errors and closed alert of created exhibit\r\n        this.setState({infoLabelText: editor.getData(), created: false, errors});\r\n    }\r\n\r\n    /**\r\n     * Called when new exhibit is created\r\n     */\r\n    onClickCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCall: true});\r\n        // extract exhibit from state\r\n        const exhibit = {\r\n            name: this.state.name,\r\n            infoLabelText: this.state.infoLabelText,\r\n            buildingId: this.state.buildingId,\r\n            roomId: this.state.roomId,\r\n            showcaseId: this.state.showcaseId,\r\n            encodedImage: this.state.encodedImage,\r\n            encodedInfoLabel: this.state.encodedInfoLabel,\r\n        }\r\n\r\n        // send new exhibit to server\r\n        apiCalls.addExhibit(exhibit).then(response => {\r\n            let currBuildingId = this.state.buildingId;\r\n            let currRoomId = this.state.roomId;\r\n            let currShowcaseId = this.state.showcaseId;\r\n            this.setState({...this.initState}, () => this.setState({created: true, buildingId: currBuildingId, roomId: currRoomId, showcaseId: currShowcaseId}));\r\n        }).catch(error => {\r\n            // react on unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // react on errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCall: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * updates new info about selected building, room and showcase\r\n     * @param buildingId building id\r\n     * @param roomId room id\r\n     * @param showcaseId showcase id\r\n     */\r\n    updateLocation = (buildingId, roomId, showcaseId) => {\r\n        this.setState({buildingId, roomId, showcaseId});\r\n    }\r\n\r\n    /**\r\n     * renders page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            infoLabelText,\r\n            encodedImage,\r\n            imageSelect,\r\n            encodedInfoLabel,\r\n            infoLabelSelect,\r\n            pendingApiCall,\r\n            created,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // define disable submit value\r\n        let disabledSubmit = false;\r\n        if (name === \"\" || encodedInfoLabel === null) {\r\n            disabledSubmit = true;\r\n        }\r\n\r\n        // return page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <form>\r\n                    <h2 className=\"mb-4 font-weight-bold\">Create Exhibit</h2>\r\n\r\n                    {\r\n                        created &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            Exhibit has been created\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input type=\"file\"\r\n                               onlyImage\r\n                               value={imageSelect}\r\n                               name=\"imageSelect\"\r\n                               label=\"Exhibit image\"\r\n                               placeholder=\"Select exhibit image\"\r\n                               onChange={this.onImageSelect}\r\n                               hasError={errors.encodedImage && true}\r\n                               error={errors.encodedImage}\r\n                        />\r\n\r\n                        {\r\n                            encodedImage &&\r\n                            <div>\r\n                                <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={encodedImage} alt=\"upload\" />\r\n                                <br />\r\n                                <button className=\"btn btn-danger btn-lg mt-2\" onClick={() => this.clearImage(\"imageSelect\")}>\r\n                                    <i className=\"fa fa-times\" /> Clear\r\n                                </button>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input type=\"file\"\r\n                               onlyImage\r\n                               value={infoLabelSelect}\r\n                               name=\"infoLabelSelect\"\r\n                               label=\"Information label\"\r\n                               placeholder=\"Select information label\"\r\n                               onChange={this.onImageSelect}\r\n                               hasError={errors.encodedInfoLabel && true}\r\n                               error={errors.encodedInfoLabel}\r\n                        />\r\n\r\n                        {\r\n                            encodedInfoLabel &&\r\n                            <div>\r\n                                <img className=\"img-fluid mt-2\" src={encodedInfoLabel} alt=\"upload\" />\r\n                                <br />\r\n                                <button className=\"btn btn-danger btn-lg mt-2\" onClick={() => this.clearImage(\"infoLabelSelect\")}>\r\n                                    <i className=\"fa fa-times\" /> Clear\r\n                                </button>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Information label text</label>\r\n                        <CKEditor editor={ClassicEditor}\r\n                                  config={{removePlugins: ['Table', 'TableToolbar', 'EasyImage', 'MediaEmbed', 'ImageCaption', 'ImageStyle', 'ImageToolbar', 'ImageUpload']}}\r\n                                  data={infoLabelText} onChange={this.onInfoLabelTextChange}/>\r\n                        {\r\n                            errors.infoLabelText &&\r\n                            <div className=\"text-danger\">\r\n                                <small>{errors.infoLabelText}</small>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <LocationPicker update={this.updateLocation} />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onClickCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCall || disabledSubmit}\r\n                                         pendingApiCall={pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create exhibit\r\n                    </ButtonWithProgress>\r\n\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddExhibitPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {EXHIBITS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing exhibit of user's institution\r\n * @param props props\r\n */\r\nconst MyExhibitCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3\">\r\n                    <img className=\"img-fluid sizedImg img-thumbnail\" src={EXHIBITS_IMAGES_URL + props.image} alt=\"image\" />\r\n                </div>\r\n\r\n                <div className=\"col-md-6\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Registration date: </span>\r\n                        {new Date(props.createdAt).toLocaleDateString(\"en-US\")}\r\n                    </div>\r\n\r\n                    {\r\n                        props.building &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Building: </span>\r\n                            {props.building.name}\r\n                        </div>\r\n                    }\r\n\r\n                    {\r\n                        props.room &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Room: </span>\r\n                            {props.room.name}\r\n                        </div>\r\n                    }\r\n\r\n                    {\r\n                        props.showcase &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Show-case: </span>\r\n                            {props.showcase.name}\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"col-md-3 mt-md-0 mt-3\">\r\n                    <Link exact to={\"/myInstitution/exhibits/\" + props.exhibitId} >\r\n                        <button type=\"button\" className=\"btn btn-info w-100\">\r\n                            <i className=\"fa fa-pencil\" /> Detail\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <button type=\"button\" className=\"btn btn-secondary w-100 mt-2\" onClick={() => props.onClickDownloadQRCode(props.exhibitId)}>\r\n                        <i className=\"fa fa-qrcode\" /> QR Code\r\n                    </button>\r\n                    <br />\r\n\r\n                    <ButtonWithProgress  onClick={() => props.onClickDelete(props.exhibitId)}\r\n                                         className=\"btn btn-danger w-100 mt-2\"\r\n                                         disabled={props.pendingApiCall}\r\n                                         pendingApiCall={props.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-times\" /> Delete\r\n                    </ButtonWithProgress>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default MyExhibitCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport MyExhibitCard from \"../components/MyExhibitCard\";\r\n\r\n/**\r\n * page with all exhibits of an institution that user is managing\r\n */\r\nclass MyInstitutionExhibitsPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        exhibits: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * Called when user wants to delete exhibit\r\n     * @param exhibitId exhibit id\r\n     */\r\n    onClickDelete = (exhibitId) => {\r\n        // ask before delete\r\n        if(window.confirm(\"Do you really want to delete this exhibit?\")) {\r\n            // update api call for given exhibit\r\n            let newExhibits = [];\r\n            const {exhibits} = this.state;\r\n            for (let ex of exhibits) {\r\n                if(ex.exhibitId === exhibitId) {\r\n                    // set api call to true for deleted exhibit\r\n                    newExhibits.push({...ex, pendingApiCall: true});\r\n                }\r\n                else {\r\n                    newExhibits.push({...ex});\r\n                }\r\n            }\r\n            this.setState({exhibits: newExhibits});\r\n\r\n            // send delete message to server\r\n            apiCalls.deleteExhibit(exhibitId).then(response => {\r\n                newExhibits = [...this.state.exhibits];\r\n                newExhibits = newExhibits.filter(ex => ex.exhibitId !== exhibitId);\r\n\r\n                // if delete was successful update state\r\n                this.setState({exhibits: newExhibits});\r\n            }).catch(error => {\r\n                // handle unauthorized error\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch all institution exhibits from server\r\n        apiCalls.getAllExhibitsOfMyInstitution().then(response => {\r\n            const exhibits = response.data;\r\n            // set default properties for fetched exhibits\r\n            for(let ex of exhibits) {\r\n                ex.pendingApiCall = false;\r\n                ex.onClickDelete = this.onClickDelete;\r\n            }\r\n            this.setState({exhibits, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Called when user wants to download QR code for exhibit\r\n     * @param exhibitId\r\n     */\r\n    onClickDownloadQRCode = exhibitId => {\r\n        // download QR code from server\r\n        apiCalls.getQRCode(exhibitId).then(response => {\r\n            // create anchor with given image to start downloading\r\n            let encodedImage = response.data;\r\n            let a = document.createElement(\"a\");\r\n            a.href = \"data:image/png;base64,\" + encodedImage;\r\n            a.download = exhibitId + \".png\";\r\n            a.click();\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders page with institution exhibits\r\n     * @returns {JSX.Element} page with institution exhibits\r\n     */\r\n    render() {\r\n\r\n        // maps exhibits to exhibit cards\r\n        const exhibits = this.state.exhibits.map(ex =>\r\n            <MyExhibitCard key={ex.exhibitId} {...ex} onClickDownloadQRCode={this.onClickDownloadQRCode} />\r\n        );\r\n\r\n        // define page content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.exhibits.length === 0 ? <h4>There are no exhibits</h4> : exhibits;\r\n        }\r\n\r\n        // renders page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Institution Exhibits</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MyInstitutionExhibitsPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport Input from \"../components/Input\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport {EXHIBITS_IMAGES_URL, INFO_LABELS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport {CKEditor} from \"@ckeditor/ckeditor5-react\";\r\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\r\nimport LocationPicker from \"../components/LocationPicker\";\r\n\r\n/**\r\n * page for updating exhibit\r\n */\r\nclass UpdateExhibitPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        exhibitId: 0,\r\n        name: \"\",\r\n        infoLabelText: \"\",\r\n        buildingId: null,\r\n        roomId: null,\r\n        showcaseId: null,\r\n        createdAt: \"\",\r\n        image: \"\",\r\n        encodedImage: null,\r\n        imageSelect: \"\",\r\n        infoLabel: null,\r\n        encodedInfoLabel: null,\r\n        infoLabelSelect: \"\",\r\n        pendingApiCallGetInstitution: false,\r\n        pendingApiCallUpdateInstitution: false,\r\n        pendingApiCallUpdateImage: false,\r\n        pendingApiCallUpdateInfoLabel: false,\r\n        exhibitUpdated: false,\r\n        imageUpdated: false,\r\n        infoLabelUpdated: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallGetInstitution: true})\r\n        // get exhibit info from server\r\n        apiCalls.getExhibit(this.props.match.params.exhibitId).then(response => {\r\n            const buildingId = response.data.building ? response.data.building.buildingId : null;\r\n            const roomId = response.data.room ? response.data.room.roomId : null;\r\n            const showcaseId = response.data.showcase ? response.data.showcase.showcaseId : null;\r\n            this.setState({...response.data, pendingApiCallGetInstitution: false, buildingId, roomId, showcaseId});\r\n        }).catch(error => {\r\n            // handle unauthenticated state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when image is selected\r\n     * @param event input event\r\n     * @param encoded encoded image prop name\r\n     * @param updated updated prop name\r\n     */\r\n    onImageSelect = (event, encoded, updated) => {\r\n        const errors = {...this.state.errors};\r\n        delete errors[encoded];\r\n        // update value in state and remove errors\r\n        this.setState({errors, [event.target.name]: event.target.value, [updated]: false});\r\n        if (event.target.files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const file = event.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onloadend = () => {\r\n            // set base64 encoded image to state\r\n            this.setState({[encoded]: reader.result});\r\n        }\r\n        // read image\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    /**\r\n     * clears image from state\r\n     * @param encode encoded image prop name\r\n     * @param select select image prop name\r\n     */\r\n    clearImage = (encode, select) => {\r\n        const errors = {...this.state.errors};\r\n        delete errors[encode];\r\n        // clear image fields and delete errors\r\n        this.setState({errors, [encode]: null, [select]: \"\"});\r\n    }\r\n\r\n    /**\r\n     * called when user submit exhibit image to be updated\r\n     */\r\n    onClickImageUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdateImage: true});\r\n        const img = { encodedImage: this.state.encodedImage }\r\n\r\n        // send request to server to update exhibit image\r\n        apiCalls.updateExhibitImage(this.state.exhibitId, img).then(response => {\r\n            this.setState({pendingApiCallUpdateImage: false, image: response.data.message, imageUpdated: true}, () => {\r\n                this.clearImage(\"encodedImage\", \"imageSelect\");\r\n            });\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle user input errors\r\n            this.handleApiError(apiError, \"pendingApiCallUpdateImage\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * handles error from http requests\r\n     * @param apiError error from request\r\n     * @param apiCall name of api call\r\n     */\r\n    handleApiError = (apiError, apiCall) => {\r\n        if (apiError.response.data && apiError.response.data.validationErrors) {\r\n            // define new page errors\r\n            let errors = {\r\n                ...this.state.errors,\r\n                ...apiError.response.data.validationErrors\r\n            };\r\n            // set errors in state\r\n            this.setState({\r\n                [apiCall]: false,\r\n                errors\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when user submits new exhibit info label image\r\n     */\r\n    onClickInfoImageUpdate = () => {\r\n        this.setState({pendingApiCallUpdateInfoLabel: true});\r\n        const img = { encodedImage: this.state.encodedInfoLabel }\r\n\r\n        // send updated info label to server\r\n        apiCalls.updateExhibitInfoLabelImage(this.state.exhibitId, img).then(response => {\r\n            this.setState({pendingApiCallUpdateInfoLabel: false, infoLabel: response.data.message, infoLabelUpdated: true}, () => {\r\n                this.clearImage(\"encodedInfoLabel\", \"infoLabelSelect\");\r\n            });\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle error from user input\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                let errors = {\r\n                    ...this.state.errors,\r\n                };\r\n                errors.encodedInfoLabel = apiError.response.data.validationErrors.encodedImage;\r\n                this.setState({pendingApiCallUpdateInfoLabel: false, errors});\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // set deleted errors and set value\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        this.setState({errors, [event.target.name]: event.target.value, exhibitUpdated: false});\r\n    }\r\n\r\n    /**\r\n     * called when value in info text editor is changed\r\n     * @param event input event\r\n     * @param editor ck editor\r\n     */\r\n    onInfoLabelTextChange = (event, editor) => {\r\n        // change value and delete errors\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"infoLabelText\"];\r\n        this.setState({infoLabelText: editor.getData(), exhibitUpdated: false, errors});\r\n    }\r\n\r\n    /**\r\n     * called when user wants to update info abou exhibit\r\n     */\r\n    onClickExhibitUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdateInstitution: true});\r\n        // extract exhibit from state\r\n        const exhibit = {\r\n            name: this.state.name,\r\n            infoLabelText: this.state.infoLabelText,\r\n            buildingId: this.state.buildingId,\r\n            roomId: this.state.roomId,\r\n            showcaseId: this.state.showcaseId,\r\n        }\r\n\r\n        // send update exhibit request to server\r\n        apiCalls.updateExhibit(this.state.exhibitId, exhibit).then(response => {\r\n            this.setState({exhibitUpdated: true, pendingApiCallUpdateInstitution: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle error in user input\r\n            this.handleApiError(apiError, \"pendingApiCallUpdateInstitution\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * updates new info about selected building, room and showcase\r\n     * @param buildingId building id\r\n     * @param roomId room id\r\n     * @param showcaseId showcase id\r\n     */\r\n    updateLocation = (buildingId, roomId, showcaseId) => {\r\n        this.setState({buildingId, roomId, showcaseId});\r\n    }\r\n\r\n    /**\r\n     * renders exhibit update page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            infoLabelText,\r\n            buildingId,\r\n            roomId,\r\n            showcaseId,\r\n            image,\r\n            encodedImage,\r\n            imageSelect,\r\n            infoLabel,\r\n            encodedInfoLabel,\r\n            infoLabelSelect,\r\n            pendingApiCallGetInstitution,\r\n            pendingApiCallUpdateInstitution,\r\n            pendingApiCallUpdateImage,\r\n            pendingApiCallUpdateInfoLabel,\r\n            exhibitUpdated,\r\n            imageUpdated,\r\n            infoLabelUpdated,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // define content\r\n        let content = <Spinner />;\r\n        if(!pendingApiCallGetInstitution) {\r\n            content = (\r\n                <div>\r\n                    <form className=\"mb-4\">\r\n                        {\r\n                            imageUpdated &&\r\n                            <div className=\"alert alert-success\" role=\"alert\">\r\n                                Exhibit image updated\r\n                            </div>\r\n                        }\r\n\r\n                        <div className=\"form-group\">\r\n                            <Input type=\"file\"\r\n                                   onlyImage\r\n                                   value={imageSelect}\r\n                                   name=\"imageSelect\"\r\n                                   label=\"Exhibit image\"\r\n                                   placeholder=\"Select exhibit image\"\r\n                                   onChange={(event) => this.onImageSelect(event, \"encodedImage\", \"imageUpdated\")}\r\n                                   hasError={errors.encodedImage && true}\r\n                                   error={errors.encodedImage}\r\n                            />\r\n\r\n                            {\r\n                                encodedImage ?\r\n                                    <div>\r\n                                        <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={encodedImage} alt=\"upload\" />\r\n                                        <br />\r\n                                        <button className=\"btn btn-danger btn-lg mt-2\" disabled={pendingApiCallUpdateImage} onClick={() => this.clearImage(\"encodedImage\", \"imageSelect\")}>\r\n                                            <i className=\"fa fa-times\" /> Clear\r\n                                        </button>\r\n                                        <ButtonWithProgress onClick={(e) => this.onClickImageUpdate(e)}\r\n                                                            className=\"btn btn-success btn-lg ml-2 mt-2\"\r\n                                                            disabled={pendingApiCallUpdateImage}\r\n                                                            pendingApiCall={pendingApiCallUpdateImage}\r\n                                                            hasChildren>\r\n                                            <i className=\"fa fa-paper-plane\" /> Update image\r\n                                        </ButtonWithProgress>\r\n                                    </div>\r\n                                    :\r\n                                    <div>\r\n                                        <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={EXHIBITS_IMAGES_URL + image} alt=\"upload\" />\r\n                                    </div>\r\n                            }\r\n                        </div>\r\n                    </form>\r\n\r\n                    <form className=\"mb-4\">\r\n                        {\r\n                            infoLabelUpdated &&\r\n                            <div className=\"alert alert-success\" role=\"alert\">\r\n                                Information label image updated\r\n                            </div>\r\n                        }\r\n\r\n                        <div className=\"form-group\">\r\n                            <Input type=\"file\"\r\n                                   onlyImage\r\n                                   value={infoLabelSelect}\r\n                                   name=\"infoLabelSelect\"\r\n                                   label=\"Information label image\"\r\n                                   placeholder=\"Select information label image\"\r\n                                   onChange={(event) => this.onImageSelect(event, \"encodedInfoLabel\", \"infoLabelUpdated\")}\r\n                                   hasError={errors.encodedInfoLabel && true}\r\n                                   error={errors.encodedInfoLabel}\r\n                            />\r\n\r\n                            {\r\n                                encodedInfoLabel ?\r\n                                    <div>\r\n                                        <img className=\"img-fluid mt-2\" src={encodedInfoLabel} alt=\"upload\" />\r\n                                        <br />\r\n                                        <button className=\"btn btn-danger btn-lg mt-2\" disabled={pendingApiCallUpdateInfoLabel} onClick={() => this.clearImage(\"encodedInfoLabel\", \"infoLabelSelect\")}>\r\n                                            <i className=\"fa fa-times\" /> Clear\r\n                                        </button>\r\n                                        <ButtonWithProgress onClick={(event) => {event.preventDefault(); this.onClickInfoImageUpdate();}}\r\n                                                            className=\"btn btn-success btn-lg ml-2 mt-2\"\r\n                                                            disabled={pendingApiCallUpdateImage}\r\n                                                            pendingApiCall={pendingApiCallUpdateImage}\r\n                                                            hasChildren>\r\n                                            <i className=\"fa fa-paper-plane\" /> Update information label image\r\n                                        </ButtonWithProgress>\r\n                                    </div>\r\n                                    :\r\n                                    <div>\r\n                                        <img className=\"img-fluid mt-2\" src={INFO_LABELS_IMAGES_URL + infoLabel} alt=\"upload\" />\r\n                                    </div>\r\n                            }\r\n                        </div>\r\n                    </form>\r\n\r\n                    <form className=\"mb-4\">\r\n                        {\r\n                            exhibitUpdated &&\r\n                            <div className=\"alert alert-success\" role=\"alert\">\r\n                                Exhibit information updated\r\n                            </div>\r\n                        }\r\n\r\n                        <div className=\"form-group\">\r\n                            <Input\r\n                                label=\"Name\"\r\n                                placeholder=\"Enter name\" name=\"name\" value={name}\r\n                                onChange={this.onChange}\r\n                                hasError={errors.name && true}\r\n                                error={errors.name}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>Information label text</label>\r\n                            <CKEditor editor={ClassicEditor}\r\n                                      config={{removePlugins: ['Table', 'TableToolbar', 'EasyImage', 'MediaEmbed', 'ImageCaption', 'ImageStyle', 'ImageToolbar', 'ImageUpload']}}\r\n                                      data={infoLabelText} onChange={this.onInfoLabelTextChange}/>\r\n                            {\r\n                                errors.infoLabelText &&\r\n                                <div className=\"text-danger\">\r\n                                    <small>{errors.infoLabelText}</small>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <LocationPicker update={this.updateLocation} buildingId={buildingId} roomId={roomId} showcaseId={showcaseId} />\r\n                        </div>\r\n\r\n                        <ButtonWithProgress  onClick={(e) => this.onClickExhibitUpdate(e)}\r\n                                             className=\"btn btn-primary w-100 my-2\"\r\n                                             disabled={pendingApiCallUpdateInstitution || name === \"\"}\r\n                                             pendingApiCall={pendingApiCallUpdateInstitution}\r\n                                             hasChildren>\r\n                            <i className=\"fa fa-paper-plane\" /> Update exhibit\r\n                        </ButtonWithProgress>\r\n                    </form>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded p-md-5 p-2 container gray-noise-background mb-3\">\r\n                <h2 className=\"mb-4 font-weight-bold\">Exhibit</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UpdateExhibitPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {INSTITUTIONS_IMAGES_URL} from \"../shared/sharedConstants\";\r\n\r\n/**\r\n * card for listing institutions\r\n * @param props props\r\n */\r\nconst InstitutinCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3\">\r\n                    <img className=\"img-fluid sizedImg img-thumbnail\" src={INSTITUTIONS_IMAGES_URL + props.image} alt=\"image\" />\r\n                </div>\r\n\r\n                <div className=\"col-md-6\">\r\n                    <h3 className=\"card-title mt-3 mt-md-0\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Address: </span>\r\n                        {props.address}\r\n                    </div>\r\n\r\n                    <div className=\"mt-2\">\r\n                        {props.description}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-md-3\">\r\n                    <Link exact to={\"/institutions/\" + props.institutionId}>\r\n                        <button type=\"button\" className=\"btn btn-info btn-lg w-100 mt-3 mt-md-0\">\r\n                            <i className=\"fa fa-bars\" /> Exhibits\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default InstitutinCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport InstitutionCard from \"../components/InstitutionCard\";\r\n\r\n/**\r\n * page of all registered institutions for translators to choose\r\n */\r\nclass TranslateInstitutionsPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        institutions: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * called when page is moutned\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch institutions from the server\r\n        apiCalls.getAllInstitutions().then(response => {\r\n            this.setState({institutions: response.data, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders institutions page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map institutions to institution cards\r\n        const institutions = this.state.institutions.map(i =>\r\n            <InstitutionCard key={i.institutionId} {...i} />\r\n        );\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.institutions.length === 0 ? <h4>There are no institutions</h4> : institutions;\r\n        }\r\n\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Institutions</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TranslateInstitutionsPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {EXHIBITS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport Select from \"react-select\";\r\n\r\n/**\r\n * card for listing exhibits for translating\r\n * @param props props\r\n */\r\nconst TranslateExhibitCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3\">\r\n                    <img className=\"img-fluid sizedImg img-thumbnail\" src={EXHIBITS_IMAGES_URL + props.image} alt=\"image\" />\r\n                </div>\r\n\r\n                <div className=\"col-md-6\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div className=\"mb-3 mt-4\">\r\n                        <Select options={props.languages.map(lan => {return {value: lan.languageId, label: lan.name};})}\r\n                                onChange={(event) => props.selectLang(props.exhibitId, event.value)} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-md-3\">\r\n                    <Link exact to={\"/institutions/\" + props.institutionId + \"/translate/\" + props.exhibitId + \"/\" + props.lang} className={props.buttonsDisabled && \"disabled-link\"}>\r\n                        <button type=\"button\" disabled={props.buttonsDisabled} className=\"btn btn-info btn-lg w-100\">\r\n                            <i className=\"fa fa-globe\" /> Translate\r\n                        </button>\r\n                    </Link>\r\n\r\n                    <Link exact to={\"/institutions/\" + props.institutionId + \"/rate/\" + props.exhibitId + \"/\" + props.lang} className={props.buttonsDisabled && \"disabled-link\"}>\r\n                        <button type=\"button\" disabled={props.buttonsDisabled} className=\"btn btn-primary mt-3 btn-lg w-100\">\r\n                            <i className=\"fa fa-thumbs-up\" /> Rate\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default TranslateExhibitCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport TranslateExhibitCard from \"../components/TranslateExhibitCard\";\r\n\r\n/**\r\n * page containing exhibits to translate in allowed languages\r\n */\r\nclass TranslateExhibitPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        languages: [],\r\n        exhibits: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch exhibits and languages from server\r\n        apiCalls.getExhibitsTranslate(this.props.match.params.institutionId).then(response => {\r\n            let languages = response.data.languages;\r\n\r\n            // add default props to exhibits\r\n            let exhibits = response.data.exhibits;\r\n            for(let ex of exhibits) {\r\n                ex.buttonsDisabled = true;\r\n                ex.lang = -1;\r\n                ex.selectLang = this.selectLang;\r\n            }\r\n\r\n            this.setState({languages, exhibits, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Called when user selects language\r\n     * @param exhibitId exhibit id\r\n     * @param languageId language id\r\n     */\r\n    selectLang = (exhibitId, languageId) => {\r\n        let exhibits = [];\r\n        // update selected language for given exhibit in state\r\n        for(let ex of this.state.exhibits) {\r\n            if(ex.exhibitId !== exhibitId) {\r\n                exhibits.push(ex);\r\n            }\r\n            else {\r\n                // change language to value from param\r\n                exhibits.push({...ex, lang: languageId, buttonsDisabled: false});\r\n            }\r\n        }\r\n        this.setState({exhibits});\r\n    }\r\n\r\n    /**\r\n     * renders page with exhibits to translate to allowed languages\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map exhibits to translate exhibits cards\r\n        const exhibits = this.state.exhibits.map(ex =>\r\n            <TranslateExhibitCard key={ex.exhibitId} {...ex} languages={this.state.languages} institutionId={this.props.match.params.institutionId} />\r\n        );\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.exhibits.length === 0 ? <h4>There are no exhibits</h4> : exhibits;\r\n        }\r\n\r\n        // render pge\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Exhibits</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TranslateExhibitPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport {INFO_LABELS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport parse from 'html-react-parser';\r\nimport {CKEditor} from \"@ckeditor/ckeditor5-react\";\r\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\r\n\r\n/**\r\n * page for creating new translations\r\n */\r\nclass NewTranslationPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        institutionId: this.props.match.params.institutionId,\r\n        exhibitId: this.props.match.params.exhibitId,\r\n        languageId: this.props.match.params.languageId,\r\n        exhibitName: \"\",\r\n        languageName: \"\",\r\n        infoLabelText: \"\",\r\n        infoLabel: null,\r\n        text: \"\",\r\n        pendingApiCallGetNewTranslation: false,\r\n        pendingApiCallCreateTranslation: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallGetNewTranslation: true})\r\n        // fetch translation details from the server\r\n        apiCalls.getNewTranslation(this.state.exhibitId, this.state.languageId).then(response => {\r\n            // set fetched details to page state\r\n            const {exhibitName, infoLabelText, infoLabel, text, languageName} = response.data;\r\n            this.setState({exhibitName, infoLabelText, infoLabel, text, languageName, pendingApiCallGetNewTranslation: false});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when translation is submitted\r\n     */\r\n    onTranslationCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallCreateTranslation: true});\r\n\r\n        // send translation to server\r\n        apiCalls.saveNewTranslation(this.state.exhibitId, this.state.languageId, {text: this.state.text}).then(response => {\r\n            this.setState({pendingApiCallCreateTranslation: false}, () => this.props.history.push(\"/institutions/\" + this.state.institutionId));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCallCreateTranslation: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called on value change in text editor\r\n     * @param event event\r\n     * @param editor ck editor\r\n     */\r\n    onTextChange = (event, editor) => {\r\n        // set value from editor to state\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"text\"];\r\n        this.setState({text: editor.getData(), errors});\r\n    }\r\n\r\n    /**\r\n     * render new translation page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            exhibitName,\r\n            languageName,\r\n            infoLabelText,\r\n            infoLabel,\r\n            text,\r\n            pendingApiCallGetNewTranslation,\r\n            pendingApiCallCreateTranslation,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // return spinner if api call is processing\r\n        if (pendingApiCallGetNewTranslation) {\r\n            return (\r\n                <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                    <Spinner />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">New Translation</h2>\r\n\r\n                <h3>{exhibitName}</h3>\r\n                <div className=\"mb-4\">\r\n                    <span className=\"font-weight-bold\">Selected language: </span>\r\n                    {languageName}\r\n                </div>\r\n\r\n                <div>\r\n                    <img className=\"img-fluid mt-2\" src={INFO_LABELS_IMAGES_URL + infoLabel} alt=\"information label image\" />\r\n                </div>\r\n\r\n                {\r\n                    (infoLabelText !== \"\") &&\r\n                    <div className=\"mt-4 bg-light border rounded p-2\">\r\n                        {parse(infoLabelText)}\r\n                    </div>\r\n                }\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <label>Translated text</label>\r\n                        <CKEditor editor={ClassicEditor}\r\n                                  config={{removePlugins: ['Table', 'TableToolbar', 'EasyImage', 'MediaEmbed', 'ImageCaption', 'ImageStyle', 'ImageToolbar', 'ImageUpload']}}\r\n                                  data={text} onChange={this.onTextChange}/>\r\n                        {\r\n                            errors.text &&\r\n                            <div className=\"text-danger\">\r\n                                <small>{errors.text}</small>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onTranslationCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallCreateTranslation || text === \"\"}\r\n                                         pendingApiCall={pendingApiCallCreateTranslation}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create translation\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default NewTranslationPage;","import React from 'react';\r\nimport parse from \"html-react-parser\";\r\n\r\n/**\r\n * card for listing translations to rate\r\n * @param props props\r\n */\r\nconst TranslatorRateTranslationCard = (props) => {\r\n    let cardStyle = \"card mb-4\"\r\n    if(props.isOfficial) {\r\n        cardStyle += \" bg-warning\";\r\n    }\r\n\r\n    let btnClass = \"btn btn-primary\";\r\n    if(!props.liked) {\r\n        btnClass = \"btn btn-secondary\";\r\n    }\r\n\r\n    return (\r\n        <div className={cardStyle}>\r\n            <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <h5>\r\n                            {props.authorUsername}\r\n                        </h5>\r\n                        <p>{new Date(props.createdAt).toLocaleDateString(\"en-US\")}</p>\r\n                        {\r\n                            props.isOfficial &&\r\n                            <span className=\"font-weight-bold\">official</span>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"bg-light border rounded p-2\">\r\n                            {parse(props.translatedText)}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-md-2\">\r\n                        <div className=\"d-flex justify-content-between mt-md-0 mt-3\">\r\n                            <div className=\"text-info mt-1\">\r\n                                <i className=\"fa fa-thumbs-up\" /> {props.likesCount + \"x\"}\r\n                            </div>\r\n\r\n                            <button onClick={() => props.onLikeChange(props.translationId)} type=\"button\" className={btnClass}>\r\n                                {\r\n                                    props.liked ?\r\n                                        <i className=\"fa fa-thumbs-up\" />\r\n                                        :\r\n                                        <i className=\"fa fa-thumbs-o-up\" />\r\n                                }\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TranslatorRateTranslationCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport {INFO_LABELS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport parse from \"html-react-parser\";\r\nimport TranslatorRateTranslationCard from \"../components/TranslatorRateTranslationCard\";\r\n\r\n/**\r\n * page for translators to rate translations of pair exhibit-language\r\n */\r\nclass TranslatorRatePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        exhibitId: this.props.match.params.exhibitId,\r\n        languageId: this.props.match.params.languageId,\r\n        exhibit: null,\r\n        language: \"\",\r\n        translations: [],\r\n        pendingApiCall: true,\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch translations from server\r\n        apiCalls.getRateOverview(this.state.exhibitId, this.state.languageId).then(response => {\r\n            this.setState({exhibit: response.data.exhibit, language: response.data.language, translations: response.data.translations, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthenticated state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when suer likes/unlikes translation\r\n     * @param translationId translation id\r\n     */\r\n    onLikeChange = translationId => {\r\n        let newTranslations = [];\r\n        const {translations} = this.state;\r\n        let newValue;\r\n        for(let t of translations) {\r\n            if(t.translationId !== translationId) {\r\n                newTranslations.push(t);\r\n            }\r\n            else {\r\n                // set new like value\r\n                newValue = !t.liked;\r\n                if(newValue) {\r\n                    // if value is true increase count likes\r\n                    newTranslations.push({...t, liked: newValue, likesCount: t.likesCount + 1})\r\n                }\r\n                else {\r\n                    // if value is negative decrease count likes\r\n                    newTranslations.push({...t, liked: newValue, likesCount: t.likesCount - 1})\r\n                }\r\n            }\r\n        }\r\n        this.setState({translations: newTranslations});\r\n\r\n        // send request to set like/unlike to server\r\n        apiCalls.setLike(translationId, {value: newValue}).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders page for translators to rate translations of pair exhibit-language\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map translations to translation rate cards\r\n        const translations = this.state.translations.map(t =>\r\n            <TranslatorRateTranslationCard key={t.translationId} {...t} onLikeChange={this.onLikeChange}/>\r\n        );\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            const {name, infoLabel, infoLabelText} = this.state.exhibit;\r\n\r\n            content = (\r\n              <div>\r\n                  <h3>{name}</h3>\r\n                  <div className=\"mb-4\">\r\n                      <span className=\"font-weight-bold\">Selected language: </span>\r\n                      {this.state.language}\r\n                  </div>\r\n\r\n                  <div>\r\n                      <img className=\"img-fluid mt-2\" src={INFO_LABELS_IMAGES_URL + infoLabel} alt=\"information label image\" />\r\n                  </div>\r\n\r\n                  {\r\n                      (infoLabelText !== \"\") &&\r\n                      <div className=\"mt-4 bg-light border rounded p-2\">\r\n                          {parse(infoLabelText)}\r\n                      </div>\r\n                  }\r\n\r\n                  {\r\n                      translations.length === 0 ?\r\n                          <h4 className=\"mt-5\">There are no translations</h4>\r\n                          :\r\n                          <div className=\"mt-3\">\r\n                              <h3 className=\"my-5\">Translations</h3>\r\n                              {translations}\r\n                          </div>\r\n                  }\r\n              </div>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Rate Translations</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TranslatorRatePage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {EXHIBITS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport Select from \"react-select\";\r\n\r\n/**\r\n * card for listing exhibits to approve\r\n * @param props props\r\n */\r\nconst ApproveExhibitCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3\">\r\n                    <img className=\"img-fluid sizedImg img-thumbnail\" src={EXHIBITS_IMAGES_URL + props.image} alt=\"image\" />\r\n                </div>\r\n\r\n                <div className=\"col-md-6\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div className=\"mb-3 mt-4\">\r\n                        <Select options={props.languages.map(lan => {return {value: lan.languageId, label: lan.name};})}\r\n                                onChange={(event) => props.selectLang(props.exhibitId, event.value)} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-md-3\">\r\n                    <Link exact to={\"/approve/\" + props.exhibitId + \"/\" + props.lang} className={props.buttonDisabled && \"disabled-link\"}>\r\n                        <button type=\"button\" disabled={props.buttonDisabled} className=\"btn btn-primary btn-lg w-100\">\r\n                            <i className=\"fa fa-star\"/> Approve\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default ApproveExhibitCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport ApproveExhibitCard from \"../components/ApproveExhibitCard\";\r\n\r\n/**\r\n * Page for rendering exhibits where official text can be set\r\n */\r\nclass ApproveExhibitPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        languages: [],\r\n        exhibits: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * Called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // get exhibits to approve from server\r\n        apiCalls.getExhibitsApproveTranslations().then(response => {\r\n            let languages = response.data.languages;\r\n\r\n            // set default props to fetched exhibits\r\n            let exhibits = response.data.exhibits;\r\n            for(let ex of exhibits) {\r\n                ex.buttonDisabled = true;\r\n                ex.lang = -1;\r\n                ex.selectLang = this.selectLang;\r\n            }\r\n\r\n            this.setState({languages, exhibits, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when language is selected\r\n     * @param exhibitId exhibit id\r\n     * @param languageId language id\r\n     */\r\n    selectLang = (exhibitId, languageId) => {\r\n        let exhibits = [];\r\n        for(let ex of this.state.exhibits) {\r\n            if(ex.exhibitId !== exhibitId) {\r\n                exhibits.push(ex);\r\n            }\r\n            else {\r\n                // set language for exhibit\r\n                exhibits.push({...ex, lang: languageId, buttonDisabled: false});\r\n            }\r\n        }\r\n        // update state\r\n        this.setState({exhibits});\r\n    }\r\n\r\n    /**\r\n     * renders page with exhibits where official text can be set\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map exhibits to its view cards\r\n        const exhibits = this.state.exhibits.map(ex =>\r\n            <ApproveExhibitCard key={ex.exhibitId} {...ex} languages={this.state.languages} />\r\n        );\r\n\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            // if fetching data ended show fetched exhibits or message that there are none\r\n            content = this.state.exhibits.length === 0 ? <h4>There are no exhibits</h4> : exhibits;\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Exhibits</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ApproveExhibitPage;","import React from 'react';\r\nimport parse from \"html-react-parser\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing translations to rate and set official\r\n * @param props props\r\n */\r\nconst OwnerRateTranslationCard = (props) => {\r\n    let cardStyle = \"card mb-4\"\r\n    if(props.isOfficial) {\r\n        cardStyle += \" bg-warning\";\r\n    }\r\n\r\n    let likeBtnClass = \"btn btn-primary\";\r\n    if(!props.liked) {\r\n        likeBtnClass = \"btn btn-secondary\";\r\n    }\r\n\r\n    let officialBtnClass = \"btn btn-success w-100 mt-3\";\r\n    if(!props.isOfficial) {\r\n        officialBtnClass = \"btn btn-secondary w-100 mt-3\";\r\n    }\r\n\r\n    return (\r\n        <div className={cardStyle}>\r\n            <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <h5>\r\n                            {props.authorUsername}\r\n                        </h5>\r\n                        <p>{new Date(props.createdAt).toLocaleDateString(\"en-US\")}</p>\r\n                        {\r\n                            props.isOfficial &&\r\n                            <span className=\"font-weight-bold\">official</span>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"bg-light border rounded p-2\">\r\n                            {parse(props.translatedText)}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-md-2 mt-md-0 mt-3\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                            <div className=\"text-info mt-1\">\r\n                                <i className=\"fa fa-thumbs-up\" /> {props.likesCount + \"x\"}\r\n                            </div>\r\n\r\n                            <button onClick={() => props.onLikeChange(props.translationId)} type=\"button\" className={likeBtnClass}>\r\n                                {\r\n                                    props.liked ?\r\n                                        <i className=\"fa fa-thumbs-up\" />\r\n                                        :\r\n                                        <i className=\"fa fa-thumbs-o-up\" />\r\n                                }\r\n                            </button>\r\n                        </div>\r\n\r\n                        <ButtonWithProgress  onClick={() => props.onOfficialChange(props.translationId)}\r\n                                             className={officialBtnClass}\r\n                                             disabled={props.pendingApiCallSetOfficial}\r\n                                             pendingApiCall={props.pendingApiCallSetOfficial}\r\n                                             hasChildren>\r\n                            {\r\n                                props.isOfficial ?\r\n                                    <div><i className=\"fa fa-star\" /> Official </div>\r\n                                    :\r\n                                    <div><i className=\"fa fa-star-o\" /> Official </div>\r\n                            }\r\n                        </ButtonWithProgress>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OwnerRateTranslationCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport {INFO_LABELS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport parse from \"html-react-parser\";\r\nimport OwnerRateTranslationCard from \"../components/OwnerRateTranslationCard\";\r\n\r\n/**\r\n * page for institution owner to pick official translation and like translations\r\n */\r\nclass OwnerRatePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        exhibitId: this.props.match.params.exhibitId,\r\n        languageId: this.props.match.params.languageId,\r\n        exhibit: null,\r\n        language: \"\",\r\n        translations: [],\r\n        pendingApiCall: true,\r\n    }\r\n\r\n    /**\r\n     * called when component is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch translation from server\r\n        apiCalls.getRateOverview(this.state.exhibitId, this.state.languageId).then(response => {\r\n            let translations = response.data.translations;\r\n            for(let t of translations) {\r\n                t.pendingApiCallSetOfficial = false;\r\n            }\r\n\r\n            // update page state with fetched translations\r\n            this.setState({exhibit: response.data.exhibit, language: response.data.language, translations, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when user likes/unlikes translation\r\n     * @param translationId translation id\r\n     */\r\n    onLikeChange = translationId => {\r\n        let newTranslations = [];\r\n        const {translations} = this.state;\r\n        let newValue;\r\n        // set new likes counts and if it is liked for translation that caused the call\r\n        for(let t of translations) {\r\n            if(t.translationId !== translationId) {\r\n                newTranslations.push(t);\r\n            }\r\n            else {\r\n                newValue = !t.liked;\r\n                if(newValue) {\r\n                    newTranslations.push({...t, liked: newValue, likesCount: t.likesCount + 1});\r\n                }\r\n                else {\r\n                    newTranslations.push({...t, liked: newValue, likesCount: t.likesCount - 1});\r\n                }\r\n            }\r\n        }\r\n        // update likes state\r\n        this.setState({translations: newTranslations});\r\n\r\n        // sends request to like/unlike translation to the server\r\n        apiCalls.setLike(translationId, {value: newValue}).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when official translation is changed\r\n     * @param translationId\r\n     */\r\n    onOfficialChange = translationId => {\r\n        let newTranslations = [];\r\n        const {translations} = this.state;\r\n        let newValue;\r\n        // update pending api call for translation that caused this\r\n        for(let t of translations) {\r\n            if(t.translationId !== translationId) {\r\n                newTranslations.push(t);\r\n            }\r\n            else {\r\n                newValue = !t.isOfficial;\r\n                newTranslations.push({...t, pendingApiCallSetOfficial: true});\r\n            }\r\n        }\r\n        this.setState({translations: newTranslations});\r\n\r\n        // send new value of official translation to server\r\n        apiCalls.setOfficial(translationId, {value: newValue}).then(response => {\r\n            // update official translation view\r\n            newTranslations = [];\r\n            const {translations} = this.state;\r\n            for(let t of translations) {\r\n                if(t.translationId !== translationId) {\r\n                    newTranslations.push({...t, isOfficial: false});\r\n                }\r\n                else {\r\n                    newTranslations.push({...t, pendingApiCallSetOfficial: false, isOfficial: newValue});\r\n                }\r\n            }\r\n            // set new state of official translation\r\n            this.setState({translations: newTranslations});\r\n        })\r\n        .catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders owner rate and select official translation page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map translations to rate translation cards\r\n        const translations = this.state.translations.map(t =>\r\n            <OwnerRateTranslationCard key={t.translationId} {...t} onLikeChange={this.onLikeChange} onOfficialChange={this.onOfficialChange}/>\r\n        );\r\n\r\n        let content = <Spinner/>;\r\n        // if there is no pending api call print translations\r\n        if (!this.state.pendingApiCall) {\r\n            const {name, infoLabel, infoLabelText} = this.state.exhibit;\r\n\r\n            content = (\r\n                <div>\r\n                    <h3>{name}</h3>\r\n                    <div className=\"mb-4\">\r\n                        <span className=\"font-weight-bold\">Selected language: </span>\r\n                        {this.state.language}\r\n                    </div>\r\n\r\n                    <div>\r\n                        <img className=\"img-fluid mt-2\" src={INFO_LABELS_IMAGES_URL + infoLabel} alt=\"information label image\" />\r\n                    </div>\r\n\r\n                    {\r\n                        (infoLabelText !== \"\") &&\r\n                        <div className=\"mt-4 bg-light border rounded p-2\">\r\n                            {parse(infoLabelText)}\r\n                        </div>\r\n                    }\r\n\r\n                    {\r\n                        translations.length === 0 ?\r\n                            <h4 className=\"mt-5\">There are no translations</h4>\r\n                            :\r\n                            <div className=\"mt-3\">\r\n                                <h3 className=\"my-5\">Translations</h3>\r\n                                {translations}\r\n                            </div>\r\n                    }\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Approve Translations</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default OwnerRatePage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {EXHIBITS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing user's translation sequences\r\n * @param props props\r\n */\r\nconst MyTranslationSequenceCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3\">\r\n                    <img className=\"img-fluid sizedImg img-thumbnail\" src={EXHIBITS_IMAGES_URL + props.exhibitImage} alt=\"image\" />\r\n                </div>\r\n\r\n                <div className=\"col-md-6\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.institutionName}\r\n                    </h3>\r\n\r\n                    <h5>\r\n                        Exhibit: {props.exhibitName}\r\n                    </h5>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Language: </span>\r\n                        {props.language}\r\n                    </div>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Latest activity: </span>\r\n                        {new Date(props.latestTranslationCreatedAt).toLocaleDateString(\"en-US\")}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-md-3 mt-3 mt-md-0\">\r\n                    <Link exact to={\"/myTranslations/\" + props.exhibitId + \"/\" + props.languageId} >\r\n                        <button type=\"button\" className=\"btn btn-info w-100\">\r\n                            <i className=\"fa fa-bars\" /> Open\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <ButtonWithProgress  onClick={() => props.onClickDelete(props.exhibitId, props.languageId)}\r\n                                         className=\"btn btn-danger w-100 mt-2\"\r\n                                         disabled={props.pendingApiCall}\r\n                                         pendingApiCall={props.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-times\" /> Delete\r\n                    </ButtonWithProgress>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default MyTranslationSequenceCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport MyTranslationSequenceCard from \"../components/MyTranslationSequenceCard\";\r\n\r\n/**\r\n * page with translator sequences of translation\r\n */\r\nclass MyTranslationsPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        sequences: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * Called when user wants to delete whole sequence\r\n     * @param exhibitId exhibit id\r\n     * @param languageId language id\r\n     */\r\n    onClickDelete = (exhibitId, languageId) => {\r\n        // ask before deleting sequence\r\n        if(window.confirm(\"Do you really want to delete this translation sequence?\")) {\r\n            // start api call for given deleted sequence\r\n            let newSequences = [];\r\n            const {sequences} = this.state;\r\n            for (let s of sequences) {\r\n                if(s.exhibitId === exhibitId && s.languageId === languageId) {\r\n                    // set pending api call to true for sequence that is deleted\r\n                    newSequences.push({...s, pendingApiCall: true});\r\n                }\r\n                else {\r\n                    newSequences.push(s);\r\n                }\r\n            }\r\n            this.setState({sequences: newSequences});\r\n\r\n            // request to server to delete sequence\r\n            apiCalls.deleteSequence(exhibitId, languageId).then(response => {\r\n                newSequences = [...this.state.sequences];\r\n                newSequences = newSequences.filter(s => s.exhibitId !== exhibitId || s.languageId !== languageId);\r\n\r\n                // update state without sequence\r\n                this.setState({sequences: newSequences});\r\n            }).catch(error => {\r\n                // handles unauthorized state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when pge is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch sequences from server\r\n        apiCalls.getMyTranslationSequences().then(response => {\r\n            const sequences = response.data;\r\n            for(let s of sequences) {\r\n                s.pendingApiCall = false;\r\n                s.onClickDelete = this.onClickDelete;\r\n            }\r\n            // update state with fetched sequences\r\n            this.setState({sequences, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders page with translation sequences\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map sequences to sequence cards\r\n        const sequences = this.state.sequences.map((s, index) =>\r\n            <MyTranslationSequenceCard key={index} {...s} />\r\n        );\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.sequences.length === 0 ? <h4>There are no translation sequences</h4> : sequences;\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Translation Sequences</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MyTranslationsPage;","import React from 'react';\r\nimport parse from \"html-react-parser\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing sequence translations\r\n * @param props props\r\n */\r\nconst MyTranslationCard = (props) => {\r\n    let cardStyle = \"card mb-4\"\r\n    if(props.isOfficial) {\r\n        cardStyle += \" bg-warning\";\r\n    }\r\n\r\n    return (\r\n        <div className={cardStyle}>\r\n            <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <h4>\r\n                            {props.order + \".\"}\r\n                        </h4>\r\n                        <p>{new Date(props.createdAt).toLocaleDateString(\"en-US\")}</p>\r\n                        {\r\n                            props.isOfficial &&\r\n                            <span className=\"font-weight-bold\">official</span>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"bg-light border rounded p-2\">\r\n                            {parse(props.translatedText)}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-md-2 mt-md-0 mt-2\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                            <div className=\"text-info mt-1\">\r\n                                <i className=\"fa fa-thumbs-up\" /> {props.likesCount + \"x\"}\r\n                            </div>\r\n                        </div>\r\n                        {\r\n                            props.index !== 0 &&\r\n                            <ButtonWithProgress  onClick={() => props.onRollback(props.translationId, props.index)}\r\n                                                 className=\"btn btn-danger w-100 mt-3 mb-2\"\r\n                                                 disabled={props.pendingApiCall}\r\n                                                 pendingApiCall={props.pendingApiCall}\r\n                                                 hasChildren>\r\n                                <i className=\"fa fa-times\" /> Rollback\r\n                            </ButtonWithProgress>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyTranslationCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport MyTranslationCard from \"../components/MyTranslationCard\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n/**\r\n * page showing translations of one translation sequence\r\n */\r\nclass TranslationSequencePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        exhibitId: this.props.match.params.exhibitId,\r\n        languageId: this.props.match.params.languageId,\r\n        translations: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * called when user want to rollback to some point in translation sequence\r\n     * @param translationId translation id\r\n     * @param index index of translation\r\n     */\r\n    onRollback = (translationId, index) => {\r\n        // ask before rollback\r\n        if(window.confirm(\"Do you really want to rollback to this translation?\")) {\r\n            let newTranslations = [...this.state.translations];\r\n            newTranslations[index] = {...newTranslations[index], pendingApiCall: true}\r\n            this.setState({translations: newTranslations});\r\n\r\n            // send request to rollback to server\r\n            apiCalls.rollbackTranslation(translationId).then(response => {\r\n                let newTranslations = [...this.state.translations];\r\n                newTranslations[index] = {...newTranslations[index], pendingApiCall: false}\r\n                newTranslations = newTranslations.slice(index);\r\n                // update state with deleted translations\r\n                this.setState({translations: newTranslations});\r\n            }).catch(error => {\r\n                // handle unauthenticated state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch translations of sequence from server\r\n        apiCalls.getMyTranslationSequence(this.state.exhibitId, this.state.languageId).then(response => {\r\n            const translations = response.data;\r\n            for(let t of translations) {\r\n                t.pendingApiCall = false;\r\n                t.onRollback = this.onRollback;\r\n            }\r\n            // set fetched translations to state\r\n            this.setState({translations, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders transaltion sequence page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const translationsLength = this.state.translations.length;\r\n\r\n        // map translations to translation cards\r\n        const translations = this.state.translations.map((t, index) =>\r\n            <MyTranslationCard key={index} order={translationsLength - index} index={index} {...t} />\r\n        );\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = translationsLength === 0 ?\r\n                <h4>There are no translations</h4>\r\n                :\r\n                <>\r\n                    <Link exact to={\"/institutions/\" + this.state.translations[0].institutionId + \"/translate/\" + this.state.exhibitId + \"/\" + this.state.languageId}>\r\n                        <button type=\"button\" className=\"btn btn-info mb-4 btn-lg\">\r\n                            <i className=\"fa fa-globe\" /> Create New Version\r\n                        </button>\r\n                    </Link>\r\n                    {translations}\r\n                </>\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Translation Sequence</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TranslationSequencePage;","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n/**\r\n * one row in table representing system user\r\n * @param props props\r\n */\r\nfunction UserManagerRow(props) {\r\n    return (\r\n        <tr>\r\n            <td>{props.username}</td>\r\n            <td>{new Date(props.createdAt).toLocaleDateString(\"en-US\")}</td>\r\n            <td>{props.email}</td>\r\n            <td>\r\n                <Link exact to={\"/users/\" + props.userId}>\r\n                    <button type=\"button\" className=\"btn btn-info w-100\">\r\n                        <i className=\"fa fa-search\" /> Detail\r\n                    </button>\r\n                </Link>\r\n            </td>\r\n        </tr>\r\n    );\r\n}\r\n\r\nexport default UserManagerRow;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport UserManagerRow from \"../components/UserManagerRow\";\r\nimport handleError from \"../shared/failureHandler\";\r\n\r\n/**\r\n * page for managing users\r\n */\r\nclass UserManagerPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        users: [],\r\n        filtered: [],\r\n        pendingApiCall: false,\r\n        search: \"\",\r\n    };\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch users from server\r\n        apiCalls.getUsers().then(response => {\r\n            this.setState({users: response.data, filtered: response.data, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthenticated state\r\n            return handleError(error);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Called when user changes value in search field\r\n     * @param event input event\r\n     */\r\n    onSearchChange = (event) => {\r\n        const value = event.target.value;\r\n        if(this.state.search === \"\") {\r\n            // if search filed is empty show all users\r\n            let filtered = [...this.state.users];\r\n            this.setState({filtered, search: value});\r\n        }\r\n        else {\r\n            // if search field has text filter users\r\n            let filtered = this.state.users.filter(u => u.username.includes(value) || u.email.includes(value));\r\n            this.setState({filtered, search: value});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renders page for user management\r\n     * @returns {JSX.Element}\r\n     */\r\n    render() {\r\n        const {users, pendingApiCall, search, filtered} = this.state;\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!pendingApiCall) {\r\n            content = users.length === 0 ?\r\n                <h3>There are no users</h3>\r\n                :\r\n                <>\r\n                    <div className=\"input-group mb-3\">\r\n                        <input type=\"text\" className=\"form-control\" placeholder=\"Search user\" name=\"search\" value={search} onChange={this.onSearchChange} />\r\n                        <div className=\"input-group-append\">\r\n                                <span className=\"input-group-text\">\r\n                                    <i className=\"fa fa-search\" />\r\n                                </span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"table-responsive\">\r\n                        <table className=\"table table-dark table-striped table-bordered table-hover\">\r\n                            <thead className=\"thead-light\">\r\n                            <tr>\r\n                                <th scope=\"col\">Username</th>\r\n                                <th scope=\"col\">Register date</th>\r\n                                <th scope=\"col\">E-mail</th>\r\n                                <th scope=\"col\">Detail</th>\r\n                            </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n                            {filtered.map(u => <UserManagerRow {...u} />)}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </>\r\n\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded p-md-5 p-2 container gray-noise-background mb-3\">\r\n                <h2 className=\"mb-5\">User Manager</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UserManagerPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport Input from \"../components/Input\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\n\r\n/**\r\n * page for viewing details about user\r\n */\r\nclass UserDetailPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        userId: this.props.match.params.userId,\r\n        username: \"\",\r\n        email: \"\",\r\n        createdAt: null,\r\n        isBanned: false,\r\n        isTranslator: true,\r\n        isInstitutionOwner: false,\r\n        institutionName: \"\",\r\n        pendingApiCall: true,\r\n        pendingApiCallUsernameUpdate: false,\r\n        pendingApiCallChangePassword: false,\r\n        pendingApiCallTranslator: false,\r\n        pendingApiCallBan: false,\r\n        pendingApiCallRemoveInstitution: false,\r\n        usernameUpdated: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // get user details from server\r\n        apiCalls.getUser(this.state.userId).then(response => {\r\n            const {\r\n                username,\r\n                email,\r\n                createdAt,\r\n                isBanned,\r\n                isTranslator,\r\n                isInstitutionOwner,\r\n                institutionName\r\n            } = response.data;\r\n\r\n            this.setState({username, email, createdAt, isBanned, isTranslator, isInstitutionOwner, institutionName, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * called when text inputs are changed\r\n     * @param event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors and set new value\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        this.setState({errors, usernameUpdated: false, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * handles error from http request\r\n     * @param apiError error\r\n     * @param apiCall api call name\r\n     */\r\n    handleApiError = (apiError, apiCall) => {\r\n        if (apiError.response.data && apiError.response.data.validationErrors) {\r\n            // add errors\r\n            let errors = {\r\n                ...this.state.errors,\r\n                ...apiError.response.data.validationErrors\r\n            };\r\n            this.setState({\r\n                [apiCall]: false,\r\n                errors\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when admin updates username\r\n     */\r\n    onClickUsernameUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUsernameUpdate: true});\r\n\r\n        // send request to server to update username\r\n        apiCalls.adminUpdateUsername(this.state.userId, {username: this.state.username}).then(response => {\r\n            this.setState({pendingApiCallUsernameUpdate: false, usernameUpdated: true});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle input errors\r\n            this.handleApiError(apiError, \"pendingApiCallUsernameUpdate\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when admin wants to change user's password by sending it to mail\r\n     */\r\n    onPasswordChange = () => {\r\n        const {username, email} = this.state;\r\n        // ask before changing password\r\n        if(window.confirm(\"Do you really want to generate new password for user \" + username + \" and send it to mail: \" + email)) {\r\n            this.setState({pendingApiCallChangePassword: true});\r\n\r\n            // send request to change password by sending new password to user's mail\r\n            apiCalls.adminChangePassword(this.state.userId).then(response => {\r\n                this.setState({pendingApiCallChangePassword: false});\r\n            }).catch(error => {\r\n                // handle unauthorized state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when admin wants to change user's rights to translate\r\n     */\r\n    onTranslatorChange = () => {\r\n        const {userId, isTranslator} = this.state;\r\n        // ask before changing rights\r\n        if(window.confirm(\"Do you really want to change translator rights?\")) {\r\n            this.setState({pendingApiCallTranslator: true});\r\n\r\n            // send request to server to change user's translator rights\r\n            apiCalls.adminChangeTranslator(userId, {value: !isTranslator}).then(response => {\r\n                this.setState({pendingApiCallTranslator: false, isTranslator: !isTranslator});\r\n            }).catch(error => {\r\n                // handle unauthorized state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when admin wants to change user's ban\r\n     */\r\n    onBanChange = () => {\r\n        const {userId, isBanned} = this.state;\r\n        // ask before changing ban\r\n        if(window.confirm(\"Do you really want to change access rights?\")) {\r\n            this.setState({pendingApiCallBan: true});\r\n\r\n            // send request to change ban of user to server\r\n            apiCalls.adminChangeBan(userId, {value: !isBanned}).then(response => {\r\n                this.setState({pendingApiCallBan: false, isBanned: !isBanned});\r\n            }).catch(error => {\r\n                // handle unauthorized state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when admin wants to remove institution from user\r\n     */\r\n    onInstitutionRemove = () => {\r\n        // ask before removing institution\r\n        const {userId, institutionName} = this.state;\r\n        if(window.confirm(\"Do you really want to remove managerial rights? It may cause deletion of institution: \" + institutionName)) {\r\n            this.setState({pendingApiCallRemoveInstitution: true});\r\n\r\n            // send request to server to remove institution management to server\r\n            apiCalls.adminRemoveInstitution(userId).then(response => {\r\n                this.setState({pendingApiCallRemoveInstitution: false, isInstitutionOwner: false, institutionName: \"\"});\r\n            }).catch(error => {\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renders user details page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            username,\r\n            email,\r\n            createdAt,\r\n            isBanned,\r\n            isTranslator,\r\n            isInstitutionOwner,\r\n            institutionName,\r\n            pendingApiCall,\r\n            pendingApiCallUsernameUpdate,\r\n            pendingApiCallChangePassword,\r\n            pendingApiCallTranslator,\r\n            pendingApiCallBan,\r\n            pendingApiCallRemoveInstitution,\r\n            usernameUpdated,\r\n            errors\r\n        } = this.state;\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!pendingApiCall) {\r\n            content =\r\n                <div>\r\n                    <div className=\"mb-4\">\r\n                        <span className=\"font-weight-bold\">Registration date: </span>\r\n                        {new Date(createdAt).toLocaleDateString(\"en-US\")}\r\n                    </div>\r\n\r\n                    <form className=\"mb-4\">\r\n                        {\r\n                            usernameUpdated &&\r\n                            <div className=\"alert alert-success\" role=\"alert\">\r\n                                Username updated\r\n                            </div>\r\n                        }\r\n\r\n                        <div className=\"form-group\">\r\n                            <Input\r\n                                label=\"Name\"\r\n                                placeholder=\"Enter name\" name=\"username\" value={username}\r\n                                onChange={this.onChange}\r\n                                hasError={errors.username && true}\r\n                                error={errors.username}\r\n                            />\r\n                        </div>\r\n\r\n                        <ButtonWithProgress  onClick={(e) => this.onClickUsernameUpdate(e)}\r\n                                             className=\"btn btn-primary w-100 my-2\"\r\n                                             disabled={pendingApiCallUsernameUpdate || username === \"\"}\r\n                                             pendingApiCall={pendingApiCallUsernameUpdate}\r\n                                             hasChildren>\r\n                            <i className=\"fa fa-paper-plane\" /> Update username\r\n                        </ButtonWithProgress>\r\n                    </form>\r\n\r\n                    <h5>Password Change</h5>\r\n                    <p>Generate new password and send it to email: <span className=\"font-weight-bold\">{email}</span></p>\r\n                    <ButtonWithProgress  onClick={this.onPasswordChange}\r\n                                         className=\"btn btn-danger btn-lg my-1\"\r\n                                         disabled={pendingApiCallChangePassword}\r\n                                         pendingApiCall={pendingApiCallChangePassword}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-key\"/> Generate new password\r\n                    </ButtonWithProgress>\r\n\r\n                    <h5 className=\"mt-4\">Translator Rights</h5>\r\n                    <p>Change user's right to translate</p>\r\n                    <ButtonWithProgress  onClick={this.onTranslatorChange}\r\n                                         className={\"btn btn-lg my-1 \" + (isTranslator ? \"btn-primary\" : \"btn-secondary\")}\r\n                                         disabled={pendingApiCallTranslator}\r\n                                         pendingApiCall={pendingApiCallTranslator}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-globe\"/> {isTranslator ? \"Translator rights on\" : \"Translator rights off\"}\r\n                    </ButtonWithProgress>\r\n\r\n                    {\r\n                        isInstitutionOwner &&\r\n                        <>\r\n                            <h5 className=\"mt-4\">Institution</h5>\r\n                            <p>User is a manager of: <span className=\"font-weight-bold\">{institutionName}</span></p>\r\n                            <ButtonWithProgress  onClick={this.onInstitutionRemove}\r\n                                                 className=\"btn btn-lg my-1 btn-danger\"\r\n                                                 disabled={pendingApiCallRemoveInstitution}\r\n                                                 pendingApiCall={pendingApiCallRemoveInstitution}\r\n                                                 hasChildren>\r\n                                <i className=\"fa fa-times\"/> Remove managerial rights\r\n                            </ButtonWithProgress>\r\n                        </>\r\n                    }\r\n\r\n                    <h5 className=\"mt-4\">Ban</h5>\r\n                    <p>Change user's access to the system</p>\r\n                    <ButtonWithProgress  onClick={this.onBanChange}\r\n                                         className={\"btn btn-lg my-1 \" + (isBanned ? \"btn-danger\" : \"btn-primary\")}\r\n                                         disabled={pendingApiCallBan}\r\n                                         pendingApiCall={pendingApiCallBan}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-user\"/> {isBanned ? \"Banned\" : \"Access allowed\"}\r\n                    </ButtonWithProgress>\r\n                </div>\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded p-md-5 p-2 container gray-noise-background mb-3\">\r\n                <h2 className=\"mb-5\">User Details</h2>\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UserDetailPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing buildings of user's institution\r\n * @param props props\r\n */\r\nconst BuildingCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-9\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Registration date: </span>\r\n                        {new Date(props.createdAt).toLocaleDateString(\"en-US\")}\r\n                    </div>\r\n\r\n                    {\r\n                        (props.description !== null && props.description !== \"\") &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Description: </span>\r\n                            {props.description}\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"col-md-3 mt-md-0 mt-3\">\r\n                    <Link exact to={\"/myInstitution/rooms/\" + props.buildingId}>\r\n                        <button type=\"button\" className=\"btn btn-primary w-100\">\r\n                            <i className=\"fa fa-bars\" /> Rooms\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <Link exact to={\"/myInstitution/buildings/\" + props.buildingId}>\r\n                        <button type=\"button\" className=\"btn btn-info w-100 mt-2\">\r\n                            <i className=\"fa fa-pencil\" /> Detail\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <ButtonWithProgress  onClick={() => props.onClickDelete(props.buildingId)}\r\n                                         className=\"btn btn-danger w-100 mt-2\"\r\n                                         disabled={props.pendingApiCall}\r\n                                         pendingApiCall={props.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-times\" /> Delete\r\n                    </ButtonWithProgress>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default BuildingCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport BuildingCard from \"../components/BuildingCard\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n/**\r\n * page with all buildings of an institution that user is managing\r\n */\r\nclass BuildingsPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildings: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n\r\n    /**\r\n     * Called when user wants to delete building\r\n     * @param buildingId building id\r\n     */\r\n    onClickDelete = (buildingId) => {\r\n        // ask before delete\r\n        if(window.confirm(\"Do you really want to delete this building?\")) {\r\n            // update api call for given building\r\n            let newBuildings = [];\r\n            const {buildings} = this.state;\r\n            for (let b of buildings) {\r\n                if(b.buildingId === buildingId) {\r\n                    // set api call to true for deleted building\r\n                    newBuildings.push({...b, pendingApiCall: true});\r\n                }\r\n                else {\r\n                    newBuildings.push({...b});\r\n                }\r\n            }\r\n            this.setState({buildings: newBuildings});\r\n\r\n            // send delete message to server\r\n            apiCalls.deleteBuilding(buildingId).then(response => {\r\n                newBuildings = [...this.state.buildings];\r\n                newBuildings = newBuildings.filter(b => b.buildingId !== buildingId);\r\n\r\n                // if delete was successful update state\r\n                this.setState({buildings: newBuildings});\r\n            }).catch(error => {\r\n                // handle unauthorized error\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch all institution buildings from server\r\n        apiCalls.getBuildings().then(response => {\r\n            const buildings = response.data;\r\n            // set default properties for fetched buildings\r\n            for(let b of buildings) {\r\n                b.pendingApiCall = false;\r\n            }\r\n            this.setState({buildings, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders page with institution buildings\r\n     * @returns {JSX.Element} page with institution buildings\r\n     */\r\n    render() {\r\n\r\n        // maps buildings to building cards\r\n        const buildings = this.state.buildings.map(b =>\r\n            <BuildingCard key={b.buildingId} {...b} onClickDelete={this.onClickDelete}/>\r\n        );\r\n\r\n        // define page content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.buildings.length === 0 ? <h4>There are no buildings</h4> : buildings;\r\n        }\r\n\r\n        // renders page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Institution Buildings</h2>\r\n                <Link exact to=\"/myInstitution/buildings/addBuilding\">\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-success mb-4\">\r\n                        <i className=\"fa fa-plus-circle\" /> Add new building\r\n                    </button>\r\n                </Link>\r\n\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default BuildingsPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\n\r\n/**\r\n * page for creating new buildings\r\n */\r\nclass AddBuildingPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCall: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when new building is submitted\r\n     */\r\n    onBuildingCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCall: true});\r\n\r\n        // get description\r\n        let buildingDescription = this.state.description;\r\n        if(buildingDescription === \"\") {\r\n            buildingDescription = null;\r\n        }\r\n\r\n        // send building to server\r\n        apiCalls.saveBuilding({name: this.state.name, description: buildingDescription}).then(response => {\r\n            this.setState({pendingApiCall: false}, () => this.props.history.push(\"/myInstitution/buildings\"));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCall: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render add building page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCall,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">New Building</h2>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onBuildingCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCall || name === \"\"}\r\n                                         pendingApiCall={pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create building\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddBuildingPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\nimport Spinner from \"../components/Spinner\";\r\n\r\n/**\r\n * page for updating buildings\r\n */\r\nclass UpdateBuildingPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildingId: this.props.match.params.buildingId,\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCallGet: false,\r\n        pendingApiCallUpdate: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallGet: true})\r\n        // fetch building details from the server\r\n        apiCalls.getBuilding(this.state.buildingId).then(response => {\r\n            // set fetched details to page state\r\n            const {name, description} = response.data;\r\n            this.setState({name, description, pendingApiCallGet: false});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when updated building is submitted\r\n     */\r\n    onBuildingUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdate: true});\r\n\r\n        // get description\r\n        let buildingDescription = this.state.description;\r\n        if(buildingDescription === \"\") {\r\n            buildingDescription = null;\r\n        }\r\n\r\n        // send updated building to server\r\n        apiCalls.updateBuilding({name: this.state.name, description: buildingDescription}, this.state.buildingId).then(response => {\r\n            this.setState({pendingApiCallUpdate: false}, () => this.props.history.push(\"/myInstitution/buildings\"));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCallUpdate: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render update building page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCallGet,\r\n            pendingApiCallUpdate,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // return spinner if api call is processing\r\n        if (pendingApiCallGet) {\r\n            return (\r\n                <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                    <Spinner />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Update Building</h2>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onBuildingUpdate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallUpdate || name === \"\"}\r\n                                         pendingApiCall={pendingApiCallUpdate}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Update building\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UpdateBuildingPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing rooms\r\n * @param props props\r\n */\r\nconst RoomCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-9\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Registration date: </span>\r\n                        {new Date(props.createdAt).toLocaleDateString(\"en-US\")}\r\n                    </div>\r\n\r\n                    {\r\n                        (props.description !== null && props.description !== \"\") &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Description: </span>\r\n                            {props.description}\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"col-md-3 mt-md-0 mt-3\">\r\n                    <Link exact to={\"/myInstitution/showcases/\" + props.roomId}>\r\n                        <button type=\"button\" className=\"btn btn-primary w-100\">\r\n                            <i className=\"fa fa-bars\" /> Show-cases\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <Link exact to={\"/myInstitution/rooms/\" + props.buildingId + \"/\" + props.roomId}>\r\n                        <button type=\"button\" className=\"btn btn-info w-100 mt-2\">\r\n                            <i className=\"fa fa-pencil\" /> Detail\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <ButtonWithProgress  onClick={() => props.onClickDelete(props.roomId)}\r\n                                         className=\"btn btn-danger w-100 mt-2\"\r\n                                         disabled={props.pendingApiCall}\r\n                                         pendingApiCall={props.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-times\" /> Delete\r\n                    </ButtonWithProgress>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default RoomCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport RoomCard from \"../components/RoomCard\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n/**\r\n * page with all rooms of a building defined in url\r\n */\r\nclass RoomsPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildingId: this.props.match.params.buildingId,\r\n        rooms: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n\r\n    /**\r\n     * Called when user wants to delete room\r\n     * @param roomId room id\r\n     */\r\n    onClickDelete = (roomId) => {\r\n        // ask before delete\r\n        if(window.confirm(\"Do you really want to delete this room?\")) {\r\n            // update api call for given room\r\n            let newRooms = [];\r\n            const {rooms} = this.state;\r\n            for (let r of rooms) {\r\n                if(r.roomId === roomId) {\r\n                    // set api call to true for deleted room\r\n                    newRooms.push({...r, pendingApiCall: true});\r\n                }\r\n                else {\r\n                    newRooms.push({...r});\r\n                }\r\n            }\r\n            this.setState({rooms: newRooms});\r\n\r\n            // send delete message to server\r\n            apiCalls.deleteRoom(roomId).then(response => {\r\n                newRooms = [...this.state.rooms];\r\n                newRooms = newRooms.filter(r => r.roomId !== roomId);\r\n\r\n                // if delete was successful update state\r\n                this.setState({rooms: newRooms});\r\n            }).catch(error => {\r\n                // handle unauthorized error\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true});\r\n        // fetch all rooms from server\r\n        apiCalls.getRooms(this.state.buildingId).then(response => {\r\n            const rooms = response.data;\r\n            // set default properties for fetched rooms\r\n            for(let r of rooms) {\r\n                r.pendingApiCall = false;\r\n            }\r\n            this.setState({rooms, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders page with rooms\r\n     * @returns {JSX.Element} page with rooms\r\n     */\r\n    render() {\r\n\r\n        // maps rooms to room cards\r\n        const rooms = this.state.rooms.map(r =>\r\n            <RoomCard key={r.roomId} {...r} onClickDelete={this.onClickDelete}/>\r\n        );\r\n\r\n        // define page content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.rooms.length === 0 ? <h4>There are no rooms</h4> : rooms;\r\n        }\r\n\r\n        // renders page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Rooms</h2>\r\n                <Link exact to={\"/myInstitution/rooms/\" + this.state.buildingId + \"/addRoom\"} >\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-success mb-4\">\r\n                        <i className=\"fa fa-plus-circle\" /> Add new room\r\n                    </button>\r\n                </Link>\r\n\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default RoomsPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\n\r\n/**\r\n * page for creating new rooms\r\n */\r\nclass AddRoomPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildingId: this.props.match.params.buildingId,\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCall: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when new room is submitted\r\n     */\r\n    onRoomCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCall: true});\r\n\r\n        // get description\r\n        let roomDescription = this.state.description;\r\n        if(roomDescription === \"\") {\r\n            roomDescription = null;\r\n        }\r\n\r\n        // send room to server\r\n        apiCalls.saveRoom({name: this.state.name, description: roomDescription}, this.state.buildingId).then(response => {\r\n            this.setState({pendingApiCall: false}, () => this.props.history.push(\"/myInstitution/rooms/\" + this.state.buildingId));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCall: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render add room page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCall,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">New Room</h2>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onRoomCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCall || name === \"\"}\r\n                                         pendingApiCall={pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create room\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddRoomPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\nimport Spinner from \"../components/Spinner\";\r\n\r\n/**\r\n * page for updating rooms\r\n */\r\nclass UpdateRoomPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        roomId: this.props.match.params.roomId,\r\n        buildingId: this.props.match.params.buildingId,\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCallGet: false,\r\n        pendingApiCallUpdate: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallGet: true})\r\n        // fetch room details from the server\r\n        apiCalls.getRoom(this.state.roomId).then(response => {\r\n            // set fetched details to page state\r\n            const {name, description} = response.data;\r\n            this.setState({name, description, pendingApiCallGet: false});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when updated room is submitted\r\n     */\r\n    onRoomUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdate: true});\r\n\r\n        // get description\r\n        let roomDescription = this.state.description;\r\n        if(roomDescription === \"\") {\r\n            roomDescription = null;\r\n        }\r\n\r\n        // send updated room to server\r\n        apiCalls.updateRoom({name: this.state.name, description: roomDescription}, this.state.roomId).then(response => {\r\n            this.setState({pendingApiCallUpdate: false}, () => this.props.history.push(\"/myInstitution/rooms/\" + this.state.buildingId));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCallUpdate: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render update room page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCallGet,\r\n            pendingApiCallUpdate,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // return spinner if api call is processing\r\n        if (pendingApiCallGet) {\r\n            return (\r\n                <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                    <Spinner />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Update Room</h2>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onRoomUpdate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallUpdate || name === \"\"}\r\n                                         pendingApiCall={pendingApiCallUpdate}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Update room\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UpdateRoomPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing showcases\r\n * @param props props\r\n */\r\nconst ShowcaseCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-9\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Registration date: </span>\r\n                        {new Date(props.createdAt).toLocaleDateString(\"en-US\")}\r\n                    </div>\r\n\r\n                    {\r\n                        (props.description !== null && props.description !== \"\") &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Description: </span>\r\n                            {props.description}\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"col-md-3 mt-md-0 mt-3\">\r\n                    <Link exact to={\"/myInstitution/showcases/\" + props.roomId + \"/\" + props.showcaseId}>\r\n                        <button type=\"button\" className=\"btn btn-info w-100\">\r\n                            <i className=\"fa fa-pencil\" /> Detail\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <ButtonWithProgress  onClick={() => props.onClickDelete(props.showcaseId)}\r\n                                         className=\"btn btn-danger w-100 mt-2\"\r\n                                         disabled={props.pendingApiCall}\r\n                                         pendingApiCall={props.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-times\" /> Delete\r\n                    </ButtonWithProgress>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default ShowcaseCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport ShowcaseCard from \"../components/ShowcaseCard\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n/**\r\n * page with all showcases of a room defined in url\r\n */\r\nclass ShowcasePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        roomId: this.props.match.params.roomId,\r\n        showcases: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * Called when user wants to delete showcase\r\n     * @param showcaseId showcase id\r\n     */\r\n    onClickDelete = (showcaseId) => {\r\n        // ask before delete\r\n        if(window.confirm(\"Do you really want to delete this show-case?\")) {\r\n            // update api call for given showcase\r\n            let newShowcases = [];\r\n            const {showcases} = this.state;\r\n            for (let s of showcases) {\r\n                if(s.showcaseId === showcaseId) {\r\n                    // set api call to true for deleted showcase\r\n                    newShowcases.push({...s, pendingApiCall: true});\r\n                }\r\n                else {\r\n                    newShowcases.push({...s});\r\n                }\r\n            }\r\n            this.setState({showcases: newShowcases});\r\n\r\n            // send delete message to server\r\n            apiCalls.deleteShowcase(showcaseId).then(response => {\r\n                newShowcases = [...this.state.showcases];\r\n                newShowcases = newShowcases.filter(s => s.showcaseId !== showcaseId);\r\n\r\n                // if delete was successful update state\r\n                this.setState({showcases: newShowcases});\r\n            }).catch(error => {\r\n                // handle unauthorized error\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true});\r\n        // fetch all showcases from server\r\n        apiCalls.getShowcases(this.state.roomId).then(response => {\r\n            const showcases = response.data;\r\n            // set default properties for fetched showcases\r\n            for(let s of showcases) {\r\n                s.pendingApiCall = false;\r\n            }\r\n            this.setState({showcases, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders page with showcases\r\n     * @returns {JSX.Element} page with showcases\r\n     */\r\n    render() {\r\n\r\n        // maps showcases to showcase cards\r\n        const showcases = this.state.showcases.map(s =>\r\n            <ShowcaseCard key={s.showcaseId} {...s} onClickDelete={this.onClickDelete}/>\r\n        );\r\n\r\n        // define page content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.showcases.length === 0 ? <h4>There are no show-cases</h4> : showcases;\r\n        }\r\n\r\n        // renders page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Show-cases</h2>\r\n                <Link exact to={\"/myInstitution/showcases/\" + this.state.roomId + \"/addShowcase\"} >\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-success mb-4\">\r\n                        <i className=\"fa fa-plus-circle\" /> Add new show-case\r\n                    </button>\r\n                </Link>\r\n\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ShowcasePage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\n\r\n/**\r\n * page for creating new showcases\r\n */\r\nclass AddShowcasePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        roomId: this.props.match.params.roomId,\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCall: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when new showcase is submitted\r\n     */\r\n    onShowcaseCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCall: true});\r\n\r\n        // get description\r\n        let showcaseDescription = this.state.description;\r\n        if(showcaseDescription === \"\") {\r\n            showcaseDescription = null;\r\n        }\r\n\r\n        // send showcase to server\r\n        apiCalls.saveShowcase({name: this.state.name, description: showcaseDescription}, this.state.roomId).then(response => {\r\n            this.setState({pendingApiCall: false}, () => this.props.history.push(\"/myInstitution/showcases/\" + this.state.roomId));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCall: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render add showcase page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCall,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">New Show-case</h2>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onShowcaseCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCall || name === \"\"}\r\n                                         pendingApiCall={pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create show-case\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddShowcasePage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\nimport Spinner from \"../components/Spinner\";\r\n\r\n/**\r\n * page for updating showcases\r\n */\r\nclass UpdateShowcasePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        roomId: this.props.match.params.roomId,\r\n        showcaseId: this.props.match.params.showcaseId,\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCallGet: false,\r\n        pendingApiCallUpdate: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallGet: true});\r\n        // fetch showcase details from the server\r\n        apiCalls.getShowcase(this.state.showcaseId).then(response => {\r\n            // set fetched details to page state\r\n            const {name, description} = response.data;\r\n            this.setState({name, description, pendingApiCallGet: false});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when updated showcase is submitted\r\n     */\r\n    onShowcaseUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdate: true});\r\n\r\n        // get description\r\n        let showcaseDescription = this.state.description;\r\n        if(showcaseDescription === \"\") {\r\n            showcaseDescription = null;\r\n        }\r\n\r\n        // send updated showcase to server\r\n        apiCalls.updateShowcase({name: this.state.name, description: showcaseDescription}, this.state.showcaseId).then(response => {\r\n            this.setState({pendingApiCallUpdate: false}, () => this.props.history.push(\"/myInstitution/showcases/\" + this.state.roomId));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCallUpdate: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render update room page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCallGet,\r\n            pendingApiCallUpdate,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // return spinner if api call is processing\r\n        if (pendingApiCallGet) {\r\n            return (\r\n                <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                    <Spinner />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <div className=\"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3\">\r\n                <h2 className=\"mb-5 font-weight-bold\">Update Show-case</h2>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onShowcaseUpdate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallUpdate || name === \"\"}\r\n                                         pendingApiCall={pendingApiCallUpdate}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Update show-case\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UpdateShowcasePage;","import React, {Component} from 'react';\nimport Layout from \"./components/Layout\"\nimport {Route, Switch, Redirect} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport HomePage from \"./pages/HomePage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport SignupPage from \"./pages/SignupPage\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport MyInstitutionPage from \"./pages/MyInstitutionPage\";\nimport AddLanguagesPage from \"./pages/AddLanguagesPage\";\nimport AddExhibitPage from \"./pages/AddExhibitPage\";\nimport MyInstitutionExhibitsPage from \"./pages/MyInstitutionExhibitsPage\";\nimport UpdateExhibitPage from \"./pages/UpdateExhibitPage\";\nimport TranslateInstitutionsPage from \"./pages/TranslateInstitutionsPage\";\nimport TranslateExhibitPage from \"./pages/TranslateExhibitPage\";\nimport NewTranslationPage from \"./pages/NewTranslationPage\";\nimport TranslatorRatePage from \"./pages/TranslatorRatePage\";\nimport ApproveExhibitPage from \"./pages/ApproveExhibitPage\";\nimport OwnerRatePage from \"./pages/OwnerRatePage\";\nimport MyTranslationsPage from \"./pages/MyTranslationsPage\";\nimport TranslationSequencePage from \"./pages/TranslationSequencePage\";\nimport UserManagerPage from \"./pages/UserManagerPage\";\nimport UserDetailPage from \"./pages/UserDetailPage\";\nimport BuildingsPage from \"./pages/BuildingsPage\";\nimport AddBuildingPage from \"./pages/AddBuildingPage\";\nimport UpdateBuildingPage from \"./pages/UpdateBuildingPage\";\nimport RoomsPage from \"./pages/RoomsPage\";\nimport AddRoomPage from \"./pages/AddRoomPage\";\nimport UpdateRoomPage from \"./pages/UpdateRoomPage\";\nimport ShowcasesPage from \"./pages/ShowcasesPage\";\nimport AddShowcasePage from \"./pages/AddShowcasePage\";\nimport UpdateShowcasePage from \"./pages/UpdateShowcasePage\";\n\n\n/**\n * high level component representing whole app\n */\nclass App extends Component {\n\n  render() {\n    const {user} = this.props;\n\n    // all routes available in app with its authorization\n    let routes = (\n        <Switch>\n          <Route exact path=\"/\" component={HomePage}/>\n          <Route exact path=\"/login\" component={LoginPage}/>\n          <Route exact path=\"/signup\" component={SignupPage}/>\n          {user.isLoggedIn && <Route exact path=\"/profile\" component={ProfilePage} />}\n          {user.isLoggedIn && <Route exact path=\"/myInstitution\" component={MyInstitutionPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/addLanguages\" component={AddLanguagesPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/addExhibit\" component={AddExhibitPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/exhibits\" component={MyInstitutionExhibitsPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/exhibits/:exhibitId\" component={UpdateExhibitPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/approve\" component={ApproveExhibitPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/approve/:exhibitId/:languageId\" component={OwnerRatePage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/buildings\" component={BuildingsPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/buildings/addBuilding\" component={AddBuildingPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/buildings/:buildingId\" component={UpdateBuildingPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/rooms/:buildingId\" component={RoomsPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/rooms/:buildingId/addRoom\" component={AddRoomPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/rooms/:buildingId/:roomId\" component={UpdateRoomPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/showcases/:roomId\" component={ShowcasesPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/showcases/:roomId/addShowcase\" component={AddShowcasePage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/showcases/:roomId/:showcaseId\" component={UpdateShowcasePage} />}\n          {user.isTranslator && <Route exact path=\"/institutions\" component={TranslateInstitutionsPage} />}\n          {user.isTranslator && <Route exact path=\"/institutions/:institutionId\" component={TranslateExhibitPage} />}\n          {user.isTranslator && <Route exact path=\"/institutions/:institutionId/translate/:exhibitId/:languageId\" component={NewTranslationPage} />}\n          {user.isTranslator && <Route exact path=\"/institutions/:institutionId/rate/:exhibitId/:languageId\" component={TranslatorRatePage} />}\n          {user.isTranslator && <Route exact path=\"/myTranslations\" component={MyTranslationsPage} />}\n          {user.isTranslator && <Route exact path=\"/myTranslations/:exhibitId/:languageId\" component={TranslationSequencePage} />}\n          {user.isAdmin && <Route exact path=\"/users\" component={UserManagerPage} />}\n          {user.isAdmin && <Route exact path=\"/users/:userId\" component={UserDetailPage} />}\n          <Redirect to=\"/\"/>\n        </Switch>\n    );\n\n    // renders app\n    return (\n        <Layout>\n          {routes}\n        </Layout>\n    );\n  }\n}\n\n\n/**\n * maps redux state to props\n * @param state redux state\n */\nconst mapStateToProps = (state) => {\n  return {\n    user: state,\n  };\n}\n\nexport default connect(mapStateToProps)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {BrowserRouter} from \"react-router-dom\";\nimport store from \"./store/store\";\nimport {Provider} from \"react-redux\";\n\n/**\n * start point of application, renders web\n */\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <BrowserRouter>\n                <App />\n            </BrowserRouter>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);"],"sourceRoot":""}