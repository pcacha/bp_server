(this.webpackJsonpbp_client=this.webpackJsonpbp_client||[]).push([[0],{142:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(23),r=a.n(i),c=(a(76),a(4)),l=a(5),o=a(7),d=a(6),b=a(10),u=a(0),m=function(e){return Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(b.c,{exact:!0,activeClassName:"active",className:"nav-link",to:e.to,children:e.children})})},h=a(14),p=a(8),j=a.n(p),g=function(e){var t=e.token;e.isLoggedIn?j.a.defaults.headers.common.Authorization=t:delete j.a.defaults.headers.common.Authorization},f=function(e){return j.a.put("/users/updateUser",e)},O=function(e){return j.a.put("/users/updatePassword",e)},x=function(e){return j.a.post("/institutions/myInstitution",e)},v=function(e){return j.a.put("/institutions/myInstitution/updateImage",e)},C=function(e){return j.a.put("/institutions/myInstitution",e)},N=function(e){return j.a.post("/institutions/myInstitution/languages/"+e)},I=function(e){return j.a.post("/exhibits",e)},w=function(e){return j.a.delete("/exhibits/"+e)},y=function(e,t){return j.a.put("/exhibits/"+e+"/updateImage",t)},A=function(e,t){return j.a.put("/exhibits/"+e+"/updateInfoLabel",t)},S=function(e,t){return j.a.put("/exhibits/"+e,t)},k=function(e){return j.a.post("/institutions/myInstitution/addManager",e)},E=function(){return j.a.delete("/institutions/myInstitution")},U=function(e,t,a){return j.a.post("/translations/new/"+e+"/"+t,a)},D=function(e,t){return j.a.get("/translations/rate/"+e+"/"+t)},L=function(e,t){return j.a.put("/translations/like/"+e,t)},T=function(e,t){return j.a.put("/translations/official/"+e,t)},R=function(e,t){return j.a.delete("/translations/sequences/"+e+"/"+t)},M=function(e){return j.a.delete("/translations/sequence/"+e)},P=function(e,t){return j.a.put("/admin/users/"+e+"/updateUsername",t)},B=function(e){return j.a.put("/admin/users/"+e+"/updatePassword")},_=function(e,t){return j.a.put("/admin/users/"+e+"/updateTranslator",t)},G=function(e,t){return j.a.put("/admin/users/"+e+"/updateBan",t)},q=function(e){return j.a.put("/admin/users/"+e+"/removeInstitution")},F=function(e){return j.a.get("/exhibits/"+e+"/qrcode")},z=function(){return j.a.get("/location/buildings")},V=function(e){return j.a.post("/location/buildings",e)},J=function(e){return j.a.delete("/location/buildings/"+e)},Q=function(e,t){return j.a.put("/location/buildings/"+t,e)},X=function(e){return j.a.delete("/location/rooms/"+e)},K=function(e){return j.a.get("/location/rooms/all/"+e)},H=function(e,t){return j.a.post("/location/rooms/"+t,e)},W=function(e,t){return j.a.put("/location/rooms/"+t,e)},Y=function(e){return j.a.delete("/location/showcases/"+e)},Z=function(e){return j.a.get("/location/showcases/all/"+e)},$=function(e,t){return j.a.post("/location/showcases/"+t,e)},ee=function(e,t){return j.a.put("/location/showcases/"+t,e)},te="LOGOUT_SUCCESS",ae="LOGIN_SUCCESS",ne="SET_USERNAME",se="SET_EMAIL",ie="SET_IS_INSTITUTION_OWNER",re=a(70),ce=function(e){return function(t){return function(e){return j.a.post("/users/login",e)}(e).then((function(e){return t(le(e.data.token)),e}))}},le=function(e){var t=Object(re.a)(e),a={id:t.id,username:t.username,email:t.email,createdAt:t.createdAt,isTranslator:t.isTranslator,isInstitutionOwner:t.isInstitutionOwner,isAdmin:t.isAdmin,isLoggedIn:!0,token:e,expiredAt:t.exp};return{type:ae,payload:a}},oe=function(){return function(e){j.a.get("/users/token").then((function(t){e(le(t.data.token))}))}},de=function(e){return function(t){return function(e){return j.a.post("/users/register",e)}(e).then((function(a){var n={username:e.username,password:e.password};return t(ce(n))}))}},be=function(){return{type:te}},ue=function(e){return{type:ie,payload:e}},me=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.user;return Object(u.jsx)("div",{className:"position-fixed w-100 fixed-header",children:Object(u.jsx)("nav",{className:"blue-nav navbar navbar-expand-lg navbar-light",id:"blue-nav",children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(b.b,{className:"navbar-brand",to:"/",children:"CTS"}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(u.jsxs)("ul",{className:"navbar-nav ml-auto d-flex align-items-center",children:[Object(u.jsx)(m,{to:"/",children:"Home"}),t.isAdmin&&Object(u.jsx)(m,{to:"/users",children:"Users"}),t.isTranslator&&Object(u.jsx)(m,{to:"/institutions",children:"Translate"}),t.isInstitutionOwner&&Object(u.jsx)(m,{to:"/approve",children:"Approve"}),t.isLoggedIn?Object(u.jsxs)("li",{className:"nav-item dropdown",children:[Object(u.jsxs)("a",{className:"nav-link",id:"navbarDropdown",role:"button",href:"/#","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[t.username+" ",Object(u.jsx)("i",{className:"fa fa-user","aria-hidden":"true"})]}),Object(u.jsxs)("div",{className:"my-dropdown dropdown-menu","aria-labelledby":"navbarDropdown",children:[t.isTranslator&&Object(u.jsxs)(b.c,{className:"dropdown-item",to:"/myTranslations",children:[Object(u.jsx)("i",{className:"fa fa-globe"})," My Translations"]}),Object(u.jsxs)(b.c,{className:"dropdown-item",to:"/myInstitution",children:[Object(u.jsx)("i",{className:"fa fa-home"})," My Institution"]}),Object(u.jsxs)(b.c,{className:"dropdown-item",to:"/profile",children:[Object(u.jsx)("i",{className:"fa fa-user"})," My Profile"]}),Object(u.jsx)("div",{className:"dropdown-divider"}),Object(u.jsxs)("a",{onClick:function(t){t.preventDefault(),e.props.logout()},href:"/#",className:"dropdown-item",id:"logout",children:[Object(u.jsx)("i",{className:"fa fa-sign-out"})," Logout"]})]})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m,{to:"/signup",children:"Signup"}),Object(u.jsx)(m,{to:"/login",children:"Login"})]})]})})]})})})}}]),a}(n.Component),he=Object(h.b)((function(e){return{user:e}}),(function(e){return{logout:function(){return e(be())}}}))(me);var pe=function(e){return Object(u.jsx)("footer",{className:"position-fixed d-flex justify-content-center align-items-center w-100",children:"Community Translation System \xa9Pavel \u010c\xe1cha"})},je=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(he,{}),e.children,Object(u.jsx)(pe,{})]})},ge=a(12),fe=function(e){return Object(u.jsx)("div",{className:"intro",children:Object(u.jsx)("div",{className:"jumbotron jumbotron-fluid bg-transparent",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"blurred-black p-3 rounded-lg",children:[Object(u.jsx)("h1",{className:"display-4 font-weight-bold",children:"The System for Community Translation of Information Texts"}),Object(u.jsx)("p",{className:"lead font-weight-bold",children:"The place where you can show your skill while helping cultural institutions to grow"})]})})})})},Oe=function(e){return Object(u.jsx)("div",{className:"col mt-2",children:Object(u.jsxs)("div",{className:"my-card border rounded",children:[Object(u.jsx)("h3",{children:e.title}),Object(u.jsx)("p",{children:e.info})]})})},xe=function(e){return Object(u.jsxs)("div",{className:"bg-white",children:[Object(u.jsx)(fe,{}),Object(u.jsxs)("div",{className:"container mt-5 pb-5",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col d-flex justify-content-center align-items-center flex-column",children:[Object(u.jsx)("h3",{children:"Our goals"}),Object(u.jsx)("p",{children:"The site is intended for anyone who wants to participate in community translation of information texts of cultural institutions"})]})}),Object(u.jsxs)("div",{className:"row mt-3 bottom-padding",children:[Object(u.jsx)(Oe,{title:"Become a Translator",info:"Join the community of translators and start translating today!"}),Object(u.jsx)(Oe,{title:"Register Your Institution",info:"Register your institution and let the community translate your chosen information texts!"}),Object(u.jsx)(Oe,{title:"Mobile Application",info:"Visitors to your cultural institution will be able to find the translated texts in our mobile application!"})]})]})]})},ve=a(9),Ce=function(e){return Object(u.jsxs)("button",{disabled:e.disabled,className:e.className||"btn btn-primary",onClick:e.onClick,children:[e.pendingApiCall&&Object(u.jsx)("div",{className:"spinner-border\r text-light spinner-border-sm mr-1",children:Object(u.jsx)("span",{className:"sr-only",children:"Loading..."})}),e.hasChildren?e.children:e.text]})},Ne=function(e){var t="form-control";"file"===e.type&&(t+=" custom-file-input"),void 0!==e.hasError&&(t+=e.hasError?" is-invalid":" is-valid");var a=Object(u.jsx)("input",{className:t,type:e.type||"text",name:e.name,placeholder:e.placeholder,value:e.value,onChange:e.onChange});return"file"===e.type?a=Object(u.jsxs)("div",{className:"custom-file",children:[Object(u.jsx)("input",{type:"file",className:t,id:"institutionImageFile",name:e.name,value:e.value,onChange:e.onChange,accept:e.onlyImage&&".jpg, .png, .jpeg"}),Object(u.jsx)("label",{className:"custom-file-label",htmlFor:"institutionImageFile",children:e.placeholder})]}):"textarea"===e.type&&(a=Object(u.jsx)("textarea",{className:t,name:e.name,placeholder:e.placeholder,value:e.value,onChange:e.onChange,rows:"3"})),Object(u.jsxs)(u.Fragment,{children:[e.label&&Object(u.jsx)("label",{className:e.boldLabel&&"font-weight-bold",children:e.label}),a,e.hasError&&Object(u.jsx)("div",{className:"text-danger",children:Object(u.jsx)("small",{children:e.error})})]})},Ie=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",apiError:{},pendingApiCall:!1},e.onChange=function(t){var a;e.setState((a={},Object(ve.a)(a,t.target.name,t.target.value),Object(ve.a)(a,"apiError",{}),a))},e.onClickLogin=function(t){t.preventDefault();var a={username:e.state.username,password:e.state.password};e.setState({pendingApiCall:!0}),e.props.login(a).then((function(t){e.setState({pendingApiCall:!1},(function(){e.props.history.push("/")}))})).catch((function(t){t.response&&e.setState({apiError:t.response.data,pendingApiCall:!1})}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=!1;return""!==this.state.username&&""!==this.state.password||(t=!0),Object(u.jsxs)("form",{className:"mx-auto bg-white mt-5 border rounded p-2 p-md-5 container auth-div gray-noise-background mb-3",children:[Object(u.jsx)("h4",{className:"mb-4 font-weight-bold",children:"Log in"}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",name:"username",placeholder:"Enter name",value:this.state.username,onChange:this.onChange,hasError:this.state.apiError.username&&!0,error:this.state.apiError.username})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Password",name:"password",placeholder:"Enter password",type:"password",value:this.state.password,onChange:this.onChange,hasError:this.state.apiError.password&&!0,error:this.state.apiError.password})}),Object(u.jsxs)(Ce,{className:"btn btn-primary w-100 my-2",onClick:function(t){return e.onClickLogin(t)},disabled:t||this.state.pendingApiCall,pendingApiCall:this.state.pendingApiCall,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Log in"]}),Object(u.jsx)(b.b,{to:"/signup",children:"Don't have an account? Sign up"})]})}}]),a}(n.Component),we=Object(h.b)(null,(function(e){return{login:function(t){return e(ce(t))}}}))(Ie),ye=a(2),Ae=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={username:"",email:"",password:"",passwordRepeat:"",pendingApiCall:!1,errors:{},passwordRepeatConfirmed:!0},e.onChange=function(t){if("passwordRepeat"===t.target.name){var a=t.target.value,n=e.state.password===a,s=Object(ye.a)({},e.state.errors);s.passwordRepeat=n?"":"Passwords do not match",e.setState({passwordRepeatConfirmed:n,errors:s})}else if("password"===t.target.name){var i=t.target.value,r=e.state.passwordRepeat===i,c=Object(ye.a)({},e.state.errors);c.passwordRepeat=r?"":"Passwords do not match",delete c[t.target.name],e.setState({passwordRepeatConfirmed:r,errors:c})}else{var l=Object(ye.a)({},e.state.errors);delete l[t.target.name],e.setState({errors:l})}e.setState(Object(ve.a)({},t.target.name,t.target.value))},e.onClickSignup=function(t){t.preventDefault();var a={username:e.state.username,email:e.state.email,password:e.state.password};e.setState({pendingApiCall:!0}),e.props.signup(a).then((function(t){e.setState({pendingApiCall:!1},(function(){return e.props.history.push("/")}))})).catch((function(t){var a=Object(ye.a)({},e.state.errors);t.response.data&&t.response.data.validationErrors&&(a=Object(ye.a)({},t.response.data.validationErrors)),e.setState({pendingApiCall:!1,errors:a})}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=!1;return""!==this.state.username&&""!==this.state.email&&""!==this.state.password&&""!==this.state.passwordRepeat||(t=!0),Object(u.jsx)("div",{className:"mx-auto bg-white mt-5 border rounded p-2 p-md-5 container auth-div gray-noise-background mb-3",children:Object(u.jsxs)("form",{children:[Object(u.jsx)("h4",{className:"mb-4 font-weight-bold",children:"Sign up"}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"username",value:this.state.username,onChange:this.onChange,hasError:this.state.errors.username&&!0,error:this.state.errors.username})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"E-mail",placeholder:"Enter e-mail",name:"email",value:this.state.email,onChange:this.onChange,hasError:this.state.errors.email&&!0,error:this.state.errors.email})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Password",placeholder:"Enter password",name:"password",value:this.state.password,onChange:this.onChange,type:"password",hasError:this.state.errors.password&&!0,error:this.state.errors.password})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Confirm Password",placeholder:"Enter password again",name:"passwordRepeat",value:this.state.passwordRepeat,onChange:this.onChange,type:"password",hasError:this.state.errors.passwordRepeat&&!0,error:this.state.errors.passwordRepeat})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickSignup(t)},className:"btn btn-primary w-100 my-2",disabled:this.state.pendingApiCall||!this.state.passwordRepeatConfirmed||t,pendingApiCall:this.state.pendingApiCall,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Sign up"]})]})})}}]),a}(n.Component),Se=Object(h.b)(null,(function(e){return{signup:function(t){return e(de(t))}}}))(Ae),ke=a(24),Ee=a(71),Ue={id:0,username:"",email:"",createdAt:null,isTranslator:!1,isInstitutionOwner:!1,isAdmin:!1,isLoggedIn:!1,token:"",expiredAt:null};function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Object(ye.a)({},Ue);case ae:return Object(ye.a)({},t.payload);case ne:return Object(ye.a)(Object(ye.a)({},e),{},{username:t.payload});case se:return Object(ye.a)(Object(ye.a)({},e),{},{email:t.payload});case ie:return Object(ye.a)(Object(ye.a)({},e),{},{isInstitutionOwner:t.payload});default:return e}}var Le=localStorage.getItem("user"),Te={id:0,username:"",email:"",createdAt:null,isTranslator:!1,isInstitutionOwner:!1,isAdmin:!1,isLoggedIn:!1,token:"",expiredAt:null},Re=Te,Me=!1;if(Le)try{Re=JSON.parse(Le);var Pe=Date.now()/1e3;Re.expiredAt>Pe?(g(Re),Me=!0):Re=Te}catch(Oa){console.log("Error parsing stored user")}var Be,_e=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Ge=[Ee.a];(Be=window.navigator.userAgent.includes("Chrome")&&_e?Object(ke.c)(De,Re,Object(ke.b)(ke.a.apply(void 0,Ge),_e)):Object(ke.c)(De,Re,Object(ke.b)(ke.a.apply(void 0,Ge)))).subscribe((function(){var e=Be.getState();localStorage.setItem("user",JSON.stringify(e)),g(e),setTimeout((function(){e.id===Be.getState().id&&Be.dispatch(oe())}),6e8)})),Me&&Be.dispatch(oe());var qe=Be;function Fe(e){return new Promise((function(t,a){var n=e.response.status;401!==n&&403!==n||qe.dispatch(be()),a(e)}))}var ze=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={username:e.props.user.username,email:e.props.user.email,password:"",passwordRepeat:"",passwordRepeatConfirmed:!0,pendingApiCallUpdateUser:!1,pendingApiCallUpdatePassword:!1,userUpdated:!1,passwordUpdated:!1,errors:{}},e.onChange=function(t){if("passwordRepeat"===t.target.name){var a=t.target.value,n=e.state.password===a,s=Object(ye.a)({},e.state.errors);s.passwordRepeat=n?"":"Passwords do not match",e.setState({passwordRepeatConfirmed:n,errors:s,passwordUpdated:!1})}else if("password"===t.target.name){var i=t.target.value,r=e.state.passwordRepeat===i,c=Object(ye.a)({},e.state.errors);c.passwordRepeat=r?"":"Passwords do not match",delete c[t.target.name],e.setState({passwordRepeatConfirmed:r,errors:c,passwordUpdated:!1})}else{var l=Object(ye.a)({},e.state.errors);delete l[t.target.name],e.setState({errors:l,userUpdated:!1})}e.setState(Object(ve.a)({},t.target.name,t.target.value))},e.handleApiError=function(t,a){if(t.response.data&&t.response.data.validationErrors){var n,s=Object(ye.a)(Object(ye.a)({},e.state.errors),t.response.data.validationErrors);e.setState((n={},Object(ve.a)(n,a,!1),Object(ve.a)(n,"errors",s),n))}},e.onClickUserUpdate=function(t){t.preventDefault(),e.setState({pendingApiCallUpdateUser:!0});var a=e.state,n=a.username,s=a.email;f({username:n,email:s}).then((function(t){e.setState({pendingApiCallUpdateUser:!1,userUpdated:!0}),e.props.setUsername(n),e.props.setEmail(s)})).catch((function(e){return Fe(e)})).catch((function(t){e.handleApiError(t,"pendingApiCallUpdateUser")}))},e.onClickPasswordUpdate=function(t){t.preventDefault(),e.setState({pendingApiCallUpdatePassword:!0});var a=e.state.password;O({password:a}).then((function(t){var a=Object(ye.a)({},e.state.errors);delete a.passwordRepeat,e.setState({errors:a,pendingApiCallUpdatePassword:!1,passwordUpdated:!0,password:"",passwordRepeat:""})})).catch((function(e){return Fe(e)})).catch((function(t){e.handleApiError(t,"pendingApiCallUpdatePassword")}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.email,s=t.password,i=t.passwordRepeat,r=t.pendingApiCallUpdateUser,c=t.pendingApiCallUpdatePassword,l=t.passwordRepeatConfirmed,o=t.userUpdated,d=t.passwordUpdated,b=t.errors,m=this.props.user.createdAt;return Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded p-md-5 p-2 container gray-noise-background mb-3",children:[Object(u.jsx)("h2",{className:"mb-4 font-weight-bold",children:"My Profile"}),Object(u.jsxs)("div",{className:"mb-4",children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Registration date: "}),new Date(1*m).toLocaleDateString("en-US")]}),Object(u.jsxs)("form",{className:"mb-4",children:[o&&Object(u.jsx)("div",{className:"alert alert-success",role:"alert",children:"Personal information has been updated"}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",name:"username",value:a,onChange:this.onChange,hasError:b.username&&!0,error:b.username})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"E-mail",name:"email",value:n,onChange:this.onChange,hasError:b.email&&!0,error:b.email})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickUserUpdate(t)},className:"btn btn-primary w-100 my-2",disabled:r||""===a||""===n,pendingApiCall:r,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Update information"]})]}),Object(u.jsxs)("form",{children:[d&&Object(u.jsx)("div",{className:"alert alert-success",role:"alert",children:"Password ha been updated"}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Password",placeholder:"Enter password",name:"password",value:s,onChange:this.onChange,type:"password",hasError:b.password&&!0,error:b.password})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Confirm Password",placeholder:"Enter password again",name:"passwordRepeat",value:i,onChange:this.onChange,type:"password",hasError:b.passwordRepeat&&!0,error:b.passwordRepeat})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickPasswordUpdate(t)},className:"btn btn-primary w-100 my-2",disabled:c||!l||""===s||""===i,pendingApiCall:c,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Change password"]})]})]})}}]),a}(n.Component),Ve=Object(h.b)((function(e){return{user:e}}),(function(e){return{setUsername:function(t){return e(function(e){return{type:ne,payload:e}}(t))},setEmail:function(t){return e(function(e){return{type:se,payload:e}}(t))}}}))(ze),Je=function(){return Object(u.jsx)("div",{className:"d-flex",children:Object(u.jsx)("div",{className:"spinner-border text-black-50 m-auto",children:Object(u.jsx)("span",{className:"sr-only",children:"Loading..."})})})},Qe=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={name:"",address:"",description:"",latitudeString:"",longitudeString:"",encodedImage:null,imageSelect:"",pendingApiCall:!1,errors:{}},e.onChange=function(t){var a=Object(ye.a)({},e.state.errors);delete a[t.target.name],e.setState(Object(ve.a)({errors:a},t.target.name,t.target.value))},e.onImageSelect=function(t){var a=Object(ye.a)({},e.state.errors);if(delete a.encodedImage,e.setState(Object(ve.a)({errors:a},t.target.name,t.target.value)),0!==t.target.files.length){var n=t.target.files[0],s=new FileReader;s.onloadend=function(){e.setState({encodedImage:s.result})},s.readAsDataURL(n)}},e.clearImage=function(){var t=Object(ye.a)({},e.state.errors);delete t.encodedImage,e.setState({errors:t,encodedImage:null,imageSelect:""})},e.onClickCreate=function(t){t.preventDefault(),e.setState({pendingApiCall:!0});var a={name:e.state.name,address:e.state.address,description:e.state.description,latitudeString:e.state.latitudeString,longitudeString:e.state.longitudeString,encodedImage:e.state.encodedImage};x(a).then((function(t){e.setState({pendingApiCall:!1},(function(){e.props.setIsInstitutionOwner(!0),e.props.redirect("/myInstitution/addLanguages")}))})).catch((function(e){return Fe(e)})).catch((function(t){var a=Object(ye.a)({},e.state.errors);t.response.data&&t.response.data.validationErrors&&(a=Object(ye.a)({},t.response.data.validationErrors)),e.setState({pendingApiCall:!1,errors:a})}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=!1;return""!==this.state.name&&""!==this.state.address&&""!==this.state.description&&""!==this.state.latitudeString&&""!==this.state.longitudeString||(t=!0),Object(u.jsx)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:Object(u.jsxs)("form",{children:[Object(u.jsx)("h2",{className:"mb-4 font-weight-bold",children:"Create Institution"}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)(Ne,{type:"file",onlyImage:!0,value:this.state.imageSelect,name:"imageSelect",label:"Institution image",placeholder:"Select institution image",onChange:this.onImageSelect,hasError:this.state.errors.encodedImage&&!0,error:this.state.errors.encodedImage}),this.state.encodedImage&&Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail mt-2",src:this.state.encodedImage,alt:"upload"}),Object(u.jsx)("br",{}),Object(u.jsxs)("button",{className:"btn btn-danger btn-lg mt-2",onClick:this.clearImage,children:[Object(u.jsx)("i",{className:"fa fa-times"})," Clear"]})]})]}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"name",value:this.state.name,onChange:this.onChange,hasError:this.state.errors.name&&!0,error:this.state.errors.name})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Address",placeholder:"Enter address",name:"address",value:this.state.address,onChange:this.onChange,hasError:this.state.errors.address&&!0,error:this.state.errors.address})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Description",type:"textarea",placeholder:"Enter description",name:"description",value:this.state.description,onChange:this.onChange,hasError:this.state.errors.description&&!0,error:this.state.errors.description})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Latitude",placeholder:"Enter latitude",name:"latitudeString",value:this.state.latitudeString,onChange:this.onChange,hasError:this.state.errors.latitudeString&&!0,error:this.state.errors.latitudeString})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Longitude",placeholder:"Enter longitude",name:"longitudeString",value:this.state.longitudeString,onChange:this.onChange,hasError:this.state.errors.longitudeString&&!0,error:this.state.errors.longitudeString})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickCreate(t)},className:"btn btn-primary w-100 my-2",disabled:this.state.pendingApiCall||t,pendingApiCall:this.state.pendingApiCall,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Create institution"]})]})})}}]),a}(n.Component),Xe=Object(h.b)(null,(function(e){return{setIsInstitutionOwner:function(t){return e(ue(t))}}}))(Qe),Ke="http://localhost:8080/institutions_images/",He="http://localhost:8080/exhibits_images/",We="http://localhost:8080/info_labels_images/",Ye="Select...",Ze=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={name:e.props.institution.name,address:e.props.institution.address,description:e.props.institution.description,latitudeString:e.props.institution.latitude,longitudeString:e.props.institution.longitude,image:e.props.institution.image,encodedImage:null,imageSelect:"",createdAt:e.props.institution.createdAt,email:"",pendingApiCallUpdateInstitution:!1,pendingApiCallUpdateImage:!1,pendingApiCallDeleteInstitution:!1,pendingApiCallAddManager:!1,institutionUpdated:!1,imageUpdated:!1,managerAdded:!1,errors:{}},e.onImageSelect=function(t){var a,n=Object(ye.a)({},e.state.errors);if(delete n.encodedImage,e.setState((a={errors:n},Object(ve.a)(a,t.target.name,t.target.value),Object(ve.a)(a,"imageUpdated",!1),a)),0!==t.target.files.length){var s=t.target.files[0],i=new FileReader;i.onloadend=function(){e.setState({encodedImage:i.result})},i.readAsDataURL(s)}},e.clearImage=function(){var t=Object(ye.a)({},e.state.errors);delete t.encodedImage,e.setState({errors:t,encodedImage:null,imageSelect:""})},e.handleApiError=function(t,a){if(t.response.data&&t.response.data.validationErrors){var n,s=Object(ye.a)(Object(ye.a)({},e.state.errors),t.response.data.validationErrors);e.setState((n={},Object(ve.a)(n,a,!1),Object(ve.a)(n,"errors",s),n))}},e.onClickImageUpdate=function(t){t.preventDefault(),e.setState({pendingApiCallUpdateImage:!0});var a={encodedImage:e.state.encodedImage};v(a).then((function(t){e.setState({pendingApiCallUpdateImage:!1,image:t.data.message,imageUpdated:!0},(function(){e.clearImage()}))})).catch((function(e){return Fe(e)})).catch((function(t){e.handleApiError(t,"pendingApiCallUpdateImage")}))},e.onChange=function(t){var a=Object(ye.a)({},e.state.errors);delete a[t.target.name],e.setState(Object(ve.a)({errors:a,institutionUpdated:!1},t.target.name,t.target.value))},e.onEmailChange=function(t){var a=Object(ye.a)({},e.state.errors);delete a[t.target.name],e.setState(Object(ve.a)({errors:a,managerAdded:!1},t.target.name,t.target.value))},e.onClickInstitutionUpdate=function(t){t.preventDefault(),e.setState({pendingApiCallUpdateInstitution:!0});var a={name:e.state.name,address:e.state.address,description:e.state.description,latitudeString:e.state.latitudeString,longitudeString:e.state.longitudeString};C(a).then((function(t){e.setState({pendingApiCallUpdateInstitution:!1,institutionUpdated:!0})})).catch((function(e){return Fe(e)})).catch((function(t){e.handleApiError(t,"pendingApiCallUpdateInstitution")}))},e.onClickInstitutionDelete=function(){window.confirm("Do you really want to delete your institution?")&&(e.setState({pendingApiCallDeleteInstitution:!0}),E().then((function(t){e.setState({pendingApiCallDeleteInstitution:!1},(function(){e.props.setIsInstitutionOwner(!1),e.props.redirect("/")}))})).catch((function(e){return Fe(e)})))},e.onClickManagerAdd=function(t){t.preventDefault(),window.confirm("Do you really want to add a new manager to your institution?")&&(e.setState({pendingApiCallAddManager:!0}),k({email:e.state.email}).then((function(t){e.setState({pendingApiCallAddManager:!1,email:""},(function(){return e.setState({managerAdded:!0})}))})).catch((function(e){return Fe(e)})).catch((function(t){e.handleApiError(t,"pendingApiCallAddManager")})))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.address,s=t.description,i=t.latitudeString,r=t.longitudeString,c=t.image,l=t.encodedImage,o=t.imageSelect,d=t.createdAt,m=t.email,h=t.pendingApiCallUpdateInstitution,p=t.pendingApiCallUpdateImage,j=t.pendingApiCallDeleteInstitution,g=t.pendingApiCallAddManager,f=t.institutionUpdated,O=t.imageUpdated,x=t.managerAdded,v=t.errors;return Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded p-md-5 p-2 container gray-noise-background mb-3",children:[Object(u.jsx)("h2",{className:"mb-4 font-weight-bold",children:"My Institution"}),Object(u.jsxs)("div",{className:"mb-4",children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Registration date: "}),new Date(d).toLocaleDateString("en-US")]}),Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/addLanguages",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-lg btn-success",children:[Object(u.jsx)("i",{className:"fa fa-plus-circle"})," Add languages"]})}),Object(u.jsx)("br",{}),Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/addExhibit",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-lg mt-3 btn-success",children:[Object(u.jsx)("i",{className:"fa fa-plus-circle"})," Add exhibit"]})}),Object(u.jsx)("br",{}),Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/exhibits",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-lg mt-3 btn-info",children:[Object(u.jsx)("i",{className:"fa fa-bars"})," View exhibits"]})}),Object(u.jsx)("br",{}),Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/buildings",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-lg mt-3 btn-secondary",children:[Object(u.jsx)("i",{className:"fa fa-map-marker"})," Buildings, rooms, show-cases"]})}),Object(u.jsxs)("form",{className:"mb-4 mt-4",children:[O&&Object(u.jsx)("div",{className:"alert alert-success",role:"alert",children:"Institution image updated"}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)(Ne,{type:"file",onlyImage:!0,value:o,name:"imageSelect",label:"Institution image",placeholder:"Select institution image",onChange:this.onImageSelect,hasError:v.encodedImage&&!0,error:v.encodedImage}),l?Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail mt-2",src:l,alt:"upload"}),Object(u.jsx)("br",{}),Object(u.jsxs)("button",{className:"btn btn-danger btn-lg mt-2",disabled:p,onClick:this.clearImage,children:[Object(u.jsx)("i",{className:"fa fa-times"})," Clear"]}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickImageUpdate(t)},className:"btn btn-success btn-lg ml-2 mt-2",disabled:p,pendingApiCall:p,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Update image"]})]}):Object(u.jsx)("div",{children:Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail mt-2",src:Ke+c,alt:"upload"})})]})]}),Object(u.jsxs)("form",{children:[f&&Object(u.jsx)("div",{className:"alert alert-success",role:"alert",children:"Institution information updated"}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"name",value:a,onChange:this.onChange,hasError:v.name&&!0,error:v.name})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Address",placeholder:"Enter address",name:"address",value:n,onChange:this.onChange,hasError:v.address&&!0,error:v.address})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Description",type:"textarea",placeholder:"Enter description",name:"description",value:s,onChange:this.onChange,hasError:v.description&&!0,error:v.description})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Latitude",placeholder:"Enter latitude",name:"latitudeString",value:i,onChange:this.onChange,hasError:v.latitudeString&&!0,error:v.latitudeString})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Longitude",placeholder:"Enter longitude",name:"longitudeString",value:r,onChange:this.onChange,hasError:v.longitudeString&&!0,error:v.longitudeString})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickInstitutionUpdate(t)},className:"btn btn-primary w-100 my-2",disabled:h||""===a||""===n||""===s||""===i||""===r,pendingApiCall:h,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Update institution information"]})]}),Object(u.jsxs)("form",{className:"mt-4",children:[x&&Object(u.jsx)("div",{className:"alert alert-success",role:"alert",children:"New manager added"}),Object(u.jsx)(Ne,{label:"Add new institution manager",placeholder:"Enter new manager's email",name:"email",value:m,onChange:this.onEmailChange,hasError:v.email&&!0,error:v.email}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickManagerAdd(t)},className:"btn btn-primary w-100 my-2",disabled:g||""===m,pendingApiCall:g,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Add new institution manager"]})]}),Object(u.jsx)("br",{}),Object(u.jsxs)(Ce,{onClick:this.onClickInstitutionDelete,className:"btn btn-lg mt-3 btn-danger",disabled:j,pendingApiCall:j,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-times"})," Delete institution"]})]})}}]),a}(n.Component),$e=Object(h.b)(null,(function(e){return{setIsInstitutionOwner:function(t){return e(ue(t))}}}))(Ze),et=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={institution:{},pendingApiCall:!1,isOwner:!1},e.redirect=function(t){e.props.history.push(t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),j.a.get("/institutions/myInstitution").then((function(t){e.setState({institution:t.data,pendingApiCall:!1,isOwner:!0})})).catch((function(e){return Fe(e)})).catch((function(t){t.response.data&&"User does not own an institution"===t.response.data.message&&e.setState({pendingApiCall:!1,isOwner:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.pendingApiCall,a=e.institution,n=e.isOwner;return t?Object(u.jsx)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2",children:Object(u.jsx)(Je,{})}):n?Object(u.jsx)($e,{institution:a,redirect:this.redirect}):Object(u.jsx)(Xe,{redirect:this.redirect})}}]),a}(n.Component),tt=et,at=a(13),nt=a(11),st=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={pendingApiCallDownloadLanguages:!1,possible:[],chosen:[],filtered:[],search:""},e.onSearchChange=function(t){var a=t.target.value;if(""===a){var n;e.setState((n={},Object(ve.a)(n,t.target.name,a),Object(ve.a)(n,"filtered",[]),n))}else{var s,i=e.state.possible.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));e.setState((s={},Object(ve.a)(s,t.target.name,a),Object(ve.a)(s,"filtered",i),s))}},e.onLanguageAddClick=function(t){var a,n=[],s=e.state.filtered,i=Object(nt.a)(s);try{for(i.s();!(a=i.n()).done;){var r=a.value;r===t?n.push(Object(ye.a)(Object(ye.a)({},r),{},{pendingApiCall:!0})):n.push(Object(ye.a)({},r))}}catch(c){i.e(c)}finally{i.f()}e.setState({filtered:n}),N(t.languageId).then((function(a){n=(n=Object(at.a)(s)).filter((function(e){return t!==e}));var i=Object(at.a)(e.state.possible);i=i.filter((function(e){return t!==e}));var r=Object(at.a)(e.state.chosen);r.push(Object(ye.a)({},t)),e.setState({filtered:n,possible:i,chosen:r})})).catch((function(e){return Fe(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCallDownloadLanguages:!0}),j.a.get("/institutions/myInstitution/languages").then((function(t){var a,n=t.data.possibleLanguages,s=Object(nt.a)(n);try{for(s.s();!(a=s.n()).done;){a.value.pendingApiCall=!1}}catch(r){s.e(r)}finally{s.f()}var i=t.data.chosenLanguages;e.setState({possible:n,chosen:i,pendingApiCallDownloadLanguages:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.pendingApiCallDownloadLanguages,n=t.chosen,s=t.filtered,i=t.search;return a?Object(u.jsx)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:Object(u.jsx)(Je,{})}):Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Add Languages"}),Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-lg mt-3 btn-info mb-4",children:[Object(u.jsx)("i",{className:"fa fa-search"})," Institution overview"]})}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-md-6 ",children:[Object(u.jsxs)("div",{className:"input-group mb-4",children:[Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"Search language",name:"search",value:i,onChange:this.onSearchChange}),Object(u.jsx)("div",{className:"input-group-append",children:Object(u.jsx)("span",{className:"input-group-text",children:Object(u.jsx)("i",{className:"fa fa-search"})})})]}),Object(u.jsx)("div",{children:s.map((function(t){return Object(u.jsxs)(Ce,{onClick:function(){return e.onLanguageAddClick(t)},className:"btn btn-success w-100 my-1",disabled:t.pendingApiCall,pendingApiCall:t.pendingApiCall,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-plus-circle"})," ",t.name]},t.languageId)}))})]}),Object(u.jsx)("div",{className:"col-md-6 px-md-5",children:0===n.length?Object(u.jsx)("h4",{children:"No selected languages"}):Object(u.jsx)("div",{className:"card mt-md-0 mt-2",children:Object(u.jsx)("ul",{className:"list-group list-group-flush",children:n.map((function(e){return Object(u.jsx)("li",{className:"list-group-item",children:e.name},e.languageId)}))})})})]})]})}}]),a}(n.Component),it=st,rt=a(26),ct=a(27),lt=a.n(ct),ot=a(28),dt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={fetchedObjects:[],pendingApiCall:!1,selectedId:e.props.currValue?e.props.currValue:null,selectedLabel:Ye},e.onChange=function(t){null===t?(e.props.onChange(null),e.setState({selectedId:null,selectedLabel:Ye})):(e.props.onChange(t.value),e.setState({selectedId:t.value,selectedLabel:t.label}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),this.props.fetch().then((function(t){var a,n=t.data,s=[],i=Ye,r=Object(nt.a)(n);try{for(r.s();!(a=r.n()).done;){var c=a.value;s.push({value:c[e.props.idName],label:c.name}),c[e.props.idName]===e.state.selectedId&&(i=c.name)}}catch(l){r.e(l)}finally{r.f()}e.setState({fetchedObjects:s,pendingApiCall:!1,selectedLabel:i})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this.state,t=e.fetchedObjects,a=e.pendingApiCall,n=e.selectedId,s=e.selectedLabel;return a?Object(u.jsx)(Je,{}):Object(u.jsxs)("div",{className:"mt-2",children:[Object(u.jsx)("label",{children:this.props.label}),Object(u.jsx)(ot.a,{options:t,onChange:this.onChange,isClearable:!0,value:{value:n,label:s}})]})}}]),a}(n.Component),bt=dt,ut=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={buildingId:e.props.buildingId?e.props.buildingId:null,roomId:e.props.roomId?e.props.roomId:null,showcaseId:e.props.showcaseId?e.props.showcaseId:null},e.fetchRooms=function(){return K(e.state.buildingId)},e.fetchShowcases=function(){return Z(e.state.roomId)},e.onBuildingChange=function(t){t!==e.state.buildingId&&(e.setState({buildingId:t,roomId:null,showcaseId:null}),e.props.update(t,null,null))},e.onRoomChange=function(t){t!==e.state.roomId&&(e.setState({roomId:t,showcaseId:null}),e.props.update(e.state.buildingId,t,null))},e.onShowcaseChange=function(t){t!==e.state.roomId&&(e.setState({showcaseId:t}),e.props.update(e.state.buildingId,e.state.roomId,t))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.buildingId,a=e.roomId,n=e.showcaseId;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(bt,{currValue:t,label:"Building",idName:"buildingId",fetch:z,onChange:this.onBuildingChange}),t&&Object(u.jsx)(bt,{currValue:a,label:"Room",idName:"roomId",fetch:this.fetchRooms,onChange:this.onRoomChange},t),a&&Object(u.jsx)(bt,{currValue:n,label:"Show-case",idName:"showcaseId",fetch:this.fetchShowcases,onChange:this.onShowcaseChange},a)]})}}]),a}(n.Component),mt=ut,ht=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).initState={name:"",infoLabelText:"",buildingId:null,roomId:null,showcaseId:null,encodedImage:null,imageSelect:"",encodedInfoLabel:null,infoLabelSelect:"",pendingApiCall:!1,created:!1,errors:{}},e.state=e.initState,e.onChange=function(t){var a,n=Object(ye.a)({},e.state.errors);delete n[t.target.name],e.setState((a={errors:n},Object(ve.a)(a,t.target.name,t.target.value),Object(ve.a)(a,"created",!1),a))},e.onImageSelect=function(t){var a,n=Object(ye.a)({},e.state.errors),s=t.target.name;if("imageSelect"===s?delete n.encodedImage:delete n.encodedInfoLabel,e.setState((a={errors:n},Object(ve.a)(a,s,t.target.value),Object(ve.a)(a,"created",!1),a)),0!==t.target.files.length){var i=t.target.files[0],r=new FileReader;r.onloadend=function(){"imageSelect"===s?e.setState({encodedImage:r.result}):e.setState({encodedInfoLabel:r.result})},r.readAsDataURL(i)}},e.clearImage=function(t){var a=Object(ye.a)({},e.state.errors);"imageSelect"===t?(delete a.encodedImage,e.setState({errors:a,encodedImage:null,imageSelect:""})):(delete a.encodedInfoLabel,e.setState({errors:a,encodedInfoLabel:null,infoLabelSelect:""}))},e.onInfoLabelTextChange=function(t,a){var n=Object(ye.a)({},e.state.errors);delete n.infoLabelText,e.setState({infoLabelText:a.getData(),created:!1,errors:n})},e.onClickCreate=function(t){t.preventDefault(),e.setState({pendingApiCall:!0});var a={name:e.state.name,infoLabelText:e.state.infoLabelText,buildingId:e.state.buildingId,roomId:e.state.roomId,showcaseId:e.state.showcaseId,encodedImage:e.state.encodedImage,encodedInfoLabel:e.state.encodedInfoLabel};I(a).then((function(t){var a=e.state.buildingId,n=e.state.roomId,s=e.state.showcaseId;e.setState(Object(ye.a)({},e.initState),(function(){return e.setState({created:!0,buildingId:a,roomId:n,showcaseId:s})}))})).catch((function(e){return Fe(e)})).catch((function(t){var a=Object(ye.a)({},e.state.errors);t.response.data&&t.response.data.validationErrors&&(a=Object(ye.a)({},t.response.data.validationErrors)),e.setState({pendingApiCall:!1,errors:a})}))},e.updateLocation=function(t,a,n){e.setState({buildingId:t,roomId:a,showcaseId:n})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.infoLabelText,s=t.encodedImage,i=t.imageSelect,r=t.encodedInfoLabel,c=t.infoLabelSelect,l=t.pendingApiCall,o=t.created,d=t.errors,b=!1;return""!==a&&null!==r||(b=!0),Object(u.jsx)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:Object(u.jsxs)("form",{children:[Object(u.jsx)("h2",{className:"mb-4 font-weight-bold",children:"Create Exhibit"}),o&&Object(u.jsx)("div",{className:"alert alert-success",role:"alert",children:"Exhibit has been created"}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)(Ne,{type:"file",onlyImage:!0,value:i,name:"imageSelect",label:"Exhibit image",placeholder:"Select exhibit image",onChange:this.onImageSelect,hasError:d.encodedImage&&!0,error:d.encodedImage}),s&&Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail mt-2",src:s,alt:"upload"}),Object(u.jsx)("br",{}),Object(u.jsxs)("button",{className:"btn btn-danger btn-lg mt-2",onClick:function(){return e.clearImage("imageSelect")},children:[Object(u.jsx)("i",{className:"fa fa-times"})," Clear"]})]})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)(Ne,{type:"file",onlyImage:!0,value:c,name:"infoLabelSelect",label:"Information label",placeholder:"Select information label",onChange:this.onImageSelect,hasError:d.encodedInfoLabel&&!0,error:d.encodedInfoLabel}),r&&Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{className:"img-fluid mt-2",src:r,alt:"upload"}),Object(u.jsx)("br",{}),Object(u.jsxs)("button",{className:"btn btn-danger btn-lg mt-2",onClick:function(){return e.clearImage("infoLabelSelect")},children:[Object(u.jsx)("i",{className:"fa fa-times"})," Clear"]})]})]}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"name",value:a,onChange:this.onChange,hasError:d.name&&!0,error:d.name})}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{children:"Information label text"}),Object(u.jsx)(rt.CKEditor,{editor:lt.a,config:{removePlugins:["Table","TableToolbar","EasyImage","MediaEmbed","ImageCaption","ImageStyle","ImageToolbar","ImageUpload"]},data:n,onChange:this.onInfoLabelTextChange}),d.infoLabelText&&Object(u.jsx)("div",{className:"text-danger",children:Object(u.jsx)("small",{children:d.infoLabelText})})]}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(mt,{update:this.updateLocation})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickCreate(t)},className:"btn btn-primary w-100 my-2",disabled:l||b,pendingApiCall:l,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Create exhibit"]})]})})}}]),a}(n.Component),pt=ht,jt=function(e){return Object(u.jsx)("div",{className:"card mb-4",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-3",children:Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail",src:He+e.image,alt:"image"})}),Object(u.jsxs)("div",{className:"col-md-6",children:[Object(u.jsx)("h3",{className:"card-title",children:e.name}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Registration date: "}),new Date(e.createdAt).toLocaleDateString("en-US")]}),e.building&&Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Building: "}),e.building.name]}),e.room&&Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Room: "}),e.room.name]}),e.showcase&&Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Show-case: "}),e.showcase.name]})]}),Object(u.jsxs)("div",{className:"col-md-3 mt-md-0 mt-3",children:[Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/exhibits/"+e.exhibitId,children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info w-100",children:[Object(u.jsx)("i",{className:"fa fa-pencil"})," Detail"]})}),Object(u.jsx)("br",{}),Object(u.jsxs)("button",{type:"button",className:"btn btn-secondary w-100 mt-2",onClick:function(){return e.onClickDownloadQRCode(e.exhibitId)},children:[Object(u.jsx)("i",{className:"fa fa-qrcode"})," QR Code"]}),Object(u.jsx)("br",{}),Object(u.jsxs)(Ce,{onClick:function(){return e.onClickDelete(e.exhibitId)},className:"btn btn-danger w-100 mt-2",disabled:e.pendingApiCall,pendingApiCall:e.pendingApiCall,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-times"})," Delete"]})]})]})})})},gt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={exhibits:[],pendingApiCall:!1},e.onClickDelete=function(t){if(window.confirm("Do you really want to delete this exhibit?")){var a,n=[],s=e.state.exhibits,i=Object(nt.a)(s);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.exhibitId===t?n.push(Object(ye.a)(Object(ye.a)({},r),{},{pendingApiCall:!0})):n.push(Object(ye.a)({},r))}}catch(c){i.e(c)}finally{i.f()}e.setState({exhibits:n}),w(t).then((function(a){n=(n=Object(at.a)(e.state.exhibits)).filter((function(e){return e.exhibitId!==t})),e.setState({exhibits:n})})).catch((function(e){return Fe(e)}))}},e.onClickDownloadQRCode=function(e){F(e).then((function(t){var a=t.data,n=document.createElement("a");n.href="data:image/png;base64,"+a,n.download=e+".png",n.click()})).catch((function(e){return Fe(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),j.a.get("/exhibits/all").then((function(t){var a,n=t.data,s=Object(nt.a)(n);try{for(s.s();!(a=s.n()).done;){var i=a.value;i.pendingApiCall=!1,i.onClickDelete=e.onClickDelete}}catch(r){s.e(r)}finally{s.f()}e.setState({exhibits:n,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state.exhibits.map((function(t){return Object(u.jsx)(jt,Object(ye.a)(Object(ye.a)({},t),{},{onClickDownloadQRCode:e.onClickDownloadQRCode}),t.exhibitId)})),a=Object(u.jsx)(Je,{});return this.state.pendingApiCall||(a=0===this.state.exhibits.length?Object(u.jsx)("h4",{children:"There are no exhibits"}):t),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Institution Exhibits"}),a]})}}]),a}(n.Component),ft=gt,Ot=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={exhibitId:0,name:"",infoLabelText:"",buildingId:null,roomId:null,showcaseId:null,createdAt:"",image:"",encodedImage:null,imageSelect:"",infoLabel:null,encodedInfoLabel:null,infoLabelSelect:"",pendingApiCallGetInstitution:!1,pendingApiCallUpdateInstitution:!1,pendingApiCallUpdateImage:!1,pendingApiCallUpdateInfoLabel:!1,exhibitUpdated:!1,imageUpdated:!1,infoLabelUpdated:!1,errors:{}},e.onImageSelect=function(t,a,n){var s,i=Object(ye.a)({},e.state.errors);if(delete i[a],e.setState((s={errors:i},Object(ve.a)(s,t.target.name,t.target.value),Object(ve.a)(s,n,!1),s)),0!==t.target.files.length){var r=t.target.files[0],c=new FileReader;c.onloadend=function(){e.setState(Object(ve.a)({},a,c.result))},c.readAsDataURL(r)}},e.clearImage=function(t,a){var n,s=Object(ye.a)({},e.state.errors);delete s[t],e.setState((n={errors:s},Object(ve.a)(n,t,null),Object(ve.a)(n,a,""),n))},e.onClickImageUpdate=function(t){t.preventDefault(),e.setState({pendingApiCallUpdateImage:!0});var a={encodedImage:e.state.encodedImage};y(e.state.exhibitId,a).then((function(t){e.setState({pendingApiCallUpdateImage:!1,image:t.data.message,imageUpdated:!0},(function(){e.clearImage("encodedImage","imageSelect")}))})).catch((function(e){return Fe(e)})).catch((function(t){e.handleApiError(t,"pendingApiCallUpdateImage")}))},e.handleApiError=function(t,a){if(t.response.data&&t.response.data.validationErrors){var n,s=Object(ye.a)(Object(ye.a)({},e.state.errors),t.response.data.validationErrors);e.setState((n={},Object(ve.a)(n,a,!1),Object(ve.a)(n,"errors",s),n))}},e.onClickInfoImageUpdate=function(){e.setState({pendingApiCallUpdateInfoLabel:!0});var t={encodedImage:e.state.encodedInfoLabel};A(e.state.exhibitId,t).then((function(t){e.setState({pendingApiCallUpdateInfoLabel:!1,infoLabel:t.data.message,infoLabelUpdated:!0},(function(){e.clearImage("encodedInfoLabel","infoLabelSelect")}))})).catch((function(e){return Fe(e)})).catch((function(t){if(t.response.data&&t.response.data.validationErrors){var a=Object(ye.a)({},e.state.errors);a.encodedInfoLabel=t.response.data.validationErrors.encodedImage,e.setState({pendingApiCallUpdateInfoLabel:!1,errors:a})}}))},e.onChange=function(t){var a,n=Object(ye.a)({},e.state.errors);delete n[t.target.name],e.setState((a={errors:n},Object(ve.a)(a,t.target.name,t.target.value),Object(ve.a)(a,"exhibitUpdated",!1),a))},e.onInfoLabelTextChange=function(t,a){var n=Object(ye.a)({},e.state.errors);delete n.infoLabelText,e.setState({infoLabelText:a.getData(),exhibitUpdated:!1,errors:n})},e.onClickExhibitUpdate=function(t){t.preventDefault(),e.setState({pendingApiCallUpdateInstitution:!0});var a={name:e.state.name,infoLabelText:e.state.infoLabelText,buildingId:e.state.buildingId,roomId:e.state.roomId,showcaseId:e.state.showcaseId};S(e.state.exhibitId,a).then((function(t){e.setState({exhibitUpdated:!0,pendingApiCallUpdateInstitution:!1})})).catch((function(e){return Fe(e)})).catch((function(t){e.handleApiError(t,"pendingApiCallUpdateInstitution")}))},e.updateLocation=function(t,a,n){e.setState({buildingId:t,roomId:a,showcaseId:n})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;this.setState({pendingApiCallGetInstitution:!0}),(e=this.props.match.params.exhibitId,j.a.get("/exhibits/"+e)).then((function(e){var a=e.data.building?e.data.building.buildingId:null,n=e.data.room?e.data.room.roomId:null,s=e.data.showcase?e.data.showcase.showcaseId:null;t.setState(Object(ye.a)(Object(ye.a)({},e.data),{},{pendingApiCallGetInstitution:!1,buildingId:a,roomId:n,showcaseId:s}))})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.infoLabelText,s=t.buildingId,i=t.roomId,r=t.showcaseId,c=t.image,l=t.encodedImage,o=t.imageSelect,d=t.infoLabel,b=t.encodedInfoLabel,m=t.infoLabelSelect,h=t.pendingApiCallGetInstitution,p=t.pendingApiCallUpdateInstitution,j=t.pendingApiCallUpdateImage,g=t.pendingApiCallUpdateInfoLabel,f=t.exhibitUpdated,O=t.imageUpdated,x=t.infoLabelUpdated,v=t.errors,C=Object(u.jsx)(Je,{});return h||(C=Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{className:"mb-4",children:[O&&Object(u.jsx)("div",{className:"alert alert-success",role:"alert",children:"Exhibit image updated"}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)(Ne,{type:"file",onlyImage:!0,value:o,name:"imageSelect",label:"Exhibit image",placeholder:"Select exhibit image",onChange:function(t){return e.onImageSelect(t,"encodedImage","imageUpdated")},hasError:v.encodedImage&&!0,error:v.encodedImage}),l?Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail mt-2",src:l,alt:"upload"}),Object(u.jsx)("br",{}),Object(u.jsxs)("button",{className:"btn btn-danger btn-lg mt-2",disabled:j,onClick:function(){return e.clearImage("encodedImage","imageSelect")},children:[Object(u.jsx)("i",{className:"fa fa-times"})," Clear"]}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickImageUpdate(t)},className:"btn btn-success btn-lg ml-2 mt-2",disabled:j,pendingApiCall:j,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Update image"]})]}):Object(u.jsx)("div",{children:Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail mt-2",src:He+c,alt:"upload"})})]})]}),Object(u.jsxs)("form",{className:"mb-4",children:[x&&Object(u.jsx)("div",{className:"alert alert-success",role:"alert",children:"Information label image updated"}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)(Ne,{type:"file",onlyImage:!0,value:m,name:"infoLabelSelect",label:"Information label image",placeholder:"Select information label image",onChange:function(t){return e.onImageSelect(t,"encodedInfoLabel","infoLabelUpdated")},hasError:v.encodedInfoLabel&&!0,error:v.encodedInfoLabel}),b?Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{className:"img-fluid mt-2",src:b,alt:"upload"}),Object(u.jsx)("br",{}),Object(u.jsxs)("button",{className:"btn btn-danger btn-lg mt-2",disabled:g,onClick:function(){return e.clearImage("encodedInfoLabel","infoLabelSelect")},children:[Object(u.jsx)("i",{className:"fa fa-times"})," Clear"]}),Object(u.jsxs)(Ce,{onClick:function(t){t.preventDefault(),e.onClickInfoImageUpdate()},className:"btn btn-success btn-lg ml-2 mt-2",disabled:j,pendingApiCall:j,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Update information label image"]})]}):Object(u.jsx)("div",{children:Object(u.jsx)("img",{className:"img-fluid mt-2",src:We+d,alt:"upload"})})]})]}),Object(u.jsxs)("form",{className:"mb-4",children:[f&&Object(u.jsx)("div",{className:"alert alert-success",role:"alert",children:"Exhibit information updated"}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"name",value:a,onChange:this.onChange,hasError:v.name&&!0,error:v.name})}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{children:"Information label text"}),Object(u.jsx)(rt.CKEditor,{editor:lt.a,config:{removePlugins:["Table","TableToolbar","EasyImage","MediaEmbed","ImageCaption","ImageStyle","ImageToolbar","ImageUpload"]},data:n,onChange:this.onInfoLabelTextChange}),v.infoLabelText&&Object(u.jsx)("div",{className:"text-danger",children:Object(u.jsx)("small",{children:v.infoLabelText})})]}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(mt,{update:this.updateLocation,buildingId:s,roomId:i,showcaseId:r})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickExhibitUpdate(t)},className:"btn btn-primary w-100 my-2",disabled:p||""===a,pendingApiCall:p,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Update exhibit"]})]})]})),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded p-md-5 p-2 container gray-noise-background mb-3",children:[Object(u.jsx)("h2",{className:"mb-4 font-weight-bold",children:"Exhibit"}),C]})}}]),a}(n.Component),xt=Ot,vt=function(e){return Object(u.jsx)("div",{className:"card mb-4",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-3",children:Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail",src:Ke+e.image,alt:"image"})}),Object(u.jsxs)("div",{className:"col-md-6",children:[Object(u.jsx)("h3",{className:"card-title mt-3 mt-md-0",children:e.name}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Address: "}),e.address]}),Object(u.jsx)("div",{className:"mt-2",children:e.description})]}),Object(u.jsx)("div",{className:"col-md-3",children:Object(u.jsx)(b.b,{exact:!0,to:"/institutions/"+e.institutionId,children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info btn-lg w-100 mt-3 mt-md-0",children:[Object(u.jsx)("i",{className:"fa fa-bars"})," Exhibits"]})})})]})})})},Ct=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={institutions:[],pendingApiCall:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),j.a.get("/institutions").then((function(t){e.setState({institutions:t.data,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this.state.institutions.map((function(e){return Object(u.jsx)(vt,Object(ye.a)({},e),e.institutionId)})),t=Object(u.jsx)(Je,{});return this.state.pendingApiCall||(t=0===this.state.institutions.length?Object(u.jsx)("h4",{children:"There are no institutions"}):e),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Institutions"}),t]})}}]),a}(n.Component),Nt=Ct,It=function(e){return Object(u.jsx)("div",{className:"card mb-4",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-3",children:Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail",src:He+e.image,alt:"image"})}),Object(u.jsxs)("div",{className:"col-md-6",children:[Object(u.jsx)("h3",{className:"card-title",children:e.name}),Object(u.jsx)("div",{className:"mb-3 mt-4",children:Object(u.jsx)(ot.a,{options:e.languages.map((function(e){return{value:e.languageId,label:e.name}})),onChange:function(t){return e.selectLang(e.exhibitId,t.value)}})})]}),Object(u.jsxs)("div",{className:"col-md-3",children:[Object(u.jsx)(b.b,{exact:!0,to:"/institutions/"+e.institutionId+"/translate/"+e.exhibitId+"/"+e.lang,className:e.buttonsDisabled&&"disabled-link",children:Object(u.jsxs)("button",{type:"button",disabled:e.buttonsDisabled,className:"btn btn-info btn-lg w-100",children:[Object(u.jsx)("i",{className:"fa fa-globe"})," Translate"]})}),Object(u.jsx)(b.b,{exact:!0,to:"/institutions/"+e.institutionId+"/rate/"+e.exhibitId+"/"+e.lang,className:e.buttonsDisabled&&"disabled-link",children:Object(u.jsxs)("button",{type:"button",disabled:e.buttonsDisabled,className:"btn btn-primary mt-3 btn-lg w-100",children:[Object(u.jsx)("i",{className:"fa fa-thumbs-up"})," Rate"]})})]})]})})})},wt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={languages:[],exhibits:[],pendingApiCall:!1},e.selectLang=function(t,a){var n,s=[],i=Object(nt.a)(e.state.exhibits);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.exhibitId!==t?s.push(r):s.push(Object(ye.a)(Object(ye.a)({},r),{},{lang:a,buttonsDisabled:!1}))}}catch(c){i.e(c)}finally{i.f()}e.setState({exhibits:s})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;this.setState({pendingApiCall:!0}),(e=this.props.match.params.institutionId,j.a.get("/exhibits/translate/"+e)).then((function(e){var a,n=e.data.languages,s=e.data.exhibits,i=Object(nt.a)(s);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.buttonsDisabled=!0,r.lang=-1,r.selectLang=t.selectLang}}catch(c){i.e(c)}finally{i.f()}t.setState({languages:n,exhibits:s,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state.exhibits.map((function(t){return Object(u.jsx)(It,Object(ye.a)(Object(ye.a)({},t),{},{languages:e.state.languages,institutionId:e.props.match.params.institutionId}),t.exhibitId)})),a=Object(u.jsx)(Je,{});return this.state.pendingApiCall||(a=0===this.state.exhibits.length?Object(u.jsx)("h4",{children:"There are no exhibits"}):t),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Exhibits"}),a]})}}]),a}(n.Component),yt=wt,At=a(20),St=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={institutionId:e.props.match.params.institutionId,exhibitId:e.props.match.params.exhibitId,languageId:e.props.match.params.languageId,exhibitName:"",languageName:"",infoLabelText:"",infoLabel:null,text:"",pendingApiCallGetNewTranslation:!1,pendingApiCallCreateTranslation:!1,errors:{}},e.onTranslationCreate=function(t){t.preventDefault(),e.setState({pendingApiCallCreateTranslation:!0}),U(e.state.exhibitId,e.state.languageId,{text:e.state.text}).then((function(t){e.setState({pendingApiCallCreateTranslation:!1},(function(){return e.props.history.push("/institutions/"+e.state.institutionId)}))})).catch((function(e){return Fe(e)})).catch((function(t){var a=Object(ye.a)({},e.state.errors);t.response.data&&t.response.data.validationErrors&&(a=Object(ye.a)({},t.response.data.validationErrors)),e.setState({pendingApiCallCreateTranslation:!1,errors:a})}))},e.onTextChange=function(t,a){var n=Object(ye.a)({},e.state.errors);delete n.text,e.setState({text:a.getData(),errors:n})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t,a=this;this.setState({pendingApiCallGetNewTranslation:!0}),(e=this.state.exhibitId,t=this.state.languageId,j.a.get("/translations/new/"+e+"/"+t)).then((function(e){var t=e.data,n=t.exhibitName,s=t.infoLabelText,i=t.infoLabel,r=t.text,c=t.languageName;a.setState({exhibitName:n,infoLabelText:s,infoLabel:i,text:r,languageName:c,pendingApiCallGetNewTranslation:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.exhibitName,n=t.languageName,s=t.infoLabelText,i=t.infoLabel,r=t.text,c=t.pendingApiCallGetNewTranslation,l=t.pendingApiCallCreateTranslation,o=t.errors;return c?Object(u.jsx)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:Object(u.jsx)(Je,{})}):Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"New Translation"}),Object(u.jsx)("h3",{children:a}),Object(u.jsxs)("div",{className:"mb-4",children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Selected language: "}),n]}),Object(u.jsx)("div",{children:Object(u.jsx)("img",{className:"img-fluid mt-2",src:We+i,alt:"information label image"})}),""!==s&&Object(u.jsx)("div",{className:"mt-4 bg-light border rounded p-2",children:Object(At.a)(s)}),Object(u.jsxs)("form",{className:"mt-4",children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{children:"Translated text"}),Object(u.jsx)(rt.CKEditor,{editor:lt.a,config:{removePlugins:["Table","TableToolbar","EasyImage","MediaEmbed","ImageCaption","ImageStyle","ImageToolbar","ImageUpload"]},data:r,onChange:this.onTextChange}),o.text&&Object(u.jsx)("div",{className:"text-danger",children:Object(u.jsx)("small",{children:o.text})})]}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onTranslationCreate(t)},className:"btn btn-primary w-100 my-2",disabled:l||""===r,pendingApiCall:l,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Create translation"]})]})]})}}]),a}(n.Component),kt=St,Et=function(e){var t="card mb-4";e.isOfficial&&(t+=" bg-warning");var a="btn btn-primary";return e.liked||(a="btn btn-secondary"),Object(u.jsx)("div",{className:t,children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-md-2",children:[Object(u.jsx)("h5",{children:e.authorUsername}),Object(u.jsx)("p",{children:new Date(e.createdAt).toLocaleDateString("en-US")}),e.isOfficial&&Object(u.jsx)("span",{className:"font-weight-bold",children:"official"})]}),Object(u.jsx)("div",{className:"col-md-8",children:Object(u.jsx)("div",{className:"bg-light border rounded p-2",children:Object(At.a)(e.translatedText)})}),Object(u.jsx)("div",{className:"col-md-2",children:Object(u.jsxs)("div",{className:"d-flex justify-content-between mt-md-0 mt-3",children:[Object(u.jsxs)("div",{className:"text-info mt-1",children:[Object(u.jsx)("i",{className:"fa fa-thumbs-up"})," ",e.likesCount+"x"]}),Object(u.jsx)("button",{onClick:function(){return e.onLikeChange(e.translationId)},type:"button",className:a,children:e.liked?Object(u.jsx)("i",{className:"fa fa-thumbs-up"}):Object(u.jsx)("i",{className:"fa fa-thumbs-o-up"})})]})})]})})})},Ut=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={exhibitId:e.props.match.params.exhibitId,languageId:e.props.match.params.languageId,exhibit:null,language:"",translations:[],pendingApiCall:!0},e.onLikeChange=function(t){var a,n,s=[],i=e.state.translations,r=Object(nt.a)(i);try{for(r.s();!(n=r.n()).done;){var c=n.value;c.translationId!==t?s.push(c):(a=!c.liked)?s.push(Object(ye.a)(Object(ye.a)({},c),{},{liked:a,likesCount:c.likesCount+1})):s.push(Object(ye.a)(Object(ye.a)({},c),{},{liked:a,likesCount:c.likesCount-1}))}}catch(l){r.e(l)}finally{r.f()}e.setState({translations:s}),L(t,{value:a}).catch((function(e){return Fe(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),D(this.state.exhibitId,this.state.languageId).then((function(t){e.setState({exhibit:t.data.exhibit,language:t.data.language,translations:t.data.translations,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state.translations.map((function(t){return Object(u.jsx)(Et,Object(ye.a)(Object(ye.a)({},t),{},{onLikeChange:e.onLikeChange}),t.translationId)})),a=Object(u.jsx)(Je,{});if(!this.state.pendingApiCall){var n=this.state.exhibit,s=n.name,i=n.infoLabel,r=n.infoLabelText;a=Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:s}),Object(u.jsxs)("div",{className:"mb-4",children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Selected language: "}),this.state.language]}),Object(u.jsx)("div",{children:Object(u.jsx)("img",{className:"img-fluid mt-2",src:We+i,alt:"information label image"})}),""!==r&&Object(u.jsx)("div",{className:"mt-4 bg-light border rounded p-2",children:Object(At.a)(r)}),0===t.length?Object(u.jsx)("h4",{className:"mt-5",children:"There are no translations"}):Object(u.jsxs)("div",{className:"mt-3",children:[Object(u.jsx)("h3",{className:"my-5",children:"Translations"}),t]})]})}return Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Rate Translations"}),a]})}}]),a}(n.Component),Dt=Ut,Lt=function(e){return Object(u.jsx)("div",{className:"card mb-4",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-3",children:Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail",src:He+e.image,alt:"image"})}),Object(u.jsxs)("div",{className:"col-md-6",children:[Object(u.jsx)("h3",{className:"card-title",children:e.name}),Object(u.jsx)("div",{className:"mb-3 mt-4",children:Object(u.jsx)(ot.a,{options:e.languages.map((function(e){return{value:e.languageId,label:e.name}})),onChange:function(t){return e.selectLang(e.exhibitId,t.value)}})})]}),Object(u.jsx)("div",{className:"col-md-3",children:Object(u.jsx)(b.b,{exact:!0,to:"/approve/"+e.exhibitId+"/"+e.lang,className:e.buttonDisabled&&"disabled-link",children:Object(u.jsxs)("button",{type:"button",disabled:e.buttonDisabled,className:"btn btn-primary btn-lg w-100",children:[Object(u.jsx)("i",{className:"fa fa-star"})," Approve"]})})})]})})})},Tt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={languages:[],exhibits:[],pendingApiCall:!1},e.selectLang=function(t,a){var n,s=[],i=Object(nt.a)(e.state.exhibits);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.exhibitId!==t?s.push(r):s.push(Object(ye.a)(Object(ye.a)({},r),{},{lang:a,buttonDisabled:!1}))}}catch(c){i.e(c)}finally{i.f()}e.setState({exhibits:s})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),j.a.get("/exhibits/approveTranslations").then((function(t){var a,n=t.data.languages,s=t.data.exhibits,i=Object(nt.a)(s);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.buttonDisabled=!0,r.lang=-1,r.selectLang=e.selectLang}}catch(c){i.e(c)}finally{i.f()}e.setState({languages:n,exhibits:s,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state.exhibits.map((function(t){return Object(u.jsx)(Lt,Object(ye.a)(Object(ye.a)({},t),{},{languages:e.state.languages}),t.exhibitId)})),a=Object(u.jsx)(Je,{});return this.state.pendingApiCall||(a=0===this.state.exhibits.length?Object(u.jsx)("h4",{children:"There are no exhibits"}):t),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Exhibits"}),a]})}}]),a}(n.Component),Rt=Tt,Mt=function(e){var t="card mb-4";e.isOfficial&&(t+=" bg-warning");var a="btn btn-primary";e.liked||(a="btn btn-secondary");var n="btn btn-success w-100 mt-3";return e.isOfficial||(n="btn btn-secondary w-100 mt-3"),Object(u.jsx)("div",{className:t,children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-md-2",children:[Object(u.jsx)("h5",{children:e.authorUsername}),Object(u.jsx)("p",{children:new Date(e.createdAt).toLocaleDateString("en-US")}),e.isOfficial&&Object(u.jsx)("span",{className:"font-weight-bold",children:"official"})]}),Object(u.jsx)("div",{className:"col-md-8",children:Object(u.jsx)("div",{className:"bg-light border rounded p-2",children:Object(At.a)(e.translatedText)})}),Object(u.jsxs)("div",{className:"col-md-2 mt-md-0 mt-3",children:[Object(u.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(u.jsxs)("div",{className:"text-info mt-1",children:[Object(u.jsx)("i",{className:"fa fa-thumbs-up"})," ",e.likesCount+"x"]}),Object(u.jsx)("button",{onClick:function(){return e.onLikeChange(e.translationId)},type:"button",className:a,children:e.liked?Object(u.jsx)("i",{className:"fa fa-thumbs-up"}):Object(u.jsx)("i",{className:"fa fa-thumbs-o-up"})})]}),Object(u.jsx)(Ce,{onClick:function(){return e.onOfficialChange(e.translationId)},className:n,disabled:e.pendingApiCallSetOfficial,pendingApiCall:e.pendingApiCallSetOfficial,hasChildren:!0,children:e.isOfficial?Object(u.jsxs)("div",{children:[Object(u.jsx)("i",{className:"fa fa-star"})," Official "]}):Object(u.jsxs)("div",{children:[Object(u.jsx)("i",{className:"fa fa-star-o"})," Official "]})})]})]})})})},Pt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={exhibitId:e.props.match.params.exhibitId,languageId:e.props.match.params.languageId,exhibit:null,language:"",translations:[],pendingApiCall:!0},e.onLikeChange=function(t){var a,n,s=[],i=e.state.translations,r=Object(nt.a)(i);try{for(r.s();!(n=r.n()).done;){var c=n.value;c.translationId!==t?s.push(c):(a=!c.liked)?s.push(Object(ye.a)(Object(ye.a)({},c),{},{liked:a,likesCount:c.likesCount+1})):s.push(Object(ye.a)(Object(ye.a)({},c),{},{liked:a,likesCount:c.likesCount-1}))}}catch(l){r.e(l)}finally{r.f()}e.setState({translations:s}),L(t,{value:a}).catch((function(e){return Fe(e)}))},e.onOfficialChange=function(t){var a,n,s=[],i=e.state.translations,r=Object(nt.a)(i);try{for(r.s();!(n=r.n()).done;){var c=n.value;c.translationId!==t?s.push(c):(a=!c.isOfficial,s.push(Object(ye.a)(Object(ye.a)({},c),{},{pendingApiCallSetOfficial:!0})))}}catch(l){r.e(l)}finally{r.f()}e.setState({translations:s}),T(t,{value:a}).then((function(n){s=[];var i,r=e.state.translations,c=Object(nt.a)(r);try{for(c.s();!(i=c.n()).done;){var o=i.value;o.translationId!==t?s.push(Object(ye.a)(Object(ye.a)({},o),{},{isOfficial:!1})):s.push(Object(ye.a)(Object(ye.a)({},o),{},{pendingApiCallSetOfficial:!1,isOfficial:a}))}}catch(l){c.e(l)}finally{c.f()}e.setState({translations:s})})).catch((function(e){return Fe(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),D(this.state.exhibitId,this.state.languageId).then((function(t){var a,n=t.data.translations,s=Object(nt.a)(n);try{for(s.s();!(a=s.n()).done;){a.value.pendingApiCallSetOfficial=!1}}catch(i){s.e(i)}finally{s.f()}e.setState({exhibit:t.data.exhibit,language:t.data.language,translations:n,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state.translations.map((function(t){return Object(u.jsx)(Mt,Object(ye.a)(Object(ye.a)({},t),{},{onLikeChange:e.onLikeChange,onOfficialChange:e.onOfficialChange}),t.translationId)})),a=Object(u.jsx)(Je,{});if(!this.state.pendingApiCall){var n=this.state.exhibit,s=n.name,i=n.infoLabel,r=n.infoLabelText;a=Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:s}),Object(u.jsxs)("div",{className:"mb-4",children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Selected language: "}),this.state.language]}),Object(u.jsx)("div",{children:Object(u.jsx)("img",{className:"img-fluid mt-2",src:We+i,alt:"information label image"})}),""!==r&&Object(u.jsx)("div",{className:"mt-4 bg-light border rounded p-2",children:Object(At.a)(r)}),0===t.length?Object(u.jsx)("h4",{className:"mt-5",children:"There are no translations"}):Object(u.jsxs)("div",{className:"mt-3",children:[Object(u.jsx)("h3",{className:"my-5",children:"Translations"}),t]})]})}return Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Approve Translations"}),a]})}}]),a}(n.Component),Bt=Pt,_t=function(e){return Object(u.jsx)("div",{className:"card mb-4",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-3",children:Object(u.jsx)("img",{className:"img-fluid sizedImg img-thumbnail",src:He+e.exhibitImage,alt:"image"})}),Object(u.jsxs)("div",{className:"col-md-6",children:[Object(u.jsx)("h3",{className:"card-title",children:e.institutionName}),Object(u.jsxs)("h5",{children:["Exhibit: ",e.exhibitName]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Language: "}),e.language]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Latest activity: "}),new Date(e.latestTranslationCreatedAt).toLocaleDateString("en-US")]})]}),Object(u.jsxs)("div",{className:"col-md-3 mt-3 mt-md-0",children:[Object(u.jsx)(b.b,{exact:!0,to:"/myTranslations/"+e.exhibitId+"/"+e.languageId,children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info w-100",children:[Object(u.jsx)("i",{className:"fa fa-bars"})," Open"]})}),Object(u.jsx)("br",{}),Object(u.jsxs)(Ce,{onClick:function(){return e.onClickDelete(e.exhibitId,e.languageId)},className:"btn btn-danger w-100 mt-2",disabled:e.pendingApiCall,pendingApiCall:e.pendingApiCall,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-times"})," Delete"]})]})]})})})},Gt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={sequences:[],pendingApiCall:!1},e.onClickDelete=function(t,a){if(window.confirm("Do you really want to delete this translation sequence?")){var n,s=[],i=e.state.sequences,r=Object(nt.a)(i);try{for(r.s();!(n=r.n()).done;){var c=n.value;c.exhibitId===t&&c.languageId===a?s.push(Object(ye.a)(Object(ye.a)({},c),{},{pendingApiCall:!0})):s.push(c)}}catch(l){r.e(l)}finally{r.f()}e.setState({sequences:s}),R(t,a).then((function(n){s=(s=Object(at.a)(e.state.sequences)).filter((function(e){return e.exhibitId!==t||e.languageId!==a})),e.setState({sequences:s})})).catch((function(e){return Fe(e)}))}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),j.a.get("/translations/sequences").then((function(t){var a,n=t.data,s=Object(nt.a)(n);try{for(s.s();!(a=s.n()).done;){var i=a.value;i.pendingApiCall=!1,i.onClickDelete=e.onClickDelete}}catch(r){s.e(r)}finally{s.f()}e.setState({sequences:n,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this.state.sequences.map((function(e,t){return Object(u.jsx)(_t,Object(ye.a)({},e),t)})),t=Object(u.jsx)(Je,{});return this.state.pendingApiCall||(t=0===this.state.sequences.length?Object(u.jsx)("h4",{children:"There are no translation sequences"}):e),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Translation Sequences"}),t]})}}]),a}(n.Component),qt=Gt,Ft=function(e){var t="card mb-4";return e.isOfficial&&(t+=" bg-warning"),Object(u.jsx)("div",{className:t,children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-md-2",children:[Object(u.jsx)("h4",{children:e.order+"."}),Object(u.jsx)("p",{children:new Date(e.createdAt).toLocaleDateString("en-US")}),e.isOfficial&&Object(u.jsx)("span",{className:"font-weight-bold",children:"official"})]}),Object(u.jsx)("div",{className:"col-md-8",children:Object(u.jsx)("div",{className:"bg-light border rounded p-2",children:Object(At.a)(e.translatedText)})}),Object(u.jsxs)("div",{className:"col-md-2 mt-md-0 mt-2",children:[Object(u.jsx)("div",{className:"d-flex justify-content-between",children:Object(u.jsxs)("div",{className:"text-info mt-1",children:[Object(u.jsx)("i",{className:"fa fa-thumbs-up"})," ",e.likesCount+"x"]})}),0!==e.index&&Object(u.jsxs)(Ce,{onClick:function(){return e.onRollback(e.translationId,e.index)},className:"btn btn-danger w-100 mt-3 mb-2",disabled:e.pendingApiCall,pendingApiCall:e.pendingApiCall,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-times"})," Rollback"]})]})]})})})},zt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={exhibitId:e.props.match.params.exhibitId,languageId:e.props.match.params.languageId,translations:[],pendingApiCall:!1},e.onRollback=function(t,a){if(window.confirm("Do you really want to rollback to this translation?")){var n=Object(at.a)(e.state.translations);n[a]=Object(ye.a)(Object(ye.a)({},n[a]),{},{pendingApiCall:!0}),e.setState({translations:n}),M(t).then((function(t){var n=Object(at.a)(e.state.translations);n[a]=Object(ye.a)(Object(ye.a)({},n[a]),{},{pendingApiCall:!1}),n=n.slice(a),e.setState({translations:n})})).catch((function(e){return Fe(e)}))}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t,a=this;this.setState({pendingApiCall:!0}),(e=this.state.exhibitId,t=this.state.languageId,j.a.get("/translations/sequence/"+e+"/"+t)).then((function(e){var t,n=e.data,s=Object(nt.a)(n);try{for(s.s();!(t=s.n()).done;){var i=t.value;i.pendingApiCall=!1,i.onRollback=a.onRollback}}catch(r){s.e(r)}finally{s.f()}a.setState({translations:n,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this.state.translations.length,t=this.state.translations.map((function(t,a){return Object(u.jsx)(Ft,Object(ye.a)({order:e-a,index:a},t),a)})),a=Object(u.jsx)(Je,{});return this.state.pendingApiCall||(a=0===e?Object(u.jsx)("h4",{children:"There are no translations"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b.b,{exact:!0,to:"/institutions/"+this.state.translations[0].institutionId+"/translate/"+this.state.exhibitId+"/"+this.state.languageId,children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info mb-4 btn-lg",children:[Object(u.jsx)("i",{className:"fa fa-globe"})," Create New Version"]})}),t]})),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Translation Sequence"}),a]})}}]),a}(n.Component),Vt=zt;var Jt=function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.username}),Object(u.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString("en-US")}),Object(u.jsx)("td",{children:e.email}),Object(u.jsx)("td",{children:Object(u.jsx)(b.b,{exact:!0,to:"/users/"+e.userId,children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info w-100",children:[Object(u.jsx)("i",{className:"fa fa-search"})," Detail"]})})})]})},Qt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={users:[],filtered:[],pendingApiCall:!1,search:""},e.onSearchChange=function(t){var a=t.target.value;if(""===e.state.search){var n=Object(at.a)(e.state.users);e.setState({filtered:n,search:a})}else{var s=e.state.users.filter((function(e){return e.username.includes(a)||e.email.includes(a)}));e.setState({filtered:s,search:a})}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),j.a.get("/admin/users").then((function(t){e.setState({users:t.data,filtered:t.data,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.pendingApiCall,n=e.search,s=e.filtered,i=Object(u.jsx)(Je,{});return a||(i=0===t.length?Object(u.jsx)("h3",{children:"There are no users"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"input-group mb-3",children:[Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"Search user",name:"search",value:n,onChange:this.onSearchChange}),Object(u.jsx)("div",{className:"input-group-append",children:Object(u.jsx)("span",{className:"input-group-text",children:Object(u.jsx)("i",{className:"fa fa-search"})})})]}),Object(u.jsx)("div",{className:"table-responsive",children:Object(u.jsxs)("table",{className:"table table-dark table-striped table-bordered table-hover",children:[Object(u.jsx)("thead",{className:"thead-light",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"col",children:"Username"}),Object(u.jsx)("th",{scope:"col",children:"Register date"}),Object(u.jsx)("th",{scope:"col",children:"E-mail"}),Object(u.jsx)("th",{scope:"col",children:"Detail"})]})}),Object(u.jsx)("tbody",{children:s.map((function(e){return Object(u.jsx)(Jt,Object(ye.a)({},e))}))})]})})]})),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded p-md-5 p-2 container gray-noise-background mb-3",children:[Object(u.jsx)("h2",{className:"mb-5",children:"User Manager"}),i]})}}]),a}(n.Component),Xt=Qt,Kt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={userId:e.props.match.params.userId,username:"",email:"",createdAt:null,isBanned:!1,isTranslator:!0,isInstitutionOwner:!1,institutionName:"",pendingApiCall:!0,pendingApiCallUsernameUpdate:!1,pendingApiCallChangePassword:!1,pendingApiCallTranslator:!1,pendingApiCallBan:!1,pendingApiCallRemoveInstitution:!1,usernameUpdated:!1,errors:{}},e.onChange=function(t){var a=Object(ye.a)({},e.state.errors);delete a[t.target.name],e.setState(Object(ve.a)({errors:a,usernameUpdated:!1},t.target.name,t.target.value))},e.handleApiError=function(t,a){if(t.response.data&&t.response.data.validationErrors){var n,s=Object(ye.a)(Object(ye.a)({},e.state.errors),t.response.data.validationErrors);e.setState((n={},Object(ve.a)(n,a,!1),Object(ve.a)(n,"errors",s),n))}},e.onClickUsernameUpdate=function(t){t.preventDefault(),e.setState({pendingApiCallUsernameUpdate:!0}),P(e.state.userId,{username:e.state.username}).then((function(t){e.setState({pendingApiCallUsernameUpdate:!1,usernameUpdated:!0})})).catch((function(e){return Fe(e)})).catch((function(t){e.handleApiError(t,"pendingApiCallUsernameUpdate")}))},e.onPasswordChange=function(){var t=e.state,a=t.username,n=t.email;window.confirm("Do you really want to generate new password for user "+a+" and send it to mail: "+n)&&(e.setState({pendingApiCallChangePassword:!0}),B(e.state.userId).then((function(t){e.setState({pendingApiCallChangePassword:!1})})).catch((function(e){return Fe(e)})))},e.onTranslatorChange=function(){var t=e.state,a=t.userId,n=t.isTranslator;window.confirm("Do you really want to change translator rights?")&&(e.setState({pendingApiCallTranslator:!0}),_(a,{value:!n}).then((function(t){e.setState({pendingApiCallTranslator:!1,isTranslator:!n})})).catch((function(e){return Fe(e)})))},e.onBanChange=function(){var t=e.state,a=t.userId,n=t.isBanned;window.confirm("Do you really want to change access rights?")&&(e.setState({pendingApiCallBan:!0}),G(a,{value:!n}).then((function(t){e.setState({pendingApiCallBan:!1,isBanned:!n})})).catch((function(e){return Fe(e)})))},e.onInstitutionRemove=function(){var t=e.state,a=t.userId,n=t.institutionName;window.confirm("Do you really want to remove managerial rights? It may cause deletion of institution: "+n)&&(e.setState({pendingApiCallRemoveInstitution:!0}),q(a).then((function(t){e.setState({pendingApiCallRemoveInstitution:!1,isInstitutionOwner:!1,institutionName:""})})).catch((function(e){return Fe(e)})))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;this.setState({pendingApiCall:!0}),(e=this.state.userId,j.a.get("/admin/users/"+e)).then((function(e){var a=e.data,n=a.username,s=a.email,i=a.createdAt,r=a.isBanned,c=a.isTranslator,l=a.isInstitutionOwner,o=a.institutionName;t.setState({username:n,email:s,createdAt:i,isBanned:r,isTranslator:c,isInstitutionOwner:l,institutionName:o,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.email,s=t.createdAt,i=t.isBanned,r=t.isTranslator,c=t.isInstitutionOwner,l=t.institutionName,o=t.pendingApiCall,d=t.pendingApiCallUsernameUpdate,b=t.pendingApiCallChangePassword,m=t.pendingApiCallTranslator,h=t.pendingApiCallBan,p=t.pendingApiCallRemoveInstitution,j=t.usernameUpdated,g=t.errors,f=Object(u.jsx)(Je,{});return o||(f=Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"mb-4",children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Registration date: "}),new Date(s).toLocaleDateString("en-US")]}),Object(u.jsxs)("form",{className:"mb-4",children:[j&&Object(u.jsx)("div",{className:"alert alert-success",role:"alert",children:"Username updated"}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"username",value:a,onChange:this.onChange,hasError:g.username&&!0,error:g.username})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onClickUsernameUpdate(t)},className:"btn btn-primary w-100 my-2",disabled:d||""===a,pendingApiCall:d,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Update username"]})]}),Object(u.jsx)("h5",{children:"Password Change"}),Object(u.jsxs)("p",{children:["Generate new password and send it to email: ",Object(u.jsx)("span",{className:"font-weight-bold",children:n})]}),Object(u.jsxs)(Ce,{onClick:this.onPasswordChange,className:"btn btn-danger btn-lg my-1",disabled:b,pendingApiCall:b,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-key"})," Generate new password"]}),Object(u.jsx)("h5",{className:"mt-4",children:"Translator Rights"}),Object(u.jsx)("p",{children:"Change user's right to translate"}),Object(u.jsxs)(Ce,{onClick:this.onTranslatorChange,className:"btn btn-lg my-1 "+(r?"btn-primary":"btn-secondary"),disabled:m,pendingApiCall:m,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-globe"})," ",r?"Translator rights on":"Translator rights off"]}),c&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h5",{className:"mt-4",children:"Institution"}),Object(u.jsxs)("p",{children:["User is a manager of: ",Object(u.jsx)("span",{className:"font-weight-bold",children:l})]}),Object(u.jsxs)(Ce,{onClick:this.onInstitutionRemove,className:"btn btn-lg my-1 btn-danger",disabled:p,pendingApiCall:p,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-times"})," Remove managerial rights"]})]}),Object(u.jsx)("h5",{className:"mt-4",children:"Ban"}),Object(u.jsx)("p",{children:"Change user's access to the system"}),Object(u.jsxs)(Ce,{onClick:this.onBanChange,className:"btn btn-lg my-1 "+(i?"btn-danger":"btn-primary"),disabled:h,pendingApiCall:h,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-user"})," ",i?"Banned":"Access allowed"]})]})),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded p-md-5 p-2 container gray-noise-background mb-3",children:[Object(u.jsx)("h2",{className:"mb-5",children:"User Details"}),f]})}}]),a}(n.Component),Ht=Kt,Wt=function(e){return Object(u.jsx)("div",{className:"card mb-4",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-md-9",children:[Object(u.jsx)("h3",{className:"card-title",children:e.name}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Registration date: "}),new Date(e.createdAt).toLocaleDateString("en-US")]}),null!==e.description&&""!==e.description&&Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Description: "}),e.description]})]}),Object(u.jsxs)("div",{className:"col-md-3 mt-md-0 mt-3",children:[Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/rooms/"+e.buildingId,children:Object(u.jsxs)("button",{type:"button",className:"btn btn-primary w-100",children:[Object(u.jsx)("i",{className:"fa fa-bars"})," Rooms"]})}),Object(u.jsx)("br",{}),Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/buildings/"+e.buildingId,children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info w-100 mt-2",children:[Object(u.jsx)("i",{className:"fa fa-pencil"})," Detail"]})}),Object(u.jsx)("br",{}),Object(u.jsxs)(Ce,{onClick:function(){return e.onClickDelete(e.buildingId)},className:"btn btn-danger w-100 mt-2",disabled:e.pendingApiCall,pendingApiCall:e.pendingApiCall,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-times"})," Delete"]})]})]})})})},Yt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={buildings:[],pendingApiCall:!1},e.onClickDelete=function(t){if(window.confirm("Do you really want to delete this building?")){var a,n=[],s=e.state.buildings,i=Object(nt.a)(s);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.buildingId===t?n.push(Object(ye.a)(Object(ye.a)({},r),{},{pendingApiCall:!0})):n.push(Object(ye.a)({},r))}}catch(c){i.e(c)}finally{i.f()}e.setState({buildings:n}),J(t).then((function(a){n=(n=Object(at.a)(e.state.buildings)).filter((function(e){return e.buildingId!==t})),e.setState({buildings:n})})).catch((function(e){return Fe(e)}))}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),z().then((function(t){var a,n=t.data,s=Object(nt.a)(n);try{for(s.s();!(a=s.n()).done;){a.value.pendingApiCall=!1}}catch(i){s.e(i)}finally{s.f()}e.setState({buildings:n,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state.buildings.map((function(t){return Object(u.jsx)(Wt,Object(ye.a)(Object(ye.a)({},t),{},{onClickDelete:e.onClickDelete}),t.buildingId)})),a=Object(u.jsx)(Je,{});return this.state.pendingApiCall||(a=0===this.state.buildings.length?Object(u.jsx)("h4",{children:"There are no buildings"}):t),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Institution Buildings"}),Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/buildings/addBuilding",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-lg mt-3 btn-success mb-4",children:[Object(u.jsx)("i",{className:"fa fa-plus-circle"})," Add new building"]})}),a]})}}]),a}(n.Component),Zt=Yt,$t=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={name:"",description:"",pendingApiCall:!1,errors:{}},e.onBuildingCreate=function(t){t.preventDefault(),e.setState({pendingApiCall:!0});var a=e.state.description;""===a&&(a=null),V({name:e.state.name,description:a}).then((function(t){e.setState({pendingApiCall:!1},(function(){return e.props.history.push("/myInstitution/buildings")}))})).catch((function(e){return Fe(e)})).catch((function(t){var a=Object(ye.a)({},e.state.errors);t.response.data&&t.response.data.validationErrors&&(a=Object(ye.a)({},t.response.data.validationErrors)),e.setState({pendingApiCall:!1,errors:a})}))},e.onChange=function(t){var a=Object(ye.a)({},e.state.errors);delete a[t.target.name],e.setState(Object(ve.a)({errors:a},t.target.name,t.target.value))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description,s=t.pendingApiCall,i=t.errors;return Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"New Building"}),Object(u.jsxs)("form",{className:"mt-4",children:[Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"name",value:a,onChange:this.onChange,hasError:i.name&&!0,error:i.name})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Description",type:"textarea",placeholder:"Enter description",name:"description",value:n,onChange:this.onChange,hasError:i.description&&!0,error:i.description})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onBuildingCreate(t)},className:"btn btn-primary w-100 my-2",disabled:s||""===a,pendingApiCall:s,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Create building"]})]})]})}}]),a}(n.Component),ea=$t,ta=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={buildingId:e.props.match.params.buildingId,name:"",description:"",pendingApiCallGet:!1,pendingApiCallUpdate:!1,errors:{}},e.onBuildingUpdate=function(t){t.preventDefault(),e.setState({pendingApiCallUpdate:!0});var a=e.state.description;""===a&&(a=null),Q({name:e.state.name,description:a},e.state.buildingId).then((function(t){e.setState({pendingApiCallUpdate:!1},(function(){return e.props.history.push("/myInstitution/buildings")}))})).catch((function(e){return Fe(e)})).catch((function(t){var a=Object(ye.a)({},e.state.errors);t.response.data&&t.response.data.validationErrors&&(a=Object(ye.a)({},t.response.data.validationErrors)),e.setState({pendingApiCallUpdate:!1,errors:a})}))},e.onChange=function(t){var a=Object(ye.a)({},e.state.errors);delete a[t.target.name],e.setState(Object(ve.a)({errors:a},t.target.name,t.target.value))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;this.setState({pendingApiCallGet:!0}),(e=this.state.buildingId,j.a.get("/location/buildings/"+e)).then((function(e){var a=e.data,n=a.name,s=a.description;t.setState({name:n,description:s,pendingApiCallGet:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description,s=t.pendingApiCallGet,i=t.pendingApiCallUpdate,r=t.errors;return s?Object(u.jsx)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:Object(u.jsx)(Je,{})}):Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Update Building"}),Object(u.jsxs)("form",{className:"mt-4",children:[Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"name",value:a,onChange:this.onChange,hasError:r.name&&!0,error:r.name})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Description",type:"textarea",placeholder:"Enter description",name:"description",value:n,onChange:this.onChange,hasError:r.description&&!0,error:r.description})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onBuildingUpdate(t)},className:"btn btn-primary w-100 my-2",disabled:i||""===a,pendingApiCall:i,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Update building"]})]})]})}}]),a}(n.Component),aa=ta,na=function(e){return Object(u.jsx)("div",{className:"card mb-4",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-md-9",children:[Object(u.jsx)("h3",{className:"card-title",children:e.name}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Registration date: "}),new Date(e.createdAt).toLocaleDateString("en-US")]}),null!==e.description&&""!==e.description&&Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Description: "}),e.description]})]}),Object(u.jsxs)("div",{className:"col-md-3 mt-md-0 mt-3",children:[Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/showcases/"+e.roomId,children:Object(u.jsxs)("button",{type:"button",className:"btn btn-primary w-100",children:[Object(u.jsx)("i",{className:"fa fa-bars"})," Show-cases"]})}),Object(u.jsx)("br",{}),Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/rooms/"+e.buildingId+"/"+e.roomId,children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info w-100 mt-2",children:[Object(u.jsx)("i",{className:"fa fa-pencil"})," Detail"]})}),Object(u.jsx)("br",{}),Object(u.jsxs)(Ce,{onClick:function(){return e.onClickDelete(e.roomId)},className:"btn btn-danger w-100 mt-2",disabled:e.pendingApiCall,pendingApiCall:e.pendingApiCall,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-times"})," Delete"]})]})]})})})},sa=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={buildingId:e.props.match.params.buildingId,rooms:[],pendingApiCall:!1},e.onClickDelete=function(t){if(window.confirm("Do you really want to delete this room?")){var a,n=[],s=e.state.rooms,i=Object(nt.a)(s);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.roomId===t?n.push(Object(ye.a)(Object(ye.a)({},r),{},{pendingApiCall:!0})):n.push(Object(ye.a)({},r))}}catch(c){i.e(c)}finally{i.f()}e.setState({rooms:n}),X(t).then((function(a){n=(n=Object(at.a)(e.state.rooms)).filter((function(e){return e.roomId!==t})),e.setState({rooms:n})})).catch((function(e){return Fe(e)}))}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),K(this.state.buildingId).then((function(t){var a,n=t.data,s=Object(nt.a)(n);try{for(s.s();!(a=s.n()).done;){a.value.pendingApiCall=!1}}catch(i){s.e(i)}finally{s.f()}e.setState({rooms:n,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state.rooms.map((function(t){return Object(u.jsx)(na,Object(ye.a)(Object(ye.a)({},t),{},{onClickDelete:e.onClickDelete}),t.roomId)})),a=Object(u.jsx)(Je,{});return this.state.pendingApiCall||(a=0===this.state.rooms.length?Object(u.jsx)("h4",{children:"There are no rooms"}):t),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Rooms"}),Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/rooms/"+this.state.buildingId+"/addRoom",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-lg mt-3 btn-success mb-4",children:[Object(u.jsx)("i",{className:"fa fa-plus-circle"})," Add new room"]})}),a]})}}]),a}(n.Component),ia=sa,ra=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={buildingId:e.props.match.params.buildingId,name:"",description:"",pendingApiCall:!1,errors:{}},e.onRoomCreate=function(t){t.preventDefault(),e.setState({pendingApiCall:!0});var a=e.state.description;""===a&&(a=null),H({name:e.state.name,description:a},e.state.buildingId).then((function(t){e.setState({pendingApiCall:!1},(function(){return e.props.history.push("/myInstitution/rooms/"+e.state.buildingId)}))})).catch((function(e){return Fe(e)})).catch((function(t){var a=Object(ye.a)({},e.state.errors);t.response.data&&t.response.data.validationErrors&&(a=Object(ye.a)({},t.response.data.validationErrors)),e.setState({pendingApiCall:!1,errors:a})}))},e.onChange=function(t){var a=Object(ye.a)({},e.state.errors);delete a[t.target.name],e.setState(Object(ve.a)({errors:a},t.target.name,t.target.value))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description,s=t.pendingApiCall,i=t.errors;return Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"New Room"}),Object(u.jsxs)("form",{className:"mt-4",children:[Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"name",value:a,onChange:this.onChange,hasError:i.name&&!0,error:i.name})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Description",type:"textarea",placeholder:"Enter description",name:"description",value:n,onChange:this.onChange,hasError:i.description&&!0,error:i.description})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onRoomCreate(t)},className:"btn btn-primary w-100 my-2",disabled:s||""===a,pendingApiCall:s,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Create room"]})]})]})}}]),a}(n.Component),ca=ra,la=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={roomId:e.props.match.params.roomId,buildingId:e.props.match.params.buildingId,name:"",description:"",pendingApiCallGet:!1,pendingApiCallUpdate:!1,errors:{}},e.onRoomUpdate=function(t){t.preventDefault(),e.setState({pendingApiCallUpdate:!0});var a=e.state.description;""===a&&(a=null),W({name:e.state.name,description:a},e.state.roomId).then((function(t){e.setState({pendingApiCallUpdate:!1},(function(){return e.props.history.push("/myInstitution/rooms/"+e.state.buildingId)}))})).catch((function(e){return Fe(e)})).catch((function(t){var a=Object(ye.a)({},e.state.errors);t.response.data&&t.response.data.validationErrors&&(a=Object(ye.a)({},t.response.data.validationErrors)),e.setState({pendingApiCallUpdate:!1,errors:a})}))},e.onChange=function(t){var a=Object(ye.a)({},e.state.errors);delete a[t.target.name],e.setState(Object(ve.a)({errors:a},t.target.name,t.target.value))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;this.setState({pendingApiCallGet:!0}),(e=this.state.roomId,j.a.get("/location/rooms/"+e)).then((function(e){var a=e.data,n=a.name,s=a.description;t.setState({name:n,description:s,pendingApiCallGet:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description,s=t.pendingApiCallGet,i=t.pendingApiCallUpdate,r=t.errors;return s?Object(u.jsx)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:Object(u.jsx)(Je,{})}):Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Update Room"}),Object(u.jsxs)("form",{className:"mt-4",children:[Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"name",value:a,onChange:this.onChange,hasError:r.name&&!0,error:r.name})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Description",type:"textarea",placeholder:"Enter description",name:"description",value:n,onChange:this.onChange,hasError:r.description&&!0,error:r.description})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onRoomUpdate(t)},className:"btn btn-primary w-100 my-2",disabled:i||""===a,pendingApiCall:i,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Update room"]})]})]})}}]),a}(n.Component),oa=la,da=function(e){return Object(u.jsx)("div",{className:"card mb-4",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-md-9",children:[Object(u.jsx)("h3",{className:"card-title",children:e.name}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Registration date: "}),new Date(e.createdAt).toLocaleDateString("en-US")]}),null!==e.description&&""!==e.description&&Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"font-weight-bold",children:"Description: "}),e.description]})]}),Object(u.jsxs)("div",{className:"col-md-3 mt-md-0 mt-3",children:[Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/showcases/"+e.roomId+"/"+e.showcaseId,children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info w-100",children:[Object(u.jsx)("i",{className:"fa fa-pencil"})," Detail"]})}),Object(u.jsx)("br",{}),Object(u.jsxs)(Ce,{onClick:function(){return e.onClickDelete(e.showcaseId)},className:"btn btn-danger w-100 mt-2",disabled:e.pendingApiCall,pendingApiCall:e.pendingApiCall,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-times"})," Delete"]})]})]})})})},ba=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={roomId:e.props.match.params.roomId,showcases:[],pendingApiCall:!1},e.onClickDelete=function(t){if(window.confirm("Do you really want to delete this show-case?")){var a,n=[],s=e.state.showcases,i=Object(nt.a)(s);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.showcaseId===t?n.push(Object(ye.a)(Object(ye.a)({},r),{},{pendingApiCall:!0})):n.push(Object(ye.a)({},r))}}catch(c){i.e(c)}finally{i.f()}e.setState({showcases:n}),Y(t).then((function(a){n=(n=Object(at.a)(e.state.showcases)).filter((function(e){return e.showcaseId!==t})),e.setState({showcases:n})})).catch((function(e){return Fe(e)}))}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({pendingApiCall:!0}),Z(this.state.roomId).then((function(t){var a,n=t.data,s=Object(nt.a)(n);try{for(s.s();!(a=s.n()).done;){a.value.pendingApiCall=!1}}catch(i){s.e(i)}finally{s.f()}e.setState({showcases:n,pendingApiCall:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state.showcases.map((function(t){return Object(u.jsx)(da,Object(ye.a)(Object(ye.a)({},t),{},{onClickDelete:e.onClickDelete}),t.showcaseId)})),a=Object(u.jsx)(Je,{});return this.state.pendingApiCall||(a=0===this.state.showcases.length?Object(u.jsx)("h4",{children:"There are no show-cases"}):t),Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Show-cases"}),Object(u.jsx)(b.b,{exact:!0,to:"/myInstitution/showcases/"+this.state.roomId+"/addShowcase",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-lg mt-3 btn-success mb-4",children:[Object(u.jsx)("i",{className:"fa fa-plus-circle"})," Add new show-case"]})}),a]})}}]),a}(n.Component),ua=ba,ma=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={roomId:e.props.match.params.roomId,name:"",description:"",pendingApiCall:!1,errors:{}},e.onShowcaseCreate=function(t){t.preventDefault(),e.setState({pendingApiCall:!0});var a=e.state.description;""===a&&(a=null),$({name:e.state.name,description:a},e.state.roomId).then((function(t){e.setState({pendingApiCall:!1},(function(){return e.props.history.push("/myInstitution/showcases/"+e.state.roomId)}))})).catch((function(e){return Fe(e)})).catch((function(t){var a=Object(ye.a)({},e.state.errors);t.response.data&&t.response.data.validationErrors&&(a=Object(ye.a)({},t.response.data.validationErrors)),e.setState({pendingApiCall:!1,errors:a})}))},e.onChange=function(t){var a=Object(ye.a)({},e.state.errors);delete a[t.target.name],e.setState(Object(ve.a)({errors:a},t.target.name,t.target.value))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description,s=t.pendingApiCall,i=t.errors;return Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"New Show-case"}),Object(u.jsxs)("form",{className:"mt-4",children:[Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"name",value:a,onChange:this.onChange,hasError:i.name&&!0,error:i.name})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Description",type:"textarea",placeholder:"Enter description",name:"description",value:n,onChange:this.onChange,hasError:i.description&&!0,error:i.description})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onShowcaseCreate(t)},className:"btn btn-primary w-100 my-2",disabled:s||""===a,pendingApiCall:s,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Create show-case"]})]})]})}}]),a}(n.Component),ha=ma,pa=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={roomId:e.props.match.params.roomId,showcaseId:e.props.match.params.showcaseId,name:"",description:"",pendingApiCallGet:!1,pendingApiCallUpdate:!1,errors:{}},e.onShowcaseUpdate=function(t){t.preventDefault(),e.setState({pendingApiCallUpdate:!0});var a=e.state.description;""===a&&(a=null),ee({name:e.state.name,description:a},e.state.showcaseId).then((function(t){e.setState({pendingApiCallUpdate:!1},(function(){return e.props.history.push("/myInstitution/showcases/"+e.state.roomId)}))})).catch((function(e){return Fe(e)})).catch((function(t){var a=Object(ye.a)({},e.state.errors);t.response.data&&t.response.data.validationErrors&&(a=Object(ye.a)({},t.response.data.validationErrors)),e.setState({pendingApiCallUpdate:!1,errors:a})}))},e.onChange=function(t){var a=Object(ye.a)({},e.state.errors);delete a[t.target.name],e.setState(Object(ve.a)({errors:a},t.target.name,t.target.value))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;this.setState({pendingApiCallGet:!0}),(e=this.state.showcaseId,j.a.get("/location/showcases/"+e)).then((function(e){var a=e.data,n=a.name,s=a.description;t.setState({name:n,description:s,pendingApiCallGet:!1})})).catch((function(e){return Fe(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description,s=t.pendingApiCallGet,i=t.pendingApiCallUpdate,r=t.errors;return s?Object(u.jsx)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:Object(u.jsx)(Je,{})}):Object(u.jsxs)("div",{className:"mx-auto mt-5 border rounded gray-noise-background container p-md-5 p-2 mb-3",children:[Object(u.jsx)("h2",{className:"mb-5 font-weight-bold",children:"Update Show-case"}),Object(u.jsxs)("form",{className:"mt-4",children:[Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Name",placeholder:"Enter name",name:"name",value:a,onChange:this.onChange,hasError:r.name&&!0,error:r.name})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)(Ne,{label:"Description",type:"textarea",placeholder:"Enter description",name:"description",value:n,onChange:this.onChange,hasError:r.description&&!0,error:r.description})}),Object(u.jsxs)(Ce,{onClick:function(t){return e.onShowcaseUpdate(t)},className:"btn btn-primary w-100 my-2",disabled:i||""===a,pendingApiCall:i,hasChildren:!0,children:[Object(u.jsx)("i",{className:"fa fa-paper-plane"})," Update show-case"]})]})]})}}]),a}(n.Component),ja=pa,ga=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.user,t=Object(u.jsxs)(ge.d,{children:[Object(u.jsx)(ge.b,{exact:!0,path:"/",component:xe}),Object(u.jsx)(ge.b,{exact:!0,path:"/login",component:we}),Object(u.jsx)(ge.b,{exact:!0,path:"/signup",component:Se}),e.isLoggedIn&&Object(u.jsx)(ge.b,{exact:!0,path:"/profile",component:Ve}),e.isLoggedIn&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution",component:tt}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/addLanguages",component:it}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/addExhibit",component:pt}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/exhibits",component:ft}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/exhibits/:exhibitId",component:xt}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/approve",component:Rt}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/approve/:exhibitId/:languageId",component:Bt}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/buildings",component:Zt}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/buildings/addBuilding",component:ea}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/buildings/:buildingId",component:aa}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/rooms/:buildingId",component:ia}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/rooms/:buildingId/addRoom",component:ca}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/rooms/:buildingId/:roomId",component:oa}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/showcases/:roomId",component:ua}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/showcases/:roomId/addShowcase",component:ha}),e.isInstitutionOwner&&Object(u.jsx)(ge.b,{exact:!0,path:"/myInstitution/showcases/:roomId/:showcaseId",component:ja}),e.isTranslator&&Object(u.jsx)(ge.b,{exact:!0,path:"/institutions",component:Nt}),e.isTranslator&&Object(u.jsx)(ge.b,{exact:!0,path:"/institutions/:institutionId",component:yt}),e.isTranslator&&Object(u.jsx)(ge.b,{exact:!0,path:"/institutions/:institutionId/translate/:exhibitId/:languageId",component:kt}),e.isTranslator&&Object(u.jsx)(ge.b,{exact:!0,path:"/institutions/:institutionId/rate/:exhibitId/:languageId",component:Dt}),e.isTranslator&&Object(u.jsx)(ge.b,{exact:!0,path:"/myTranslations",component:qt}),e.isTranslator&&Object(u.jsx)(ge.b,{exact:!0,path:"/myTranslations/:exhibitId/:languageId",component:Vt}),e.isAdmin&&Object(u.jsx)(ge.b,{exact:!0,path:"/users",component:Xt}),e.isAdmin&&Object(u.jsx)(ge.b,{exact:!0,path:"/users/:userId",component:Ht}),Object(u.jsx)(ge.a,{to:"/"})]});return Object(u.jsx)(je,{children:t})}}]),a}(n.Component),fa=Object(h.b)((function(e){return{user:e}}))(ga);r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(h.a,{store:qe,children:Object(u.jsx)(b.a,{children:Object(u.jsx)(fa,{})})})}),document.getElementById("root"))},76:function(e,t,a){}},[[142,1,2]]]);
//# sourceMappingURL=main.230c6fdb.chunk.js.map