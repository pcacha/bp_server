{"version":3,"sources":["components/NavigationItem.js","apiCalls/apiCalls.js","store/actionsTypes.js","store/authActions.js","components/Navigation.js","components/Footer.js","components/Layout.js","components/Jumbotron.js","components/ThemesCard.js","pages/HomePage.js","components/ButtonWithProgress.js","components/Input.js","components/PageContentContainer.js","pages/LoginPage.js","pages/SignupPage.js","store/authReducer.js","store/store.js","shared/failureHandler.js","components/Breadcrumbs.js","components/PageInfo.js","pages/ProfilePage.js","components/Spinner.js","pages/CreateInstitutionPage.js","shared/sharedConstants.js","pages/UpdateInstitutionPage.js","pages/MyInstitutionPage.js","components/NoContentMessage.js","components/BreadcrumbsLink.js","pages/AddLanguagesPage.js","components/LocationPickerSelect.js","components/LocationPicker.js","pages/AddExhibitPage.js","components/MyExhibitCard.js","pages/MyInstitutionExhibitsPage.js","pages/UpdateExhibitPage.js","components/InstitutionCard.js","pages/TranslateInstitutionsPage.js","components/TranslateExhibitCard.js","pages/TranslateExhibitPage.js","components/ExhibitLanguageCard.js","pages/NewTranslationPage.js","components/TranslatorRateTranslationCard.js","pages/TranslatorRatePage.js","components/ApproveExhibitCard.js","pages/ApproveExhibitPage.js","components/OwnerRateTranslationCard.js","pages/OwnerRatePage.js","components/MyTranslationSequenceCard.js","pages/MyTranslationsPage.js","components/MyTranslationCard.js","pages/TranslationSequencePage.js","components/UserManagerRow.js","pages/UserManagerPage.js","pages/UserDetailPage.js","components/BuildingCard.js","pages/BuildingsPage.js","pages/AddBuildingPage.js","pages/UpdateBuildingPage.js","components/RoomCard.js","pages/RoomsPage.js","pages/AddRoomPage.js","pages/UpdateRoomPage.js","components/ShowcaseCard.js","pages/ShowcasesPage.js","pages/AddShowcasePage.js","pages/UpdateShowcasePage.js","assets/lang-icon.png","pages/InfoPage.js","assets/institution-icon.png","App.js","index.js"],"names":["navigationItem","props","className","exact","activeClassName","to","children","setAuthorizationHeader","token","isLoggedIn","axios","defaults","headers","common","updateUser","user","put","updatePassword","password","saveMyInstitution","institution","post","updateInstitutionImage","img","updateInstitution","addInstitutionLanguage","languageId","addExhibit","exhibit","deleteExhibit","exhibitId","delete","updateExhibitImage","updateExhibitInfoLabelImage","updateExhibit","addInstitutionManager","email","deleteInstitution","saveNewTranslation","translation","getRateOverview","get","setLike","translationId","value","setOfficial","deleteSequence","rollbackTranslation","adminUpdateUsername","userId","username","adminChangePassword","adminChangeTranslator","adminChangeBan","adminRemoveInstitution","getQRCode","getBuildings","saveBuilding","building","deleteBuilding","buildingId","updateBuilding","updatedBuilding","deleteRoom","roomId","getRooms","saveRoom","room","updateRoom","updatedRoom","deleteShowcase","showcaseId","getShowcases","saveShowcase","showcase","updateShowcase","updatedShowcase","LOGOUT_SUCCESS","LOGIN_SUCCESS","SET_USERNAME","SET_EMAIL","SET_IS_INSTITUTION_OWNER","login","credentials","dispatch","apiCalls","then","response","loginSuccess","data","decodedToken","jwt_decode","id","createdAt","isTranslator","isInstitutionOwner","isAdmin","expiredAt","exp","type","actionsTypes","payload","getFreshToken","signup","logout","setIsInstitutionOwner","Navigation","this","NavigationItem","role","href","onClick","e","preventDefault","Component","connect","state","authActions","Footer","layout","jumbotron","themesCard","title","info","home","Jumbotron","ThemesCard","ButtonWithProgress","disabled","pendingApiCall","hasChildren","text","Input","inputClassName","undefined","hasError","renderedInput","name","placeholder","onChange","accept","onlyImage","htmlFor","rows","label","error","PageContentContainer","isAuth","LoginPage","apiError","event","setState","target","onClickLogin","body","history","push","catch","disabledSubmit","SignupPage","passwordRepeat","errors","passwordRepeatConfirmed","onClickSignup","validationErrors","initialState","authReducer","action","actions","localStorageData","localStorage","getItem","initState","persistedState","validToken","JSON","parse","currentTime","Date","now","console","log","store","reactReduxDevTools","window","__REDUX_DEVTOOLS_EXTENSION__","middleware","thunk","navigator","userAgent","includes","createStore","compose","applyMiddleware","subscribe","getState","setItem","stringify","setTimeout","handleError","Promise","resolve","reject","status","Breadcrumbs","PageInfo","ProfilePage","pendingApiCallUpdateUser","pendingApiCallUpdatePassword","userUpdated","passwordUpdated","handleApiError","apiCall","onClickUserUpdate","setUsername","setEmail","onClickPasswordUpdate","toLocaleDateString","Spinner","CreateInstitutionPage","address","description","latitudeString","longitudeString","encodedImage","imageSelect","onImageSelect","files","length","file","reader","FileReader","onloadend","result","readAsDataURL","clearImage","onClickCreate","redirect","src","alt","SERVER_ROOT_URL","INSTITUTIONS_IMAGES_URL","EXHIBITS_IMAGES_URL","INFO_LABELS_IMAGES_URL","NOTHING_SELECTED_LABEL","UpdateInstitutionPage","latitude","longitude","image","pendingApiCallUpdateInstitution","pendingApiCallUpdateImage","pendingApiCallDeleteInstitution","pendingApiCallAddManager","institutionUpdated","imageUpdated","managerAdded","onClickImageUpdate","message","onEmailChange","onClickInstitutionUpdate","onClickInstitutionDelete","confirm","onClickManagerAdd","MyInstitutionPage","isOwner","path","NoContentMessage","classes","BreadcrumbsLink","AddLanguagesPage","pendingApiCallDownloadLanguages","possible","chosen","filtered","search","onSearchChange","filter","lan","toLowerCase","onLanguageAddClick","newFiltered","fil","newPossible","pos","newChosen","possibleLanguages","chosenLanguages","map","LocationPickerSelect","fetchedObjects","selectedId","currValue","selectedLabel","fetch","objects","newSelectedLabel","o","idName","options","isClearable","LocationPicker","fetchRooms","fetchShowcases","onBuildingChange","newVal","update","onRoomChange","onShowcaseChange","AddExhibitPage","infoLabelText","encodedInfoLabel","infoLabelSelect","created","onInfoLabelTextChange","editor","getData","currBuildingId","currRoomId","currShowcaseId","updateLocation","ClassicEditor","config","removePlugins","MyExhibitCard","onClickDownloadQRCode","onClickDelete","MyInstitutionExhibitsPage","exhibits","newExhibits","ex","a","document","createElement","download","click","content","UpdateExhibitPage","infoLabel","pendingApiCallGetInstitution","pendingApiCallUpdateInfoLabel","exhibitUpdated","infoLabelUpdated","encoded","updated","encode","select","onClickInfoImageUpdate","onClickExhibitUpdate","match","params","InstitutinCard","institutionId","TranslateInstitutionsPage","institutions","i","InstitutionCard","TranslateExhibitCard","languages","selectLang","lang","buttonsDisabled","TranslateExhibitPage","ExhibitLanguageCard","exhibitName","languageName","NewTranslationPage","pendingApiCallGetNewTranslation","pendingApiCallCreateTranslation","onTranslationCreate","onTextChange","DOMPurify","sanitize","TranslatorRateTranslationCard","cardStyle","isOfficial","btnClass","liked","authorUsername","translatedText","likesCount","onLikeChange","TranslatorRatePage","language","translations","newValue","newTranslations","t","ApproveExhibitCard","buttonDisabled","ApproveExhibitPage","OwnerRateTranslationCard","likeBtnClass","officialBtnClass","onOfficialChange","pendingApiCallSetOfficial","OwnerRatePage","MyTranslationSequenceCard","exhibitImage","institutionName","latestTranslationCreatedAt","MyTranslationsPage","sequences","newSequences","s","index","MyTranslationCard","order","onRollback","TranslationSequencePage","slice","translationsLength","UserManagerRow","UserManagerPage","users","u","scope","UserDetailPage","isBanned","pendingApiCallUsernameUpdate","pendingApiCallChangePassword","pendingApiCallTranslator","pendingApiCallBan","pendingApiCallRemoveInstitution","usernameUpdated","onClickUsernameUpdate","onPasswordChange","onTranslatorChange","onBanChange","onInstitutionRemove","BuildingCard","BuildingsPage","buildings","newBuildings","b","AddBuildingPage","onBuildingCreate","buildingDescription","UpdateBuildingPage","pendingApiCallGet","pendingApiCallUpdate","onBuildingUpdate","RoomCard","RoomsPage","rooms","newRooms","r","AddRoomPage","onRoomCreate","roomDescription","UpdateRoomPage","onRoomUpdate","ShowcaseCard","ShowcasePage","showcases","newShowcases","AddShowcasePage","onShowcaseCreate","showcaseDescription","UpdateShowcasePage","onShowcaseUpdate","InfoPage","langIcon","App","routes","component","HomePage","ShowcasesPage","Layout","ReactDOM","render","StrictMode","getElementById"],"mappings":"uMAeeA,EARQ,SAACC,GAAD,OACnB,oBAAIC,UAAU,WAAd,SACI,cAAC,IAAD,CAASC,MAAOF,EAAME,MAAOC,gBAAgB,SAASF,UAAU,WAAWG,GAAIJ,EAAMI,GAArF,SACKJ,EAAMK,c,wBCHNC,EAAyB,SAAC,GAAyB,IAAxBC,EAAuB,EAAvBA,MAAuB,EAAhBC,WAEvCC,IAAMC,SAASC,QAAQC,OAAvB,cAAiDL,SAE1CE,IAAMC,SAASC,QAAQC,OAAvB,eAmCFC,EAAa,SAAAC,GACtB,OAAOL,IAAMM,IAAI,oBAAqBD,IAQ7BE,EAAiB,SAAAC,GAC1B,OAAOR,IAAMM,IAAI,wBAAyBE,IAgBjCC,EAAoB,SAAAC,GAC7B,OAAOV,IAAMW,KAAK,8BAA+BD,IAQxCE,EAAyB,SAAAC,GAClC,OAAOb,IAAMM,IAAI,0CAA2CO,IAQnDC,EAAoB,SAAAJ,GAC7B,OAAOV,IAAMM,IAAI,8BAA+BI,IAgBvCK,EAAyB,SAAAC,GAClC,OAAOhB,IAAMW,KAAK,yCAA2CK,IAQpDC,EAAa,SAAAC,GACtB,OAAOlB,IAAMW,KAAK,YAAaO,IAgBtBC,EAAgB,SAAAC,GACzB,OAAOpB,IAAMqB,OAAO,aAAeD,IAkB1BE,EAAqB,SAACF,EAAWP,GAC1C,OAAOb,IAAMM,IAAI,aAAec,EAAY,eAAgBP,IASnDU,EAA8B,SAACH,EAAWP,GACnD,OAAOb,IAAMM,IAAI,aAAec,EAAY,mBAAoBP,IASvDW,EAAgB,SAACJ,EAAWF,GACrC,OAAOlB,IAAMM,IAAI,aAAec,EAAWF,IAQlCO,EAAwB,SAAAC,GACjC,OAAO1B,IAAMW,KAAK,yCAA0Ce,IAOnDC,EAAoB,WAC7B,OAAO3B,IAAMqB,OAAO,gCAqCXO,EAAqB,SAACR,EAAWJ,EAAYa,GACtD,OAAO7B,IAAMW,KAAK,qBAAuBS,EAAY,IAAMJ,EAAYa,IAS9DC,EAAkB,SAACV,EAAWJ,GACvC,OAAOhB,IAAM+B,IAAI,sBAAwBX,EAAY,IAAMJ,IASlDgB,EAAU,SAACC,EAAeC,GACnC,OAAOlC,IAAMM,IAAI,sBAAwB2B,EAAeC,IAiB/CC,EAAc,SAACF,EAAeC,GACvC,OAAOlC,IAAMM,IAAI,0BAA4B2B,EAAeC,IAiBnDE,EAAiB,SAAChB,EAAWJ,GACtC,OAAOhB,IAAMqB,OAAO,2BAA6BD,EAAY,IAAMJ,IAkB1DqB,EAAsB,SAAAJ,GAC/B,OAAOjC,IAAMqB,OAAO,0BAA4BY,IA0BvCK,EAAsB,SAACC,EAAQC,GACxC,OAAOxC,IAAMM,IAAI,gBAAkBiC,EAAS,kBAAmBC,IAQtDC,EAAsB,SAAAF,GAC/B,OAAOvC,IAAMM,IAAI,gBAAkBiC,EAAS,oBASnCG,EAAwB,SAACH,EAAQL,GAC1C,OAAOlC,IAAMM,IAAI,gBAAkBiC,EAAS,oBAAqBL,IASxDS,EAAiB,SAACJ,EAAQL,GACnC,OAAOlC,IAAMM,IAAI,gBAAkBiC,EAAS,aAAcL,IAQjDU,EAAyB,SAAAL,GAClC,OAAOvC,IAAMM,IAAI,gBAAkBiC,EAAS,uBAQnCM,EAAY,SAAAzB,GACrB,OAAOpB,IAAM+B,IAAI,aAAeX,EAAY,YAOnC0B,EAAe,WACxB,OAAO9C,IAAM+B,IAAI,wBAQRgB,EAAe,SAAAC,GACxB,OAAOhD,IAAMW,KAAK,sBAAuBqC,IAQhCC,EAAiB,SAAAC,GAC1B,OAAOlD,IAAMqB,OAAO,uBAAyB6B,IAkBpCC,EAAiB,SAACC,EAAiBF,GAC5C,OAAOlD,IAAMM,IAAI,uBAAyB4C,EAAYE,IAQ7CC,EAAa,SAAAC,GACtB,OAAOtD,IAAMqB,OAAO,mBAAqBiC,IAQhCC,EAAW,SAAAL,GACpB,OAAOlD,IAAM+B,IAAI,uBAAyBmB,IASjCM,EAAW,SAACC,EAAMP,GAC3B,OAAOlD,IAAMW,KAAK,mBAAqBuC,EAAYO,IAkB1CC,EAAa,SAACC,EAAaL,GACpC,OAAOtD,IAAMM,IAAI,mBAAqBgD,EAAQK,IAQrCC,EAAiB,SAAAC,GAC1B,OAAO7D,IAAMqB,OAAO,uBAAyBwC,IAQpCC,EAAe,SAAAR,GACxB,OAAOtD,IAAM+B,IAAI,2BAA6BuB,IASrCS,EAAe,SAACC,EAAUV,GACnC,OAAOtD,IAAMW,KAAK,uBAAyB2C,EAAQU,IAkB1CC,GAAiB,SAACC,EAAiBL,GAC5C,OAAO7D,IAAMM,IAAI,uBAAyBuD,EAAYK,ICjgB7CC,GAAiB,iBAIjBC,GAAgB,gBAIhBC,GAAe,eAIfC,GAAY,YAIZC,GAA2B,2B,SCX3BC,GAAQ,SAACC,GAClB,OAAO,SAAAC,GACH,OFUa,SAAAD,GACjB,OAAOzE,IAAMW,KAAK,eAAgB8D,GEXvBE,CAAeF,GAAaG,MAAK,SAAAC,GAGpC,OADAH,EAASI,GAAaD,EAASE,KAAKjF,QAC7B+E,OASbC,GAAe,SAAChF,GAElB,IAAMkF,EAAeC,aAAWnF,GAE1BO,EAAO,CACT6E,GAAIF,EAAaE,GACjB1C,SAAUwC,EAAaxC,SACvBd,MAAOsD,EAAatD,MACpByD,UAAWH,EAAaG,UACxBC,aAAcJ,EAAaI,aAC3BC,mBAAoBL,EAAaK,mBACjCC,QAASN,EAAaM,QACtBvF,YAAY,EACZD,MAAOA,EACPyF,UAAWP,EAAaQ,KAI5B,MAAO,CACHC,KAAMC,GACNC,QAAStF,IAOJuF,GAAgB,WACzB,OAAO,SAAAlB,GFZA1E,IAAM+B,IAAI,gBEaY6C,MAAK,SAAAC,GAE1BH,EAASI,GAAaD,EAASE,KAAKjF,aASnC+F,GAAS,SAACxF,GACnB,OAAO,SAAAqE,GACH,OFnCc,SAAArE,GAClB,OAAOL,IAAMW,KAAK,kBAAmBN,GEkC1BsE,CAAgBtE,GAAMuE,MAAK,SAAAC,GAC9B,IAAMJ,EAAc,CAChBjC,SAAUnC,EAAKmC,SACfhC,SAAUH,EAAKG,UAGnB,OAAOkE,EAASF,GAAMC,SAQrBqB,GAAS,WAClB,MAAO,CACHL,KAAMC,KA8BDK,GAAwB,SAAC7D,GAClC,MAAO,CACHuD,KAAMC,GACNC,QAASzD,ICxGX8D,G,4JAGF,WAAU,IAAD,OACE3F,EAAQ4F,KAAK1G,MAAbc,KAGP,OACI,qBAAKb,UAAU,qCAAf,SACI,qBAAKA,UAAU,gDAAgD0F,GAAG,WAAlE,SACI,sBAAK1F,UAAU,YAAf,UACI,cAAC,IAAD,CAAMA,UAAU,eAAeG,GAAG,IAAlC,iBACA,wBAAQH,UAAU,iBAAiBiG,KAAK,SAAS,cAAY,WACrD,cAAY,0BAA0B,gBAAc,yBACpD,gBAAc,QAAQ,aAAW,oBAFzC,SAGI,sBAAMjG,UAAU,0BAGpB,qBAAKA,UAAU,2BAA2B0F,GAAG,yBAA7C,SACI,qBAAI1F,UAAU,+CAAd,UACI,cAAC0G,EAAD,CAAgBzG,OAAK,EAACE,GAAG,IAAzB,kBACA,cAACuG,EAAD,CAAgBzG,OAAK,EAACE,GAAG,QAAzB,kBACCU,EAAKiF,SAAW,cAACY,EAAD,CAAgBvG,GAAG,SAAnB,mBAChBU,EAAK+E,cAAgB,cAACc,EAAD,CAAgBvG,GAAG,gBAAnB,uBACrBU,EAAK+E,cAAgB,cAACc,EAAD,CAAgBvG,GAAG,kBAAnB,6BACrBU,EAAKgF,oBAAsB,cAACa,EAAD,CAAgBvG,GAAG,WAAnB,qBAC3BU,EAAKN,YAAc,cAACmG,EAAD,CAAgBvG,GAAG,iBAAnB,4BAEhBU,EAAKN,WACD,qBAAIP,UAAU,oBAAd,UACI,oBAAGA,UAAU,WAAW0F,GAAG,iBAAiBiB,KAAK,SAASC,KAAK,KAC5D,cAAY,WAAW,gBAAc,OAAO,gBAAc,QAD7D,UAEK/F,EAAKmC,SAAW,IACjB,mBAAGhD,UAAU,aAAa,cAAY,YAG1C,sBAAKA,UAAU,gDAAgD,kBAAgB,iBAA/E,UACI,eAAC,IAAD,CAASA,UAAU,gBAAgBG,GAAG,WAAtC,UACI,mBAAGH,UAAU,eADjB,iBAGA,qBAAKA,UAAU,qBACf,oBAAG6G,QAAS,SAACC,GAAOA,EAAEC,iBAAkB,EAAKhH,MAAMuG,UAAYM,KAAK,KAAK5G,UAAU,gBAAgB0F,GAAG,SAAtG,UACI,mBAAG1F,UAAU,mBADjB,mBAMR,qCACI,cAAC0G,EAAD,CAAgBvG,GAAG,UAAnB,oBACA,cAACuG,EAAD,CAAgBvG,GAAG,SAAnB,sC,GAjDnB6G,aAiFVC,gBAhBS,SAACC,GACrB,MAAO,CACHrG,KAAMqG,MAQa,SAAChC,GACxB,MAAO,CACHoB,OAAQ,kBAAMpB,EAASiC,UAIhBF,CAA6CT,IC3E7CY,OATf,SAAgBrH,GACZ,OACI,yBAAQC,UAAU,yDAAlB,UACI,yCACA,mECUGqH,GAZA,SAACtH,GAAD,OACX,qCACI,sBAAKC,UAAU,yBAAf,UACI,cAAC,GAAD,IACA,kCACKD,EAAMK,cAGf,cAAC,GAAD,Q,SCGOkH,GAbG,SAACvH,GAAD,OACd,qBAAKC,UAAU,QAAf,SACI,qBAAKA,UAAU,2CAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,+BAAf,UACI,oBAAIA,UAAU,6BAAd,uEACA,mBAAGA,UAAU,wBAAb,2GCGLuH,GATI,SAACxH,GAAD,OACf,qBAAKC,UAAU,yCAAf,SACI,sBAAKA,UAAU,yBAAf,UACI,6BAAKD,EAAMyH,QACX,mBAAGxH,UAAU,mBAAb,SAAiCD,EAAM0H,aCiCpCC,GAjCF,SAAC3H,GAAD,OACT,sBAAKC,UAAU,WAAf,UACI,cAAC2H,GAAD,IAEA,sBAAK3H,UAAU,sBAAf,UACI,qBAAKA,UAAU,MAAf,SACI,sBAAKA,UAAU,mEAAf,UACI,2CACA,qKAGR,sBAAKA,UAAU,gBAAf,UACI,cAAC4H,GAAD,CAAYJ,MAAM,sBAAsBC,KAAK,mEAE7C,cAACG,GAAD,CAAYJ,MAAM,4BACNC,KAAK,6FAEjB,cAACG,GAAD,CAAYJ,MAAM,qBACNC,KAAK,kHAErB,qBAAKzH,UAAU,mEAAf,SACI,qBAAKA,UAAU,MAAf,SACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAG,QAAf,SACI,yBAAQ8F,KAAK,SAASjG,UAAU,yBAAhC,UACI,mBAAGA,UAAU,yBADjB,gC,QCHT6H,GAxBY,SAAC9H,GACxB,OACI,yBAAQ+H,SAAU/H,EAAM+H,SAChB9H,UAAWD,EAAMC,WAAa,kBAAmB6G,QAAS9G,EAAM8G,QADxE,UAIQ9G,EAAMgI,gBACN,qBAAK/H,UAAU,qDAAf,SAEI,sBAAMA,UAAU,UAAhB,0BAKJD,EAAMiI,YACFjI,EAAMK,SAENL,EAAMkI,SCkCXC,GAnDD,SAACnI,GACX,IAAIoI,EAAiB,eAEH,SAAfpI,EAAMkG,OACLkC,GAAkB,2BAGAC,IAAnBrI,EAAMsI,WACLF,GAAkBpI,EAAMsI,SAAW,cAAgB,aAGvD,IAAIC,EACA,uBAAOtI,UAAWmI,EAAgBlC,KAAMlG,EAAMkG,MAAQ,OAAQsC,KAAMxI,EAAMwI,KACnEC,YAAazI,EAAMyI,YAAa9F,MAAO3C,EAAM2C,MAAO+F,SAAU1I,EAAM0I,WAmB/E,MAhBkB,SAAf1I,EAAMkG,KACLqC,EACI,sBAAKtI,UAAU,cAAf,UACI,uBAAOiG,KAAK,OAAOjG,UAAWmI,EAAgBzC,GAAG,uBAAuB6C,KAAMxI,EAAMwI,KAAM7F,MAAO3C,EAAM2C,MAAO+F,SAAU1I,EAAM0I,SACvHC,OAAS3I,EAAM4I,WAAa,sBACnC,uBAAO3I,UAAU,oBAAoB4I,QAAQ,uBAA7C,SAAqE7I,EAAMyI,iBAI/D,aAAfzI,EAAMkG,OACXqC,EACI,0BAAUtI,UAAWmI,EAAgBI,KAAMxI,EAAMwI,KAAMC,YAAazI,EAAMyI,YAAa9F,MAAO3C,EAAM2C,MAC1F+F,SAAU1I,EAAM0I,SAAUI,KAAK,OAK7C,qCAEQ9I,EAAM+I,OACN,uBAAO9I,UAAU,mBAAjB,SAAqCD,EAAM+I,QAG9CR,EAGGvI,EAAMsI,UACN,qBAAKrI,UAAU,cAAf,SACI,gCAAQD,EAAMgJ,cC3BnBC,OAjBf,SAA8BjJ,GAE1B,OAAGA,EAAMkJ,OAED,qBAAKjJ,UAAU,iGAAf,SACKD,EAAMK,WAMf,qBAAKJ,UAAU,qGAAf,SACKD,EAAMK,YCPb8I,G,4MAKFhC,MAAQ,CACJlE,SAAU,GACVhC,SAAU,GACVmI,SAAU,GACVpB,gBAAgB,G,EAOpBU,SAAW,SAACW,GAAW,IAAD,EAElB,EAAKC,UAAL,oBAAgBD,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,OAAjD,0BAAkE,IAAlE,K,EAMJ6G,aAAe,SAACzC,GACZA,EAAEC,iBAGF,IAAMyC,EAAO,CACTxG,SAAU,EAAKkE,MAAMlE,SACrBhC,SAAU,EAAKkG,MAAMlG,UAEzB,EAAKqI,SAAS,CAACtB,gBAAgB,IAG/B,EAAKhI,MAAMiF,MAAMwE,GACZpE,MAAK,SAAAC,GAEF,EAAKgE,SAAS,CAACtB,gBAAgB,IAAQ,WACnC,EAAKhI,MAAM0J,QAAQC,KAAK,WAG/BC,OAAM,SAAAZ,GAECA,EAAM1D,UACN,EAAKgE,SAAS,CAACF,SAAUJ,EAAM1D,SAASE,KAAMwC,gBAAgB,Q,4CAS9E,WAAU,IAAD,OAED6B,GAAiB,EAKrB,MAJ4B,KAAxBnD,KAAKS,MAAMlE,UAA2C,KAAxByD,KAAKS,MAAMlG,WACzC4I,GAAiB,GAIjB,cAAC,GAAD,CAAsBX,QAAM,EAA5B,SACI,iCACI,oBAAIjJ,UAAU,wBAAd,oBAEA,qBAAKA,UAAU,aAAf,SACI,cAAC,GAAD,CAAO8I,MAAM,OAAOP,KAAK,WAAWC,YAAY,aACzC9F,MAAO+D,KAAKS,MAAMlE,SAClByF,SAAUhC,KAAKgC,SACfJ,SAAU5B,KAAKS,MAAMiC,SAASnG,WAAY,EAC1C+F,MAAOtC,KAAKS,MAAMiC,SAASnG,aAGtC,qBAAKhD,UAAU,aAAf,SACI,cAAC,GAAD,CAAO8I,MAAM,WAAWP,KAAK,WAAWC,YAAY,iBAAiBvC,KAAK,WACnEvD,MAAO+D,KAAKS,MAAMlG,SAClByH,SAAUhC,KAAKgC,SACfJ,SAAU5B,KAAKS,MAAMiC,SAASnI,WAAY,EAC1C+H,MAAOtC,KAAKS,MAAMiC,SAASnI,aAGtC,eAAC,GAAD,CACIhB,UAAU,6BACV6G,QAAS,SAACC,GAAD,OAAO,EAAKyC,aAAazC,IAClCgB,SAAU8B,GAAkBnD,KAAKS,MAAMa,eACvCA,eAAgBtB,KAAKS,MAAMa,eAC3BC,aAAW,EALf,UAMI,mBAAGhI,UAAU,sBANjB,aASA,cAAC,IAAD,CAAMG,GAAG,UAAT,qD,GA3FI6G,aA6GTC,eAAQ,MANI,SAAC/B,GACxB,MAAO,CACHF,MAAO,SAACwE,GAAD,OAAUtE,EAASiC,GAAkBqC,QAIrCvC,CAAkCiC,I,QC7G3CW,G,4MAKF3C,MAAQ,CACJlE,SAAU,GACVd,MAAO,GACPlB,SAAU,GACV8I,eAAgB,GAChB/B,gBAAgB,EAChBgC,OAAQ,GACRC,yBAAyB,G,EAO7BvB,SAAW,SAACW,GACR,GAA0B,mBAAtBA,EAAME,OAAOf,KAA2B,CAExC,IAAM7F,EAAQ0G,EAAME,OAAO5G,MAErBsH,EAA0B,EAAK9C,MAAMlG,WAAa0B,EAClDqH,EAAM,gBAAO,EAAK7C,MAAM6C,QAC9BA,EAAOD,eAAiBE,EAA0B,GAAK,yBACvD,EAAKX,SAAS,CAACW,0BAAyBD,gBAEvC,GAA0B,aAAtBX,EAAME,OAAOf,KAAqB,CAEvC,IAAM7F,EAAQ0G,EAAME,OAAO5G,MAErBsH,EAA0B,EAAK9C,MAAM4C,iBAAmBpH,EACxDqH,EAAM,gBAAO,EAAK7C,MAAM6C,QAC9BA,EAAOD,eAAiBE,EAA0B,GAAK,gCAChDD,EAAOX,EAAME,OAAOf,MAC3B,EAAKc,SAAS,CAACW,0BAAyBD,eAEvC,CAED,IAAMA,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAC3B,EAAKc,SAAS,CAACU,WAGnB,EAAKV,SAAL,gBAAgBD,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,EAMrDuH,cAAgB,SAACnD,GACbA,EAAEC,iBAGF,IAAMlG,EAAO,CACTmC,SAAU,EAAKkE,MAAMlE,SACrBd,MAAO,EAAKgF,MAAMhF,MAClBlB,SAAU,EAAKkG,MAAMlG,UAEzB,EAAKqI,SAAS,CAACtB,gBAAgB,IAG/B,EAAKhI,MAAMsG,OAAOxF,GAAMuE,MAAK,SAAAC,GACzB,EAAKgE,SAAS,CAACtB,gBAAgB,IAAQ,kBAAM,EAAKhI,MAAM0J,QAAQC,KAAK,WACtEC,OAAM,SAAAR,GAED,IAAIY,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBZ,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,mBACjDH,EAAM,gBAAOZ,EAAS9D,SAASE,KAAK2E,mBAGxC,EAAKb,SAAS,CACVtB,gBAAgB,EAChBgC,e,4CAUhB,WAAU,IAAD,OAEDH,GAAiB,EAMrB,MAL4B,KAAxBnD,KAAKS,MAAMlE,UAAwC,KAArByD,KAAKS,MAAMhF,OAAwC,KAAxBuE,KAAKS,MAAMlG,UAAiD,KAA9ByF,KAAKS,MAAM4C,iBAClGF,GAAiB,GAKjB,cAAC,GAAD,CAAsBX,QAAM,EAA5B,SACI,iCACI,oBAAIjJ,UAAU,wBAAd,qBACA,qBAAKA,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,OACNN,YAAY,aAAaD,KAAK,WAAW7F,MAAO+D,KAAKS,MAAMlE,SAC3DyF,SAAUhC,KAAKgC,SACfJ,SAAU5B,KAAKS,MAAM6C,OAAO/G,WAAY,EACxC+F,MAAOtC,KAAKS,MAAM6C,OAAO/G,aAGjC,qBAAKhD,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,SACNN,YAAY,eAAeD,KAAK,QAAQ7F,MAAO+D,KAAKS,MAAMhF,MAC1DuG,SAAUhC,KAAKgC,SACfJ,SAAU5B,KAAKS,MAAM6C,OAAO7H,QAAS,EACrC6G,MAAOtC,KAAKS,MAAM6C,OAAO7H,UAGjC,qBAAKlC,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,WACNN,YAAY,iBAAiBD,KAAK,WAAW7F,MAAO+D,KAAKS,MAAMlG,SAC/DyH,SAAUhC,KAAKgC,SAAUxC,KAAK,WAC9BoC,SAAU5B,KAAKS,MAAM6C,OAAO/I,WAAY,EACxC+H,MAAOtC,KAAKS,MAAM6C,OAAO/I,aAGjC,qBAAKhB,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,mBACNN,YAAY,uBAAuBD,KAAK,iBAAiB7F,MAAO+D,KAAKS,MAAM4C,eAC3ErB,SAAUhC,KAAKgC,SAAUxC,KAAK,WAC9BoC,SAAU5B,KAAKS,MAAM6C,OAAOD,iBAAkB,EAC9Cf,MAAOtC,KAAKS,MAAM6C,OAAOD,mBAIjC,eAAC,GAAD,CAAqBjD,QAAS,SAACC,GAAD,OAAO,EAAKmD,cAAcnD,IACnC9G,UAAU,6BACV8H,SAAUrB,KAAKS,MAAMa,iBAAmBtB,KAAKS,MAAM8C,yBAA2BJ,EAC9E7B,eAAgBtB,KAAKS,MAAMa,eAC3BC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,cAQA,cAAC,IAAD,CAAMG,GAAG,QAAT,kD,GA9IK6G,aA+JVC,eAAQ,MANI,SAAC/B,GACxB,MAAO,CACHmB,OAAQ,SAACxF,GAAD,OAAUqE,EAASiC,GAAmBtG,QAIvCoG,CAAkC4C,I,kBCvK3CM,GAAe,CACjBzE,GAAI,EACJ1C,SAAU,GACVd,MAAO,GACPyD,UAAW,KACXC,cAAc,EACdC,oBAAoB,EACpBC,SAAS,EACTvF,YAAY,EACZD,MAAO,GACPyF,UAAW,MAQA,SAASqE,KAA2C,IAA/BlD,EAA8B,uDAAtBiD,GAAcE,EAAQ,uCAC9D,OAAQA,EAAOpE,MACX,KAAKqE,GACD,OAAO,gBAAIH,IACf,KAAKG,GACD,OAAO,gBACAD,EAAOlE,SAElB,KAAKmE,GACD,OAAO,6BACApD,GADP,IAEIlE,SAAUqH,EAAOlE,UAEzB,KAAKmE,GACD,OAAO,6BACApD,GADP,IAEIhF,MAAOmI,EAAOlE,UAEtB,KAAKmE,GACD,OAAO,6BACApD,GADP,IAEIrB,mBAAoBwE,EAAOlE,UAEnC,QACI,OAAOe,GCvCnB,IAAIqD,GAAmBC,aAAaC,QAAQ,QAGxCC,GAAY,CACZhF,GAAI,EACJ1C,SAAU,GACVd,MAAO,GACPyD,UAAW,KACXC,cAAc,EACdC,oBAAoB,EACpBC,SAAS,EACTvF,YAAY,EACZD,MAAO,GACPyF,UAAW,MAEX4E,GAAiBD,GACjBE,IAAa,EAEjB,GAAIL,GACA,IAEII,GAAiBE,KAAKC,MAAMP,IAC5B,IAAMQ,GAAcC,KAAKC,MAAQ,IAC7BN,GAAe5E,UAAYgF,IAE3B5F,EAAgCwF,IAChCC,IAAa,GAGbD,GAAiBD,GAEvB,MAAO3B,IACLmC,QAAQC,IAAI,6BAIpB,IAEIC,GAFEC,GAAqBC,OAAOC,8BAAgCD,OAAOC,+BACnEC,GAAa,CAACC,OAKhBL,GAFAE,OAAOI,UAAUC,UAAUC,SAAS,WAAaP,GAEzCQ,aACJzB,GACAO,GACAmB,aACIC,KAAe,WAAf,EAAmBP,IACnBH,KAKAQ,aACJzB,GACAO,GACAmB,aAAQC,KAAe,WAAf,EAAmBP,OAK7BQ,WAAU,WACZ,IAAMnL,EAAOuK,GAAMa,WAEnBzB,aAAa0B,QAAQ,OAAQrB,KAAKsB,UAAUtL,IAE5CsE,EAAgCtE,GAGhCuL,YAAW,WACHvL,EAAK6E,KAAO0F,GAAMa,WAAWvG,IAC7B0F,GAAMlG,SAASiC,QAEpB,QAIHyD,IACAQ,GAAMlG,SAASiC,MAGJiE,UC/EA,SAASiB,GAAYtD,GAChC,OAAO,IAAIuD,SAAQ,SAACC,EAASC,GACzB,IAAMC,EAAS1D,EAAM1D,SAASoH,OACf,MAAXA,GAA6B,MAAXA,GAElBrB,GAAMlG,SAASiC,MAEnBqF,EAAOzD,MCQA2D,OAff,SAAqB3M,GACjB,OACI,qBAAK,aAAW,aAAhB,SACI,qBAAIC,UAAU,aAAd,UACI,oBAAIA,UAAU,kBAAd,SACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAG,IAAf,SACI,wBAAQH,UAAU,cAAlB,SAAgC,sBAAMA,UAAU,qBAGvDD,EAAMK,eCGRuM,OAbf,SAAkB5M,GACd,OACI,qBAAKC,UAAU,0CAAf,SACI,qBAAKA,UAAU,qGAAf,SACI,sBAAKA,UAAU,GAAf,UACI,6BAAKD,EAAMwI,OACX,6BAAKxI,EAAMK,mBCEzBwM,G,4MAKF1F,MAAQ,CACJlE,SAAU,EAAKjD,MAAMc,KAAKmC,SAC1Bd,MAAO,EAAKnC,MAAMc,KAAKqB,MACvBlB,SAAU,GACV8I,eAAgB,GAChBE,yBAAyB,EACzB6C,0BAA0B,EAC1BC,8BAA8B,EAC9BC,aAAa,EACbC,iBAAiB,EACjBjD,OAAQ,I,EAOZtB,SAAW,SAACW,GACR,GAA0B,mBAAtBA,EAAME,OAAOf,KAA2B,CAExC,IAAM7F,EAAQ0G,EAAME,OAAO5G,MAErBsH,EAA0B,EAAK9C,MAAMlG,WAAa0B,EAClDqH,EAAM,gBAAO,EAAK7C,MAAM6C,QAC9BA,EAAOD,eAAiBE,EAA0B,GAAK,yBACvD,EAAKX,SAAS,CAACW,0BAAyBD,SAAQiD,iBAAiB,SAC9D,GAA0B,aAAtB5D,EAAME,OAAOf,KAAqB,CAEzC,IAAM7F,EAAQ0G,EAAME,OAAO5G,MAErBsH,EAA0B,EAAK9C,MAAM4C,iBAAmBpH,EACxDqH,EAAM,gBAAO,EAAK7C,MAAM6C,QAC9BA,EAAOD,eAAiBE,EAA0B,GAAK,gCAChDD,EAAOX,EAAME,OAAOf,MAE3B,EAAKc,SAAS,CAACW,0BAAyBD,SAAQiD,iBAAiB,QAC9D,CAEH,IAAMjD,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAC3B,EAAKc,SAAS,CAACU,SAAQgD,aAAa,IAGxC,EAAK1D,SAAL,gBAAgBD,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,EAQrDuK,eAAiB,SAAC9D,EAAU+D,GACxB,GAAI/D,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,iBAAkB,CAAC,IAAD,EAC/DH,EAAM,6BACH,EAAK7C,MAAM6C,QACXZ,EAAS9D,SAASE,KAAK2E,kBAG9B,EAAKb,UAAL,oBACK6D,GAAU,GADf,wBAEInD,GAFJ,M,EAURoD,kBAAoB,SAACrG,GACjBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACwD,0BAA0B,IACzC,MAA0B,EAAK3F,MAAxBlE,EAAP,EAAOA,SAAUd,EAAjB,EAAiBA,MAGjBiD,EAAoB,CAACnC,WAAUd,UAAQkD,MAAK,SAAAC,GACxC,EAAKgE,SAAS,CAACwD,0BAA0B,EAAOE,aAAa,IAC7D,EAAKhN,MAAMqN,YAAYpK,GACvB,EAAKjD,MAAMsN,SAASnL,MACrByH,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,EAAK8D,eAAe9D,EAAU,gC,EAOtCmE,sBAAwB,SAACxG,GACrBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACyD,8BAA8B,IAC7C,IAAO9L,EAAY,EAAKkG,MAAjBlG,SAGPmE,EAAwB,CAACnE,aAAWoE,MAAK,SAAAC,GACrC,IAAI0E,EAAM,gBAAO,EAAK7C,MAAM6C,eACrBA,EAAM,eACb,EAAKV,SAAS,CAACU,SAAQ+C,8BAA8B,EAAOE,iBAAiB,EAAMhM,SAAU,GAAI8I,eAAgB,QAClHH,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,EAAK8D,eAAe9D,EAAU,oC,4CAQtC,WAAU,IAAD,OACL,EAWI1C,KAAKS,MAVLlE,EADJ,EACIA,SACAd,EAFJ,EAEIA,MACAlB,EAHJ,EAGIA,SACA8I,EAJJ,EAIIA,eACA+C,EALJ,EAKIA,yBACAC,EANJ,EAMIA,6BACA9C,EAPJ,EAOIA,wBACA+C,EARJ,EAQIA,YACAC,EATJ,EASIA,gBACAjD,EAVJ,EAUIA,OAEGpE,EAAac,KAAK1G,MAAMc,KAAxB8E,UAGP,OACI,eAAC,GAAD,WACI,cAAC,GAAD,UACI,oBAAI3F,UAAU,yBAAd,0BAGJ,cAAC,GAAD,CAAUuI,KAAK,aAAf,2CAEA,sBAAKvI,UAAU,OAAf,UACI,sBAAMA,UAAU,mBAAhB,iCACC,IAAIgL,KAAiB,EAAZrF,GAAe4H,mBAAmB,YAGhD,uBAAMvN,UAAU,OAAhB,UAEQ+M,GACA,qBAAK/M,UAAU,sBAAsB2G,KAAK,QAA1C,mDAKJ,qBAAK3G,UAAU,aAAf,SACI,cAAC,GAAD,CAAO8I,MAAM,OAAOP,KAAK,WAClB7F,MAAOM,EACPyF,SAAUhC,KAAKgC,SAAUJ,SAAU0B,EAAO/G,WAAY,EACtD+F,MAAOgB,EAAO/G,aAGzB,qBAAKhD,UAAU,aAAf,SACI,cAAC,GAAD,CAAO8I,MAAM,SAASP,KAAK,QACpB7F,MAAOR,EACPuG,SAAUhC,KAAKgC,SAAUJ,SAAU0B,EAAO7H,QAAS,EACnD6G,MAAOgB,EAAO7H,UAGzB,eAAC,GAAD,CAAoB2E,QAAS,SAACC,GAAD,OAAO,EAAKqG,kBAAkBrG,IACvC9G,UAAU,6BACV8H,SAAU+E,GAAyC,KAAb7J,GAA6B,KAAVd,EACzD6F,eAAgB8E,EAChB7E,aAAW,EAJ/B,UAKI,mBAAGhI,UAAU,sBALjB,4BASJ,iCAEQgN,GACA,qBAAKhN,UAAU,sBAAsB2G,KAAK,QAA1C,sCAKJ,qBAAK3G,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,WACNN,YAAY,iBAAiBD,KAAK,WAAW7F,MAAO1B,EACpDyH,SAAUhC,KAAKgC,SAAUxC,KAAK,WAC9BoC,SAAU0B,EAAO/I,WAAY,EAC7B+H,MAAOgB,EAAO/I,aAItB,qBAAKhB,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,mBACNN,YAAY,uBAAuBD,KAAK,iBAAiB7F,MAAOoH,EAChErB,SAAUhC,KAAKgC,SAAUxC,KAAK,WAC9BoC,SAAU0B,EAAOD,iBAAkB,EACnCf,MAAOgB,EAAOD,mBAItB,eAAC,GAAD,CAAoBjD,QAAS,SAACC,GAAD,OAAO,EAAKwG,sBAAsBxG,IAC3C9G,UAAU,6BACV8H,SAAUgF,IAAiC9C,GAAwC,KAAbhJ,GAAsC,KAAnB8I,EACzF/B,eAAgB+E,EAChB9E,aAAW,EAJ/B,UAKI,mBAAGhI,UAAU,sBALjB,gC,GAhNMgH,aAkPXC,gBAjBS,SAACC,GACrB,MAAO,CACHrG,KAAMqG,MAQa,SAAChC,GACxB,MAAO,CACHkI,YAAa,SAACpK,GAAD,OAAckC,EjBnKR,SAAClC,GACxB,MAAO,CACHiD,KAAMC,GACNC,QAASnD,GiBgK2BmE,CAAwBnE,KAC5DqK,SAAU,SAACnL,GAAD,OAAWgD,EjBzJL,SAAChD,GACrB,MAAO,CACH+D,KAAMC,GACNC,QAASjE,GiBsJqBiF,CAAqBjF,QAI5C+E,CAA6C2F,ICjP7CY,GAVC,WACZ,OACI,qBAAKxN,UAAU,SAAf,SACI,qBAAKA,UAAU,sCAAf,SACI,sBAAMA,UAAU,UAAhB,6BCKVyN,G,4MAKFvG,MAAQ,CACJqB,KAAM,GACNmF,QAAS,GACTC,YAAa,GACbC,eAAgB,GAChBC,gBAAiB,GACjBC,aAAc,KACdC,YAAa,GACbhG,gBAAgB,EAChBgC,OAAQ,I,EAOZtB,SAAW,SAACW,GAER,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAE3B,EAAKc,SAAL,cAAeU,UAASX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,EAO7DsL,cAAgB,SAAC5E,GAEb,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,QAG9B,UAFOA,EAAM,aACb,EAAKV,SAAL,cAAeU,UAASX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,QACvB,IAA9B0G,EAAME,OAAO2E,MAAMC,OAAvB,CAKA,IAAMC,EAAO/E,EAAME,OAAO2E,MAAM,GAC5BG,EAAS,IAAIC,WACjBD,EAAOE,UAAY,WAEf,EAAKjF,SAAS,CAACyE,aAAcM,EAAOG,UAExCH,EAAOI,cAAcL,K,EAMzBM,WAAa,WACT,IAAM1E,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAM,aAEb,EAAKV,SAAS,CAACU,SAAQ+D,aAAc,KAAMC,YAAa,M,EAM5DW,cAAgB,SAAC5H,GACbA,EAAEC,iBAEF,EAAKsC,SAAS,CAACtB,gBAAgB,IAE/B,IAAM7G,EAAc,CAChBqH,KAAM,EAAKrB,MAAMqB,KACjBmF,QAAS,EAAKxG,MAAMwG,QACpBC,YAAa,EAAKzG,MAAMyG,YACxBC,eAAgB,EAAK1G,MAAM0G,eAC3BC,gBAAiB,EAAK3G,MAAM2G,gBAC5BC,aAAc,EAAK5G,MAAM4G,cAI7B3I,EAA2BjE,GAAakE,MAAK,SAAAC,GACzC,EAAKgE,SAAS,CAACtB,gBAAgB,IAAQ,WAEnC,EAAKhI,MAAMwG,uBAAsB,GACjC,EAAKxG,MAAM4O,SAAS,qCAEzBhF,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,IAAIY,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBZ,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,mBACjDH,EAAM,gBAAOZ,EAAS9D,SAASE,KAAK2E,mBAGxC,EAAKb,SAAS,CAACtB,gBAAgB,EAAOgC,e,4CAQ9C,WAAU,IAAD,OAEDH,GAAiB,EAMrB,MALwB,KAApBnD,KAAKS,MAAMqB,MAAsC,KAAvB9B,KAAKS,MAAMwG,SAA6C,KAA3BjH,KAAKS,MAAMyG,aAAoD,KAA9BlH,KAAKS,MAAM0G,gBAAwD,KAA/BnH,KAAKS,MAAM2G,kBACvIjE,GAAiB,GAKjB,eAAC,GAAD,WACI,cAAC,GAAD,UACI,oBAAI5J,UAAU,yBAAd,kCAGJ,cAAC,GAAD,CAAUuI,KAAK,qBAAf,wEAEA,iCACI,sBAAKvI,UAAU,aAAf,UACI,cAAC,GAAD,CAAOiG,KAAK,OACL0C,WAAS,EACTjG,MAAO+D,KAAKS,MAAM6G,YAClBxF,KAAK,cACLO,MAAM,oBACNN,YAAY,2BACZC,SAAUhC,KAAKuH,cACf3F,SAAU5B,KAAKS,MAAM6C,OAAO+D,eAAgB,EAC5C/E,MAAOtC,KAAKS,MAAM6C,OAAO+D,eAI5BrH,KAAKS,MAAM4G,cACX,gCACI,qBAAK9N,UAAU,wCAAwC4O,IAAKnI,KAAKS,MAAM4G,aAAce,IAAI,WACzF,uBACA,yBAAQ7O,UAAU,6BAA6B6G,QAASJ,KAAKgI,WAA7D,UACI,mBAAGzO,UAAU,gBADjB,kBAMZ,qBAAKA,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,QACNN,YAAY,aAAaD,KAAK,OAAO7F,MAAO+D,KAAKS,MAAMqB,KACvDE,SAAUhC,KAAKgC,SACfJ,SAAU5B,KAAKS,MAAM6C,OAAOxB,OAAQ,EACpCQ,MAAOtC,KAAKS,MAAM6C,OAAOxB,SAGjC,qBAAKvI,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,WACNN,YAAY,gBAAgBD,KAAK,UAAU7F,MAAO+D,KAAKS,MAAMwG,QAC7DjF,SAAUhC,KAAKgC,SACfJ,SAAU5B,KAAKS,MAAM6C,OAAO2D,UAAW,EACvC3E,MAAOtC,KAAKS,MAAM6C,OAAO2D,YAGjC,qBAAK1N,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,eAAe7C,KAAK,WAC1BuC,YAAY,oBAAoBD,KAAK,cAAc7F,MAAO+D,KAAKS,MAAMyG,YACrElF,SAAUhC,KAAKgC,SACfJ,SAAU5B,KAAKS,MAAM6C,OAAO4D,cAAe,EAC3C5E,MAAOtC,KAAKS,MAAM6C,OAAO4D,gBAGjC,qBAAK3N,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,YACNN,YAAY,iBAAiBD,KAAK,iBAAiB7F,MAAO+D,KAAKS,MAAM0G,eACrEnF,SAAUhC,KAAKgC,SACfJ,SAAU5B,KAAKS,MAAM6C,OAAO6D,iBAAkB,EAC9C7E,MAAOtC,KAAKS,MAAM6C,OAAO6D,mBAGjC,qBAAK5N,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,aACNN,YAAY,kBAAkBD,KAAK,kBAAkB7F,MAAO+D,KAAKS,MAAM2G,gBACvEpF,SAAUhC,KAAKgC,SACfJ,SAAU5B,KAAKS,MAAM6C,OAAO8D,kBAAmB,EAC/C9E,MAAOtC,KAAKS,MAAM6C,OAAO8D,oBAIjC,eAAC,GAAD,CAAqBhH,QAAS,SAACC,GAAD,OAAO,EAAK4H,cAAc5H,IACnC9G,UAAU,6BACV8H,SAAUrB,KAAKS,MAAMa,gBAAkB6B,EACvC7B,eAAgBtB,KAAKS,MAAMa,eAC3BC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,mC,GA9LgBgH,aAqNrBC,eAAQ,MANI,SAAC/B,GACxB,MAAO,CACHqB,sBAAuB,SAAA7D,GAAK,OAAIwC,EAASiC,GAAkCzE,QAIpEuE,CAAkCwG,IChO3CqB,GAAkB,yBAIXC,GAA0BD,GAAkB,uBAI5CE,GAAsBF,GAAkB,mBAIxCG,GAAyBH,GAAkB,sBAI3CI,GAAyB,YCHhCC,G,4MAKFjI,MAAQ,CACJqB,KAAM,EAAKxI,MAAMmB,YAAYqH,KAC7BmF,QAAS,EAAK3N,MAAMmB,YAAYwM,QAChCC,YAAa,EAAK5N,MAAMmB,YAAYyM,YACpCC,eAAgB,EAAK7N,MAAMmB,YAAYkO,SACvCvB,gBAAiB,EAAK9N,MAAMmB,YAAYmO,UACxCC,MAAO,EAAKvP,MAAMmB,YAAYoO,MAC9BxB,aAAc,KACdC,YAAa,GACbpI,UAAW,EAAK5F,MAAMmB,YAAYyE,UAClCzD,MAAO,GACPqN,iCAAiC,EACjCC,2BAA2B,EAC3BC,iCAAiC,EACjCC,0BAA0B,EAC1BC,oBAAoB,EACpBC,cAAc,EACdC,cAAc,EACd9F,OAAQ,I,EAOZiE,cAAgB,SAAC5E,GAAW,IAAD,EAEjBW,EAAM,gBAAO,EAAK7C,MAAM6C,QAG9B,UAFOA,EAAM,aACb,EAAKV,UAAL,GAAeU,UAAf,eAAwBX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,OAAzD,+BAA8E,GAA9E,IACkC,IAA9B0G,EAAME,OAAO2E,MAAMC,OAAvB,CAKA,IAAMC,EAAO/E,EAAME,OAAO2E,MAAM,GAC5BG,EAAS,IAAIC,WACjBD,EAAOE,UAAY,WAEf,EAAKjF,SAAS,CAACyE,aAAcM,EAAOG,UAExCH,EAAOI,cAAcL,K,EAMzBM,WAAa,WAET,IAAM1E,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAM,aACb,EAAKV,SAAS,CAACU,SAAQ+D,aAAc,KAAMC,YAAa,M,EAQ5Dd,eAAiB,SAAC9D,EAAU+D,GACxB,GAAI/D,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,iBAAkB,CAAC,IAAD,EAC/DH,EAAM,6BACH,EAAK7C,MAAM6C,QACXZ,EAAS9D,SAASE,KAAK2E,kBAG9B,EAAKb,UAAL,oBACK6D,GAAU,GADf,wBAEInD,GAFJ,M,EAUR+F,mBAAqB,SAAChJ,GAClBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACmG,2BAA2B,IAC1C,IAAMnO,EAAM,CAAEyM,aAAc,EAAK5G,MAAM4G,cAGvC3I,EAAgC9D,GAAK+D,MAAK,SAAAC,GACtC,EAAKgE,SAAS,CAACmG,2BAA2B,EAAOF,MAAOjK,EAASE,KAAKwK,QAASH,cAAc,IAAO,WAChG,EAAKnB,mBAEV9E,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,EAAK8D,eAAe9D,EAAU,iC,EAQtCV,SAAW,SAAAW,GAEP,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAC3B,EAAKc,SAAL,cAAeU,SAAQ4F,oBAAoB,GAAQvG,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,EAOxFsN,cAAgB,SAAA5G,GAEZ,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAC3B,EAAKc,SAAL,cAAeU,SAAQ8F,cAAc,GAAQzG,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,EAMlFuN,yBAA2B,SAACnJ,GACxBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACkG,iCAAiC,IAEhD,IAAMrO,EAAc,CAChBqH,KAAM,EAAKrB,MAAMqB,KACjBmF,QAAS,EAAKxG,MAAMwG,QACpBC,YAAa,EAAKzG,MAAMyG,YACxBC,eAAgB,EAAK1G,MAAM0G,eAC3BC,gBAAiB,EAAK3G,MAAM2G,iBAIhC1I,EAA2BjE,GAAakE,MAAK,SAAAC,GACzC,EAAKgE,SAAS,CAACkG,iCAAiC,EAAOI,oBAAoB,OAC5EhG,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,EAAK8D,eAAe9D,EAAU,uC,EAOtC+G,yBAA2B,WAEnB5E,OAAO6E,QAAQ,oDACf,EAAK9G,SAAS,CAACoG,iCAAiC,IAGhDtK,IAA6BC,MAAK,SAAAC,GAC9B,EAAKgE,SAAS,CAACoG,iCAAiC,IAAQ,WACpD,EAAK1P,MAAMwG,uBAAsB,GACjC,EAAKxG,MAAM4O,SAAS,WAEzBhF,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,EAQ/BqH,kBAAoB,SAACtJ,GACjBA,EAAEC,iBAGEuE,OAAO6E,QAAQ,kEACf,EAAK9G,SAAS,CAACqG,0BAA0B,IAGzCvK,EAA+B,CAACjD,MAAO,EAAKgF,MAAMhF,QAAQkD,MAAK,SAAAC,GAC3D,EAAKgE,SAAS,CAACqG,0BAA0B,EAAOxN,MAAO,KAAK,kBAAM,EAAKmH,SAAS,CAACwG,cAAc,UAChGlG,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,EAAK8D,eAAe9D,EAAU,iC,4CAS1C,WAAU,IAAD,OACL,EAkBI1C,KAAKS,MAjBLqB,EADJ,EACIA,KACAmF,EAFJ,EAEIA,QACAC,EAHJ,EAGIA,YACAC,EAJJ,EAIIA,eACAC,EALJ,EAKIA,gBACAyB,EANJ,EAMIA,MACAxB,EAPJ,EAOIA,aACAC,EARJ,EAQIA,YACA7L,EATJ,EASIA,MACAqN,EAVJ,EAUIA,gCACAC,EAXJ,EAWIA,0BACAC,EAZJ,EAYIA,gCACAC,EAbJ,EAaIA,yBACAC,EAdJ,EAcIA,mBACAC,EAfJ,EAeIA,aACAC,EAhBJ,EAgBIA,aACA9F,EAjBJ,EAiBIA,OAIJ,OACI,eAAC,GAAD,WACI,cAAC,GAAD,UACI,oBAAI/J,UAAU,yBAAd,8BAGJ,cAAC,GAAD,CAAUuI,KAAK,iBAAf,kDAEA,sBAAKvI,UAAU,qCAAf,UACI,qBAAKA,UAAU,uCAAf,SACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAG,8BAAf,SACI,wBAAQ8F,KAAK,SAASjG,UAAU,8CAAhC,SACI,sBAAKA,UAAU,YAAf,UACI,oBAAIA,UAAU,aAAd,uBACA,mBAAGA,UAAU,YAAb,+EAMhB,qBAAKA,UAAU,uCAAf,SACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAG,4BAAf,SACI,wBAAQ8F,KAAK,SAASjG,UAAU,8CAAhC,SACI,sBAAKA,UAAU,YAAf,UACI,oBAAIA,UAAU,aAAd,0BACA,mBAAGA,UAAU,YAAb,yFAMhB,qBAAKA,UAAU,uCAAf,SACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAG,0BAAf,SACI,wBAAQ8F,KAAK,SAASjG,UAAU,2CAAhC,SACI,sBAAKA,UAAU,YAAf,UACI,oBAAIA,UAAU,aAAd,2BACA,mBAAGA,UAAU,YAAb,0EAMhB,qBAAKA,UAAU,uCAAf,SACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAG,2BAAf,SACI,wBAAQ8F,KAAK,SAASjG,UAAU,gDAAhC,SACI,sBAAKA,UAAU,YAAf,UACI,oBAAIA,UAAU,aAAd,wBACA,mBAAGA,UAAU,YAAb,4FAOpB,uBAAMA,UAAU,YAAhB,UAEQ4P,GACA,qBAAK5P,UAAU,sBAAsB2G,KAAK,QAA1C,uCAKJ,sBAAK3G,UAAU,aAAf,UACI,cAAC,GAAD,CAAOiG,KAAK,OACL0C,WAAS,EACTjG,MAAOqL,EACPxF,KAAK,cACLO,MAAM,oBACNN,YAAY,2BACZC,SAAUhC,KAAKuH,cACf3F,SAAU0B,EAAO+D,eAAgB,EACjC/E,MAAOgB,EAAO+D,eAIjBA,EACI,gCACI,qBAAK9N,UAAU,wCAAwC4O,IAAKd,EAAce,IAAI,WAC9E,uBACA,yBAAQ7O,UAAU,6BAA6B8H,SAAU0H,EAA2B3I,QAASJ,KAAKgI,WAAlG,UACI,mBAAGzO,UAAU,gBADjB,YAGA,eAAC,GAAD,CAAoB6G,QAAS,SAACC,GAAD,OAAO,EAAKgJ,mBAAmBhJ,IACxC9G,UAAU,mCACV8H,SAAU0H,EACVzH,eAAgByH,EAChBxH,aAAW,EAJ/B,UAKI,mBAAGhI,UAAU,sBALjB,sBASJ,8BACI,qBAAKA,UAAU,wCAAwC4O,IAAKG,GAA0BO,EAAOT,IAAI,mBAMrH,iCAEQc,GACA,qBAAK3P,UAAU,sBAAsB2G,KAAK,QAA1C,6CAKJ,qBAAK3G,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,OACNN,YAAY,aAAaD,KAAK,OAAO7F,MAAO6F,EAC5CE,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAOxB,OAAQ,EACzBQ,MAAOgB,EAAOxB,SAGtB,qBAAKvI,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,UACNN,YAAY,gBAAgBD,KAAK,UAAU7F,MAAOgL,EAClDjF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO2D,UAAW,EAC5B3E,MAAOgB,EAAO2D,YAGtB,qBAAK1N,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,cAAc7C,KAAK,WACzBuC,YAAY,oBAAoBD,KAAK,cAAc7F,MAAOiL,EAC1DlF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO4D,cAAe,EAChC5E,MAAOgB,EAAO4D,gBAGtB,qBAAK3N,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,WACNN,YAAY,iBAAiBD,KAAK,iBAAiB7F,MAAOkL,EAC1DnF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO6D,iBAAkB,EACnC7E,MAAOgB,EAAO6D,mBAGtB,qBAAK5N,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,YACNN,YAAY,kBAAkBD,KAAK,kBAAkB7F,MAAOmL,EAC5DpF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO8D,kBAAmB,EACpC9E,MAAOgB,EAAO8D,oBAItB,eAAC,GAAD,CAAqBhH,QAAS,SAACC,GAAD,OAAO,EAAKmJ,yBAAyBnJ,IAC9C9G,UAAU,6BACV8H,SAAUyH,GAA4C,KAAThH,GAA2B,KAAZmF,GAAkC,KAAhBC,GACvD,KAAnBC,GAA6C,KAApBC,EAC7B9F,eAAgBwH,EAChBvH,aAAW,EALhC,UAMI,mBAAGhI,UAAU,sBANjB,wCAWJ,uBAAMA,UAAU,OAAhB,UAEQ6P,GACA,qBAAK7P,UAAU,sBAAsB2G,KAAK,QAA1C,+BAKJ,cAAC,GAAD,CACImC,MAAM,0BACNN,YAAY,6BAA6BD,KAAK,QAAQ7F,MAAOR,EAC7DuG,SAAUhC,KAAKuJ,cACf3H,SAAU0B,EAAO7H,QAAS,EAC1B6G,MAAOgB,EAAO7H,QAGlB,eAAC,GAAD,CAAqB2E,QAAS,SAACC,GAAD,OAAO,EAAKsJ,kBAAkBtJ,IACvC9G,UAAU,6BACV8H,SAAU4H,GAAsC,KAAVxN,EACtC6F,eAAgB2H,EAChB1H,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,qCASJ,uBACA,eAAC,GAAD,CAAqB6G,QAASJ,KAAKyJ,yBACdlQ,UAAU,6BACV8H,SAAU2H,EACV1H,eAAgB0H,EAChBzH,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,gBALjB,gC,GA1ZoBgH,aAgbrBC,eAAQ,MANI,SAAC/B,GACxB,MAAO,CACHqB,sBAAuB,SAAC7D,GAAD,OAAWwC,EAASiC,GAAkCzE,QAItEuE,CAAkCkI,ICrb3CkB,G,4MAKFnJ,MAAQ,CACJhG,YAAa,GACb6G,gBAAgB,EAChBuI,SAAS,G,EA0Bb3B,SAAW,SAAC4B,GACR,EAAKxQ,MAAM0J,QAAQC,KAAK6G,I,uDArB5B,WAAqB,IAAD,OAChB9J,KAAK4C,SAAS,CAACtB,gBAAgB,IxBsC5BvH,IAAM+B,IAAI,+BwBpCe6C,MAAK,SAAAC,GAC7B,EAAKgE,SAAS,CAACnI,YAAamE,EAASE,KAAMwC,gBAAgB,EAAOuI,SAAS,OAC5E3G,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAZ,GAEDA,EAAM1D,SAASE,MAAwC,qCAAhCwD,EAAM1D,SAASE,KAAKwK,SAC3C,EAAK1G,SAAS,CAACtB,gBAAgB,EAAOuI,SAAS,S,oBAiB3D,WACI,MAA+C7J,KAAKS,MAA7Ca,EAAP,EAAOA,eAAgB7G,EAAvB,EAAuBA,YAAaoP,EAApC,EAAoCA,QAGpC,OAAGvI,EAEK,cAAC,GAAD,UACI,cAAC,GAAD,MAIJuI,EAGA,cAAC,GAAD,CAAuBpP,YAAaA,EAAayN,SAAUlI,KAAKkI,WAMhE,aADA,CACC,GAAD,CAAuBA,SAAUlI,KAAKkI,e,GA9DtB3H,aAoEjBqJ,M,kBCnEAG,GANU,SAACzQ,GAAD,OACrB,sBAAKC,UAAW,uBAAyBD,EAAM0Q,QAAS9J,KAAK,QAA7D,UACI,mBAAG3G,UAAU,6BADjB,IACgDD,EAAMkI,SCS3CyI,OAVf,SAAyB3Q,GACrB,OACI,oBAAIC,UAAU,kBAAd,SACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAIJ,EAAMI,GAAtB,SACI,wBAAQH,UAAU,cAAlB,SAAiCD,EAAMwI,YCIjDoI,G,4MAKFzJ,MAAQ,CACJ0J,iCAAiC,EACjCC,SAAU,GACVC,OAAQ,GACRC,SAAU,GACVC,OAAQ,I,EA4BZC,eAAiB,SAAC7H,GACd,IAAM1G,EAAQ0G,EAAME,OAAO5G,MAC3B,GAAa,KAAVA,EAAc,CAAC,IAAD,EAEb,EAAK2G,UAAL,oBAAgBD,EAAME,OAAOf,KAAO7F,GAApC,0BAAqD,IAArD,QAEC,CAAC,IAAD,EAEKqO,EAAW,EAAK7J,MAAM2J,SAASK,QAAO,SAAAC,GAAG,OAAIA,EAAI5I,KAAK6I,cAAcxF,SAASlJ,EAAM0O,kBACzF,EAAK/H,UAAL,oBAAgBD,EAAME,OAAOf,KAAO7F,GAApC,0BAA2CqO,GAA3C,M,EAQRM,mBAAqB,SAACF,GAElB,IAF0B,EAEtBG,EAAc,GACXP,EAAY,EAAK7J,MAAjB6J,SAHmB,eAIVA,GAJU,IAI1B,2BAA0B,CAAC,IAAlBQ,EAAiB,QACnBA,IAAQJ,EACPG,EAAY5H,KAAZ,6BAAqB6H,GAArB,IAA0BxJ,gBAAgB,KAG1CuJ,EAAY5H,KAAZ,gBAAqB6H,KATH,8BAY1B,EAAKlI,SAAS,CAAC0H,SAAUO,IAGzBnM,EAAgCgM,EAAI3P,YAAY4D,MAAK,SAAAC,GAGjDiM,GADAA,EAAW,aAAOP,IACQG,QAAO,SAAAK,GAAG,OAAIJ,IAAQI,KAChD,IAAIC,EAAW,aAAO,EAAKtK,MAAM2J,UACjCW,EAAcA,EAAYN,QAAO,SAAAO,GAAG,OAAIN,IAAQM,KAChD,IAAIC,EAAS,aAAO,EAAKxK,MAAM4J,QAC/BY,EAAUhI,KAAV,gBAAmByH,IAGnB,EAAK9H,SAAS,CAAC0H,SAAUO,EAAaT,SAAUW,EAAaV,OAAQY,OACtE/H,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,O,uDAnE3B,WAAqB,IAAD,OAChBtC,KAAK4C,SAAS,CAACuH,iCAAiC,I3BmE7CpQ,IAAM+B,IAAI,yC2BjEwB6C,MAAK,SAAAC,GACtC,IADkD,EAC9CwL,EAAWxL,EAASE,KAAKoM,kBADqB,eAE1Bd,GAF0B,IAElD,2BAAkC,SAClB9I,gBAAiB,GAHiB,8BAOlD,IAAM+I,EAASzL,EAASE,KAAKqM,gBAC7B,EAAKvI,SAAS,CAACwH,WAAUC,SAAQF,iCAAiC,OACnEjH,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBA6D3B,WAAU,IAAD,OACL,EAKItC,KAAKS,MAJL0J,EADJ,EACIA,gCACAE,EAFJ,EAEIA,OACAC,EAHJ,EAGIA,SACAC,EAJJ,EAIIA,OAIJ,OAAIJ,EAEI,cAAC,GAAD,UACI,cAAC,GAAD,MAOR,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBzQ,GAAG,iBAAiBoI,KAAK,mBAC1C,oBAAIvI,UAAU,yBAAd,8BAGJ,cAAC,GAAD,CAAUuI,KAAK,gBAAf,uLAEA,cAAC,IAAD,CAAMtI,OAAK,EAACE,GAAG,iBAAf,SACI,yBAAQ8F,KAAK,SAASjG,UAAU,gCAAhC,UACI,mBAAGA,UAAU,iBADjB,6BAMJ,sBAAKA,UAAU,MAAf,UACI,sBAAKA,UAAU,YAAf,UACI,sBAAKA,UAAU,mBAAf,UACI,uBAAOiG,KAAK,OAAOjG,UAAU,eAAewI,YAAY,kBAAkBD,KAAK,SAAS7F,MAAOsO,EAAQvI,SAAUhC,KAAKwK,iBACtH,qBAAKjR,UAAU,qBAAf,SACI,sBAAMA,UAAU,mBAAhB,SACI,mBAAGA,UAAU,wBAIzB,8BAEQ+Q,EAASc,KAAI,SAAAV,GAAG,OACZ,eAAC,GAAD,CACqBtK,QAAS,kBAAM,EAAKwK,mBAAmBF,IACvCnR,UAAU,6BACV8H,SAAUqJ,EAAIpJ,eACdA,eAAgBoJ,EAAIpJ,eACpBC,aAAW,EALhC,UAMI,mBAAGhI,UAAU,sBANjB,IAMyCmR,EAAI5I,OANnB4I,EAAI3P,oBAY9C,qBAAKxB,UAAU,mBAAf,SAE0B,IAAlB8Q,EAAO5C,OACH,cAAC,GAAD,CAAkBjG,KAAK,0BAEvB,qBAAKjI,UAAU,oBAAf,SACI,oBAAIA,UAAU,8BAAd,SACM8Q,EAAOe,KAAI,SAAAV,GAAG,OACZ,oBAAyBnR,UAAU,kBAAnC,SAAsDmR,EAAI5I,MAAjD4I,EAAI3P,+B,GA9J1BwF,aA0KhB2J,M,sCChLTmB,G,4MAKF5K,MAAQ,CACJ6K,eAAgB,GAChBhK,gBAAgB,EAChBiK,WAAY,EAAKjS,MAAMkS,UAAY,EAAKlS,MAAMkS,UAAY,KAC1DC,cAAehD,I,EAiCnBzG,SAAW,SAAA3B,GACE,OAANA,GAEC,EAAK/G,MAAM0I,SAAS,MACpB,EAAKY,SAAS,CAAC2I,WAAY,KAAME,cAAehD,OAIhD,EAAKnP,MAAM0I,SAAS3B,EAAEpE,OACtB,EAAK2G,SAAS,CAAC2I,WAAYlL,EAAEpE,MAAOwP,cAAepL,EAAEgC,U,uDApC7D,WAAqB,IAAD,OAChBrC,KAAK4C,SAAS,CAACtB,gBAAgB,IAE/BtB,KAAK1G,MAAMoS,QAAQ/M,MAAK,SAAAC,GACpB,IADgC,EAC1B+M,EAAU/M,EAASE,KAEnBwM,EAAiB,GACnBM,EAAmBnD,GAJS,eAKnBkD,GALmB,IAKhC,IAAI,EAAJ,qBAAsB,CAAC,IAAfE,EAAc,QAClBP,EAAerI,KAAK,CAAChH,MAAO4P,EAAE,EAAKvS,MAAMwS,QAASzJ,MAAOwJ,EAAE/J,OAExD+J,EAAE,EAAKvS,MAAMwS,UAAY,EAAKrL,MAAM8K,aACnCK,EAAmBC,EAAE/J,OATG,8BAahC,EAAKc,SAAS,CAAC0I,iBAAgBhK,gBAAgB,EAAOmK,cAAeG,OACtE1I,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAyB3B,WACI,MAAoEtC,KAAKS,MAAlE6K,EAAP,EAAOA,eAAgBhK,EAAvB,EAAuBA,eAAgBiK,EAAvC,EAAuCA,WAAYE,EAAnD,EAAmDA,cAGnD,OAAGnK,EACQ,cAAC,GAAD,IAIP,sBAAK/H,UAAU,OAAf,UACI,uBAAOA,UAAU,mBAAjB,SAAqCyG,KAAK1G,MAAM+I,QAChD,cAAC,KAAD,CAAQ0J,QAAST,EAAgBtJ,SAAUhC,KAAKgC,SAAUgK,aAAW,EAAC/P,MAAO,CAACA,MAAOsP,EAAYlJ,MAAOoJ,Y,GAtErFlL,aA4EpB8K,MC9ETY,G,4MAKFxL,MAAQ,CACJxD,WAAY,EAAK3D,MAAM2D,WAAa,EAAK3D,MAAM2D,WAAa,KAC5DI,OAAQ,EAAK/D,MAAM+D,OAAS,EAAK/D,MAAM+D,OAAS,KAChDO,WAAY,EAAKtE,MAAMsE,WAAa,EAAKtE,MAAMsE,WAAa,M,EAOhEsO,WAAa,WACT,OAAOxN,EAAkB,EAAK+B,MAAMxD,a,EAOxCkP,eAAiB,WACb,OAAOzN,EAAsB,EAAK+B,MAAMpD,S,EAO5C+O,iBAAmB,SAAAC,GACZA,IAAW,EAAK5L,MAAMxD,aAErB,EAAK2F,SAAS,CAAC3F,WAAYoP,EAAQhP,OAAQ,KAAMO,WAAY,OAE7D,EAAKtE,MAAMgT,OAAOD,EAAQ,KAAM,Q,EAQxCE,aAAe,SAAAF,GACRA,IAAW,EAAK5L,MAAMpD,SAErB,EAAKuF,SAAS,CAACvF,OAAQgP,EAAQzO,WAAY,OAE3C,EAAKtE,MAAMgT,OAAO,EAAK7L,MAAMxD,WAAYoP,EAAQ,Q,EAQzDG,iBAAmB,SAAAH,GACZA,IAAW,EAAK5L,MAAMpD,SAErB,EAAKuF,SAAS,CAAChF,WAAYyO,IAE3B,EAAK/S,MAAMgT,OAAO,EAAK7L,MAAMxD,WAAY,EAAKwD,MAAMpD,OAAQgP,K,4CAQpE,WACI,MAAyCrM,KAAKS,MAAvCxD,EAAP,EAAOA,WAAYI,EAAnB,EAAmBA,OAAQO,EAA3B,EAA2BA,WAE3B,OACI,qCACI,cAAC,GAAD,CAAsB4N,UAAWvO,EAAYoF,MAAM,WAAWyJ,OAAO,aAAaJ,MAAOhN,EAAuBsD,SAAUhC,KAAKoM,mBAC9HnP,GAAc,cAAC,GAAD,CAAuCuO,UAAWnO,EAAQgF,MAAM,OAAOyJ,OAAO,SAASJ,MAAO1L,KAAKkM,WAAYlK,SAAUhC,KAAKuM,cAAnGtP,GACzCI,GAAU,cAAC,GAAD,CAAmCmO,UAAW5N,EAAYyE,MAAM,YAAYyJ,OAAO,aAAaJ,MAAO1L,KAAKmM,eAAgBnK,SAAUhC,KAAKwM,kBAAhHnP,U,GA7EzBkD,aAmFd0L,MC1ETQ,G,4MAKFxI,UAAY,CACRnC,KAAM,GACN4K,cAAe,GACfzP,WAAY,KACZI,OAAQ,KACRO,WAAY,KACZyJ,aAAc,KACdC,YAAa,GACbqF,iBAAkB,KAClBC,gBAAiB,GACjBtL,gBAAgB,EAChBuL,SAAS,EACTvJ,OAAQ,I,EAMZ7C,MAAQ,EAAKwD,U,EAMbjC,SAAW,SAACW,GAAW,IAAD,EAEZW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAE3B,EAAKc,UAAL,GAAeU,UAAf,eAAwBX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,OAAzD,0BAAyE,GAAzE,K,EAOJsL,cAAgB,SAAC5E,GAAW,IAAD,EACjBW,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBxB,EAAOa,EAAME,OAAOf,KAY1B,GATY,gBAATA,SACQwB,EAAM,oBAGNA,EAAM,iBAIjB,EAAKV,UAAL,GAAeU,UAAf,eAAwBxB,EAAOa,EAAME,OAAO5G,OAA5C,0BAA4D,GAA5D,IACkC,IAA9B0G,EAAME,OAAO2E,MAAMC,OAAvB,CAKA,IAAMC,EAAO/E,EAAME,OAAO2E,MAAM,GAC5BG,EAAS,IAAIC,WACjBD,EAAOE,UAAY,WAEH,gBAAT/F,EACC,EAAKc,SAAS,CAACyE,aAAcM,EAAOG,SAGpC,EAAKlF,SAAS,CAAC+J,iBAAkBhF,EAAOG,UAIhDH,EAAOI,cAAcL,K,EAOzBM,WAAa,SAAClG,GACV,IAAMwB,EAAM,gBAAO,EAAK7C,MAAM6C,QAClB,gBAATxB,UAEQwB,EAAM,aACb,EAAKV,SAAS,CAACU,SAAQ+D,aAAc,KAAMC,YAAa,cAIjDhE,EAAM,iBACb,EAAKV,SAAS,CAACU,SAAQqJ,iBAAkB,KAAMC,gBAAiB,O,EASxEE,sBAAwB,SAACnK,EAAOoK,GAC5B,IAAMzJ,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAM,cAEb,EAAKV,SAAS,CAAC8J,cAAeK,EAAOC,UAAWH,SAAS,EAAOvJ,Y,EAMpE2E,cAAgB,SAAC5H,GACbA,EAAEC,iBAEF,EAAKsC,SAAS,CAACtB,gBAAgB,IAE/B,IAAMrG,EAAU,CACZ6G,KAAM,EAAKrB,MAAMqB,KACjB4K,cAAe,EAAKjM,MAAMiM,cAC1BzP,WAAY,EAAKwD,MAAMxD,WACvBI,OAAQ,EAAKoD,MAAMpD,OACnBO,WAAY,EAAK6C,MAAM7C,WACvByJ,aAAc,EAAK5G,MAAM4G,aACzBsF,iBAAkB,EAAKlM,MAAMkM,kBAIjCjO,EAAoBzD,GAAS0D,MAAK,SAAAC,GAC9B,IAAIqO,EAAiB,EAAKxM,MAAMxD,WAC5BiQ,EAAa,EAAKzM,MAAMpD,OACxB8P,EAAiB,EAAK1M,MAAM7C,WAChC,EAAKgF,SAAL,gBAAkB,EAAKqB,YAAY,kBAAM,EAAKrB,SAAS,CAACiK,SAAS,EAAM5P,WAAYgQ,EAAgB5P,OAAQ6P,EAAYtP,WAAYuP,UACpIjK,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,IAAIY,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBZ,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,mBACjDH,EAAM,gBAAOZ,EAAS9D,SAASE,KAAK2E,mBAExC,EAAKb,SAAS,CAACtB,gBAAgB,EAAOgC,e,EAU9C8J,eAAiB,SAACnQ,EAAYI,EAAQO,GAClC,EAAKgF,SAAS,CAAC3F,aAAYI,SAAQO,gB,4CAOvC,WAAU,IAAD,OACL,EAUIoC,KAAKS,MATLqB,EADJ,EACIA,KACA4K,EAFJ,EAEIA,cACArF,EAHJ,EAGIA,aACAC,EAJJ,EAIIA,YACAqF,EALJ,EAKIA,iBACAC,EANJ,EAMIA,gBACAtL,EAPJ,EAOIA,eACAuL,EARJ,EAQIA,QACAvJ,EATJ,EASIA,OAIAH,GAAiB,EAMrB,MALa,KAATrB,GAAoC,OAArB6K,IACfxJ,GAAiB,GAKjB,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBzJ,GAAG,iBAAiBoI,KAAK,mBAC1C,oBAAIvI,UAAU,yBAAd,4BAGJ,cAAC,GAAD,CAAUuI,KAAK,cAAf,yEAEA,iCAGQ+K,GACA,qBAAKtT,UAAU,sBAAsB2G,KAAK,QAA1C,sCAKJ,sBAAK3G,UAAU,aAAf,UACI,cAAC,GAAD,CAAOiG,KAAK,OACL0C,WAAS,EACTjG,MAAOqL,EACPxF,KAAK,cACLO,MAAM,gBACNN,YAAY,uBACZC,SAAUhC,KAAKuH,cACf3F,SAAU0B,EAAO+D,eAAgB,EACjC/E,MAAOgB,EAAO+D,eAIjBA,GACA,gCACI,qBAAK9N,UAAU,wCAAwC4O,IAAKd,EAAce,IAAI,WAC9E,uBACA,yBAAQ7O,UAAU,6BAA6B6G,QAAS,kBAAM,EAAK4H,WAAW,gBAA9E,UACI,mBAAGzO,UAAU,gBADjB,kBAMZ,sBAAKA,UAAU,aAAf,UACI,cAAC,GAAD,CAAOiG,KAAK,OACL0C,WAAS,EACTjG,MAAO2Q,EACP9K,KAAK,kBACLO,MAAM,qBACNN,YAAY,2BACZC,SAAUhC,KAAKuH,cACf3F,SAAU0B,EAAOqJ,mBAAoB,EACrCrK,MAAOgB,EAAOqJ,mBAIjBA,GACA,gCACI,qBAAKpT,UAAU,iBAAiB4O,IAAKwE,EAAkBvE,IAAI,WAC3D,uBACA,yBAAQ7O,UAAU,6BAA6B6G,QAAS,kBAAM,EAAK4H,WAAW,oBAA9E,UACI,mBAAGzO,UAAU,gBADjB,kBAMZ,qBAAKA,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,QACNN,YAAY,aAAaD,KAAK,OAAO7F,MAAO6F,EAC5CE,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAOxB,OAAQ,EACzBQ,MAAOgB,EAAOxB,SAGtB,sBAAKvI,UAAU,aAAf,UACI,uBAAOA,UAAU,mBAAjB,oCACA,cAAC,YAAD,CAAUwT,OAAQM,KACRC,OAAQ,CAACC,cAAe,CAAC,QAAS,WAAY,OAAQ,eAAgB,YAAa,aAAc,eAAgB,aAAc,eAAgB,gBAC/IzO,KAAM4N,EAAe1K,SAAUhC,KAAK8M,wBAE1CxJ,EAAOoJ,eACP,qBAAKnT,UAAU,cAAf,SACI,gCAAQ+J,EAAOoJ,qBAI3B,qBAAKnT,UAAU,aAAf,SACI,cAAC,GAAD,CAAgB+S,OAAQtM,KAAKoN,mBAGjC,eAAC,GAAD,CAAqBhN,QAAS,SAACC,GAAD,OAAO,EAAK4H,cAAc5H,IACnC9G,UAAU,6BACV8H,SAAUC,GAAkB6B,EAC5B7B,eAAgBA,EAChBC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,4B,GAzQSgH,aAuRdkM,MCzNAe,GArEO,SAAClU,GAAD,OAClB,qBAAKC,UAAU,YAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,qBAAKA,UAAU,kBAAf,SACI,qBAAKA,UAAU,mCAAmC4O,IAAKI,GAAsBjP,EAAMuP,MAAOT,IAAI,cAGlG,sBAAK7O,UAAU,wCAAf,UACI,oBAAIA,UAAU,aAAd,SACKD,EAAMwI,OAGX,gCACI,sBAAMvI,UAAU,mBAAhB,6BACCD,EAAM4F,aAIP5F,EAAMyD,UACN,gCACI,sBAAMxD,UAAU,mBAAhB,wBACCD,EAAMyD,SAAS+E,QAKpBxI,EAAMkE,MACN,gCACI,sBAAMjE,UAAU,mBAAhB,oBACCD,EAAMkE,KAAKsE,QAKhBxI,EAAMyE,UACN,gCACI,sBAAMxE,UAAU,mBAAhB,yBACCD,EAAMyE,SAAS+D,WAK5B,sBAAKvI,UAAU,wCAAf,UACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,2BAA6BJ,EAAM6B,UAAnD,SACI,yBAAQqE,KAAK,SAASjG,UAAU,qBAAhC,UACI,mBAAGA,UAAU,iBADjB,eAIJ,uBAEA,yBAAQiG,KAAK,SAASjG,UAAU,+BAA+B6G,QAAS,kBAAM9G,EAAMmU,sBAAsBnU,EAAM6B,YAAhH,UACI,mBAAG5B,UAAU,iBADjB,cAGA,uBAEA,eAAC,GAAD,CAAqB6G,QAAS,kBAAM9G,EAAMoU,cAAcpU,EAAM6B,YACzC5B,UAAU,4BACV8H,SAAU/H,EAAMgI,eAChBA,eAAgBhI,EAAMgI,eACtBC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,gBALjB,wBCnDdoU,G,4MAKFlN,MAAQ,CACJmN,SAAU,GACVtM,gBAAgB,G,EAOpBoM,cAAgB,SAACvS,GAEb,GAAG0J,OAAO6E,QAAQ,8CAA+C,CAE7D,IAF6D,EAEzDmE,EAAc,GACXD,EAAY,EAAKnN,MAAjBmN,SAHsD,eAI9CA,GAJ8C,IAI7D,2BAAyB,CAAC,IAAjBE,EAAgB,QAClBA,EAAG3S,YAAcA,EAEhB0S,EAAY5K,KAAZ,6BAAqB6K,GAArB,IAAyBxM,gBAAgB,KAGzCuM,EAAY5K,KAAZ,gBAAqB6K,KAVgC,8BAa7D,EAAKlL,SAAS,CAACgL,SAAUC,IAGzBnP,EAAuBvD,GAAWwD,MAAK,SAAAC,GAEnCiP,GADAA,EAAW,aAAO,EAAKpN,MAAMmN,WACHnD,QAAO,SAAAqD,GAAE,OAAIA,EAAG3S,YAAcA,KAGxD,EAAKyH,SAAS,CAACgL,SAAUC,OAC1B3K,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,EA6B/BmL,sBAAwB,SAAAtS,GAEpBuD,EAAmBvD,GAAWwD,MAAK,SAAAC,GAE/B,IAAIyI,EAAezI,EAASE,KACxBiP,EAAIC,SAASC,cAAc,KAC/BF,EAAE5N,KAAO,yBAA2BkH,EACpC0G,EAAEG,SAAW/S,EAAY,OACzB4S,EAAEI,WACHjL,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,O,uDAhC3B,WAAqB,IAAD,OAChBtC,KAAK4C,SAAS,CAACtB,gBAAgB,IhC8D5BvH,IAAM+B,IAAI,iBgC5D4B6C,MAAK,SAAAC,GAC1C,IADsD,EAChDgP,EAAWhP,EAASE,KAD4B,eAGxC8O,GAHwC,IAGtD,IAAI,EAAJ,qBAAwB,CAAC,IAAjBE,EAAgB,QACpBA,EAAGxM,gBAAiB,EACpBwM,EAAGJ,cAAgB,EAAKA,eAL0B,8BAOtD,EAAK9K,SAAS,CAACgL,WAAUtM,gBAAgB,OAC1C4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBA2B3B,WAAU,IAAD,OAGCsL,EAAW5N,KAAKS,MAAMmN,SAASxC,KAAI,SAAA0C,GAAE,OACvC,cAAC,GAAD,6BAAsCA,GAAtC,IAA0CL,sBAAuB,EAAKA,wBAAlDK,EAAG3S,cAIvBiT,EAAU,cAAC,GAAD,IAMd,OALKpO,KAAKS,MAAMa,iBACZ8M,EAAyC,IAA/BpO,KAAKS,MAAMmN,SAASnG,OAAe,cAAC,GAAD,CAAkBjG,KAAK,0BAA4BoM,GAKhG,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBlU,GAAG,iBAAiBoI,KAAK,mBAC1C,oBAAIvI,UAAU,yBAAd,yBAGJ,cAAC,GAAD,CAAUuI,KAAK,WAAf,2GACCsM,S,GA9GuB7N,aAoHzBoN,MChHTU,G,4MAKF5N,MAAQ,CACJtF,UAAW,EACX2G,KAAM,GACN4K,cAAe,GACfzP,WAAY,KACZI,OAAQ,KACRO,WAAY,KACZsB,UAAW,GACX2J,MAAO,GACPxB,aAAc,KACdC,YAAa,GACbgH,UAAW,KACX3B,iBAAkB,KAClBC,gBAAiB,GACjB2B,8BAA8B,EAC9BzF,iCAAiC,EACjCC,2BAA2B,EAC3ByF,+BAA+B,EAC/BC,gBAAgB,EAChBtF,cAAc,EACduF,kBAAkB,EAClBpL,OAAQ,I,EA0BZiE,cAAgB,SAAC5E,EAAOgM,EAASC,GAAa,IAAD,EACnCtL,EAAM,gBAAO,EAAK7C,MAAM6C,QAI9B,UAHOA,EAAOqL,GAEd,EAAK/L,UAAL,GAAeU,UAAf,eAAwBX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,OAAzD,eAAiE2S,GAAU,GAA3E,IACkC,IAA9BjM,EAAME,OAAO2E,MAAMC,OAAvB,CAIA,IAAMC,EAAO/E,EAAME,OAAO2E,MAAM,GAC5BG,EAAS,IAAIC,WACjBD,EAAOE,UAAY,WAEf,EAAKjF,SAAL,gBAAgB+L,EAAUhH,EAAOG,UAGrCH,EAAOI,cAAcL,K,EAQzBM,WAAa,SAAC6G,EAAQC,GAAY,IAAD,EACvBxL,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOuL,GAEd,EAAKjM,UAAL,GAAeU,UAAf,eAAwBuL,EAAS,MAAjC,eAAwCC,EAAS,IAAjD,K,EAMJzF,mBAAqB,SAAChJ,GAClBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACmG,2BAA2B,IAC1C,IAAMnO,EAAM,CAAEyM,aAAc,EAAK5G,MAAM4G,cAGvC3I,EAA4B,EAAK+B,MAAMtF,UAAWP,GAAK+D,MAAK,SAAAC,GACxD,EAAKgE,SAAS,CAACmG,2BAA2B,EAAOF,MAAOjK,EAASE,KAAKwK,QAASH,cAAc,IAAO,WAChG,EAAKnB,WAAW,eAAgB,qBAErC9E,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,EAAK8D,eAAe9D,EAAU,iC,EAStC8D,eAAiB,SAAC9D,EAAU+D,GACxB,GAAI/D,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,iBAAkB,CAAC,IAAD,EAE/DH,EAAM,6BACH,EAAK7C,MAAM6C,QACXZ,EAAS9D,SAASE,KAAK2E,kBAG9B,EAAKb,UAAL,oBACK6D,GAAU,GADf,wBAEInD,GAFJ,M,EAURyL,uBAAyB,WACrB,EAAKnM,SAAS,CAAC4L,+BAA+B,IAC9C,IAAM5T,EAAM,CAAEyM,aAAc,EAAK5G,MAAMkM,kBAGvCjO,EAAqC,EAAK+B,MAAMtF,UAAWP,GAAK+D,MAAK,SAAAC,GACjE,EAAKgE,SAAS,CAAC4L,+BAA+B,EAAOF,UAAW1P,EAASE,KAAKwK,QAASoF,kBAAkB,IAAO,WAC5G,EAAK1G,WAAW,mBAAoB,yBAEzC9E,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,GAAIA,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,iBAAkB,CACnE,IAAIH,EAAM,gBACH,EAAK7C,MAAM6C,QAElBA,EAAOqJ,iBAAmBjK,EAAS9D,SAASE,KAAK2E,iBAAiB4D,aAClE,EAAKzE,SAAS,CAAC4L,+BAA+B,EAAOlL,gB,EASjEtB,SAAW,SAACW,GAAW,IAAD,EAEZW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAC3B,EAAKc,UAAL,GAAeU,UAAf,eAAwBX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,OAAzD,iCAAgF,GAAhF,K,EAQJ6Q,sBAAwB,SAACnK,EAAOoK,GAE5B,IAAMzJ,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAM,cACb,EAAKV,SAAS,CAAC8J,cAAeK,EAAOC,UAAWyB,gBAAgB,EAAOnL,Y,EAM3E0L,qBAAuB,SAAC3O,GACpBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACkG,iCAAiC,IAEhD,IAAM7N,EAAU,CACZ6G,KAAM,EAAKrB,MAAMqB,KACjB4K,cAAe,EAAKjM,MAAMiM,cAC1BzP,WAAY,EAAKwD,MAAMxD,WACvBI,OAAQ,EAAKoD,MAAMpD,OACnBO,WAAY,EAAK6C,MAAM7C,YAI3Bc,EAAuB,EAAK+B,MAAMtF,UAAWF,GAAS0D,MAAK,SAAAC,GACvD,EAAKgE,SAAS,CAAC6L,gBAAgB,EAAM3F,iCAAiC,OACvE5F,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,EAAK8D,eAAe9D,EAAU,uC,EAUtC0K,eAAiB,SAACnQ,EAAYI,EAAQO,GAClC,EAAKgF,SAAS,CAAC3F,aAAYI,SAAQO,gB,uDAnLvC,WAAqB,IjC4FCzC,EiC5FF,OAChB6E,KAAK4C,SAAS,CAAC2L,8BAA8B,KjC2F3BpT,EiCzFE6E,KAAK1G,MAAM2V,MAAMC,OAAO/T,UjC0FzCpB,IAAM+B,IAAI,aAAeX,IiC1F2BwD,MAAK,SAAAC,GACxD,IAAM3B,EAAa2B,EAASE,KAAK/B,SAAW6B,EAASE,KAAK/B,SAASE,WAAa,KAC1EI,EAASuB,EAASE,KAAKtB,KAAOoB,EAASE,KAAKtB,KAAKH,OAAS,KAC1DO,EAAagB,EAASE,KAAKf,SAAWa,EAASE,KAAKf,SAASH,WAAa,KAChF,EAAKgF,SAAL,6BAAkBhE,EAASE,MAA3B,IAAiCyP,8BAA8B,EAAOtR,aAAYI,SAAQO,mBAC3FsF,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAgL3B,WAAU,IAAD,OACL,EAoBItC,KAAKS,MAnBLqB,EADJ,EACIA,KACA4K,EAFJ,EAEIA,cACAzP,EAHJ,EAGIA,WACAI,EAJJ,EAIIA,OACAO,EALJ,EAKIA,WACAiL,EANJ,EAMIA,MACAxB,EAPJ,EAOIA,aACAC,EARJ,EAQIA,YACAgH,EATJ,EASIA,UACA3B,EAVJ,EAUIA,iBACAC,EAXJ,EAWIA,gBACA2B,EAZJ,EAYIA,6BACAzF,EAbJ,EAaIA,gCACAC,EAdJ,EAcIA,0BACAyF,EAfJ,EAeIA,8BACAC,EAhBJ,EAgBIA,eACAtF,EAjBJ,EAiBIA,aACAuF,EAlBJ,EAkBIA,iBACApL,EAnBJ,EAmBIA,OAIA8K,EAAU,cAAC,GAAD,IA0Id,OAzIIG,IACAH,EACI,gCACI,uBAAM7U,UAAU,OAAhB,UAEQ4P,GACA,qBAAK5P,UAAU,sBAAsB2G,KAAK,QAA1C,mCAKJ,sBAAK3G,UAAU,aAAf,UACI,cAAC,GAAD,CAAOiG,KAAK,OACL0C,WAAS,EACTjG,MAAOqL,EACPxF,KAAK,cACLO,MAAM,gBACNN,YAAY,uBACZC,SAAU,SAACW,GAAD,OAAW,EAAK4E,cAAc5E,EAAO,eAAgB,iBAC/Df,SAAU0B,EAAO+D,eAAgB,EACjC/E,MAAOgB,EAAO+D,eAIjBA,EACI,gCACI,qBAAK9N,UAAU,wCAAwC4O,IAAKd,EAAce,IAAI,WAC9E,uBACA,yBAAQ7O,UAAU,6BAA6B8H,SAAU0H,EAA2B3I,QAAS,kBAAM,EAAK4H,WAAW,eAAgB,gBAAnI,UACI,mBAAGzO,UAAU,gBADjB,YAGA,eAAC,GAAD,CAAoB6G,QAAS,SAACC,GAAD,OAAO,EAAKgJ,mBAAmBhJ,IACxC9G,UAAU,mCACV8H,SAAU0H,EACVzH,eAAgByH,EAChBxH,aAAW,EAJ/B,UAKI,mBAAGhI,UAAU,sBALjB,sBASJ,8BACI,qBAAKA,UAAU,wCAAwC4O,IAAKI,GAAsBM,EAAOT,IAAI,mBAMjH,uBAAM7O,UAAU,OAAhB,UAEQmV,GACA,qBAAKnV,UAAU,sBAAsB2G,KAAK,QAA1C,6CAKJ,sBAAK3G,UAAU,aAAf,UACI,cAAC,GAAD,CAAOiG,KAAK,OACL0C,WAAS,EACTjG,MAAO2Q,EACP9K,KAAK,kBACLO,MAAM,0BACNN,YAAY,iCACZC,SAAU,SAACW,GAAD,OAAW,EAAK4E,cAAc5E,EAAO,mBAAoB,qBACnEf,SAAU0B,EAAOqJ,mBAAoB,EACrCrK,MAAOgB,EAAOqJ,mBAIjBA,EACI,gCACI,qBAAKpT,UAAU,iBAAiB4O,IAAKwE,EAAkBvE,IAAI,WAC3D,uBACA,yBAAQ7O,UAAU,6BAA6B8H,SAAUmN,EAA+BpO,QAAS,kBAAM,EAAK4H,WAAW,mBAAoB,oBAA3I,UACI,mBAAGzO,UAAU,gBADjB,YAGA,eAAC,GAAD,CAAoB6G,QAAS,SAACuC,GAAWA,EAAMrC,iBAAkB,EAAKyO,0BAClDxV,UAAU,mCACV8H,SAAU0H,EACVzH,eAAgByH,EAChBxH,aAAW,EAJ/B,UAKI,mBAAGhI,UAAU,sBALjB,wCASJ,8BACI,qBAAKA,UAAU,iBAAiB4O,IAAKK,GAAyB8F,EAAWlG,IAAI,mBAMjG,uBAAM7O,UAAU,OAAhB,UAEQkV,GACA,qBAAKlV,UAAU,sBAAsB2G,KAAK,QAA1C,yCAKJ,qBAAK3G,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,OACNN,YAAY,aAAaD,KAAK,OAAO7F,MAAO6F,EAC5CE,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAOxB,OAAQ,EACzBQ,MAAOgB,EAAOxB,SAGtB,sBAAKvI,UAAU,aAAf,UACI,uBAAOA,UAAU,mBAAjB,oCACA,cAAC,YAAD,CAAUwT,OAAQM,KACRC,OAAQ,CAACC,cAAe,CAAC,QAAS,WAAY,OAAQ,eAAgB,YAAa,aAAc,eAAgB,aAAc,eAAgB,gBAC/IzO,KAAM4N,EAAe1K,SAAUhC,KAAK8M,wBAE1CxJ,EAAOoJ,eACP,qBAAKnT,UAAU,cAAf,SACI,gCAAQ+J,EAAOoJ,qBAI3B,qBAAKnT,UAAU,aAAf,SACI,cAAC,GAAD,CAAgB+S,OAAQtM,KAAKoN,eAAgBnQ,WAAYA,EAAYI,OAAQA,EAAQO,WAAYA,MAGrG,eAAC,GAAD,CAAqBwC,QAAS,SAACC,GAAD,OAAO,EAAK2O,qBAAqB3O,IAC1C9G,UAAU,6BACV8H,SAAUyH,GAA4C,KAAThH,EAC7CR,eAAgBwH,EAChBvH,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,4BAcZ,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBG,GAAG,iBAAiBoI,KAAK,mBAC1C,cAAC,GAAD,CAAiBpI,GAAG,0BAA0BoI,KAAK,aACnD,oBAAIvI,UAAU,yBAAd,wBAGJ,cAAC,GAAD,CAAUuI,KAAK,UAAf,+DACCsM,S,GArYe7N,aA2YjB8N,MClXAc,GAnCQ,SAAC7V,GAAD,OACnB,qBAAKC,UAAU,YAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,qBAAKA,UAAU,kBAAf,SACI,qBAAKA,UAAU,mCAAmC4O,IAAKG,GAA0BhP,EAAMuP,MAAOT,IAAI,kBAGtG,sBAAK7O,UAAU,2BAAf,UACI,oBAAIA,UAAU,0BAAd,SACKD,EAAMwI,OAGX,gCACI,sBAAMvI,UAAU,mBAAhB,uBACCD,EAAM2N,WAGX,qBAAK1N,UAAU,OAAf,SACKD,EAAM4N,iBAIf,qBAAK3N,UAAU,2BAAf,SACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,iBAAmBJ,EAAM8V,cAAzC,SACI,yBAAQ5P,KAAK,SAASjG,UAAU,yCAAhC,UACI,mBAAGA,UAAU,eADjB,2BCpBlB8V,G,4MAKF5O,MAAQ,CACJ6O,aAAc,GACdhO,gBAAgB,G,uDAMpB,WAAqB,IAAD,OAChBtB,KAAK4C,SAAS,CAACtB,gBAAgB,InC2K5BvH,IAAM+B,IAAI,iBmCzKiB6C,MAAK,SAAAC,GAC/B,EAAKgE,SAAS,CAAC0M,aAAc1Q,EAASE,KAAMwC,gBAAgB,OAC7D4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAQ3B,WAGI,IAAMgN,EAAetP,KAAKS,MAAM6O,aAAalE,KAAI,SAAAmE,GAAC,OAC9C,cAACC,GAAD,gBAA2CD,GAArBA,EAAEH,kBAIxBhB,EAAU,cAAC,GAAD,IAKd,OAJKpO,KAAKS,MAAMa,iBACZ8M,EAA6C,IAAnCpO,KAAKS,MAAM6O,aAAa7H,OAAe,cAAC,GAAD,CAAkBjG,KAAK,8BAAgC8N,GAIxG,eAAC,GAAD,WACI,cAAC,GAAD,UACI,oBAAI/V,UAAU,yBAAd,wCAGJ,cAAC,GAAD,CAAUuI,KAAK,eAAf,mFACCsM,S,GAhDuB7N,aAsDzB8O,MCrBAI,GArCc,SAACnW,GAAD,OACzB,qBAAKC,UAAU,YAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,qBAAKA,UAAU,kBAAf,SACI,qBAAKA,UAAU,mCAAmC4O,IAAKI,GAAsBjP,EAAMuP,MAAOT,IAAI,cAGlG,sBAAK7O,UAAU,2BAAf,UACI,oBAAIA,UAAU,0BAAd,SACKD,EAAMwI,OAGX,qBAAKvI,UAAU,YAAf,SACI,cAAC,KAAD,CAAQwS,QAASzS,EAAMoW,UAAUtE,KAAI,SAAAV,GAAQ,MAAO,CAACzO,MAAOyO,EAAI3P,WAAYsH,MAAOqI,EAAI5I,SAC/EE,SAAU,SAACW,GAAD,OAAWrJ,EAAMqW,WAAWrW,EAAM6B,UAAWwH,EAAM1G,eAI7E,sBAAK1C,UAAU,wCAAf,UACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,iBAAmBJ,EAAM8V,cAAgB,cAAgB9V,EAAM6B,UAAY,IAAM7B,EAAMsW,KAAMrW,UAAWD,EAAMuW,iBAAmB,gBAAjJ,SACI,yBAAQrQ,KAAK,SAAS6B,SAAU/H,EAAMuW,gBAAiBtW,UAAU,4BAAjE,UACI,mBAAGA,UAAU,gBADjB,kBAKJ,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,iBAAmBJ,EAAM8V,cAAgB,SAAW9V,EAAM6B,UAAY,IAAM7B,EAAMsW,KAAMrW,UAAWD,EAAMuW,iBAAmB,gBAA5I,SACI,yBAAQrQ,KAAK,SAAS6B,SAAU/H,EAAMuW,gBAAiBtW,UAAU,oCAAjE,UACI,mBAAGA,UAAU,oBADjB,wBCtBlBuW,G,4MAKFrP,MAAQ,CACJiP,UAAW,GACX9B,SAAU,GACVtM,gBAAgB,G,EAgCpBqO,WAAa,SAACxU,EAAWJ,GACrB,IADoC,EAChC6S,EAAW,GADqB,eAGtB,EAAKnN,MAAMmN,UAHW,IAGpC,IAAI,EAAJ,qBAAmC,CAAC,IAA5BE,EAA2B,QAC5BA,EAAG3S,YAAcA,EAChByS,EAAS3K,KAAK6K,GAIdF,EAAS3K,KAAT,6BAAkB6K,GAAlB,IAAsB8B,KAAM7U,EAAY8U,iBAAiB,MAT7B,8BAYpC,EAAKjN,SAAS,CAACgL,c,uDAtCnB,WAAqB,IrCkLWwB,EqClLZ,OAChBpP,KAAK4C,SAAS,CAACtB,gBAAgB,KrCiLH8N,EqC/KEpP,KAAK1G,MAAM2V,MAAMC,OAAOE,crCgLnDrV,IAAM+B,IAAI,uBAAyBsT,IqChL+BzQ,MAAK,SAAAC,GACtE,IADkF,EAC9E8Q,EAAY9Q,EAASE,KAAK4Q,UAG1B9B,EAAWhP,EAASE,KAAK8O,SAJqD,eAKpEA,GALoE,IAKlF,IAAI,EAAJ,qBAAwB,CAAC,IAAjBE,EAAgB,QACpBA,EAAG+B,iBAAkB,EACrB/B,EAAG8B,MAAQ,EACX9B,EAAG6B,WAAa,EAAKA,YARyD,8BAWlF,EAAK/M,SAAS,CAAC8M,YAAW9B,WAAUtM,gBAAgB,OACrD4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBA4B3B,WAAU,IAAD,OAGCsL,EAAW5N,KAAKS,MAAMmN,SAASxC,KAAI,SAAA0C,GAAE,OACvC,cAAC,GAAD,6BAA6CA,GAA7C,IAAiD4B,UAAW,EAAKjP,MAAMiP,UAAWN,cAAe,EAAK9V,MAAM2V,MAAMC,OAAOE,gBAA9FtB,EAAG3S,cAI9BiT,EAAU,cAAC,GAAD,IAMd,OALKpO,KAAKS,MAAMa,iBACZ8M,EAAyC,IAA/BpO,KAAKS,MAAMmN,SAASnG,OAAe,cAAC,GAAD,CAAkBjG,KAAK,0BAA2BoM,GAK/F,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBlU,GAAG,gBAAgBoI,KAAK,6BACzC,oBAAIvI,UAAU,yBAAd,yBAGJ,cAAC,GAAD,CAAUuI,KAAK,WAAf,yGACCsM,S,GAjFkB7N,aAuFpBuP,M,6BClFAC,OAbf,SAA6BzW,GACzB,OACI,sBAAKC,UAAU,oCAAf,UACI,oBAAIA,UAAU,gBAAd,SAA+BD,EAAM0W,cACrC,uBACA,oBAAGzW,UAAU,OAAb,UACI,sBAAMA,UAAU,mBAAhB,wBACCD,EAAM2W,oBCMjBC,G,4MAKFzP,MAAQ,CACJ2O,cAAe,EAAK9V,MAAM2V,MAAMC,OAAOE,cACvCjU,UAAW,EAAK7B,MAAM2V,MAAMC,OAAO/T,UACnCJ,WAAY,EAAKzB,MAAM2V,MAAMC,OAAOnU,WACpCiV,YAAa,GACbC,aAAc,GACdvD,cAAe,GACf4B,UAAW,KACX9M,KAAM,GACN2O,iCAAiC,EACjCC,iCAAiC,EACjC9M,OAAQ,I,EAsBZ+M,oBAAsB,SAAChQ,GACnBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACwN,iCAAiC,IAGhD1R,EAA4B,EAAK+B,MAAMtF,UAAW,EAAKsF,MAAM1F,WAAY,CAACyG,KAAM,EAAKf,MAAMe,OAAO7C,MAAK,SAAAC,GACnG,EAAKgE,SAAS,CAACwN,iCAAiC,IAAQ,kBAAM,EAAK9W,MAAM0J,QAAQC,KAAK,iBAAmB,EAAKxC,MAAM2O,qBACrHlM,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,IAAIY,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBZ,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,mBACjDH,EAAM,gBAAOZ,EAAS9D,SAASE,KAAK2E,mBAExC,EAAKb,SAAS,CAACwN,iCAAiC,EAAO9M,e,EAS/DgN,aAAe,SAAC3N,EAAOoK,GAEnB,IAAMzJ,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAM,KACb,EAAKV,SAAS,CAACpB,KAAMuL,EAAOC,UAAW1J,Y,uDA9C3C,WAAqB,IvC+KSnI,EAAWJ,EuC/KrB,OAChBiF,KAAK4C,SAAS,CAACuN,iCAAiC,KvC8KtBhV,EuC5KC6E,KAAKS,MAAMtF,UvC4KDJ,EuC5KYiF,KAAKS,MAAM1F,WvC6KzDhB,IAAM+B,IAAI,qBAAuBX,EAAY,IAAMJ,IuC7KkB4D,MAAK,SAAAC,GAEzE,MAAoEA,EAASE,KAAtEkR,EAAP,EAAOA,YAAatD,EAApB,EAAoBA,cAAe4B,EAAnC,EAAmCA,UAAW9M,EAA9C,EAA8CA,KAAMyO,EAApD,EAAoDA,aACpD,EAAKrN,SAAS,CAACoN,cAAatD,gBAAe4B,YAAW9M,OAAMyO,eAAcE,iCAAiC,OAC5GjN,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBA4C3B,WAAU,IAAD,OACL,EAUItC,KAAKS,MATL2O,EADJ,EACIA,cACAY,EAFJ,EAEIA,YACAC,EAHJ,EAGIA,aACAvD,EAJJ,EAIIA,cACA4B,EALJ,EAKIA,UACA9M,EANJ,EAMIA,KACA2O,EAPJ,EAOIA,gCACAC,EARJ,EAQIA,gCACA9M,EATJ,EASIA,OAIJ,OAAI6M,EAEI,cAAC,GAAD,UACI,cAAC,GAAD,MAOR,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBzW,GAAG,gBAAgBoI,KAAK,6BACzC,cAAC,GAAD,CAAiBpI,GAAI,iBAAmB0V,EAAetN,KAAK,aAC5D,oBAAIvI,UAAU,yBAAd,gCAGJ,cAAC,GAAD,CAAUuI,KAAK,kBAAf,qEACA,cAAC,GAAD,CAAqBkO,YAAaA,EAAaC,aAAcA,IAE7D,qBAAK1W,UAAU,cAAf,SACI,qBAAKA,UAAU,iBAAiB4O,IAAKK,GAAyB8F,EAAWlG,IAAI,wBAI1D,KAAlBsE,GACD,qBAAKnT,UAAU,mCAAf,SACK8K,aAAMkM,KAAUC,SAAS9D,MAIlC,uBAAMnT,UAAU,OAAhB,UACI,sBAAKA,UAAU,aAAf,UACI,uBAAOA,UAAU,mBAAjB,6BACA,cAAC,YAAD,CAAUwT,OAAQM,KACRC,OAAQ,CAACC,cAAe,CAAC,QAAS,WAAY,OAAQ,eAAgB,YAAa,aAAc,eAAgB,aAAc,eAAgB,gBAC/IzO,KAAM0C,EAAMQ,SAAUhC,KAAKsQ,eAEjChN,EAAO9B,MACP,qBAAKjI,UAAU,cAAf,SACI,gCAAQ+J,EAAO9B,YAK3B,eAAC,GAAD,CAAqBpB,QAAS,SAACC,GAAD,OAAO,EAAKgQ,oBAAoBhQ,IACzC9G,UAAU,6BACV8H,SAAU+O,GAA4C,KAAT5O,EAC7CF,eAAgB8O,EAChB7O,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,mC,GAtIagH,aAmJlB2P,MCxGAO,GAtDuB,SAACnX,GACnC,IAAIoX,EAAY,YACbpX,EAAMqX,aACLD,GAAa,eAGjB,IAAIE,EAAW,kBAKf,OAJItX,EAAMuX,QACND,EAAW,qBAIX,qBAAKrX,UAAWmX,EAAhB,SACI,qBAAKnX,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,sBAAKA,UAAU,WAAf,UACI,6BACKD,EAAMwX,iBAEX,4BAAIxX,EAAM4F,YAEN5F,EAAMqX,YACN,sBAAMpX,UAAU,mBAAhB,yBAIR,qBAAKA,UAAU,WAAf,SACI,qBAAKA,UAAU,8BAAf,SACK8K,aAAMkM,KAAUC,SAASlX,EAAMyX,qBAIxC,qBAAKxX,UAAU,WAAf,SACI,sBAAKA,UAAU,8CAAf,UACI,sBAAKA,UAAU,iBAAf,UACI,mBAAGA,UAAU,oBADjB,IACuCD,EAAM0X,WAAa,OAG1D,wBAAQ5Q,QAAS,kBAAM9G,EAAM2X,aAAa3X,EAAM0C,gBAAgBwD,KAAK,SAASjG,UAAWqX,EAAzF,SAEQtX,EAAMuX,MACF,mBAAGtX,UAAU,oBAEb,mBAAGA,UAAU,qCCjC/C2X,G,4MAKFzQ,MAAQ,CACJ2O,cAAe,EAAK9V,MAAM2V,MAAMC,OAAOE,cACvCjU,UAAW,EAAK7B,MAAM2V,MAAMC,OAAO/T,UACnCJ,WAAY,EAAKzB,MAAM2V,MAAMC,OAAOnU,WACpCE,QAAS,KACTkW,SAAU,GACVC,aAAc,GACd9P,gBAAgB,G,EAqBpB2P,aAAe,SAAAjV,GACX,IAEIqV,EAHwB,EACxBC,EAAkB,GACfF,EAAgB,EAAK3Q,MAArB2Q,aAFqB,eAIfA,GAJe,IAI5B,IAAI,EAAJ,qBAA2B,CAAC,IAApBG,EAAmB,QACpBA,EAAEvV,gBAAkBA,EACnBsV,EAAgBrO,KAAKsO,IAIrBF,GAAYE,EAAEV,OAGVS,EAAgBrO,KAAhB,6BAAyBsO,GAAzB,IAA4BV,MAAOQ,EAAUL,WAAYO,EAAEP,WAAa,KAIxEM,EAAgBrO,KAAhB,6BAAyBsO,GAAzB,IAA4BV,MAAOQ,EAAUL,WAAYO,EAAEP,WAAa,MAjBxD,8BAqB5B,EAAKpO,SAAS,CAACwO,aAAcE,IAG7B5S,EAAiB1C,EAAe,CAACC,MAAOoV,IAAWnO,OAAM,SAAAZ,GAErD,OAAOsD,GAAYtD,O,uDAzC3B,WAAqB,IAAD,OAChBtC,KAAK4C,SAAS,CAACtB,gBAAgB,IAE/B5C,EAAyBsB,KAAKS,MAAMtF,UAAW6E,KAAKS,MAAM1F,YAAY4D,MAAK,SAAAC,GACvE,EAAKgE,SAAS,CAAC3H,QAAS2D,EAASE,KAAK7D,QAASkW,SAAUvS,EAASE,KAAKqS,SAAUC,aAAcxS,EAASE,KAAKsS,aAAc9P,gBAAgB,OAC5I4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBA0C3B,WAAU,IAAD,OAGC8O,EAAepR,KAAKS,MAAM2Q,aAAahG,KAAI,SAAAmG,GAAC,OAC9C,cAAC,GAAD,6BAAyDA,GAAzD,IAA4DN,aAAc,EAAKA,eAA3CM,EAAEvV,kBAItCoS,EAAU,cAAC,GAAD,IACd,IAAKpO,KAAKS,MAAMa,eAAgB,CAC5B,MAAyCtB,KAAKS,MAAMxF,QAA7C6G,EAAP,EAAOA,KAAMwM,EAAb,EAAaA,UAAW5B,EAAxB,EAAwBA,cAExB0B,EACE,gCACI,cAAC,GAAD,CAAqB4B,YAAalO,EAAMmO,aAAcjQ,KAAKS,MAAM0Q,WAEjE,qBAAK5X,UAAU,cAAf,SACI,qBAAKA,UAAU,iBAAiB4O,IAAKK,GAAyB8F,EAAWlG,IAAI,wBAI1D,KAAlBsE,GACD,qBAAKnT,UAAU,mCAAf,SACK8K,aAAMkM,KAAUC,SAAS9D,MAKN,IAAxB0E,EAAa3J,OACT,cAAC,GAAD,CAAkBuC,QAAQ,OAAOxI,KAAK,8BAEtC,sBAAKjI,UAAU,OAAf,UACI,qBAAKA,UAAU,wHAAf,SACI,gDAEH6X,QAQvB,OACI,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiB1X,GAAG,gBAAgBoI,KAAK,6BACzC,cAAC,GAAD,CAAiBpI,GAAI,iBAAmBsG,KAAKS,MAAM2O,cAAetN,KAAK,aACvE,oBAAIvI,UAAU,yBAAd,kCAGJ,cAAC,GAAD,CAAUuI,KAAK,oBAAf,wEACCsM,S,GAvHgB7N,aA6HlB2Q,MCvGAM,GA/BY,SAAClY,GAAD,OACvB,qBAAKC,UAAU,YAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,qBAAKA,UAAU,kBAAf,SACI,qBAAKA,UAAU,mCAAmC4O,IAAKI,GAAsBjP,EAAMuP,MAAOT,IAAI,cAGlG,sBAAK7O,UAAU,wCAAf,UACI,oBAAIA,UAAU,aAAd,SACKD,EAAMwI,OAGX,qBAAKvI,UAAU,YAAf,SACI,cAAC,KAAD,CAAQwS,QAASzS,EAAMoW,UAAUtE,KAAI,SAAAV,GAAQ,MAAO,CAACzO,MAAOyO,EAAI3P,WAAYsH,MAAOqI,EAAI5I,SAC/EE,SAAU,SAACW,GAAD,OAAWrJ,EAAMqW,WAAWrW,EAAM6B,UAAWwH,EAAM1G,eAI7E,qBAAK1C,UAAU,wCAAf,SACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,YAAcJ,EAAM6B,UAAY,IAAM7B,EAAMsW,KAAMrW,UAAWD,EAAMmY,gBAAkB,gBAArG,SACI,yBAAQjS,KAAK,SAAS6B,SAAU/H,EAAMmY,eAAgBlY,UAAU,+BAAhE,UACI,mBAAGA,UAAU,eADjB,0BCjBlBmY,G,4MAKFjR,MAAQ,CACJiP,UAAW,GACX9B,SAAU,GACVtM,gBAAgB,G,EAgCpBqO,WAAa,SAACxU,EAAWJ,GACrB,IADoC,EAChC6S,EAAW,GADqB,eAEtB,EAAKnN,MAAMmN,UAFW,IAEpC,IAAI,EAAJ,qBAAmC,CAAC,IAA5BE,EAA2B,QAC5BA,EAAG3S,YAAcA,EAChByS,EAAS3K,KAAK6K,GAIdF,EAAS3K,KAAT,6BAAkB6K,GAAlB,IAAsB8B,KAAM7U,EAAY0W,gBAAgB,MAR5B,8BAYpC,EAAK7O,SAAS,CAACgL,c,uDAtCnB,WAAqB,IAAD,OAChB5N,KAAK4C,SAAS,CAACtB,gBAAgB,I3CoO5BvH,IAAM+B,IAAI,iC2ClO6B6C,MAAK,SAAAC,GAC3C,IADuD,EACnD8Q,EAAY9Q,EAASE,KAAK4Q,UAG1B9B,EAAWhP,EAASE,KAAK8O,SAJ0B,eAKzCA,GALyC,IAKvD,IAAI,EAAJ,qBAAwB,CAAC,IAAjBE,EAAgB,QACpBA,EAAG2D,gBAAiB,EACpB3D,EAAG8B,MAAQ,EACX9B,EAAG6B,WAAa,EAAKA,YAR8B,8BAWvD,EAAK/M,SAAS,CAAC8M,YAAW9B,WAAUtM,gBAAgB,OACrD4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBA4B3B,WAAU,IAAD,OAGCsL,EAAW5N,KAAKS,MAAMmN,SAASxC,KAAI,SAAA0C,GAAE,OACvC,cAAC,GAAD,6BAA2CA,GAA3C,IAA+C4B,UAAW,EAAKjP,MAAMiP,YAA5C5B,EAAG3S,cAG5BiT,EAAU,cAAC,GAAD,IAOd,OANKpO,KAAKS,MAAMa,iBAEZ8M,EAAyC,IAA/BpO,KAAKS,MAAMmN,SAASnG,OAAe,cAAC,GAAD,CAAkBjG,KAAK,0BAA4BoM,GAKhG,eAAC,GAAD,WACI,cAAC,GAAD,UACI,oBAAIrU,UAAU,yBAAd,kCAGJ,cAAC,GAAD,CAAUuI,KAAK,WAAf,4JACCsM,S,GAhFgB7N,aAsFlBmR,MClBAC,GAxEkB,SAACrY,GAC9B,IAAIoX,EAAY,YACbpX,EAAMqX,aACLD,GAAa,eAGjB,IAAIkB,EAAe,kBACftY,EAAMuX,QACNe,EAAe,qBAGnB,IAAIC,EAAmB,6BAKvB,OAJIvY,EAAMqX,aACNkB,EAAmB,gCAInB,qBAAKtY,UAAWmX,EAAhB,SACI,qBAAKnX,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,sBAAKA,UAAU,WAAf,UACI,6BACKD,EAAMwX,iBAEX,4BAAIxX,EAAM4F,YAEN5F,EAAMqX,YACN,sBAAMpX,UAAU,mBAAhB,yBAIR,qBAAKA,UAAU,WAAf,SACI,qBAAKA,UAAU,8BAAf,SACK8K,aAAMkM,KAAUC,SAASlX,EAAMyX,qBAIxC,sBAAKxX,UAAU,wBAAf,UACI,sBAAKA,UAAU,iCAAf,UACI,sBAAKA,UAAU,iBAAf,UACI,mBAAGA,UAAU,oBADjB,IACuCD,EAAM0X,WAAa,OAG1D,wBAAQ5Q,QAAS,kBAAM9G,EAAM2X,aAAa3X,EAAM0C,gBAAgBwD,KAAK,SAASjG,UAAWqY,EAAzF,SAEQtY,EAAMuX,MACF,mBAAGtX,UAAU,oBAEb,mBAAGA,UAAU,2BAK7B,cAAC,GAAD,CAAqB6G,QAAS,kBAAM9G,EAAMwY,iBAAiBxY,EAAM0C,gBAC5CzC,UAAWsY,EACXxQ,SAAU/H,EAAMyY,0BAChBzQ,eAAgBhI,EAAMyY,0BACtBxQ,aAAW,EAJhC,SAMQjI,EAAMqX,WACF,gCAAK,mBAAGpX,UAAU,eAAlB,gBAEA,gCAAK,mBAAGA,UAAU,iBAAlB,6BCrD9ByY,G,4MAKFvR,MAAQ,CACJtF,UAAW,EAAK7B,MAAM2V,MAAMC,OAAO/T,UACnCJ,WAAY,EAAKzB,MAAM2V,MAAMC,OAAOnU,WACpCE,QAAS,KACTkW,SAAU,GACVC,aAAc,GACd9P,gBAAgB,G,EA2BpB2P,aAAe,SAAAjV,GACX,IAEIqV,EAHwB,EACxBC,EAAkB,GACfF,EAAgB,EAAK3Q,MAArB2Q,aAFqB,eAKfA,GALe,IAK5B,IAAI,EAAJ,qBAA2B,CAAC,IAApBG,EAAmB,QACpBA,EAAEvV,gBAAkBA,EACnBsV,EAAgBrO,KAAKsO,IAGrBF,GAAYE,EAAEV,OAEVS,EAAgBrO,KAAhB,6BAAyBsO,GAAzB,IAA4BV,MAAOQ,EAAUL,WAAYO,EAAEP,WAAa,KAGxEM,EAAgBrO,KAAhB,6BAAyBsO,GAAzB,IAA4BV,MAAOQ,EAAUL,WAAYO,EAAEP,WAAa,MAfxD,8BAoB5B,EAAKpO,SAAS,CAACwO,aAAcE,IAG7B5S,EAAiB1C,EAAe,CAACC,MAAOoV,IAAWnO,OAAM,SAAAZ,GAErD,OAAOsD,GAAYtD,O,EAQ3BwP,iBAAmB,SAAA9V,GACf,IAEIqV,EAH4B,EAC5BC,EAAkB,GACfF,EAAgB,EAAK3Q,MAArB2Q,aAFyB,eAKnBA,GALmB,IAKhC,IAAI,EAAJ,qBAA2B,CAAC,IAApBG,EAAmB,QACpBA,EAAEvV,gBAAkBA,EACnBsV,EAAgBrO,KAAKsO,IAGrBF,GAAYE,EAAEZ,WACdW,EAAgBrO,KAAhB,6BAAyBsO,GAAzB,IAA4BQ,2BAA2B,OAX/B,8BAchC,EAAKnP,SAAS,CAACwO,aAAcE,IAG7B5S,EAAqB1C,EAAe,CAACC,MAAOoV,IAAW1S,MAAK,SAAAC,GAExD0S,EAAkB,GAClB,IAHoE,EAG7DF,EAAgB,EAAK3Q,MAArB2Q,aAH6D,eAIvDA,GAJuD,IAIpE,IAAI,EAAJ,qBAA2B,CAAC,IAApBG,EAAmB,QACpBA,EAAEvV,gBAAkBA,EACnBsV,EAAgBrO,KAAhB,6BAAyBsO,GAAzB,IAA4BZ,YAAY,KAGxCW,EAAgBrO,KAAhB,6BAAyBsO,GAAzB,IAA4BQ,2BAA2B,EAAOpB,WAAYU,MATd,8BAapE,EAAKzO,SAAS,CAACwO,aAAcE,OAEhCpO,OAAM,SAAAZ,GAEH,OAAOsD,GAAYtD,O,uDAxF3B,WAAqB,IAAD,OAChBtC,KAAK4C,SAAS,CAACtB,gBAAgB,IAE/B5C,EAAyBsB,KAAKS,MAAMtF,UAAW6E,KAAKS,MAAM1F,YAAY4D,MAAK,SAAAC,GACvE,IADmF,EAC/EwS,EAAexS,EAASE,KAAKsS,aADkD,eAEtEA,GAFsE,IAEnF,IAAI,EAAJ,qBAA2B,SACrBW,2BAA4B,GAHiD,8BAOnF,EAAKnP,SAAS,CAAC3H,QAAS2D,EAASE,KAAK7D,QAASkW,SAAUvS,EAASE,KAAKqS,SAAUC,eAAc9P,gBAAgB,OAChH4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAmF3B,WAAU,IAAD,OAGC8O,EAAepR,KAAKS,MAAM2Q,aAAahG,KAAI,SAAAmG,GAAC,OAC9C,cAAC,GAAD,6BAAoDA,GAApD,IAAuDN,aAAc,EAAKA,aAAca,iBAAkB,EAAKA,mBAAhFP,EAAEvV,kBAGjCoS,EAAU,cAAC,GAAD,IAEd,IAAKpO,KAAKS,MAAMa,eAAgB,CAC5B,MAAyCtB,KAAKS,MAAMxF,QAA7C6G,EAAP,EAAOA,KAAMwM,EAAb,EAAaA,UAAW5B,EAAxB,EAAwBA,cAExB0B,EACI,gCACI,cAAC,GAAD,CAAqB4B,YAAalO,EAAMmO,aAAcjQ,KAAKS,MAAM0Q,WAEjE,qBAAK5X,UAAU,cAAf,SACI,qBAAKA,UAAU,iBAAiB4O,IAAKK,GAAyB8F,EAAWlG,IAAI,wBAI1D,KAAlBsE,GACD,qBAAKnT,UAAU,mCAAf,SACK8K,aAAMkM,KAAUC,SAAS9D,MAKN,IAAxB0E,EAAa3J,OACT,cAAC,GAAD,CAAkBuC,QAAQ,OAAOxI,KAAK,8BAEtC,sBAAKjI,UAAU,OAAf,UACI,qBAAKA,UAAU,wHAAf,SACI,gDAEH6X,QAQzB,OACI,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiB1X,GAAG,WAAWoI,KAAK,uBACpC,oBAAIvI,UAAU,yBAAd,qCAGJ,cAAC,GAAD,CAAUuI,KAAK,uBAAf,mIACCsM,S,GApKW7N,aA0KbyR,MClIAC,GAjDmB,SAAC3Y,GAAD,OAC9B,qBAAKC,UAAU,YAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,qBAAKA,UAAU,kBAAf,SACI,qBAAKA,UAAU,mCAAmC4O,IAAKI,GAAsBjP,EAAM4Y,aAAc9J,IAAI,cAGzG,sBAAK7O,UAAU,wCAAf,UACI,oBAAIA,UAAU,aAAd,SACKD,EAAM6Y,kBAGX,2CACc7Y,EAAM0W,eAGpB,gCACI,sBAAMzW,UAAU,mBAAhB,wBACCD,EAAM6X,YAGX,gCACI,sBAAM5X,UAAU,mBAAhB,+BACCD,EAAM8Y,iCAIf,sBAAK7Y,UAAU,wCAAf,UACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,mBAAqBJ,EAAM6B,UAAY,IAAM7B,EAAMyB,WAAnE,SACI,yBAAQyE,KAAK,SAASjG,UAAU,qBAAhC,UACI,mBAAGA,UAAU,eADjB,aAIJ,uBAEA,eAAC,GAAD,CAAqB6G,QAAS,kBAAM9G,EAAMoU,cAAcpU,EAAM6B,UAAW7B,EAAMyB,aAC1DxB,UAAU,4BACV8H,SAAU/H,EAAMgI,eAChBA,eAAgBhI,EAAMgI,eACtBC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,gBALjB,wBChCd8Y,G,4MAKF5R,MAAQ,CACJ6R,UAAW,GACXhR,gBAAgB,G,EAQpBoM,cAAgB,SAACvS,EAAWJ,GAExB,GAAG8J,OAAO6E,QAAQ,2DAA4D,CAE1E,IAF0E,EAEtE6I,EAAe,GACZD,EAAa,EAAK7R,MAAlB6R,UAHmE,eAI5DA,GAJ4D,IAI1E,2BAAyB,CAAC,IAAjBE,EAAgB,QAClBA,EAAErX,YAAcA,GAAaqX,EAAEzX,aAAeA,EAE7CwX,EAAatP,KAAb,6BAAsBuP,GAAtB,IAAyBlR,gBAAgB,KAGzCiR,EAAatP,KAAKuP,IAVgD,8BAa1E,EAAK5P,SAAS,CAAC0P,UAAWC,IAG1B7T,EAAwBvD,EAAWJ,GAAY4D,MAAK,SAAAC,GAEhD2T,GADAA,EAAY,aAAO,EAAK9R,MAAM6R,YACF7H,QAAO,SAAA+H,GAAC,OAAIA,EAAErX,YAAcA,GAAaqX,EAAEzX,aAAeA,KAGtF,EAAK6H,SAAS,CAAC0P,UAAWC,OAC3BrP,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,uDAQ/B,WAAqB,IAAD,OAChBtC,KAAK4C,SAAS,CAACtB,gBAAgB,I/CmN5BvH,IAAM+B,IAAI,2B+CjNwB6C,MAAK,SAAAC,GACtC,IADkD,EAC5C0T,EAAY1T,EAASE,KADuB,eAErCwT,GAFqC,IAElD,IAAI,EAAJ,qBAAwB,CAAC,IAAjBE,EAAgB,QACpBA,EAAElR,gBAAiB,EACnBkR,EAAE9E,cAAgB,EAAKA,eAJuB,8BAOlD,EAAK9K,SAAS,CAAC0P,YAAWhR,gBAAgB,OAC3C4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAQ3B,WAGI,IAAMgQ,EAAYtS,KAAKS,MAAM6R,UAAUlH,KAAI,SAACoH,EAAGC,GAAJ,OACvC,cAAC,GAAD,gBAA2CD,GAAXC,MAIhCrE,EAAU,cAAC,GAAD,IAMd,OALKpO,KAAKS,MAAMa,iBACZ8M,EAA0C,IAAhCpO,KAAKS,MAAM6R,UAAU7K,OAAe,cAAC,GAAD,CAAkBjG,KAAK,uCAAyC8Q,GAK9G,eAAC,GAAD,WACI,cAAC,GAAD,UACI,oBAAI/Y,UAAU,yBAAd,qCAGJ,cAAC,GAAD,CAAUuI,KAAK,wBAAf,oGACCsM,S,GA3FgB7N,aAiGlB8R,MCnDAK,GAlDW,SAACpZ,GACvB,IAAIoX,EAAY,YAKhB,OAJGpX,EAAMqX,aACLD,GAAa,eAIb,qBAAKnX,UAAWmX,EAAhB,SACI,qBAAKnX,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,sBAAKA,UAAU,WAAf,UACI,6BACKD,EAAMqZ,MAAQ,MAEnB,4BAAIrZ,EAAM4F,YAEN5F,EAAMqX,YACN,sBAAMpX,UAAU,mBAAhB,yBAIR,qBAAKA,UAAU,WAAf,SACI,qBAAKA,UAAU,8BAAf,SACK8K,aAAMkM,KAAUC,SAASlX,EAAMyX,qBAIxC,sBAAKxX,UAAU,wBAAf,UACI,qBAAKA,UAAU,iCAAf,SACI,sBAAKA,UAAU,iBAAf,UACI,mBAAGA,UAAU,oBADjB,IACuCD,EAAM0X,WAAa,SAI1C,IAAhB1X,EAAMmZ,OACN,eAAC,GAAD,CAAqBrS,QAAS,kBAAM9G,EAAMsZ,WAAWtZ,EAAM0C,cAAe1C,EAAMmZ,QAC3DlZ,UAAU,iCACV8H,SAAU/H,EAAMgI,eAChBA,eAAgBhI,EAAMgI,eACtBC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,gBALjB,0BC7BtBsZ,G,4MAKFpS,MAAQ,CACJtF,UAAW,EAAK7B,MAAM2V,MAAMC,OAAO/T,UACnCJ,WAAY,EAAKzB,MAAM2V,MAAMC,OAAOnU,WACpCqW,aAAc,GACd9P,gBAAgB,G,EAQpBsR,WAAa,SAAC5W,EAAeyW,GAEzB,GAAG5N,OAAO6E,QAAQ,uDAAwD,CACtE,IAAI4H,EAAe,aAAO,EAAK7Q,MAAM2Q,cACrCE,EAAgBmB,GAAhB,6BAA6BnB,EAAgBmB,IAA7C,IAAqDnR,gBAAgB,IACrE,EAAKsB,SAAS,CAACwO,aAAcE,IAG7B5S,EAA6B1C,GAAe2C,MAAK,SAAAC,GAC7C,IAAI0S,EAAe,aAAO,EAAK7Q,MAAM2Q,cACrCE,EAAgBmB,GAAhB,6BAA6BnB,EAAgBmB,IAA7C,IAAqDnR,gBAAgB,IACrEgQ,EAAkBA,EAAgBwB,MAAML,GAExC,EAAK7P,SAAS,CAACwO,aAAcE,OAC9BpO,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,uDAQ/B,WAAqB,IjD6OgBnH,EAAWJ,EiD7O5B,OAChBiF,KAAK4C,SAAS,CAACtB,gBAAgB,KjD4OEnG,EiD1OC6E,KAAKS,MAAMtF,UjD0ODJ,EiD1OYiF,KAAKS,MAAM1F,WjD2OhEhB,IAAM+B,IAAI,0BAA4BX,EAAY,IAAMJ,IiD3OoB4D,MAAK,SAAAC,GAChF,IAD4F,EACtFwS,EAAexS,EAASE,KAD8D,eAE/EsS,GAF+E,IAE5F,IAAI,EAAJ,qBAA2B,CAAC,IAApBG,EAAmB,QACvBA,EAAEjQ,gBAAiB,EACnBiQ,EAAEqB,WAAa,EAAKA,YAJoE,8BAO5F,EAAKhQ,SAAS,CAACwO,eAAc9P,gBAAgB,OAC9C4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAQ3B,WACI,IAAMyQ,EAAqB/S,KAAKS,MAAM2Q,aAAa3J,OAG7C2J,EAAepR,KAAKS,MAAM2Q,aAAahG,KAAI,SAACmG,EAAGkB,GAAJ,OAC7C,cAAC,GAAD,cAA+BE,MAAOI,EAAqBN,EAAOA,MAAOA,GAAWlB,GAA5DkB,MAIxBrE,EAAU,cAAC,GAAD,IAgBd,OAfKpO,KAAKS,MAAMa,iBACZ8M,EAAiC,IAAvB2E,EACN,cAAC,GAAD,CAAkBvR,KAAK,8BAEvB,qCACI,cAAC,IAAD,CAAMhI,OAAK,EAACE,GAAI,iBAAmBsG,KAAKS,MAAM2Q,aAAa,GAAGhC,cAAgB,cAAgBpP,KAAKS,MAAMtF,UAAY,IAAM6E,KAAKS,MAAM1F,WAAtI,SACI,yBAAQyE,KAAK,SAASjG,UAAU,8BAAhC,UACI,mBAAGA,UAAU,gBADjB,2BAIH6X,MAMT,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiB1X,GAAG,kBAAkBoI,KAAK,0BAC3C,oBAAIvI,UAAU,yBAAd,qCAGJ,cAAC,GAAD,CAAUuI,KAAK,uBAAf,+HACCsM,S,GA/FqB7N,aAqGvBsS,MC5FAG,OAjBf,SAAwB1Z,GACpB,OACI,+BACI,6BAAKA,EAAMiD,WACX,6BAAKjD,EAAM4F,YACX,6BAAK5F,EAAMmC,QACX,6BACI,cAAC,IAAD,CAAMjC,OAAK,EAACE,GAAI,UAAYJ,EAAMgD,OAAlC,SACI,yBAAQkD,KAAK,SAASjG,UAAU,qBAAhC,UACI,mBAAGA,UAAU,iBADjB,qBCFd0Z,G,4MAKFxS,MAAQ,CACJyS,MAAO,GACP5I,SAAU,GACVhJ,gBAAgB,EAChBiJ,OAAQ,I,EAqBZC,eAAiB,SAAC7H,GACd,IAAM1G,EAAQ0G,EAAME,OAAO5G,MAC3B,GAAyB,KAAtB,EAAKwE,MAAM8J,OAAe,CAEzB,IAAID,EAAQ,aAAO,EAAK7J,MAAMyS,OAC9B,EAAKtQ,SAAS,CAAC0H,WAAUC,OAAQtO,QAEhC,CAED,IAAIqO,EAAW,EAAK7J,MAAMyS,MAAMzI,QAAO,SAAA0I,GAAC,OAAIA,EAAE5W,SAAS4I,SAASlJ,IAAUkX,EAAE1X,MAAM0J,SAASlJ,MAC3F,EAAK2G,SAAS,CAAC0H,WAAUC,OAAQtO,M,uDAzBzC,WAAqB,IAAD,OAChB+D,KAAK4C,SAAS,CAACtB,gBAAgB,InD0R5BvH,IAAM+B,IAAI,gBmDxRO6C,MAAK,SAAAC,GACrB,EAAKgE,SAAS,CAACsQ,MAAOtU,EAASE,KAAMwL,SAAU1L,EAASE,KAAMwC,gBAAgB,OAC/E4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBA0B3B,WACI,MAAkDtC,KAAKS,MAAhDyS,EAAP,EAAOA,MAAO5R,EAAd,EAAcA,eAAgBiJ,EAA9B,EAA8BA,OAAQD,EAAtC,EAAsCA,SAGlC8D,EAAU,cAAC,GAAD,IAoCd,OAnCK9M,IACD8M,EAA2B,IAAjB8E,EAAMzL,OACZ,cAAC,GAAD,CAAkBjG,KAAK,uBAEvB,qCACI,sBAAKjI,UAAU,mBAAf,UACI,uBAAOiG,KAAK,OAAOjG,UAAU,eAAewI,YAAY,cAAcD,KAAK,SAAS7F,MAAOsO,EAAQvI,SAAUhC,KAAKwK,iBAClH,qBAAKjR,UAAU,qBAAf,SACQ,sBAAMA,UAAU,mBAAhB,SACI,mBAAGA,UAAU,wBAK7B,qBAAKA,UAAU,mBAAf,SACI,wBAAOA,UAAU,4DAAjB,UACI,uBAAOA,UAAU,cAAjB,SACA,+BACI,oBAAI6Z,MAAM,MAAV,sBACA,oBAAIA,MAAM,MAAV,+BACA,oBAAIA,MAAM,MAAV,oBACA,oBAAIA,MAAM,MAAV,yBAIJ,gCACC9I,EAASc,KAAI,SAAA+H,GAAC,OAAI,cAAC,GAAD,gBAAoBA,kBAUvD,eAAC,GAAD,WACI,cAAC,GAAD,UACI,oBAAI5Z,UAAU,yBAAd,4BAGJ,cAAC,GAAD,CAAUuI,KAAK,eAAf,iEACCsM,S,GA/Fa7N,aAqGf0S,MCpGTI,G,4MAKF5S,MAAQ,CACJnE,OAAQ,EAAKhD,MAAM2V,MAAMC,OAAO5S,OAChCC,SAAU,GACVd,MAAO,GACPyD,UAAW,KACXoU,UAAU,EACVnU,cAAc,EACdC,oBAAoB,EACpB+S,gBAAiB,GACjB7Q,gBAAgB,EAChBiS,8BAA8B,EAC9BC,8BAA8B,EAC9BC,0BAA0B,EAC1BC,mBAAmB,EACnBC,iCAAiC,EACjCC,iBAAiB,EACjBtQ,OAAQ,I,EA+BZtB,SAAW,SAACW,GAER,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAC3B,EAAKc,SAAL,cAAeU,SAAQsQ,iBAAiB,GAAQjR,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,EAQrFuK,eAAiB,SAAC9D,EAAU+D,GACxB,GAAI/D,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,iBAAkB,CAAC,IAAD,EAE/DH,EAAM,6BACH,EAAK7C,MAAM6C,QACXZ,EAAS9D,SAASE,KAAK2E,kBAE9B,EAAKb,UAAL,oBACK6D,GAAU,GADf,wBAEInD,GAFJ,M,EAURuQ,sBAAwB,SAACxT,GACrBA,EAAEC,iBAEF,EAAKsC,SAAS,CAAC2Q,8BAA8B,IAG7C7U,EAA6B,EAAK+B,MAAMnE,OAAQ,CAACC,SAAU,EAAKkE,MAAMlE,WAAWoC,MAAK,SAAAC,GAClF,EAAKgE,SAAS,CAAC2Q,8BAA8B,EAAOK,iBAAiB,OACtE1Q,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,EAAK8D,eAAe9D,EAAU,oC,EAOtCoR,iBAAmB,WACf,MAA0B,EAAKrT,MAAxBlE,EAAP,EAAOA,SAAUd,EAAjB,EAAiBA,MAEdoJ,OAAO6E,QAAQ,0DAA4DnN,EAAW,gCAAkCd,KACvH,EAAKmH,SAAS,CAAC4Q,8BAA8B,IAG7C9U,EAA6B,EAAK+B,MAAMnE,QAAQqC,MAAK,SAAAC,GACjD,EAAKgE,SAAS,CAAC4Q,8BAA8B,OAC9CtQ,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,EAQ/ByR,mBAAqB,WACjB,MAA+B,EAAKtT,MAA7BnE,EAAP,EAAOA,OAAQ6C,EAAf,EAAeA,aAEZ0F,OAAO6E,QAAQ,sDACd,EAAK9G,SAAS,CAAC6Q,0BAA0B,IAGzC/U,EAA+BpC,EAAQ,CAACL,OAAQkD,IAAeR,MAAK,SAAAC,GAChE,EAAKgE,SAAS,CAAC6Q,0BAA0B,EAAOtU,cAAeA,OAChE+D,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,EAQ/B0R,YAAc,WACV,MAA2B,EAAKvT,MAAzBnE,EAAP,EAAOA,OAAQgX,EAAf,EAAeA,SAEZzO,OAAO6E,QAAQ,iDACd,EAAK9G,SAAS,CAAC8Q,mBAAmB,IAGlChV,EAAwBpC,EAAQ,CAACL,OAAQqX,IAAW3U,MAAK,SAAAC,GACrD,EAAKgE,SAAS,CAAC8Q,mBAAmB,EAAOJ,UAAWA,OACrDpQ,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,EAQ/B2R,oBAAsB,WAElB,MAAkC,EAAKxT,MAAhCnE,EAAP,EAAOA,OAAQ6V,EAAf,EAAeA,gBACZtN,OAAO6E,QAAQ,8FAAgGyI,KAC9G,EAAKvP,SAAS,CAAC+Q,iCAAiC,IAGhDjV,EAAgCpC,GAAQqC,MAAK,SAAAC,GACzC,EAAKgE,SAAS,CAAC+Q,iCAAiC,EAAOvU,oBAAoB,EAAO+S,gBAAiB,QACpGjP,OAAM,SAAAZ,GACL,OAAOsD,GAAYtD,Q,uDA7I/B,WAAqB,IpDsRFhG,EoDtRC,OAChB0D,KAAK4C,SAAS,CAACtB,gBAAgB,KpDqRhBhF,EoDnRE0D,KAAKS,MAAMnE,OpDoRzBvC,IAAM+B,IAAI,gBAAkBQ,IoDpRKqC,MAAK,SAAAC,GACrC,MAQIA,EAASE,KAPTvC,EADJ,EACIA,SACAd,EAFJ,EAEIA,MACAyD,EAHJ,EAGIA,UACAoU,EAJJ,EAIIA,SACAnU,EALJ,EAKIA,aACAC,EANJ,EAMIA,mBACA+S,EAPJ,EAOIA,gBAGJ,EAAKvP,SAAS,CAACrG,WAAUd,QAAOyD,YAAWoU,WAAUnU,eAAcC,qBAAoB+S,kBAAiB7Q,gBAAgB,OACzH4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAqI3B,WAAU,IAAD,OACL,EAgBItC,KAAKS,MAfLlE,EADJ,EACIA,SACAd,EAFJ,EAEIA,MACAyD,EAHJ,EAGIA,UACAoU,EAJJ,EAIIA,SACAnU,EALJ,EAKIA,aACAC,EANJ,EAMIA,mBACA+S,EAPJ,EAOIA,gBACA7Q,EARJ,EAQIA,eACAiS,EATJ,EASIA,6BACAC,EAVJ,EAUIA,6BACAC,EAXJ,EAWIA,yBACAC,EAZJ,EAYIA,kBACAC,EAbJ,EAaIA,gCACAC,EAdJ,EAcIA,gBACAtQ,EAfJ,EAeIA,OAIA8K,EAAU,cAAC,GAAD,IAkGd,OAjGK9M,IACD8M,EACI,gCACI,sBAAK7U,UAAU,OAAf,UACI,sBAAMA,UAAU,mBAAhB,iCACC2F,KAGL,uBAAM3F,UAAU,OAAhB,UAEQqa,GACA,qBAAKra,UAAU,sBAAsB2G,KAAK,QAA1C,8BAKJ,qBAAK3G,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,WACNN,YAAY,aAAaD,KAAK,WAAW7F,MAAOM,EAChDyF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO/G,WAAY,EAC7B+F,MAAOgB,EAAO/G,aAItB,eAAC,GAAD,CAAqB6D,QAAS,SAACC,GAAD,OAAO,EAAKwT,sBAAsBxT,IAC3C9G,UAAU,6BACV8H,SAAUkS,GAA6C,KAAbhX,EAC1C+E,eAAgBiS,EAChBhS,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,yBASJ,qBAAKA,UAAU,kGAAf,SACI,sBAAKA,UAAU,YAAf,UACI,iDACA,2FAA6D,sBAAMA,UAAU,mBAAhB,SAAoCkC,OACjG,eAAC,GAAD,CAAqB2E,QAASJ,KAAK8T,iBACdva,UAAU,6BACV8H,SAAUmS,EACVlS,eAAgBkS,EAChBjS,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,cALjB,iCAUR,qBAAKA,UAAU,kEAAf,SACI,sBAAKA,UAAU,YAAf,UACI,oDACA,iEACA,eAAC,GAAD,CAAqB6G,QAASJ,KAAK+T,mBACdxa,UAAW,oBAAsB4F,EAAe,cAAgB,iBAChEkC,SAAUoS,EACVnS,eAAgBmS,EAChBlS,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,gBALjB,IAKkC4F,EAAe,wBAA0B,iCAM/EC,GACA,qBAAK7F,UAAU,kEAAf,SACI,sBAAKA,UAAU,YAAf,UACI,6CACA,2DAA6B,sBAAMA,UAAU,mBAAhB,SAAoC4Y,OACjE,eAAC,GAAD,CAAqB/R,QAASJ,KAAKiU,oBACd1a,UAAU,6BACV8H,SAAUsS,EACVrS,eAAgBqS,EAChBpS,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,gBALjB,oCAWZ,qBAAKA,UAAU,uFAAf,SACI,sBAAKA,UAAU,YAAf,UACI,qCACA,mEACA,eAAC,GAAD,CAAqB6G,QAASJ,KAAKgU,YACdza,UAAW,oBAAsB+Z,EAAW,aAAe,eAC3DjS,SAAUqS,EACVpS,eAAgBoS,EAChBnS,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,eALjB,IAKiC+Z,EAAW,SAAW,6BASvE,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiB5Z,GAAG,SAASoI,KAAK,iBAClC,oBAAIvI,UAAU,yBAAd,6BAGJ,cAAC,GAAD,CAAUuI,KAAK,eAAf,4DACCsM,S,GA/SY7N,aAqTd8S,MCxQAa,GAnDM,SAAC5a,GAAD,OACjB,qBAAKC,UAAU,YAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,sBAAKA,UAAU,WAAf,UACI,oBAAIA,UAAU,aAAd,SACKD,EAAMwI,OAGX,gCACI,sBAAMvI,UAAU,mBAAhB,6BACCD,EAAM4F,aAIgB,OAAtB5F,EAAM4N,aAA8C,KAAtB5N,EAAM4N,aACrC,gCACI,sBAAM3N,UAAU,mBAAhB,2BACCD,EAAM4N,kBAKnB,sBAAK3N,UAAU,wBAAf,UACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,wBAA0BJ,EAAM2D,WAAhD,SACI,yBAAQuC,KAAK,SAASjG,UAAU,wBAAhC,UACI,mBAAGA,UAAU,eADjB,cAIJ,uBAEA,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,4BAA8BJ,EAAM2D,WAApD,SACI,yBAAQuC,KAAK,SAASjG,UAAU,0BAAhC,UACI,mBAAGA,UAAU,iBADjB,eAIJ,uBAEA,eAAC,GAAD,CAAqB6G,QAAS,kBAAM9G,EAAMoU,cAAcpU,EAAM2D,aACzC1D,UAAU,4BACV8H,SAAU/H,EAAMgI,eAChBA,eAAgBhI,EAAMgI,eACtBC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,gBALjB,wBC/Bd4a,G,4MAKF1T,MAAQ,CACJ2T,UAAW,GACX9S,gBAAgB,G,EAQpBoM,cAAgB,SAACzQ,GAEb,GAAG4H,OAAO6E,QAAQ,+CAAgD,CAE9D,IAF8D,EAE1D2K,EAAe,GACZD,EAAa,EAAK3T,MAAlB2T,UAHuD,eAIhDA,GAJgD,IAI9D,2BAAyB,CAAC,IAAjBE,EAAgB,QAClBA,EAAErX,aAAeA,EAEhBoX,EAAapR,KAAb,6BAAsBqR,GAAtB,IAAyBhT,gBAAgB,KAGzC+S,EAAapR,KAAb,gBAAsBqR,KAVgC,8BAa9D,EAAK1R,SAAS,CAACwR,UAAWC,IAG1B3V,EAAwBzB,GAAY0B,MAAK,SAAAC,GAErCyV,GADAA,EAAY,aAAO,EAAK5T,MAAM2T,YACF3J,QAAO,SAAA6J,GAAC,OAAIA,EAAErX,aAAeA,KAGzD,EAAK2F,SAAS,CAACwR,UAAWC,OAC3BnR,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,uDAQ/B,WAAqB,IAAD,OAChBtC,KAAK4C,SAAS,CAACtB,gBAAgB,IAE/B5C,IAAwBC,MAAK,SAAAC,GACzB,IADqC,EAC/BwV,EAAYxV,EAASE,KADU,eAGxBsV,GAHwB,IAGrC,IAAI,EAAJ,qBAAwB,SAClB9S,gBAAiB,GAJc,8BAMrC,EAAKsB,SAAS,CAACwR,YAAW9S,gBAAgB,OAC3C4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAQ3B,WAAU,IAAD,OAGC8R,EAAYpU,KAAKS,MAAM2T,UAAUhJ,KAAI,SAAAkJ,GAAC,OACxC,cAAC,GAAD,6BAAqCA,GAArC,IAAwC5G,cAAe,EAAKA,gBAAzC4G,EAAErX,eAIrBmR,EAAU,cAAC,GAAD,IAMd,OALKpO,KAAKS,MAAMa,iBACZ8M,EAA0C,IAAhCpO,KAAKS,MAAM2T,UAAU3M,OAAe,cAAC,GAAD,CAAkBjG,KAAK,2BAA6B4S,GAKlG,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiB1a,GAAG,iBAAiBoI,KAAK,mBAC1C,oBAAIvI,UAAU,yBAAd,0BAGJ,cAAC,GAAD,CAAUuI,KAAK,YAAf,uFACA,cAAC,IAAD,CAAMtI,OAAK,EAACE,GAAG,uCAAf,SACI,yBAAQ8F,KAAK,SAASjG,UAAU,mCAAhC,UACI,mBAAGA,UAAU,sBADjB,yBAKH6U,S,GAjGW7N,aAuGb4T,MCzGTI,G,4MAKF9T,MAAQ,CACJqB,KAAM,GACNoF,YAAa,GACb5F,gBAAgB,EAChBgC,OAAQ,I,EAMZkR,iBAAmB,SAACnU,GAChBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACtB,gBAAgB,IAG/B,IAAImT,EAAsB,EAAKhU,MAAMyG,YACV,KAAxBuN,IACCA,EAAsB,MAI1B/V,EAAsB,CAACoD,KAAM,EAAKrB,MAAMqB,KAAMoF,YAAauN,IAAsB9V,MAAK,SAAAC,GAClF,EAAKgE,SAAS,CAACtB,gBAAgB,IAAQ,kBAAM,EAAKhI,MAAM0J,QAAQC,KAAK,kCACtEC,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,IAAIY,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBZ,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,mBACjDH,EAAM,gBAAOZ,EAAS9D,SAASE,KAAK2E,mBAExC,EAAKb,SAAS,CAACtB,gBAAgB,EAAOgC,e,EAQ9CtB,SAAW,SAACW,GAER,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAE3B,EAAKc,SAAL,cAAeU,UAASX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,4CAO7D,WAAU,IAAD,OACL,EAKI+D,KAAKS,MAJLqB,EADJ,EACIA,KACAoF,EAFJ,EAEIA,YACA5F,EAHJ,EAGIA,eACAgC,EAJJ,EAIIA,OAIJ,OACI,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiB5J,GAAG,iBAAiBoI,KAAK,mBAC1C,cAAC,GAAD,CAAiBpI,GAAG,2BAA2BoI,KAAK,cACpD,oBAAIvI,UAAU,yBAAd,6BAGJ,cAAC,GAAD,CAAUuI,KAAK,eAAf,8DAEA,uBAAMvI,UAAU,OAAhB,UACI,qBAAKA,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,QACNN,YAAY,aAAaD,KAAK,OAAO7F,MAAO6F,EAC5CE,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAOxB,OAAQ,EACzBQ,MAAOgB,EAAOxB,SAGtB,qBAAKvI,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,cAAc7C,KAAK,WACzBuC,YAAY,oBAAoBD,KAAK,cAAc7F,MAAOiL,EAC1DlF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO4D,cAAe,EAChC5E,MAAOgB,EAAO4D,gBAItB,eAAC,GAAD,CAAqB9G,QAAS,SAACC,GAAD,OAAO,EAAKmU,iBAAiBnU,IACtC9G,UAAU,6BACV8H,SAAUC,GAA2B,KAATQ,EAC5BR,eAAgBA,EAChBC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,gC,GAjGUgH,aA8GfgU,MC7GTG,G,4MAKFjU,MAAQ,CACJxD,WAAY,EAAK3D,MAAM2V,MAAMC,OAAOjS,WACpC6E,KAAM,GACNoF,YAAa,GACbyN,mBAAmB,EACnBC,sBAAsB,EACtBtR,OAAQ,I,EAsBZuR,iBAAmB,SAACxU,GAChBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACgS,sBAAsB,IAGrC,IAAIH,EAAsB,EAAKhU,MAAMyG,YACV,KAAxBuN,IACCA,EAAsB,MAI1B/V,EAAwB,CAACoD,KAAM,EAAKrB,MAAMqB,KAAMoF,YAAauN,GAAsB,EAAKhU,MAAMxD,YAAY0B,MAAK,SAAAC,GAC3G,EAAKgE,SAAS,CAACgS,sBAAsB,IAAQ,kBAAM,EAAKtb,MAAM0J,QAAQC,KAAK,kCAC5EC,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,IAAIY,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBZ,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,mBACjDH,EAAM,gBAAOZ,EAAS9D,SAASE,KAAK2E,mBAExC,EAAKb,SAAS,CAACgS,sBAAsB,EAAOtR,e,EAQpDtB,SAAW,SAACW,GAER,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAE3B,EAAKc,SAAL,cAAeU,UAASX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,uDApD7D,WAAqB,IxD4XEgB,EwD5XH,OAChB+C,KAAK4C,SAAS,CAAC+R,mBAAmB,KxD2Xf1X,EwDzXE+C,KAAKS,MAAMxD,WxD0X7BlD,IAAM+B,IAAI,uBAAyBmB,IwD1XM0B,MAAK,SAAAC,GAE7C,MAA4BA,EAASE,KAA9BgD,EAAP,EAAOA,KAAMoF,EAAb,EAAaA,YACb,EAAKtE,SAAS,CAACd,OAAMoF,cAAayN,mBAAmB,OACtDzR,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAkD3B,WAAU,IAAD,OACL,EAMItC,KAAKS,MALLqB,EADJ,EACIA,KACAoF,EAFJ,EAEIA,YACAyN,EAHJ,EAGIA,kBACAC,EAJJ,EAIIA,qBACAtR,EALJ,EAKIA,OAIJ,OAAIqR,EAEI,cAAC,GAAD,UACI,cAAC,GAAD,MAOR,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBjb,GAAG,iBAAiBoI,KAAK,mBAC1C,cAAC,GAAD,CAAiBpI,GAAG,2BAA2BoI,KAAK,cACpD,oBAAIvI,UAAU,yBAAd,gCAGJ,cAAC,GAAD,CAAUuI,KAAK,kBAAf,qDAEA,uBAAMvI,UAAU,OAAhB,UACI,qBAAKA,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,OACNN,YAAY,aAAaD,KAAK,OAAO7F,MAAO6F,EAC5CE,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAOxB,OAAQ,EACzBQ,MAAOgB,EAAOxB,SAGtB,qBAAKvI,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,cAAc7C,KAAK,WACzBuC,YAAY,oBAAoBD,KAAK,cAAc7F,MAAOiL,EAC1DlF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO4D,cAAe,EAChC5E,MAAOgB,EAAO4D,gBAItB,eAAC,GAAD,CAAqB9G,QAAS,SAACC,GAAD,OAAO,EAAKwU,iBAAiBxU,IACtC9G,UAAU,6BACV8H,SAAUuT,GAAiC,KAAT9S,EAClCR,eAAgBsT,EAChBrT,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,gC,GA7HagH,aA0IlBmU,MC7FAI,GAnDE,SAACxb,GAAD,OACb,qBAAKC,UAAU,YAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,sBAAKA,UAAU,WAAf,UACI,oBAAIA,UAAU,aAAd,SACKD,EAAMwI,OAGX,gCACI,sBAAMvI,UAAU,mBAAhB,6BACCD,EAAM4F,aAIgB,OAAtB5F,EAAM4N,aAA8C,KAAtB5N,EAAM4N,aACrC,gCACI,sBAAM3N,UAAU,mBAAhB,2BACCD,EAAM4N,kBAKnB,sBAAK3N,UAAU,wBAAf,UACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,4BAA8BJ,EAAM2D,WAAa,IAAM3D,EAAM+D,OAA7E,SACI,yBAAQmC,KAAK,SAASjG,UAAU,wBAAhC,UACI,mBAAGA,UAAU,eADjB,mBAIJ,uBAEA,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,wBAA0BJ,EAAM2D,WAAa,IAAM3D,EAAM+D,OAAzE,SACI,yBAAQmC,KAAK,SAASjG,UAAU,0BAAhC,UACI,mBAAGA,UAAU,iBADjB,eAIJ,uBAEA,eAAC,GAAD,CAAqB6G,QAAS,kBAAM9G,EAAMoU,cAAcpU,EAAM+D,SACzC9D,UAAU,4BACV8H,SAAU/H,EAAMgI,eAChBA,eAAgBhI,EAAMgI,eACtBC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,gBALjB,wBC/Bdwb,G,4MAKFtU,MAAQ,CACJxD,WAAY,EAAK3D,MAAM2V,MAAMC,OAAOjS,WACpC+X,MAAO,GACP1T,gBAAgB,G,EAQpBoM,cAAgB,SAACrQ,GAEb,GAAGwH,OAAO6E,QAAQ,2CAA4C,CAE1D,IAF0D,EAEtDuL,EAAW,GACRD,EAAS,EAAKvU,MAAduU,MAHmD,eAI5CA,GAJ4C,IAI1D,2BAAqB,CAAC,IAAbE,EAAY,QACdA,EAAE7X,SAAWA,EAEZ4X,EAAShS,KAAT,6BAAkBiS,GAAlB,IAAqB5T,gBAAgB,KAGrC2T,EAAShS,KAAT,gBAAkBiS,KAVgC,8BAa1D,EAAKtS,SAAS,CAACoS,MAAOC,IAGtBvW,EAAoBrB,GAAQsB,MAAK,SAAAC,GAE7BqW,GADAA,EAAQ,aAAO,EAAKxU,MAAMuU,QACNvK,QAAO,SAAAyK,GAAC,OAAIA,EAAE7X,SAAWA,KAG7C,EAAKuF,SAAS,CAACoS,MAAOC,OACvB/R,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,uDAQ/B,WAAqB,IAAD,OAChBtC,KAAK4C,SAAS,CAACtB,gBAAgB,IAE/B5C,EAAkBsB,KAAKS,MAAMxD,YAAY0B,MAAK,SAAAC,GAC1C,IADsD,EAChDoW,EAAQpW,EAASE,KAD+B,eAGzCkW,GAHyC,IAGtD,IAAI,EAAJ,qBAAoB,SACd1T,gBAAiB,GAJ+B,8BAMtD,EAAKsB,SAAS,CAACoS,QAAO1T,gBAAgB,OACvC4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAQ3B,WAAU,IAAD,OAGC0S,EAAQhV,KAAKS,MAAMuU,MAAM5J,KAAI,SAAA8J,GAAC,OAChC,cAAC,GAAD,6BAA6BA,GAA7B,IAAgCxH,cAAe,EAAKA,gBAArCwH,EAAE7X,WAIjB+Q,EAAU,cAAC,GAAD,IAMd,OALKpO,KAAKS,MAAMa,iBACZ8M,EAAsC,IAA5BpO,KAAKS,MAAMuU,MAAMvN,OAAe,cAAC,GAAD,CAAkBjG,KAAK,uBAAyBwT,GAK1F,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBtb,GAAG,iBAAiBoI,KAAK,mBAC1C,cAAC,GAAD,CAAiBpI,GAAG,4BAA4BoI,KAAK,cACrD,oBAAIvI,UAAU,yBAAd,sBAGJ,cAAC,GAAD,CAAUuI,KAAK,QAAf,mFACA,cAAC,IAAD,CAAMtI,OAAK,EAACE,GAAI,wBAA0BsG,KAAKS,MAAMxD,WAAa,WAAlE,SACI,yBAAQuC,KAAK,SAASjG,UAAU,mCAAhC,UACI,mBAAGA,UAAU,sBADjB,qBAKH6U,S,GAnGO7N,aAyGTwU,MC3GTI,G,4MAKF1U,MAAQ,CACJxD,WAAY,EAAK3D,MAAM2V,MAAMC,OAAOjS,WACpC6E,KAAM,GACNoF,YAAa,GACb5F,gBAAgB,EAChBgC,OAAQ,I,EAMZ8R,aAAe,SAAC/U,GACZA,EAAEC,iBAEF,EAAKsC,SAAS,CAACtB,gBAAgB,IAG/B,IAAI+T,EAAkB,EAAK5U,MAAMyG,YACV,KAApBmO,IACCA,EAAkB,MAItB3W,EAAkB,CAACoD,KAAM,EAAKrB,MAAMqB,KAAMoF,YAAamO,GAAkB,EAAK5U,MAAMxD,YAAY0B,MAAK,SAAAC,GACjG,EAAKgE,SAAS,CAACtB,gBAAgB,IAAQ,kBAAM,EAAKhI,MAAM0J,QAAQC,KAAK,wBAA0B,EAAKxC,MAAMxD,kBAC3GiG,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,IAAIY,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBZ,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,mBACjDH,EAAM,gBAAOZ,EAAS9D,SAASE,KAAK2E,mBAExC,EAAKb,SAAS,CAACtB,gBAAgB,EAAOgC,e,EAQ9CtB,SAAW,SAACW,GAER,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAE3B,EAAKc,SAAL,cAAeU,UAASX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,4CAO7D,WAAU,IAAD,OACL,EAKI+D,KAAKS,MAJLqB,EADJ,EACIA,KACAoF,EAFJ,EAEIA,YACA5F,EAHJ,EAGIA,eACAgC,EAJJ,EAIIA,OAIJ,OACI,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiB5J,GAAG,iBAAiBoI,KAAK,mBAC1C,cAAC,GAAD,CAAiBpI,GAAG,4BAA4BoI,KAAK,cACrD,cAAC,GAAD,CAAiBpI,GAAI,wBAA0BsG,KAAKS,MAAMxD,WAAY6E,KAAK,UAC3E,oBAAIvI,UAAU,yBAAd,yBAGJ,cAAC,GAAD,CAAUuI,KAAK,WAAf,0DAEA,uBAAMvI,UAAU,OAAhB,UACI,qBAAKA,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,QACNN,YAAY,aAAaD,KAAK,OAAO7F,MAAO6F,EAC5CE,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAOxB,OAAQ,EACzBQ,MAAOgB,EAAOxB,SAGtB,qBAAKvI,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,cAAc7C,KAAK,WACzBuC,YAAY,oBAAoBD,KAAK,cAAc7F,MAAOiL,EAC1DlF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO4D,cAAe,EAChC5E,MAAOgB,EAAO4D,gBAItB,eAAC,GAAD,CAAqB9G,QAAS,SAACC,GAAD,OAAO,EAAK+U,aAAa/U,IAClC9G,UAAU,6BACV8H,SAAUC,GAA2B,KAATQ,EAC5BR,eAAgBA,EAChBC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,4B,GAnGMgH,aAgHX4U,MC/GTG,G,4MAKF7U,MAAQ,CACJpD,OAAQ,EAAK/D,MAAM2V,MAAMC,OAAO7R,OAChCJ,WAAY,EAAK3D,MAAM2V,MAAMC,OAAOjS,WACpC6E,KAAM,GACNoF,YAAa,GACbyN,mBAAmB,EACnBC,sBAAsB,EACtBtR,OAAQ,I,EAsBZiS,aAAe,SAAClV,GACZA,EAAEC,iBAEF,EAAKsC,SAAS,CAACgS,sBAAsB,IAGrC,IAAIS,EAAkB,EAAK5U,MAAMyG,YACV,KAApBmO,IACCA,EAAkB,MAItB3W,EAAoB,CAACoD,KAAM,EAAKrB,MAAMqB,KAAMoF,YAAamO,GAAkB,EAAK5U,MAAMpD,QAAQsB,MAAK,SAAAC,GAC/F,EAAKgE,SAAS,CAACgS,sBAAsB,IAAQ,kBAAM,EAAKtb,MAAM0J,QAAQC,KAAK,wBAA0B,EAAKxC,MAAMxD,kBACjHiG,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,IAAIY,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBZ,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,mBACjDH,EAAM,gBAAOZ,EAAS9D,SAASE,KAAK2E,mBAExC,EAAKb,SAAS,CAACgS,sBAAsB,EAAOtR,e,EAQpDtB,SAAW,SAACW,GAER,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAE3B,EAAKc,SAAL,cAAeU,UAASX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,uDApD7D,WAAqB,I5D0aFoB,E4D1aC,OAChB2C,KAAK4C,SAAS,CAAC+R,mBAAmB,K5DyanBtX,E4DvaE2C,KAAKS,MAAMpD,O5DwazBtD,IAAM+B,IAAI,mBAAqBuB,I4DxaEsB,MAAK,SAAAC,GAErC,MAA4BA,EAASE,KAA9BgD,EAAP,EAAOA,KAAMoF,EAAb,EAAaA,YACb,EAAKtE,SAAS,CAACd,OAAMoF,cAAayN,mBAAmB,OACtDzR,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAkD3B,WAAU,IAAD,OACL,EAMItC,KAAKS,MALLqB,EADJ,EACIA,KACAoF,EAFJ,EAEIA,YACAyN,EAHJ,EAGIA,kBACAC,EAJJ,EAIIA,qBACAtR,EALJ,EAKIA,OAIJ,OAAIqR,EAEI,cAAC,GAAD,UACI,cAAC,GAAD,MAOR,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBjb,GAAG,iBAAiBoI,KAAK,mBAC1C,cAAC,GAAD,CAAiBpI,GAAG,2BAA2BoI,KAAK,cACpD,cAAC,GAAD,CAAiBpI,GAAI,wBAA0BsG,KAAKS,MAAMxD,WAAY6E,KAAK,UAC3E,oBAAIvI,UAAU,yBAAd,4BAGJ,cAAC,GAAD,CAAUuI,KAAK,cAAf,iDAEA,uBAAMvI,UAAU,OAAhB,UACI,qBAAKA,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,OACNN,YAAY,aAAaD,KAAK,OAAO7F,MAAO6F,EAC5CE,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAOxB,OAAQ,EACzBQ,MAAOgB,EAAOxB,SAGtB,qBAAKvI,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,cAAc7C,KAAK,WACzBuC,YAAY,oBAAoBD,KAAK,cAAc7F,MAAOiL,EAC1DlF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO4D,cAAe,EAChC5E,MAAOgB,EAAO4D,gBAItB,eAAC,GAAD,CAAqB9G,QAAS,SAACC,GAAD,OAAO,EAAKkV,aAAalV,IAClC9G,UAAU,6BACV8H,SAAUuT,GAAiC,KAAT9S,EAClCR,eAAgBsT,EAChBrT,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,4B,GA/HSgH,aA4Id+U,MCtGAE,GA5CM,SAAClc,GAAD,OACjB,qBAAKC,UAAU,YAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,MAAf,UACI,sBAAKA,UAAU,WAAf,UACI,oBAAIA,UAAU,aAAd,SACKD,EAAMwI,OAGX,gCACI,sBAAMvI,UAAU,mBAAhB,6BACCD,EAAM4F,aAIgB,OAAtB5F,EAAM4N,aAA8C,KAAtB5N,EAAM4N,aACrC,gCACI,sBAAM3N,UAAU,mBAAhB,2BACCD,EAAM4N,kBAKnB,sBAAK3N,UAAU,wBAAf,UACI,cAAC,IAAD,CAAMC,OAAK,EAACE,GAAI,4BAA8BJ,EAAM2D,WAAa,IAAM3D,EAAM+D,OAAS,IAAM/D,EAAMsE,WAAlG,SACI,yBAAQ4B,KAAK,SAASjG,UAAU,qBAAhC,UACI,mBAAGA,UAAU,iBADjB,eAIJ,uBAEA,eAAC,GAAD,CAAqB6G,QAAS,kBAAM9G,EAAMoU,cAAcpU,EAAMsE,aACzCrE,UAAU,4BACV8H,SAAU/H,EAAMgI,eAChBA,eAAgBhI,EAAMgI,eACtBC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,gBALjB,wBCxBdkc,G,4MAKFhV,MAAQ,CACJxD,WAAY,EAAK3D,MAAM2V,MAAMC,OAAOjS,WACpCI,OAAQ,EAAK/D,MAAM2V,MAAMC,OAAO7R,OAChCqY,UAAW,GACXpU,gBAAgB,G,EAOpBoM,cAAgB,SAAC9P,GAEb,GAAGiH,OAAO6E,QAAQ,gDAAiD,CAE/D,IAF+D,EAE3DiM,EAAe,GACZD,EAAa,EAAKjV,MAAlBiV,UAHwD,eAIjDA,GAJiD,IAI/D,2BAAyB,CAAC,IAAjBlD,EAAgB,QAClBA,EAAE5U,aAAeA,EAEhB+X,EAAa1S,KAAb,6BAAsBuP,GAAtB,IAAyBlR,gBAAgB,KAGzCqU,EAAa1S,KAAb,gBAAsBuP,KAViC,8BAa/D,EAAK5P,SAAS,CAAC8S,UAAWC,IAG1BjX,EAAwBd,GAAYe,MAAK,SAAAC,GAErC+W,GADAA,EAAY,aAAO,EAAKlV,MAAMiV,YACFjL,QAAO,SAAA+H,GAAC,OAAIA,EAAE5U,aAAeA,KAGzD,EAAKgF,SAAS,CAAC8S,UAAWC,OAC3BzS,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,uDAQ/B,WAAqB,IAAD,OAChBtC,KAAK4C,SAAS,CAACtB,gBAAgB,IAE/B5C,EAAsBsB,KAAKS,MAAMpD,QAAQsB,MAAK,SAAAC,GAC1C,IADsD,EAChD8W,EAAY9W,EAASE,KAD2B,eAGzC4W,GAHyC,IAGtD,IAAI,EAAJ,qBAAwB,SAClBpU,gBAAiB,GAJ+B,8BAMtD,EAAKsB,SAAS,CAAC8S,YAAWpU,gBAAgB,OAC3C4B,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAQ3B,WAAU,IAAD,OAGCoT,EAAY1V,KAAKS,MAAMiV,UAAUtK,KAAI,SAAAoH,GAAC,OACxC,cAAC,GAAD,6BAAqCA,GAArC,IAAwCvV,WAAY,EAAKwD,MAAMxD,WAAYyQ,cAAe,EAAKA,gBAA5E8E,EAAE5U,eAIrBwQ,EAAU,cAAC,GAAD,IAMd,OALKpO,KAAKS,MAAMa,iBACZ8M,EAA0C,IAAhCpO,KAAKS,MAAMiV,UAAUjO,OAAe,cAAC,GAAD,CAAkBjG,KAAK,4BAA8BkU,GAKnG,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBhc,GAAG,iBAAiBoI,KAAK,mBAC1C,cAAC,GAAD,CAAiBpI,GAAG,4BAA4BoI,KAAK,cACrD,cAAC,GAAD,CAAiBpI,GAAI,wBAA0BsG,KAAKS,MAAMxD,WAAY6E,KAAK,UAC3E,oBAAIvI,UAAU,yBAAd,2BAGJ,cAAC,GAAD,CAAUuI,KAAK,aAAf,wFACA,cAAC,IAAD,CAAMtI,OAAK,EAACE,GAAI,4BAA8BsG,KAAKS,MAAMxD,WAAa,IAAM+C,KAAKS,MAAMpD,OAAS,eAAhG,SACI,yBAAQmC,KAAK,SAASjG,UAAU,mCAAhC,UACI,mBAAGA,UAAU,sBADjB,0BAKH6U,S,GApGU7N,aA0GZkV,MC5GTG,G,4MAKFnV,MAAQ,CACJxD,WAAY,EAAK3D,MAAM2V,MAAMC,OAAOjS,WACpCI,OAAQ,EAAK/D,MAAM2V,MAAMC,OAAO7R,OAChCyE,KAAM,GACNoF,YAAa,GACb5F,gBAAgB,EAChBgC,OAAQ,I,EAMZuS,iBAAmB,SAACxV,GAChBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACtB,gBAAgB,IAG/B,IAAIwU,EAAsB,EAAKrV,MAAMyG,YACV,KAAxB4O,IACCA,EAAsB,MAI1BpX,EAAsB,CAACoD,KAAM,EAAKrB,MAAMqB,KAAMoF,YAAa4O,GAAsB,EAAKrV,MAAMpD,QAAQsB,MAAK,SAAAC,GACrG,EAAKgE,SAAS,CAACtB,gBAAgB,IAAQ,kBAAM,EAAKhI,MAAM0J,QAAQC,KAAK,4BAA8B,EAAKxC,MAAMxD,WAAa,IAAM,EAAKwD,MAAMpD,cAC7I6F,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,IAAIY,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBZ,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,mBACjDH,EAAM,gBAAOZ,EAAS9D,SAASE,KAAK2E,mBAExC,EAAKb,SAAS,CAACtB,gBAAgB,EAAOgC,e,EAQ9CtB,SAAW,SAACW,GAER,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAE3B,EAAKc,SAAL,cAAeU,UAASX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,4CAO7D,WAAU,IAAD,OACL,EAKI+D,KAAKS,MAJLqB,EADJ,EACIA,KACAoF,EAFJ,EAEIA,YACA5F,EAHJ,EAGIA,eACAgC,EAJJ,EAIIA,OAIJ,OACI,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiB5J,GAAG,iBAAiBoI,KAAK,mBAC1C,cAAC,GAAD,CAAiBpI,GAAG,4BAA4BoI,KAAK,cACrD,cAAC,GAAD,CAAiBpI,GAAI,wBAA0BsG,KAAKS,MAAMxD,WAAY6E,KAAK,UAC3E,cAAC,GAAD,CAAiBpI,GAAI,4BAA8BsG,KAAKS,MAAMxD,WAAa,IAAM+C,KAAKS,MAAMpD,OAAQyE,KAAK,eACzG,oBAAIvI,UAAU,yBAAd,8BAGJ,cAAC,GAAD,CAAUuI,KAAK,gBAAf,+DAEA,uBAAMvI,UAAU,OAAhB,UACI,qBAAKA,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,QACNN,YAAY,aAAaD,KAAK,OAAO7F,MAAO6F,EAC5CE,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAOxB,OAAQ,EACzBQ,MAAOgB,EAAOxB,SAGtB,qBAAKvI,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,cAAc7C,KAAK,WACzBuC,YAAY,oBAAoBD,KAAK,cAAc7F,MAAOiL,EAC1DlF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO4D,cAAe,EAChC5E,MAAOgB,EAAO4D,gBAItB,eAAC,GAAD,CAAqB9G,QAAS,SAACC,GAAD,OAAO,EAAKwV,iBAAiBxV,IACtC9G,UAAU,6BACV8H,SAAUC,GAA2B,KAATQ,EAC5BR,eAAgBA,EAChBC,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,iC,GArGUgH,aAkHfqV,MCjHTG,G,4MAKFtV,MAAQ,CACJxD,WAAY,EAAK3D,MAAM2V,MAAMC,OAAOjS,WACpCI,OAAQ,EAAK/D,MAAM2V,MAAMC,OAAO7R,OAChCO,WAAY,EAAKtE,MAAM2V,MAAMC,OAAOtR,WACpCkE,KAAM,GACNoF,YAAa,GACbyN,mBAAmB,EACnBC,sBAAsB,EACtBtR,OAAQ,I,EAsBZ0S,iBAAmB,SAAC3V,GAChBA,EAAEC,iBAEF,EAAKsC,SAAS,CAACgS,sBAAsB,IAGrC,IAAIkB,EAAsB,EAAKrV,MAAMyG,YACV,KAAxB4O,IACCA,EAAsB,MAI1BpX,GAAwB,CAACoD,KAAM,EAAKrB,MAAMqB,KAAMoF,YAAa4O,GAAsB,EAAKrV,MAAM7C,YAAYe,MAAK,SAAAC,GAC3G,EAAKgE,SAAS,CAACgS,sBAAsB,IAAQ,kBAAM,EAAKtb,MAAM0J,QAAQC,KAAK,4BAA8B,EAAKxC,MAAMxD,WAAa,IAAM,EAAKwD,MAAMpD,cACnJ6F,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,MACpBY,OAAM,SAAAR,GAEL,IAAIY,EAAM,gBAAO,EAAK7C,MAAM6C,QACxBZ,EAAS9D,SAASE,MAAQ4D,EAAS9D,SAASE,KAAK2E,mBACjDH,EAAM,gBAAOZ,EAAS9D,SAASE,KAAK2E,mBAExC,EAAKb,SAAS,CAACgS,sBAAsB,EAAOtR,e,EAQpDtB,SAAW,SAACW,GAER,IAAMW,EAAM,gBAAO,EAAK7C,MAAM6C,eACvBA,EAAOX,EAAME,OAAOf,MAE3B,EAAKc,SAAL,cAAeU,UAASX,EAAME,OAAOf,KAAOa,EAAME,OAAO5G,S,uDApD7D,WAAqB,IhEwdE2B,EgExdH,OAChBoC,KAAK4C,SAAS,CAAC+R,mBAAmB,KhEudf/W,EgErdEoC,KAAKS,MAAM7C,WhEsd7B7D,IAAM+B,IAAI,uBAAyB8B,IgEtdMe,MAAK,SAAAC,GAE7C,MAA4BA,EAASE,KAA9BgD,EAAP,EAAOA,KAAMoF,EAAb,EAAaA,YACb,EAAKtE,SAAS,CAACd,OAAMoF,cAAayN,mBAAmB,OACtDzR,OAAM,SAAAZ,GAEL,OAAOsD,GAAYtD,Q,oBAkD3B,WAAU,IAAD,OACL,EAMItC,KAAKS,MALLqB,EADJ,EACIA,KACAoF,EAFJ,EAEIA,YACAyN,EAHJ,EAGIA,kBACAC,EAJJ,EAIIA,qBACAtR,EALJ,EAKIA,OAIJ,OAAIqR,EAEI,cAAC,GAAD,UACI,cAAC,GAAD,MAOR,eAAC,GAAD,WACI,eAAC,GAAD,WACI,cAAC,GAAD,CAAiBjb,GAAG,iBAAiBoI,KAAK,mBAC1C,cAAC,GAAD,CAAiBpI,GAAG,4BAA4BoI,KAAK,cACrD,cAAC,GAAD,CAAiBpI,GAAI,wBAA0BsG,KAAKS,MAAMxD,WAAY6E,KAAK,UAC3E,cAAC,GAAD,CAAiBpI,GAAI,4BAA8BsG,KAAKS,MAAMxD,WAAa,IAAM+C,KAAKS,MAAMpD,OAAQyE,KAAK,eACzG,oBAAIvI,UAAU,yBAAd,kCAGJ,cAAC,GAAD,CAAUuI,KAAK,mBAAf,sDAEA,uBAAMvI,UAAU,OAAhB,UACI,qBAAKA,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,OACNN,YAAY,aAAaD,KAAK,OAAO7F,MAAO6F,EAC5CE,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAOxB,OAAQ,EACzBQ,MAAOgB,EAAOxB,SAGtB,qBAAKvI,UAAU,aAAf,SACI,cAAC,GAAD,CACI8I,MAAM,cAAc7C,KAAK,WACzBuC,YAAY,oBAAoBD,KAAK,cAAc7F,MAAOiL,EAC1DlF,SAAUhC,KAAKgC,SACfJ,SAAU0B,EAAO4D,cAAe,EAChC5E,MAAOgB,EAAO4D,gBAItB,eAAC,GAAD,CAAqB9G,QAAS,SAACC,GAAD,OAAO,EAAK2V,iBAAiB3V,IACtC9G,UAAU,6BACV8H,SAAUuT,GAAiC,KAAT9S,EAClCR,eAAgBsT,EAChBrT,aAAW,EAJhC,UAKI,mBAAGhI,UAAU,sBALjB,iC,GAjIagH,aA8IlBwV,MC5JA,OAA0B,sCCmG1BE,OA/Ff,SAAkB3c,GACd,OACI,sBAAKC,UAAU,WAAf,UACI,qBAAKA,UAAU,sBAAf,SACI,qBAAKA,UAAU,gEAAf,SACI,oBAAIA,UAAU,wCAAd,mCAIR,sBAAKA,UAAU,sBAAf,UACI,sBAAKA,UAAU,MAAf,UACI,qBAAKA,UAAU,gDAAf,SACI,qBAAKA,UAAU,oDAAf,SACI,qBAAK6O,IAAI,YAAYD,IAAK+N,GAAU3c,UAAU,4BAItD,qBAAKA,UAAU,6DAAf,SACI,qBAAKA,UAAU,4CAAf,SACI,gCACI,mBAAGA,UAAU,UAAb,sCACA,+BACI,6BACI,oBAAGA,UAAU,KAAb,sFAC6E,sBAAMA,UAAU,mBAAhB,uBAD7E,4GAIJ,6BACI,oBAAGA,UAAU,KAAb,0GACiG,sBAAMA,UAAU,mBAAhB,6BADjG,YAIJ,6BACI,oBAAGA,UAAU,KAAb,2IACkI,sBAAMA,UAAU,mBAAhB,sBADlI,4DAUxB,sBAAKA,UAAU,gBAAf,UACI,qBAAKA,UAAU,gDAAf,SACI,qBAAKA,UAAU,4CAAf,SACI,gCACI,mBAAGA,UAAU,UAAb,sDACA,+BACI,6BACI,oBAAGA,UAAU,KAAb,oBACW,sBAAMA,UAAU,mBAAhB,4BADX,uFAIJ,6BACI,oBAAGA,UAAU,KAAb,oBACW,sBAAMA,UAAU,mBAAhB,4BADX,+BAC+F,sBAAMA,UAAU,mBAAhB,uBAD/F,2HAIJ,6BACI,oBAAGA,UAAU,KAAb,sBACa,sBAAMA,UAAU,mBAAhB,4BADb,2DAIJ,6BACI,oBAAGA,UAAU,KAAb,oBACW,sBAAMA,UAAU,mBAAhB,qBADX,8KAIJ,6BACI,oBAAGA,UAAU,KAAb,uGAC8F,sBAAMA,UAAU,mBAAhB,sBAD9F,2GAIJ,6BACI,oBAAGA,UAAU,KAAb,sBACa,sBAAMA,UAAU,mBAAhB,4BADb,6FAC+J,sBAAMA,UAAU,mBAAhB,wBAD/J,6DASpB,qBAAKA,UAAU,6DAAf,SACI,qBAAKA,UAAU,oDAAf,SACI,qBAAK6O,IAAI,cAAcD,IC1FpC,qwSD0F0D5O,UAAU,sCEpD7E4c,G,4JAEJ,WACE,IAAO/b,EAAQ4F,KAAK1G,MAAbc,KAGHgc,EACA,eAAC,KAAD,WACE,cAAC,KAAD,CAAO5c,OAAK,EAACsQ,KAAK,IAAIuM,UAAWC,KACjC,cAAC,KAAD,CAAO9c,OAAK,EAACsQ,KAAK,QAAQuM,UAAWJ,KACrC,cAAC,KAAD,CAAOzc,OAAK,EAACsQ,KAAK,SAASuM,UAAW5T,KACtC,cAAC,KAAD,CAAOjJ,OAAK,EAACsQ,KAAK,UAAUuM,UAAWjT,KACtChJ,EAAKN,YAAc,cAAC,KAAD,CAAON,OAAK,EAACsQ,KAAK,WAAWuM,UAAWlQ,KAC3D/L,EAAKN,YAAc,cAAC,KAAD,CAAON,OAAK,EAACsQ,KAAK,iBAAiBuM,UAAWzM,KACjExP,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,8BAA8BuM,UAAWnM,KACtF9P,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,4BAA4BuM,UAAW5J,KACpFrS,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,0BAA0BuM,UAAW1I,KAClFvT,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,qCAAqCuM,UAAWhI,KAC7FjU,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,WAAWuM,UAAW3E,KACnEtX,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,kCAAkCuM,UAAWrE,KAC1F5X,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,2BAA2BuM,UAAWlC,KACnF/Z,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,uCAAuCuM,UAAW9B,KAC/Fna,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,uCAAuCuM,UAAW3B,KAC/Fta,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,mCAAmCuM,UAAWtB,KAC3F3a,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,2CAA2CuM,UAAWlB,KACnG/a,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,2CAA2CuM,UAAWf,KACnGlb,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,+CAA+CuM,UAAWE,KACvGnc,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,2DAA2DuM,UAAWT,KACnHxb,EAAKgF,oBAAsB,cAAC,KAAD,CAAO5F,OAAK,EAACsQ,KAAK,2DAA2DuM,UAAWN,KACnH3b,EAAK+E,cAAgB,cAAC,KAAD,CAAO3F,OAAK,EAACsQ,KAAK,gBAAgBuM,UAAWhH,KAClEjV,EAAK+E,cAAgB,cAAC,KAAD,CAAO3F,OAAK,EAACsQ,KAAK,+BAA+BuM,UAAWvG,KACjF1V,EAAK+E,cAAgB,cAAC,KAAD,CAAO3F,OAAK,EAACsQ,KAAK,gEAAgEuM,UAAWnG,KAClH9V,EAAK+E,cAAgB,cAAC,KAAD,CAAO3F,OAAK,EAACsQ,KAAK,2DAA2DuM,UAAWnF,KAC7G9W,EAAK+E,cAAgB,cAAC,KAAD,CAAO3F,OAAK,EAACsQ,KAAK,kBAAkBuM,UAAWhE,KACpEjY,EAAK+E,cAAgB,cAAC,KAAD,CAAO3F,OAAK,EAACsQ,KAAK,yCAAyCuM,UAAWxD,KAC3FzY,EAAKiF,SAAW,cAAC,KAAD,CAAO7F,OAAK,EAACsQ,KAAK,SAASuM,UAAWpD,KACtD7Y,EAAKiF,SAAW,cAAC,KAAD,CAAO7F,OAAK,EAACsQ,KAAK,iBAAiBuM,UAAWhD,KAC/D,cAAC,KAAD,CAAU3Z,GAAG,SAKnB,OACI,cAAC8c,GAAD,UACGJ,Q,GA5CO7V,aA6DHC,gBANS,SAACC,GACvB,MAAO,CACLrG,KAAMqG,KAIKD,CAAyB2V,ICxFxCM,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,IAAD,CAAUhS,MAAOA,GAAjB,SACI,cAAC,IAAD,UACI,cAAC,GAAD,UAIZqJ,SAAS4I,eAAe,U","file":"static/js/main.9dce142b.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\n/**\r\n * component represents one navigation item\r\n * @param props props\r\n */\r\nconst navigationItem = (props) => (\r\n    <li className=\"nav-item\">\r\n        <NavLink exact={props.exact} activeClassName='active' className=\"nav-link\" to={props.to}>\r\n            {props.children}\r\n        </NavLink>\r\n    </li>\r\n);\r\n\r\nexport default navigationItem;","import axios from \"axios\";\r\n\r\n/**\r\n * Sets authorization jwt\r\n * @param token jwt\r\n * @param isLoggedIn whether user is logged in\r\n */\r\nexport const setAuthorizationHeader = ({token, isLoggedIn}) => {\r\n    if(isLoggedIn) {\r\n        axios.defaults.headers.common[\"Authorization\"] = token;\r\n    } else {\r\n        delete axios.defaults.headers.common[\"Authorization\"];\r\n    }\r\n}\r\n\r\n/**\r\n * Logs user in\r\n * @param credentials password and username\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const login = credentials => {\r\n    return axios.post(\"/users/login\", credentials);\r\n}\r\n\r\n/**\r\n * Registers new user\r\n * @param user user info\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const signup = user => {\r\n    return axios.post(\"/users/register\", user);\r\n}\r\n\r\n/**\r\n * Gets fresh jwt\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getFreshToken = () => {\r\n    return axios.get(\"/users/token\");\r\n}\r\n\r\n/**\r\n * Updates user info\r\n * @param user user info\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateUser = user => {\r\n    return axios.put(\"/users/updateUser\", user);\r\n}\r\n\r\n/**\r\n * Updates users password\r\n * @param password password\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updatePassword = password => {\r\n    return axios.put(\"/users/updatePassword\", password);\r\n}\r\n\r\n/**\r\n * Gets info of user's institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getMyInstitution = () => {\r\n    return axios.get(\"/institutions/myInstitution\");\r\n}\r\n\r\n/**\r\n * Saves new user's institution\r\n * @param institution institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const saveMyInstitution = institution => {\r\n    return axios.post(\"/institutions/myInstitution\", institution);\r\n}\r\n\r\n/**\r\n * Updates institution image\r\n * @param img image base64 encoded\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateInstitutionImage = img => {\r\n    return axios.put(\"/institutions/myInstitution/updateImage\", img);\r\n}\r\n\r\n/**\r\n * Updates institution info\r\n * @param institution updated institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateInstitution = institution => {\r\n    return axios.put(\"/institutions/myInstitution\", institution);\r\n}\r\n\r\n/**\r\n * Gets all languages of user's institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getMyInstitutionLanguages = () => {\r\n    return axios.get(\"/institutions/myInstitution/languages\");\r\n}\r\n\r\n/**\r\n * Adds new language to user's institution\r\n * @param languageId language id\r\n * @returns {Promise<AxiosResponse<any>>} reponse\r\n */\r\nexport const addInstitutionLanguage = languageId => {\r\n    return axios.post(\"/institutions/myInstitution/languages/\" + languageId);\r\n}\r\n\r\n/**\r\n * Adds new exhibit to institution\r\n * @param exhibit new exhibit\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const addExhibit = exhibit => {\r\n    return axios.post(\"/exhibits\", exhibit);\r\n}\r\n\r\n/**\r\n * Gets all exhibits of user's institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getAllExhibitsOfMyInstitution = () => {\r\n    return axios.get(\"/exhibits/all\");\r\n}\r\n\r\n/**\r\n * Deletes exhibit from user's institution\r\n * @param exhibitId exhibit id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteExhibit = exhibitId => {\r\n    return axios.delete(\"/exhibits/\" + exhibitId);\r\n}\r\n\r\n/**\r\n * Gets exhibit based on its id\r\n * @param exhibitId exhibit id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getExhibit = exhibitId => {\r\n    return axios.get(\"/exhibits/\" + exhibitId);\r\n}\r\n\r\n/**\r\n * Updates exhibit image\r\n * @param exhibitId exhibit id\r\n * @param img base64 encoded image\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateExhibitImage = (exhibitId, img) => {\r\n    return axios.put(\"/exhibits/\" + exhibitId + \"/updateImage\", img);\r\n}\r\n\r\n/**\r\n * Updates exhibit info label\r\n * @param exhibitId exhibit id\r\n * @param img base64 encoded info label image\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateExhibitInfoLabelImage = (exhibitId, img) => {\r\n    return axios.put(\"/exhibits/\" + exhibitId + \"/updateInfoLabel\", img);\r\n}\r\n\r\n/**\r\n * Updates exhibit information\r\n * @param exhibitId exhibit id\r\n * @param exhibit updated exhibit\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateExhibit = (exhibitId, exhibit) => {\r\n    return axios.put(\"/exhibits/\" + exhibitId, exhibit);\r\n}\r\n\r\n/**\r\n * Adds manager to institution\r\n * @param email new manager's email\r\n * @returns {Promise<AxiosResponse<ny>>} response\r\n */\r\nexport const addInstitutionManager = email => {\r\n    return axios.post(\"/institutions/myInstitution/addManager\", email);\r\n}\r\n\r\n/**\r\n * Deletes institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteInstitution = () => {\r\n    return axios.delete(\"/institutions/myInstitution\");\r\n}\r\n\r\n/**\r\n * Gets all registered institutions\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getAllInstitutions = () => {\r\n    return axios.get(\"/institutions\");\r\n}\r\n\r\n/**\r\n * Gets all exhibits and allowed languages of an institution\r\n * @param institutionId institution id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getExhibitsTranslate = institutionId => {\r\n    return axios.get(\"/exhibits/translate/\" + institutionId);\r\n}\r\n\r\n/**\r\n * Gets info for creating new translation\r\n * @param exhibitId exhibit id\r\n * @param languageId language id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getNewTranslation = (exhibitId, languageId) => {\r\n    return axios.get(\"/translations/new/\" + exhibitId + \"/\" + languageId);\r\n}\r\n\r\n/**\r\n * Saves new translation\r\n * @param exhibitId exhibit id\r\n * @param languageId language id\r\n * @param translation translation id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const saveNewTranslation = (exhibitId, languageId, translation) => {\r\n    return axios.post(\"/translations/new/\" + exhibitId + \"/\" + languageId, translation);\r\n}\r\n\r\n/**\r\n * Gets translations of given exhibit and language for rating\r\n * @param exhibitId exhibit id\r\n * @param languageId language id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getRateOverview = (exhibitId, languageId) => {\r\n    return axios.get(\"/translations/rate/\" + exhibitId + \"/\" + languageId);\r\n}\r\n\r\n/**\r\n * Sets like/unlike to given translation\r\n * @param translationId translation id\r\n * @param value new like value\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const setLike = (translationId, value) => {\r\n    return axios.put(\"/translations/like/\" + translationId, value);\r\n}\r\n\r\n/**\r\n * Gets all exhibits and allowed languages to user's instituion\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getExhibitsApproveTranslations = () => {\r\n    return axios.get(\"/exhibits/approveTranslations\");\r\n}\r\n\r\n/**\r\n * Sets translation official/unofficial\r\n * @param translationId translation id\r\n * @param value new official value\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const setOfficial = (translationId, value) => {\r\n    return axios.put(\"/translations/official/\" + translationId, value);\r\n}\r\n\r\n/**\r\n * Gets translator's translation sequences\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getMyTranslationSequences = () => {\r\n    return axios.get(\"/translations/sequences\");\r\n}\r\n\r\n/**\r\n * Deletes translation sequence\r\n * @param exhibitId exhibit id\r\n * @param languageId language id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteSequence = (exhibitId, languageId) => {\r\n    return axios.delete(\"/translations/sequences/\" + exhibitId + \"/\" + languageId);\r\n}\r\n\r\n/**\r\n * Gets translation of translation sequence\r\n * @param exhibitId exhibit id\r\n * @param languageId language id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getMyTranslationSequence = (exhibitId, languageId) => {\r\n    return axios.get(\"/translations/sequence/\" + exhibitId + \"/\" + languageId);\r\n}\r\n\r\n/**\r\n * Rollbacks translation sequence to given translation\r\n * @param translationId translation id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const rollbackTranslation = translationId => {\r\n    return axios.delete(\"/translations/sequence/\" + translationId);\r\n}\r\n\r\n/**\r\n * Gets all system users\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getUsers = () => {\r\n    return axios.get(\"/admin/users\");\r\n}\r\n\r\n/**\r\n * Gets users details\r\n * @param userId user id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getUser = userId => {\r\n    return axios.get(\"/admin/users/\" + userId);\r\n}\r\n\r\n/**\r\n * Updates username of user\r\n * @param userId user id\r\n * @param username new username\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const adminUpdateUsername = (userId, username) => {\r\n    return axios.put(\"/admin/users/\" + userId + \"/updateUsername\", username);\r\n}\r\n\r\n/**\r\n * Changes password of given user by sending it to his email\r\n * @param userId user id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const adminChangePassword = userId => {\r\n    return axios.put(\"/admin/users/\" + userId + \"/updatePassword\");\r\n}\r\n\r\n/**\r\n * Changes user's rights to translate\r\n * @param userId user id\r\n * @param value new rights value\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const adminChangeTranslator = (userId, value) => {\r\n    return axios.put(\"/admin/users/\" + userId + \"/updateTranslator\", value);\r\n}\r\n\r\n/**\r\n * Changes user's rights to log into the system and perform actions\r\n * @param userId user id\r\n * @param value new ban value\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const adminChangeBan = (userId, value) => {\r\n    return axios.put(\"/admin/users/\" + userId + \"/updateBan\", value);\r\n}\r\n\r\n/**\r\n * Removes institution from user\r\n * @param userId user ud\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const adminRemoveInstitution = userId => {\r\n    return axios.put(\"/admin/users/\" + userId + \"/removeInstitution\");\r\n}\r\n\r\n/**\r\n * Gets QR code for given exhibit\r\n * @param exhibitId exhibit id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getQRCode = exhibitId => {\r\n    return axios.get(\"/exhibits/\" + exhibitId + \"/qrcode\");\r\n}\r\n\r\n/**\r\n * Gets all buildings of institution\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getBuildings = () => {\r\n    return axios.get(\"/location/buildings\");\r\n}\r\n\r\n/**\r\n * Saves new building\r\n * @param building new building\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const saveBuilding = building => {\r\n    return axios.post(\"/location/buildings\", building);\r\n}\r\n\r\n/**\r\n * Deletes building\r\n * @param buildingId building id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteBuilding = buildingId => {\r\n    return axios.delete(\"/location/buildings/\" + buildingId);\r\n}\r\n\r\n/**\r\n * Gets details about building\r\n * @param buildingId building id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getBuilding = buildingId => {\r\n    return axios.get(\"/location/buildings/\" + buildingId);\r\n}\r\n\r\n/**\r\n * Updates building\r\n * @param updatedBuilding updated building\r\n * @param buildingId building id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateBuilding = (updatedBuilding, buildingId) => {\r\n    return axios.put(\"/location/buildings/\" + buildingId, updatedBuilding);\r\n}\r\n\r\n/**\r\n * Deletes room\r\n * @param roomId room id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteRoom = roomId => {\r\n    return axios.delete(\"/location/rooms/\" + roomId);\r\n}\r\n\r\n/**\r\n * Gets all rooms for given building\r\n * @param buildingId building id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getRooms = buildingId => {\r\n    return axios.get(\"/location/rooms/all/\" + buildingId);\r\n}\r\n\r\n/**\r\n * Saves new room\r\n * @param room new room\r\n * @param buildingId building id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const saveRoom = (room, buildingId) => {\r\n    return axios.post(\"/location/rooms/\" + buildingId, room);\r\n}\r\n\r\n/**\r\n * Gets details about room\r\n * @param roomId room id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getRoom = roomId => {\r\n    return axios.get(\"/location/rooms/\" + roomId);\r\n}\r\n\r\n/**\r\n * Updates room\r\n * @param updatedRoom updated room\r\n * @param roomId room id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateRoom = (updatedRoom, roomId) => {\r\n    return axios.put(\"/location/rooms/\" + roomId, updatedRoom);\r\n}\r\n\r\n/**\r\n * Deletes showcase\r\n * @param showcaseId showcase id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const deleteShowcase = showcaseId => {\r\n    return axios.delete(\"/location/showcases/\" + showcaseId);\r\n}\r\n\r\n/**\r\n * Gets all showcases for given room\r\n * @param roomId room id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getShowcases = roomId => {\r\n    return axios.get(\"/location/showcases/all/\" + roomId);\r\n}\r\n\r\n/**\r\n * Saves new showcase\r\n * @param showcase new showcase\r\n * @param roomId room id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const saveShowcase = (showcase, roomId) => {\r\n    return axios.post(\"/location/showcases/\" + roomId, showcase);\r\n}\r\n\r\n/**\r\n * Gets details about showcase\r\n * @param showcaseId showcase id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const getShowcase = showcaseId => {\r\n    return axios.get(\"/location/showcases/\" + showcaseId);\r\n}\r\n\r\n/**\r\n * Updates showcase\r\n * @param updatedShowcase updated showcase\r\n * @param showcaseId showcase id\r\n * @returns {Promise<AxiosResponse<any>>} response\r\n */\r\nexport const updateShowcase = (updatedShowcase, showcaseId) => {\r\n    return axios.put(\"/location/showcases/\" + showcaseId, updatedShowcase);\r\n}","/**\r\n * logout action\r\n */\r\nexport const LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\";\r\n/**\r\n * login action\r\n */\r\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\r\n/**\r\n * set username action\r\n */\r\nexport const SET_USERNAME = \"SET_USERNAME\";\r\n/**\r\n * set email action\r\n */\r\nexport const SET_EMAIL = \"SET_EMAIL\";\r\n/**\r\n * set if is institution owner action\r\n */\r\nexport const SET_IS_INSTITUTION_OWNER = \"SET_IS_INSTITUTION_OWNER\";\r\n","import * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport * as actionsTypes from \"./actionsTypes\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\n/**\r\n * logs user in\r\n * @param credentials login credentials\r\n */\r\nexport const login = (credentials) => {\r\n    return dispatch => {\r\n        return apiCalls.login(credentials).then(response => {\r\n            // when login is successful parse token and log in\r\n            dispatch(loginSuccess(response.data.token));\r\n            return response;\r\n        })\r\n    }\r\n}\r\n\r\n/**\r\n * logs user in based on information encoded in token\r\n * @param token jwt\r\n */\r\nconst loginSuccess = (token) => {\r\n    // decode jwt\r\n    const decodedToken = jwt_decode(token);\r\n\r\n    const user = {\r\n        id: decodedToken.id,\r\n        username: decodedToken.username,\r\n        email: decodedToken.email,\r\n        createdAt: decodedToken.createdAt,\r\n        isTranslator: decodedToken.isTranslator,\r\n        isInstitutionOwner: decodedToken.isInstitutionOwner,\r\n        isAdmin: decodedToken.isAdmin,\r\n        isLoggedIn: true,\r\n        token: token,\r\n        expiredAt: decodedToken.exp,\r\n    }\r\n\r\n    // return user\r\n    return {\r\n        type: actionsTypes.LOGIN_SUCCESS,\r\n        payload: user,\r\n    };\r\n}\r\n\r\n/**\r\n * gets fresh token from server\r\n */\r\nexport const getFreshToken = () => {\r\n    return dispatch => {\r\n        apiCalls.getFreshToken().then(response => {\r\n            // if fresh token acquire si successful set new token to redux\r\n            dispatch(loginSuccess(response.data.token));\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * registers new user in the system\r\n * @param user new user\r\n */\r\nexport const signup = (user) => {\r\n    return dispatch => {\r\n        return apiCalls.signup(user).then(response => {\r\n            const credentials = {\r\n                username: user.username,\r\n                password: user.password\r\n            }\r\n            // logs user in after successful sign up\r\n            return dispatch(login(credentials));\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * logs user out\r\n */\r\nexport const logout = () => {\r\n    return {\r\n        type: actionsTypes.LOGOUT_SUCCESS\r\n    }\r\n}\r\n\r\n/**\r\n * set username to redux state\r\n * @param username username\r\n */\r\nexport const setUsername = (username) => {\r\n    return {\r\n        type: actionsTypes.SET_USERNAME,\r\n        payload: username,\r\n    }\r\n}\r\n\r\n/**\r\n * set email to redux state\r\n * @param email email\r\n */\r\nexport const setEmail = (email) => {\r\n    return {\r\n        type: actionsTypes.SET_EMAIL,\r\n        payload: email,\r\n    }\r\n}\r\n\r\n/**\r\n * set if user is institution owner to redux state\r\n * @param value if user is institution owner\r\n */\r\nexport const setIsInstitutionOwner = (value) => {\r\n    return {\r\n        type: actionsTypes.SET_IS_INSTITUTION_OWNER,\r\n        payload: value,\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {Link, NavLink} from \"react-router-dom\";\r\nimport NavigationItem from \"../components/NavigationItem\";\r\nimport {connect} from \"react-redux\";\r\nimport * as authActions from \"../store/authActions\";\r\n\r\n/**\r\n * web navigation\r\n */\r\nclass Navigation extends Component {\r\n\r\n    // renders navigation in the top of webpage\r\n    render() {\r\n        const {user} = this.props;\r\n\r\n        // render navigation\r\n        return (\r\n            <div className=\"position-sticky w-100 fixed-header\">\r\n                <nav className=\"blue-nav navbar navbar-expand-lg navbar-light\" id=\"blue-nav\">\r\n                    <div className=\"container\">\r\n                        <Link className=\"navbar-brand\" to=\"/\">CTS</Link>\r\n                        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n                                data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"\r\n                                aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                            <span className=\"navbar-toggler-icon\"/>\r\n                        </button>\r\n\r\n                        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n                            <ul className=\"navbar-nav ml-auto d-flex align-items-center\">\r\n                                <NavigationItem exact to=\"/\">Home</NavigationItem>\r\n                                <NavigationItem exact to=\"/info\">Info</NavigationItem>\r\n                                {user.isAdmin && <NavigationItem to=\"/users\">Users</NavigationItem>}\r\n                                {user.isTranslator && <NavigationItem to=\"/institutions\">Translate</NavigationItem>}\r\n                                {user.isTranslator && <NavigationItem to=\"/myTranslations\">My Translations</NavigationItem>}\r\n                                {user.isInstitutionOwner && <NavigationItem to=\"/approve\">Approve</NavigationItem>}\r\n                                {user.isLoggedIn && <NavigationItem to=\"/myInstitution\">My Institution</NavigationItem>}\r\n                                {\r\n                                    user.isLoggedIn ?\r\n                                        <li className=\"nav-item dropdown\">\r\n                                            <a className=\"nav-link\" id=\"navbarDropdown\" role=\"button\" href=\"/#\"\r\n                                               data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                                {user.username + \" \"}\r\n                                                <i className=\"fa fa-user\" aria-hidden=\"true\"/>\r\n                                            </a>\r\n\r\n                                            <div className=\"my-dropdown dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdown\">\r\n                                                <NavLink className=\"dropdown-item\" to=\"/profile\">\r\n                                                    <i className=\"fa fa-user\" /> My Profile\r\n                                                </NavLink>\r\n                                                <div className=\"dropdown-divider\"/>\r\n                                                <a onClick={(e) => {e.preventDefault(); this.props.logout();}} href=\"/#\" className=\"dropdown-item\" id=\"logout\">\r\n                                                    <i className=\"fa fa-sign-out\" /> Logout\r\n                                                </a>\r\n                                            </div>\r\n                                        </li>\r\n                                        :\r\n                                        <>\r\n                                            <NavigationItem to=\"/signup\">Signup</NavigationItem>\r\n                                            <NavigationItem to=\"/login\">Login</NavigationItem>\r\n                                        </>\r\n                                }\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </nav>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * maps redux state to props\r\n * @param state redux state\r\n */\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state,\r\n    };\r\n}\r\n\r\n/**\r\n * maps redux dispatch to props\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        logout: () => dispatch(authActions.logout()),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navigation);","import React from 'react';\r\n\r\n/**\r\n * web footer with information\r\n * @param props props\r\n */\r\nfunction Footer(props) {\r\n    return (\r\n        <footer className=\"d-flex justify-content-center align-items-center w-100\">\r\n            <strong>CTS</strong>\r\n            <span>&nbsp;Pavel cha</span>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","import React from \"react\";\r\nimport Navigation from \"./Navigation\"\r\nimport Footer from \"./Footer\"\r\n\r\n/**\r\n * web layout\r\n * @param props props\r\n */\r\nconst layout = (props) => (\r\n    <>\r\n        <div className=\"minimal-content-height\">\r\n            <Navigation />\r\n            <section>\r\n                {props.children}\r\n            </section>\r\n        </div>\r\n        <Footer />\r\n    </>\r\n);\r\n\r\nexport default layout;","import React from \"react\";\r\n\r\n/**\r\n * homepage jumbotron\r\n * @param props props\r\n */\r\nconst jumbotron = (props) => (\r\n    <div className=\"intro\">\r\n        <div className=\"jumbotron jumbotron-fluid bg-transparent\">\r\n            <div className=\"container\">\r\n                <div className=\"blurred-black p-3 rounded-lg\">\r\n                    <h1 className=\"display-4 font-weight-bold\">The System for Community Translation of Information Texts</h1>\r\n                    <p className=\"lead font-weight-bold\">The place where you can show your skill while helping cultural institutions to grow</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default jumbotron;","import React from \"react\";\r\n\r\n/**\r\n * card with web info showed on home page\r\n * @param props props\r\n */\r\nconst themesCard = (props) => (\r\n    <div className=\"col mt-2 d-flex justify-content-center\">\r\n        <div className=\"my-card border rounded\">\r\n            <h3>{props.title}</h3>\r\n            <p className=\"font-weight-bold\">{props.info}</p>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default themesCard;","import React from \"react\";\r\nimport Jumbotron from \"../components/Jumbotron\";\r\nimport ThemesCard from \"../components/ThemesCard\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n/**\r\n * home page definition\r\n * @param props page props\r\n * @returns {JSX.Element} home page\r\n */\r\nconst home = (props) => (\r\n    <div className=\"bg-white\">\r\n        <Jumbotron/>\r\n\r\n        <div className=\"container mt-5 pb-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col d-flex justify-content-center align-items-center flex-column\">\r\n                    <h3>Our goals</h3>\r\n                    <p>The site is intended for anyone who wants to participate in community translation of information texts of cultural institutions</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"row mt-3 pb-5\">\r\n                <ThemesCard title=\"Become a Translator\" info=\"Join the community of translators and start translating today!\"/>\r\n\r\n                <ThemesCard title=\"Register Your Institution\"\r\n                            info=\"Register your institution and let the community translate your chosen information texts!\"/>\r\n\r\n                <ThemesCard title=\"Mobile Application\"\r\n                            info=\"Visitors to your cultural institution will be able to find the translated texts in our mobile application!\"/>\r\n            </div>\r\n            <div className=\"row d-flex justify-content-center align-items-center flex-column\">\r\n                <div className=\"p-4\">\r\n                    <Link exact to=\"/info\" >\r\n                        <button type=\"button\" className=\"btn btn-lg btn-success\">\r\n                            <i className=\"fa fa-flag-checkered\" /> GET STARTED!\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default home;","import React from \"react\";\r\n\r\n/**\r\n * button with progress spinner\r\n * @param props props\r\n */\r\nconst ButtonWithProgress = (props) => {\r\n    return (\r\n        <button disabled={props.disabled}\r\n                className={props.className || \"btn btn-primary\"} onClick={props.onClick}>\r\n\r\n            {\r\n                props.pendingApiCall &&\r\n                <div className=\"spinner-border\r\n                text-light spinner-border-sm mr-1\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n            }\r\n\r\n            {\r\n                props.hasChildren ?\r\n                    props.children\r\n                    :\r\n                    props.text\r\n            }\r\n\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default ButtonWithProgress;","import React from \"react\";\r\n\r\n/**\r\n * generic input used in forms\r\n * @param props props\r\n */\r\nconst Input = (props) => {\r\n    let inputClassName = \"form-control\";\r\n\r\n    if(props.type === \"file\") {\r\n        inputClassName += \" custom-file-input\";\r\n    }\r\n\r\n    if(props.hasError !== undefined) {\r\n        inputClassName += props.hasError ? \" is-invalid\" : \" is-valid\";\r\n    }\r\n\r\n    let renderedInput = (\r\n        <input className={inputClassName} type={props.type || \"text\"} name={props.name}\r\n               placeholder={props.placeholder} value={props.value} onChange={props.onChange} />\r\n    );\r\n\r\n    if(props.type === \"file\") {\r\n        renderedInput = (\r\n            <div className=\"custom-file\">\r\n                <input type=\"file\" className={inputClassName} id=\"institutionImageFile\" name={props.name} value={props.value} onChange={props.onChange}\r\n                       accept= {props.onlyImage && \".jpg, .png, .jpeg\"} />\r\n                <label className=\"custom-file-label\" htmlFor=\"institutionImageFile\">{props.placeholder}</label>\r\n            </div>\r\n        );\r\n    }\r\n    else if (props.type === \"textarea\") {\r\n        renderedInput = (\r\n            <textarea className={inputClassName} name={props.name} placeholder={props.placeholder} value={props.value}\r\n                      onChange={props.onChange} rows=\"3\" />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {\r\n                props.label &&\r\n                <label className=\"font-weight-bold\">{props.label}</label>\r\n            }\r\n\r\n            {renderedInput}\r\n\r\n            {\r\n                props.hasError &&\r\n                <div className=\"text-danger\">\r\n                    <small>{props.error}</small>\r\n                </div>\r\n            }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Input;","import React from 'react';\r\n\r\n/**\r\n * Container for main page content\r\n * @param props props\r\n */\r\nfunction PageContentContainer(props) {\r\n    // for authorization pages\r\n    if(props.isAuth) {\r\n        return (\r\n            <div className=\"container mx-auto my-5 px-3 py-3 px-md-5 py-md-5 border rounded gray-noise-background auth-div\">\r\n                {props.children}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto my-5 px-3 pb-3 pt-3 px-md-5 pb-md-5 pt-md-4 border rounded gray-noise-background\">\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PageContentContainer;","import React, {Component} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport * as authActions from \"../store/authActions\";\r\nimport Input from \"../components/Input\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\n\r\n/**\r\n * page for logging in to the system\r\n */\r\nclass LoginPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        username: \"\",\r\n        password: \"\",\r\n        apiError: {},\r\n        pendingApiCall: false\r\n    }\r\n\r\n    /**\r\n     * called on input text change\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // update new value in state\r\n        this.setState({[event.target.name]: event.target.value, apiError: {}});\r\n    }\r\n\r\n    /**\r\n     * called when user submit login\r\n     */\r\n    onClickLogin = (e) => {\r\n        e.preventDefault();\r\n\r\n        // extract credentials from state\r\n        const body = {\r\n            username: this.state.username,\r\n            password: this.state.password,\r\n        }\r\n        this.setState({pendingApiCall: true});\r\n\r\n        // send credentials to server\r\n        this.props.login(body)\r\n            .then(response => {\r\n                // set new state and redirect\r\n                this.setState({pendingApiCall: false}, () => {\r\n                    this.props.history.push(\"/\");\r\n                });\r\n            })\r\n            .catch(error => {\r\n                // handle errors in user input\r\n                if (error.response) {\r\n                    this.setState({apiError: error.response.data, pendingApiCall: false});\r\n                }\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Renders login page\r\n     * @returns {JSX.Element} login page\r\n     */\r\n    render() {\r\n        // defines whether submit button is enabled\r\n        let disabledSubmit = false;\r\n        if (this.state.username === \"\" || this.state.password === \"\") {\r\n            disabledSubmit = true;\r\n        }\r\n\r\n        return (\r\n            <PageContentContainer isAuth>\r\n                <form>\r\n                    <h2 className=\"mb-4 font-weight-bold\">Log in</h2>\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input label=\"Name\" name=\"username\" placeholder=\"Enter name\"\r\n                               value={this.state.username}\r\n                               onChange={this.onChange}\r\n                               hasError={this.state.apiError.username && true}\r\n                               error={this.state.apiError.username} />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input label=\"Password\" name=\"password\" placeholder=\"Enter password\" type=\"password\"\r\n                               value={this.state.password}\r\n                               onChange={this.onChange}\r\n                               hasError={this.state.apiError.password && true}\r\n                               error={this.state.apiError.password}/>\r\n                    </div>\r\n\r\n                    <ButtonWithProgress\r\n                        className=\"btn btn-primary w-100 my-2\"\r\n                        onClick={(e) => this.onClickLogin(e)}\r\n                        disabled={disabledSubmit || this.state.pendingApiCall}\r\n                        pendingApiCall={this.state.pendingApiCall}\r\n                        hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Log in\r\n                    </ButtonWithProgress>\r\n\r\n                    <Link to=\"/signup\">Don't have an account? Sign up</Link>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * maps redux state to page props\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        login: (body) => dispatch(authActions.login(body)),\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(LoginPage);","import React, {Component} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport * as authActions from \"../store/authActions\";\r\nimport Input from \"../components/Input\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n/**\r\n * page for user registration\r\n */\r\nclass SignupPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        username: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        passwordRepeat: \"\",\r\n        pendingApiCall: false,\r\n        errors: {},\r\n        passwordRepeatConfirmed: true,\r\n    }\r\n\r\n    /**\r\n     * called when is some text input changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        if (event.target.name === \"passwordRepeat\") {\r\n            // for password repeat\r\n            const value = event.target.value;\r\n            // check if passwords are the same\r\n            const passwordRepeatConfirmed = this.state.password === value;\r\n            const errors = {...this.state.errors};\r\n            errors.passwordRepeat = passwordRepeatConfirmed ? \"\" : \"Passwords do not match\";\r\n            this.setState({passwordRepeatConfirmed, errors});\r\n        }\r\n        else if (event.target.name === \"password\") {\r\n            // for password\r\n            const value = event.target.value;\r\n            // check if passwords are the same\r\n            const passwordRepeatConfirmed = this.state.passwordRepeat === value;\r\n            const errors = {...this.state.errors};\r\n            errors.passwordRepeat = passwordRepeatConfirmed ? \"\" : \"Passwords do not match\";\r\n            delete errors[event.target.name];\r\n            this.setState({passwordRepeatConfirmed, errors});\r\n        }\r\n        else {\r\n            // for other fields\r\n            const errors = {...this.state.errors};\r\n            delete errors[event.target.name];\r\n            this.setState({errors});\r\n        }\r\n        // update value\r\n        this.setState({[event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * called when user clicks on sign up button\r\n     */\r\n    onClickSignup = (e) => {\r\n        e.preventDefault();\r\n\r\n        // extract user from state\r\n        const user = {\r\n            username: this.state.username,\r\n            email: this.state.email,\r\n            password: this.state.password\r\n        }\r\n        this.setState({pendingApiCall: true});\r\n\r\n        // send user sing up to server\r\n        this.props.signup(user).then(response => {\r\n            this.setState({pendingApiCall: false}, () => this.props.history.push(\"/\"));\r\n        }).catch(apiError => {\r\n                // react on errors in user input\r\n                let errors = {...this.state.errors};\r\n                if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                    errors = {...apiError.response.data.validationErrors}\r\n                }\r\n\r\n                this.setState({\r\n                    pendingApiCall: false,\r\n                    errors\r\n                })\r\n            }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * renders singup page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        // defines if sing up btn is enabled\r\n        let disabledSubmit = false;\r\n        if (this.state.username === \"\" || this.state.email === \"\" || this.state.password === \"\" || this.state.passwordRepeat === \"\") {\r\n            disabledSubmit = true;\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer isAuth>\r\n                <form>\r\n                    <h2 className=\"mb-4 font-weight-bold\">Sign up</h2>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"username\" value={this.state.username}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.username && true}\r\n                            error={this.state.errors.username}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"E-mail\"\r\n                            placeholder=\"Enter e-mail\" name=\"email\" value={this.state.email}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.email && true}\r\n                            error={this.state.errors.email}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Password\"\r\n                            placeholder=\"Enter password\" name=\"password\" value={this.state.password}\r\n                            onChange={this.onChange} type=\"password\"\r\n                            hasError={this.state.errors.password && true}\r\n                            error={this.state.errors.password}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Confirm Password\"\r\n                            placeholder=\"Enter password again\" name=\"passwordRepeat\" value={this.state.passwordRepeat}\r\n                            onChange={this.onChange} type=\"password\"\r\n                            hasError={this.state.errors.passwordRepeat && true}\r\n                            error={this.state.errors.passwordRepeat}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onClickSignup(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={this.state.pendingApiCall || !this.state.passwordRepeatConfirmed || disabledSubmit}\r\n                                         pendingApiCall={this.state.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Sign up\r\n                    </ButtonWithProgress>\r\n\r\n                    <Link to=\"/info\">New here? Read instructions</Link>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * maps redux dispatch to page props\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signup: (user) => dispatch(authActions.signup(user)),\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(SignupPage);","import * as actions from \"./actionsTypes\";\r\n\r\n// init redux state\r\nconst initialState = {\r\n    id: 0,\r\n    username: \"\",\r\n    email: \"\",\r\n    createdAt: null,\r\n    isTranslator: false,\r\n    isInstitutionOwner: false,\r\n    isAdmin: false,\r\n    isLoggedIn: false,\r\n    token: \"\",\r\n    expiredAt: null,\r\n}\r\n\r\n/**\r\n * merges redux action outcome with current state\r\n * @param state current state\r\n * @param action redux action\r\n */\r\nexport default function authReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case actions.LOGOUT_SUCCESS:\r\n            return {...initialState};\r\n        case actions.LOGIN_SUCCESS:\r\n            return {\r\n                ...action.payload,\r\n            }\r\n        case actions.SET_USERNAME:\r\n            return {\r\n                ...state,\r\n                username: action.payload,\r\n            }\r\n        case actions.SET_EMAIL:\r\n            return {\r\n                ...state,\r\n                email: action.payload,\r\n            }\r\n        case actions.SET_IS_INSTITUTION_OWNER:\r\n            return {\r\n                ...state,\r\n                isInstitutionOwner: action.payload,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import {createStore, applyMiddleware, compose} from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport authReducer from \"./authReducer\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport * as authActions from \"./authActions\";\r\n\r\nlet localStorageData = localStorage.getItem(\"user\");\r\n\r\n// init redux state\r\nlet initState = {\r\n    id: 0,\r\n    username: \"\",\r\n    email: \"\",\r\n    createdAt: null,\r\n    isTranslator: false,\r\n    isInstitutionOwner: false,\r\n    isAdmin: false,\r\n    isLoggedIn: false,\r\n    token: \"\",\r\n    expiredAt: null,\r\n}\r\nlet persistedState = initState;\r\nlet validToken = false;\r\n\r\nif (localStorageData) {\r\n    try {\r\n        // try to parse stored redux state\r\n        persistedState = JSON.parse(localStorageData);\r\n        const currentTime = Date.now() / 1000;\r\n        if (persistedState.expiredAt > currentTime) {\r\n            // if token is not expired use this state\r\n            apiCalls.setAuthorizationHeader(persistedState);\r\n            validToken = true;\r\n        } else {\r\n            // if token is expired reset state to init state\r\n            persistedState = initState;\r\n        }\r\n    } catch (error) {\r\n        console.log(\"Error parsing stored user\");\r\n    }\r\n}\r\n\r\nconst reactReduxDevTools = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__();\r\nconst middleware = [thunk];\r\nlet store;\r\n\r\nif (window.navigator.userAgent.includes(\"Chrome\") && reactReduxDevTools) {\r\n    // create store including redux dev tools\r\n    store = createStore(\r\n        authReducer,\r\n        persistedState,\r\n        compose(\r\n            applyMiddleware(...middleware),\r\n            reactReduxDevTools\r\n        )\r\n    );\r\n} else {\r\n    // create store without redux dev tools\r\n    store = createStore(\r\n        authReducer,\r\n        persistedState,\r\n        compose(applyMiddleware(...middleware))\r\n    );\r\n}\r\n\r\n// subscribe to every state change\r\nstore.subscribe(() => {\r\n    const user = store.getState();\r\n    // save redux state\r\n    localStorage.setItem(\"user\", JSON.stringify(user));\r\n    // set new authorization header\r\n    apiCalls.setAuthorizationHeader(user);\r\n\r\n    // get fresh token before current one expire\r\n    setTimeout(() => {\r\n        if (user.id === store.getState().id) {\r\n            store.dispatch(authActions.getFreshToken());\r\n        }\r\n    }, 600000000);\r\n})\r\n\r\n// get fresh token\r\nif (validToken) {\r\n    store.dispatch(authActions.getFreshToken());\r\n}\r\n\r\nexport default store;\r\n","import store from \"../store/store\";\r\nimport * as authActions from \"../store/authActions\";\r\n\r\n/**\r\n * handles errors that were caused by lack of rights\r\n * @param error http error\r\n */\r\nexport default function handleError(error) {\r\n    return new Promise((resolve, reject) => {\r\n        const status = error.response.status;\r\n        if (status === 401 || status === 403) {\r\n            // logout when user is not authorized enough\r\n            store.dispatch(authActions.logout());\r\n        }\r\n        reject(error);\r\n    });\r\n}","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\n\r\n/**\r\n * component for creating breadcrumbs navigation\r\n * @param props props\r\n */\r\nfunction Breadcrumbs(props) {\r\n    return (\r\n        <nav aria-label=\"breadcrumb\">\r\n            <ol className=\"breadcrumb\">\r\n                <li className=\"breadcrumb-item\">\r\n                    <Link exact to=\"/\">\r\n                        <button className=\"button-link\"><span className=\"fa fa-home\"/></button>\r\n                    </Link>\r\n                </li>\r\n                {props.children}\r\n            </ol>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default Breadcrumbs;","import React from 'react';\r\n\r\n/**\r\n * Info banner for pages\r\n * @param props props\r\n */\r\nfunction PageInfo(props) {\r\n    return (\r\n        <div className=\"d-flex justify-content-center mt-2 mb-4\">\r\n            <div className=\"text-center info-banner py-4 px-5 d-flex flex-column-reverse justify-content-center border rounded\">\r\n                <div className=\"\">\r\n                    <h2>{props.name}</h2>\r\n                    <h5>{props.children}</h5>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PageInfo;","import React, {Component} from 'react';\r\nimport Input from \"../components/Input\";\r\nimport * as authActions from \"../store/authActions\";\r\nimport {connect} from \"react-redux\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page with user's profile\r\n */\r\nclass ProfilePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        username: this.props.user.username,\r\n        email: this.props.user.email,\r\n        password: \"\",\r\n        passwordRepeat: \"\",\r\n        passwordRepeatConfirmed: true,\r\n        pendingApiCallUpdateUser: false,\r\n        pendingApiCallUpdatePassword: false,\r\n        userUpdated: false,\r\n        passwordUpdated: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when some of the text inputs change value\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        if (event.target.name === \"passwordRepeat\") {\r\n            // for password repeat input\r\n            const value = event.target.value;\r\n            // checks if passwords are the same\r\n            const passwordRepeatConfirmed = this.state.password === value;\r\n            const errors = {...this.state.errors};\r\n            errors.passwordRepeat = passwordRepeatConfirmed ? \"\" : \"Passwords do not match\";\r\n            this.setState({passwordRepeatConfirmed, errors, passwordUpdated: false});\r\n        } else if (event.target.name === \"password\") {\r\n            // for password input\r\n            const value = event.target.value;\r\n            // check if password are the same\r\n            const passwordRepeatConfirmed = this.state.passwordRepeat === value;\r\n            const errors = {...this.state.errors};\r\n            errors.passwordRepeat = passwordRepeatConfirmed ? \"\" : \"Passwords do not match\";\r\n            delete errors[event.target.name];\r\n            // update password confirmed value and errors\r\n            this.setState({passwordRepeatConfirmed, errors, passwordUpdated: false});\r\n        } else {\r\n            // for other fields\r\n            const errors = {...this.state.errors};\r\n            delete errors[event.target.name];\r\n            this.setState({errors, userUpdated: false});\r\n        }\r\n        // change value for input\r\n        this.setState({[event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * handles error from http request\r\n     * @param apiError error\r\n     * @param apiCall api call name\r\n     */\r\n    handleApiError = (apiError, apiCall) => {\r\n        if (apiError.response.data && apiError.response.data.validationErrors) {\r\n            let errors = {\r\n                ...this.state.errors,\r\n                ...apiError.response.data.validationErrors\r\n            };\r\n            // set new errors and set api call to false\r\n            this.setState({\r\n                [apiCall]: false,\r\n                errors\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when user submit user info update\r\n     */\r\n    onClickUserUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdateUser: true});\r\n        const {username, email} = this.state;\r\n\r\n        // sends updated info to server\r\n        apiCalls.updateUser({username, email}).then(response => {\r\n            this.setState({pendingApiCallUpdateUser: false, userUpdated: true});\r\n            this.props.setUsername(username);\r\n            this.props.setEmail(email);\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in input\r\n            this.handleApiError(apiError, \"pendingApiCallUpdateUser\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when user submit password update\r\n     */\r\n    onClickPasswordUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdatePassword: true});\r\n        const {password} = this.state;\r\n\r\n        // sends new password to server\r\n        apiCalls.updatePassword({password}).then(response => {\r\n            let errors = {...this.state.errors};\r\n            delete errors[\"passwordRepeat\"];\r\n            this.setState({errors, pendingApiCallUpdatePassword: false, passwordUpdated: true, password: \"\", passwordRepeat: \"\"});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in input\r\n            this.handleApiError(apiError, \"pendingApiCallUpdatePassword\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders user profile page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            username,\r\n            email,\r\n            password,\r\n            passwordRepeat,\r\n            pendingApiCallUpdateUser,\r\n            pendingApiCallUpdatePassword,\r\n            passwordRepeatConfirmed,\r\n            userUpdated,\r\n            passwordUpdated,\r\n            errors,\r\n        } = this.state;\r\n        const {createdAt} = this.props.user;\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <li className=\"breadcrumb-item active\">My Profile</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"My Profile\">Edit your profile information</PageInfo>\r\n\r\n                <div className=\"mb-4\">\r\n                    <span className=\"font-weight-bold\">Registration date: </span>\r\n                    {new Date(createdAt * 1).toLocaleDateString(\"en-UK\")}\r\n                </div>\r\n\r\n                <form className=\"mb-4\">\r\n                    {\r\n                        userUpdated &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            Personal information has been updated\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input label=\"Name\" name=\"username\"\r\n                               value={username}\r\n                               onChange={this.onChange} hasError={errors.username && true}\r\n                               error={errors.username}/>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input label=\"E-mail\" name=\"email\"\r\n                               value={email}\r\n                               onChange={this.onChange} hasError={errors.email && true}\r\n                               error={errors.email}/>\r\n                    </div>\r\n\r\n                    <ButtonWithProgress onClick={(e) => this.onClickUserUpdate(e)}\r\n                                        className=\"btn btn-primary w-100 my-2\"\r\n                                        disabled={pendingApiCallUpdateUser || username === \"\" || email === \"\"}\r\n                                        pendingApiCall={pendingApiCallUpdateUser}\r\n                                        hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Update information\r\n                    </ButtonWithProgress>\r\n                </form>\r\n\r\n                <form>\r\n                    {\r\n                        passwordUpdated &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            Password ha been updated\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Password\"\r\n                            placeholder=\"Enter password\" name=\"password\" value={password}\r\n                            onChange={this.onChange} type=\"password\"\r\n                            hasError={errors.password && true}\r\n                            error={errors.password}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Confirm Password\"\r\n                            placeholder=\"Enter password again\" name=\"passwordRepeat\" value={passwordRepeat}\r\n                            onChange={this.onChange} type=\"password\"\r\n                            hasError={errors.passwordRepeat && true}\r\n                            error={errors.passwordRepeat}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress onClick={(e) => this.onClickPasswordUpdate(e)}\r\n                                        className=\"btn btn-primary w-100 my-2\"\r\n                                        disabled={pendingApiCallUpdatePassword || !passwordRepeatConfirmed || password === \"\" || passwordRepeat === \"\"}\r\n                                        pendingApiCall={pendingApiCallUpdatePassword}\r\n                                        hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Change password\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * map redux state to page props\r\n * @param state redux state\r\n */\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state,\r\n    };\r\n}\r\n\r\n/**\r\n * map redux dispatch to props\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setUsername: (username) => dispatch(authActions.setUsername(username)),\r\n        setEmail: (email) => dispatch(authActions.setEmail(email))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePage);","import React from 'react';\r\n\r\n/**\r\n * spinner used for showing loading\r\n */\r\nconst Spinner = () => {\r\n    return (\r\n        <div className=\"d-flex\">\r\n            <div className=\"spinner-border text-black-50 m-auto\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Spinner;","import React, {Component} from 'react';\r\nimport Input from \"../components/Input\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport * as authActions from \"../store/authActions\";\r\nimport {connect} from \"react-redux\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for creating new institution\r\n */\r\nclass CreateInstitutionPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        name: \"\",\r\n        address: \"\",\r\n        description: \"\",\r\n        latitudeString: \"\",\r\n        longitudeString: \"\",\r\n        encodedImage: null,\r\n        imageSelect: \"\",\r\n        pendingApiCall: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * called when new image is selected\r\n     * @param event input event\r\n     */\r\n    onImageSelect = (event) => {\r\n        // update state with no errors and new value\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"encodedImage\"];\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n        if (event.target.files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // if file is picked load it\r\n        const file = event.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onloadend = () => {\r\n            // set base64 encoded image to state\r\n            this.setState({encodedImage: reader.result});\r\n        }\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    /**\r\n     * clears image\r\n     */\r\n    clearImage = () => {\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"encodedImage\"];\r\n        // set state with no errors for img input and reset image properties\r\n        this.setState({errors, encodedImage: null, imageSelect: \"\",});\r\n    }\r\n\r\n    /**\r\n     * called when user click on create institution button\r\n     */\r\n    onClickCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCall: true});\r\n        // extract institution from state\r\n        const institution = {\r\n            name: this.state.name,\r\n            address: this.state.address,\r\n            description: this.state.description,\r\n            latitudeString: this.state.latitudeString,\r\n            longitudeString: this.state.longitudeString,\r\n            encodedImage: this.state.encodedImage,\r\n        }\r\n\r\n        // send new institution to server\r\n        apiCalls.saveMyInstitution(institution).then(response => {\r\n            this.setState({pendingApiCall: false}, () => {\r\n                // set that logged in user is isntituiton owner and redirect\r\n                this.props.setIsInstitutionOwner(true);\r\n                this.props.redirect(\"/myInstitution/addLanguages\");\r\n            });\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle state when user input contains errors\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            // set new state with fetched errors\r\n            this.setState({pendingApiCall: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders create institution page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        // determines if submit button is enabled\r\n        let disabledSubmit = false;\r\n        if (this.state.name === \"\" || this.state.address === \"\" || this.state.description === \"\" || this.state.latitudeString === \"\" || this.state.longitudeString === \"\") {\r\n            disabledSubmit = true;\r\n        }\r\n\r\n        // renders page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <li className=\"breadcrumb-item active\">Create Institution</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Create Institution\">Create a cultural institution and become its administrator</PageInfo>\r\n\r\n                <form>\r\n                    <div className=\"form-group\">\r\n                        <Input type=\"file\"\r\n                               onlyImage\r\n                               value={this.state.imageSelect}\r\n                               name=\"imageSelect\"\r\n                               label=\"Institution image\"\r\n                               placeholder=\"Select institution image\"\r\n                               onChange={this.onImageSelect}\r\n                               hasError={this.state.errors.encodedImage && true}\r\n                               error={this.state.errors.encodedImage}\r\n                        />\r\n\r\n                        {\r\n                            this.state.encodedImage &&\r\n                            <div>\r\n                                <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={this.state.encodedImage} alt=\"upload\" />\r\n                                <br />\r\n                                <button className=\"btn btn-danger btn-lg mt-2\" onClick={this.clearImage}>\r\n                                    <i className=\"fa fa-times\" /> Clear\r\n                                </button>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name*\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={this.state.name}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.name && true}\r\n                            error={this.state.errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Address*\"\r\n                            placeholder=\"Enter address\" name=\"address\" value={this.state.address}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.address && true}\r\n                            error={this.state.errors.address}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description*\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={this.state.description}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.description && true}\r\n                            error={this.state.errors.description}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Latitude*\"\r\n                            placeholder=\"Enter latitude\" name=\"latitudeString\" value={this.state.latitudeString}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.latitudeString && true}\r\n                            error={this.state.errors.latitudeString}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Longitude*\"\r\n                            placeholder=\"Enter longitude\" name=\"longitudeString\" value={this.state.longitudeString}\r\n                            onChange={this.onChange}\r\n                            hasError={this.state.errors.longitudeString && true}\r\n                            error={this.state.errors.longitudeString}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onClickCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={this.state.pendingApiCall || disabledSubmit}\r\n                                         pendingApiCall={this.state.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create institution\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * maps redux state to page properties\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setIsInstitutionOwner: value => dispatch(authActions.setIsInstitutionOwner(value)),\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(CreateInstitutionPage);","/**\r\n * server root url\r\n */\r\nconst SERVER_ROOT_URL = \"http://localhost:8080/\";\r\n/**\r\n * institution images url\r\n */\r\nexport const INSTITUTIONS_IMAGES_URL = SERVER_ROOT_URL + \"institutions_images/\";\r\n/**\r\n * exhibits images url\r\n */\r\nexport const EXHIBITS_IMAGES_URL = SERVER_ROOT_URL + \"exhibits_images/\";\r\n/**\r\n * info labels images url\r\n */\r\nexport const INFO_LABELS_IMAGES_URL = SERVER_ROOT_URL + \"info_labels_images/\";\r\n/**\r\n * label showed in select boxes when nothing is selected\r\n */\r\nexport const NOTHING_SELECTED_LABEL = \"Select...\";","import React, {Component} from 'react';\r\nimport * as authActions from \"../store/authActions\";\r\nimport {connect} from \"react-redux\";\r\nimport Input from \"../components/Input\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport {INSTITUTIONS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for updating institution\r\n */\r\nclass UpdateInstitutionPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        name: this.props.institution.name,\r\n        address: this.props.institution.address,\r\n        description: this.props.institution.description,\r\n        latitudeString: this.props.institution.latitude,\r\n        longitudeString: this.props.institution.longitude,\r\n        image: this.props.institution.image,\r\n        encodedImage: null,\r\n        imageSelect: \"\",\r\n        createdAt: this.props.institution.createdAt,\r\n        email: \"\",\r\n        pendingApiCallUpdateInstitution: false,\r\n        pendingApiCallUpdateImage: false,\r\n        pendingApiCallDeleteInstitution: false,\r\n        pendingApiCallAddManager: false,\r\n        institutionUpdated: false,\r\n        imageUpdated: false,\r\n        managerAdded: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when new institution image is selected\r\n     * @param event input event\r\n     */\r\n    onImageSelect = (event) => {\r\n        // delete errors and update value in state\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"encodedImage\"];\r\n        this.setState({errors, [event.target.name]: event.target.value, imageUpdated: false});\r\n        if (event.target.files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // read selected image if exists\r\n        const file = event.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onloadend = () => {\r\n            // set base64 encoded image to tate\r\n            this.setState({encodedImage: reader.result});\r\n        }\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    /**\r\n     * clear image from state\r\n     */\r\n    clearImage = () => {\r\n        // delete errors and clear image fields from state\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"encodedImage\"];\r\n        this.setState({errors, encodedImage: null, imageSelect: \"\",});\r\n    }\r\n\r\n    /**\r\n     * handles error from http request\r\n     * @param apiError error\r\n     * @param apiCall api call name\r\n     */\r\n    handleApiError = (apiError, apiCall) => {\r\n        if (apiError.response.data && apiError.response.data.validationErrors) {\r\n            let errors = {\r\n                ...this.state.errors,\r\n                ...apiError.response.data.validationErrors\r\n            };\r\n            // update input errors and api call state\r\n            this.setState({\r\n                [apiCall]: false,\r\n                errors\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when user submit institution image update\r\n     */\r\n    onClickImageUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdateImage: true});\r\n        const img = { encodedImage: this.state.encodedImage }\r\n\r\n        // send request to update image to server\r\n        apiCalls.updateInstitutionImage(img).then(response => {\r\n            this.setState({pendingApiCallUpdateImage: false, image: response.data.message, imageUpdated: true}, () => {\r\n                this.clearImage();\r\n            });\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in input\r\n            this.handleApiError(apiError, \"pendingApiCallUpdateImage\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when value in text inputs is changed\r\n     * @param event input event\r\n     */\r\n    onChange = event => {\r\n        // delete errors and update value in state\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        this.setState({errors, institutionUpdated: false, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * called when value of email text box is changed\r\n     * @param event input event\r\n     */\r\n    onEmailChange = event => {\r\n        // delete errors and set value to state\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        this.setState({errors, managerAdded: false, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * called when institution manager wants to update info about institution\r\n     */\r\n    onClickInstitutionUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdateInstitution: true});\r\n        // extract institution from state\r\n        const institution = {\r\n            name: this.state.name,\r\n            address: this.state.address,\r\n            description: this.state.description,\r\n            latitudeString: this.state.latitudeString,\r\n            longitudeString: this.state.longitudeString,\r\n        }\r\n\r\n        // sends request to server to update institution information\r\n        apiCalls.updateInstitution(institution).then(response => {\r\n            this.setState({pendingApiCallUpdateInstitution: false, institutionUpdated: true});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle input error\r\n            this.handleApiError(apiError, \"pendingApiCallUpdateInstitution\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when manager of institution wants to delete it\r\n     */\r\n    onClickInstitutionDelete = () => {\r\n        // ask before institution delete\r\n        if (window.confirm(\"Do you really want to delete your institution?\")) {\r\n            this.setState({pendingApiCallDeleteInstitution: true});\r\n\r\n            // send request to institution delete to server\r\n            apiCalls.deleteInstitution().then(response => {\r\n                this.setState({pendingApiCallDeleteInstitution: false}, () => {\r\n                    this.props.setIsInstitutionOwner(false);\r\n                    this.props.redirect(\"/\");\r\n                });\r\n            }).catch(error => {\r\n                // handle unauthorized state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when institution manager wants to add new manager\r\n     */\r\n    onClickManagerAdd = (e) => {\r\n        e.preventDefault();\r\n\r\n        // ask before adding manager\r\n        if (window.confirm(\"Do you really want to add a new manager to your institution?\")) {\r\n            this.setState({pendingApiCallAddManager: true});\r\n\r\n            // send request to server to add new manager to institution\r\n            apiCalls.addInstitutionManager({email: this.state.email}).then(response => {\r\n                this.setState({pendingApiCallAddManager: false, email: \"\"}, () => this.setState({managerAdded: true}));\r\n            }).catch(error => {\r\n                // handle unauthorized state\r\n                return handleError(error);\r\n            }).catch(apiError => {\r\n                // handle input errors\r\n                this.handleApiError(apiError, \"pendingApiCallAddManager\");\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renders institution update page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            address,\r\n            description,\r\n            latitudeString,\r\n            longitudeString,\r\n            image,\r\n            encodedImage,\r\n            imageSelect,\r\n            email,\r\n            pendingApiCallUpdateInstitution,\r\n            pendingApiCallUpdateImage,\r\n            pendingApiCallDeleteInstitution,\r\n            pendingApiCallAddManager,\r\n            institutionUpdated,\r\n            imageUpdated,\r\n            managerAdded,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <li className=\"breadcrumb-item active\">My Institution</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"My Institution\">Here you can manage your institution</PageInfo>\r\n\r\n                <div className=\"row d-flex justify-content-between\">\r\n                    <div className=\"col-lg col-sm-6 col-md-6 text-center\">\r\n                        <Link exact to=\"/myInstitution/addLanguages\" >\r\n                            <button type=\"button\" className=\"btn btn-lg btn-primary mb-3 institution-nav\">\r\n                                <div className=\"card-body\">\r\n                                    <h5 className=\"card-title\">Languages</h5>\r\n                                    <p className=\"card-text\">Add languages that translators will be able to translate</p>\r\n                                </div>\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n\r\n                    <div className=\"col-lg col-sm-6 col-md-6 text-center\">\r\n                        <Link exact to=\"/myInstitution/addExhibit\" >\r\n                            <button type=\"button\" className=\"btn btn-lg btn-success mb-3 institution-nav\">\r\n                                <div className=\"card-body\">\r\n                                    <h5 className=\"card-title\">New Exhibits</h5>\r\n                                    <p className=\"card-text\">Add new exhibits with their information labels to your institution</p>\r\n                                </div>\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n\r\n                    <div className=\"col-lg col-sm-6 col-md-6 text-center\">\r\n                        <Link exact to=\"/myInstitution/exhibits\" >\r\n                            <button type=\"button\" className=\"btn btn-lg btn-info mb-3 institution-nav\">\r\n                                <div className=\"card-body\">\r\n                                    <h5 className=\"card-title\">View Exhibits</h5>\r\n                                    <p className=\"card-text\">Get QR codes and manage your institution's exhibits</p>\r\n                                </div>\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n\r\n                    <div className=\"col-lg col-sm-6 col-md-6 text-center\">\r\n                        <Link exact to=\"/myInstitution/buildings\" >\r\n                            <button type=\"button\" className=\"btn btn-lg btn-secondary mb-3 institution-nav\">\r\n                                <div className=\"card-body\">\r\n                                    <h5 className=\"card-title\">Navigation</h5>\r\n                                    <p className=\"card-text\">Add and edit buildings, rooms and showcases for visitor navigation</p>\r\n                                </div>\r\n                            </button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n\r\n                <form className=\"mb-4 mt-4\">\r\n                    {\r\n                        imageUpdated &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            Institution image updated\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input type=\"file\"\r\n                               onlyImage\r\n                               value={imageSelect}\r\n                               name=\"imageSelect\"\r\n                               label=\"Institution image\"\r\n                               placeholder=\"Select institution image\"\r\n                               onChange={this.onImageSelect}\r\n                               hasError={errors.encodedImage && true}\r\n                               error={errors.encodedImage}\r\n                        />\r\n\r\n                        {\r\n                            encodedImage ?\r\n                                <div>\r\n                                    <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={encodedImage} alt=\"upload\" />\r\n                                    <br />\r\n                                    <button className=\"btn btn-danger btn-lg mt-2\" disabled={pendingApiCallUpdateImage} onClick={this.clearImage}>\r\n                                        <i className=\"fa fa-times\" /> Clear\r\n                                    </button>\r\n                                    <ButtonWithProgress onClick={(e) => this.onClickImageUpdate(e)}\r\n                                                        className=\"btn btn-success btn-lg ml-2 mt-2\"\r\n                                                        disabled={pendingApiCallUpdateImage}\r\n                                                        pendingApiCall={pendingApiCallUpdateImage}\r\n                                                        hasChildren>\r\n                                        <i className=\"fa fa-paper-plane\" /> Update image\r\n                                    </ButtonWithProgress>\r\n                                </div>\r\n                                :\r\n                                <div>\r\n                                    <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={INSTITUTIONS_IMAGES_URL + image} alt=\"upload\" />\r\n                                </div>\r\n                        }\r\n                    </div>\r\n                </form>\r\n\r\n                <form>\r\n                    {\r\n                        institutionUpdated &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            Institution information updated\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Address\"\r\n                            placeholder=\"Enter address\" name=\"address\" value={address}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.address && true}\r\n                            error={errors.address}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Latitude\"\r\n                            placeholder=\"Enter latitude\" name=\"latitudeString\" value={latitudeString}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.latitudeString && true}\r\n                            error={errors.latitudeString}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Longitude\"\r\n                            placeholder=\"Enter longitude\" name=\"longitudeString\" value={longitudeString}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.longitudeString && true}\r\n                            error={errors.longitudeString}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onClickInstitutionUpdate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallUpdateInstitution || name === \"\" || address === \"\" || description === \"\" ||\r\n                                             latitudeString === \"\" || longitudeString === \"\"}\r\n                                         pendingApiCall={pendingApiCallUpdateInstitution}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Update institution information\r\n                    </ButtonWithProgress>\r\n\r\n                </form>\r\n\r\n                <form className=\"mt-4\">\r\n                    {\r\n                        managerAdded &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            New manager added\r\n                        </div>\r\n                    }\r\n\r\n                    <Input\r\n                        label=\"New institution manager\"\r\n                        placeholder=\"Enter new manager's e-mail\" name=\"email\" value={email}\r\n                        onChange={this.onEmailChange}\r\n                        hasError={errors.email && true}\r\n                        error={errors.email}\r\n                    />\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onClickManagerAdd(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallAddManager || email === \"\"}\r\n                                         pendingApiCall={pendingApiCallAddManager}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Add new institution manager\r\n                    </ButtonWithProgress>\r\n                </form>\r\n\r\n                <br />\r\n                <ButtonWithProgress  onClick={this.onClickInstitutionDelete}\r\n                                     className=\"btn btn-lg mt-3 btn-danger\"\r\n                                     disabled={pendingApiCallDeleteInstitution}\r\n                                     pendingApiCall={pendingApiCallDeleteInstitution}\r\n                                     hasChildren>\r\n                    <i className=\"fa fa-times\" /> Delete institution\r\n                </ButtonWithProgress>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * maps redux dispatch to state props\r\n * @param dispatch redux dispatch\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setIsInstitutionOwner: (value) => dispatch(authActions.setIsInstitutionOwner(value)),\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(UpdateInstitutionPage);","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport CreateInstitutionPage from \"./CreateInstitutionPage\";\r\nimport UpdateInstitutionPage from \"./UpdateInstitutionPage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\n\r\n/**\r\n * Info page of instituion that is managed by logged in user\r\n */\r\nclass MyInstitutionPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        institution: {},\r\n        pendingApiCall: false,\r\n        isOwner: false,\r\n    };\r\n\r\n    /**\r\n     * Called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch institution info from server\r\n        apiCalls.getMyInstitution().then(response => {\r\n            this.setState({institution: response.data, pendingApiCall: false, isOwner: true});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        }).catch(error => {\r\n            // handles errors\r\n            if (error.response.data && error.response.data.message === \"User does not own an institution\") {\r\n                this.setState({pendingApiCall: false, isOwner: false});\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * utility for react browser redirecting\r\n     * @param path path to redirect\r\n     */\r\n    redirect = (path) => {\r\n        this.props.history.push(path);\r\n    }\r\n\r\n    /**\r\n     * renders user's institution page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {pendingApiCall, institution, isOwner} = this.state;\r\n\r\n        // if fetching from server is processing show spinner\r\n        if(pendingApiCall) {\r\n            return (\r\n                <PageContentContainer>\r\n                    <Spinner/>\r\n                </PageContentContainer>\r\n            );\r\n        }\r\n        else if(isOwner) {\r\n            // if user is owner of an institution show update page\r\n            return (\r\n                <UpdateInstitutionPage institution={institution} redirect={this.redirect} />\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                // if user does not own institution show create page\r\n                <CreateInstitutionPage redirect={this.redirect} />\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default MyInstitutionPage;","import React from 'react';\r\n\r\n/**\r\n * warning showed when no content is available\r\n * @param props props\r\n */\r\nconst NoContentMessage = (props) => (\r\n    <div className={\"alert alert-warning \" + props.classes} role=\"alert\">\r\n        <i className=\"fa fa-exclamation-circle\" /> {props.text}\r\n    </div>\r\n)\r\n\r\nexport default NoContentMessage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\n\r\n/**\r\n * Link used in breadcrumbs\r\n * @param props props\r\n */\r\nfunction BreadcrumbsLink(props) {\r\n    return (\r\n        <li className=\"breadcrumb-item\">\r\n            <Link exact to={props.to}>\r\n                <button className=\"button-link\">{props.name}</button>\r\n            </Link>\r\n        </li>\r\n    );\r\n}\r\n\r\nexport default BreadcrumbsLink;","import React, {Component} from 'react';\r\nimport Spinner from \"../components/Spinner\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport {Link} from \"react-router-dom\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * Page for adding languages to institution\r\n */\r\nclass AddLanguagesPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        pendingApiCallDownloadLanguages: false,\r\n        possible: [],\r\n        chosen: [],\r\n        filtered: [],\r\n        search: \"\",\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallDownloadLanguages: true})\r\n        // load languages\r\n        apiCalls.getMyInstitutionLanguages().then(response => {\r\n            let possible = response.data.possibleLanguages;\r\n            for (let possibleLan of possible) {\r\n                possibleLan.pendingApiCall = false;\r\n            }\r\n\r\n            // set fetched languages to state\r\n            const chosen = response.data.chosenLanguages;\r\n            this.setState({possible, chosen, pendingApiCallDownloadLanguages: false});\r\n        }).catch(error => {\r\n            // react on unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Called when search box value is changed\r\n     * @param event input event\r\n     */\r\n    onSearchChange = (event) => {\r\n        const value = event.target.value;\r\n        if(value === \"\") {\r\n            // no languages visible if box is empty\r\n            this.setState({[event.target.name]: value, filtered: []});\r\n        }\r\n        else {\r\n            // filter languages by value in box\r\n            const filtered = this.state.possible.filter(lan => lan.name.toLowerCase().includes(value.toLowerCase()));\r\n            this.setState({[event.target.name]: value, filtered});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when new language should be added\r\n     * @param lan added language\r\n     */\r\n    onLanguageAddClick = (lan) => {\r\n        // set pending api call for added language\r\n        let newFiltered = [];\r\n        const {filtered} = this.state;\r\n        for (let fil of filtered) {\r\n            if(fil === lan) {\r\n                newFiltered.push({...fil, pendingApiCall: true,});\r\n            }\r\n            else {\r\n                newFiltered.push({...fil});\r\n            }\r\n        }\r\n        this.setState({filtered: newFiltered});\r\n\r\n        // send added language to server\r\n        apiCalls.addInstitutionLanguage(lan.languageId).then(response => {\r\n            // remove language from possible and put it in chosen\r\n            newFiltered = [...filtered];\r\n            newFiltered = newFiltered.filter(fil => lan !== fil);\r\n            let newPossible = [...this.state.possible];\r\n            newPossible = newPossible.filter(pos => lan !== pos);\r\n            let newChosen = [...this.state.chosen];\r\n            newChosen.push({...lan});\r\n\r\n            // update state\r\n            this.setState({filtered: newFiltered, possible: newPossible, chosen: newChosen});\r\n        }).catch(error => {\r\n            // handle authentication error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders add language page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            pendingApiCallDownloadLanguages,\r\n            chosen,\r\n            filtered,\r\n            search,\r\n        } = this.state;\r\n\r\n        // if languages are loading show spinner\r\n        if (pendingApiCallDownloadLanguages) {\r\n            return (\r\n                <PageContentContainer>\r\n                    <Spinner />\r\n                </PageContentContainer>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <li className=\"breadcrumb-item active\">Add Languages</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Add Languages\">Add the languages you want for your visitors and the translators will translate informational labels into them. After you can add your exhibits from institution overview</PageInfo>\r\n\r\n                <Link exact to=\"/myInstitution\" >\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-info mb-4\">\r\n                        <i className=\"fa fa-search\" /> Institution overview\r\n                    </button>\r\n                </Link>\r\n\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6 \">\r\n                        <div className=\"input-group mb-4\">\r\n                            <input type=\"text\" className=\"form-control\" placeholder=\"Search language\" name=\"search\" value={search} onChange={this.onSearchChange} />\r\n                            <div className=\"input-group-append\">\r\n                                <span className=\"input-group-text\">\r\n                                    <i className=\"fa fa-search\" />\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            {\r\n                                filtered.map(lan =>\r\n                                    <ButtonWithProgress  key={lan.languageId}\r\n                                                         onClick={() => this.onLanguageAddClick(lan)}\r\n                                                         className=\"btn btn-success w-100 my-1\"\r\n                                                         disabled={lan.pendingApiCall}\r\n                                                         pendingApiCall={lan.pendingApiCall}\r\n                                                         hasChildren >\r\n                                        <i className=\"fa fa-plus-circle\" /> {lan.name}\r\n                                    </ButtonWithProgress>\r\n                                )\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-6 px-md-5\">\r\n                        {\r\n                            chosen.length === 0 ?\r\n                                <NoContentMessage text=\"No selected languages\"/>\r\n                                :\r\n                                <div className=\"card mt-md-0 mt-2\">\r\n                                    <ul className=\"list-group list-group-flush\">\r\n                                        { chosen.map(lan =>\r\n                                            <li key={lan.languageId} className=\"list-group-item\">{lan.name}</li>\r\n                                        )}\r\n                                    </ul>\r\n                                </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddLanguagesPage;","import React, {Component} from 'react';\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"./Spinner\";\r\nimport Select from 'react-select';\r\nimport {NOTHING_SELECTED_LABEL} from \"../shared/sharedConstants\";\r\n\r\n/**\r\n * component containing select of location (building/room/showcase)\r\n */\r\nclass LocationPickerSelect extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        fetchedObjects: [],\r\n        pendingApiCall: false,\r\n        selectedId: this.props.currValue ? this.props.currValue : null,\r\n        selectedLabel: NOTHING_SELECTED_LABEL,\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true});\r\n        // fetch all needed objects from server\r\n        this.props.fetch().then(response => {\r\n            const objects = response.data;\r\n            // add objects to select options\r\n            const fetchedObjects = [];\r\n            let newSelectedLabel = NOTHING_SELECTED_LABEL;\r\n            for(let o of objects) {\r\n                fetchedObjects.push({value: o[this.props.idName], label: o.name});\r\n                // if id match, set selected label\r\n                if(o[this.props.idName] === this.state.selectedId) {\r\n                    newSelectedLabel = o.name;\r\n                }\r\n            }\r\n            // update state\r\n            this.setState({fetchedObjects, pendingApiCall: false, selectedLabel: newSelectedLabel});\r\n        }).catch(error => {\r\n            // handle unauthorized error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when select value is changed\r\n     * @param e params\r\n     */\r\n    onChange = e => {\r\n        if(e === null) {\r\n            // pass to upper component when nothing is selected\r\n            this.props.onChange(null);\r\n            this.setState({selectedId: null, selectedLabel: NOTHING_SELECTED_LABEL});\r\n        }\r\n        else {\r\n            // pass to upper component when option is selected\r\n            this.props.onChange(e.value);\r\n            this.setState({selectedId: e.value, selectedLabel: e.label});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renders select\r\n     * @returns {JSX.Element} component with select\r\n     */\r\n    render() {\r\n        const {fetchedObjects, pendingApiCall, selectedId, selectedLabel} = this.state;\r\n\r\n        // return spinner if api call is processing\r\n        if(pendingApiCall) {\r\n            return <Spinner />;\r\n        }\r\n\r\n        return (\r\n            <div className=\"mt-2\">\r\n                <label className=\"font-weight-bold\">{this.props.label}</label>\r\n                <Select options={fetchedObjects} onChange={this.onChange} isClearable value={{value: selectedId, label: selectedLabel}} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LocationPickerSelect;","import React, {Component} from 'react';\r\nimport LocationPickerSelect from \"./LocationPickerSelect\";\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\n\r\n/**\r\n * component allowing to pick building, room and show-case using select boxes\r\n */\r\nclass LocationPicker extends Component {\r\n\r\n    /**\r\n     * current state\r\n     */\r\n    state = {\r\n        buildingId: this.props.buildingId ? this.props.buildingId : null,\r\n        roomId: this.props.roomId ? this.props.roomId : null,\r\n        showcaseId: this.props.showcaseId ? this.props.showcaseId : null,\r\n    }\r\n\r\n    /**\r\n     * function for getting all rooms depending on building in state\r\n     * @returns {Promise<AxiosResponse<*>>} promise\r\n     */\r\n    fetchRooms = () => {\r\n        return apiCalls.getRooms(this.state.buildingId);\r\n    }\r\n\r\n    /**\r\n     * function for getting all showcases depending on room in state\r\n     * @returns {Promise<AxiosResponse<*>>} promise\r\n     */\r\n    fetchShowcases = () => {\r\n        return apiCalls.getShowcases(this.state.roomId);\r\n    }\r\n\r\n    /**\r\n     * Reacts on building change\r\n     * @param newVal new building id\r\n     */\r\n    onBuildingChange = newVal => {\r\n        if(newVal !== this.state.buildingId) {\r\n            // update state with new val\r\n            this.setState({buildingId: newVal, roomId: null, showcaseId: null});\r\n            // update upper component\r\n            this.props.update(newVal, null, null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reacts on room change\r\n     * @param newVal new room id\r\n     */\r\n    onRoomChange = newVal => {\r\n        if(newVal !== this.state.roomId) {\r\n            // update state with new val\r\n            this.setState({roomId: newVal, showcaseId: null});\r\n            // update upper component\r\n            this.props.update(this.state.buildingId, newVal, null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reacts on showcase change\r\n     * @param newVal new showcase id\r\n     */\r\n    onShowcaseChange = newVal => {\r\n        if(newVal !== this.state.roomId) {\r\n            // update state with new val\r\n            this.setState({showcaseId: newVal});\r\n            // update upper component\r\n            this.props.update(this.state.buildingId, this.state.roomId, newVal);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renders component to pick location\r\n     * @returns {JSX.Element} component to pick location\r\n     */\r\n    render() {\r\n        const {buildingId, roomId, showcaseId} = this.state;\r\n\r\n        return (\r\n            <>\r\n                <LocationPickerSelect currValue={buildingId} label=\"Building\" idName=\"buildingId\" fetch={apiCalls.getBuildings} onChange={this.onBuildingChange} />\r\n                {buildingId && <LocationPickerSelect key={buildingId} currValue={roomId} label=\"Room\" idName=\"roomId\" fetch={this.fetchRooms} onChange={this.onRoomChange} />}\r\n                {roomId && <LocationPickerSelect key={roomId} currValue={showcaseId} label=\"Show-case\" idName=\"showcaseId\" fetch={this.fetchShowcases} onChange={this.onShowcaseChange} />}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LocationPicker;","import React, {Component} from 'react';\r\nimport {CKEditor} from '@ckeditor/ckeditor5-react';\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Input from \"../components/Input\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport LocationPicker from \"../components/LocationPicker\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * Page where institution manager can add new exhibits\r\n */\r\nclass AddExhibitPage extends Component {\r\n\r\n    /**\r\n     * initial state of page\r\n     */\r\n    initState = {\r\n        name: \"\",\r\n        infoLabelText: \"\",\r\n        buildingId: null,\r\n        roomId: null,\r\n        showcaseId: null,\r\n        encodedImage: null,\r\n        imageSelect: \"\",\r\n        encodedInfoLabel: null,\r\n        infoLabelSelect: \"\",\r\n        pendingApiCall: false,\r\n        created: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * page state\r\n     */\r\n    state = this.initState;\r\n\r\n    /**\r\n     * Called on text input values change\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete error to given field\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value, created: false});\r\n    }\r\n\r\n    /**\r\n     * Called when new image is selected\r\n     * @param event input event\r\n     */\r\n    onImageSelect = (event) => {\r\n        const errors = {...this.state.errors};\r\n        const name = event.target.name;\r\n\r\n        // delete input error message\r\n        if(name === \"imageSelect\") {\r\n            delete errors[\"encodedImage\"];\r\n        }\r\n        else {\r\n            delete errors[\"encodedInfoLabel\"];\r\n        }\r\n\r\n        // update state with new errors and close alert that new exhibit was created\r\n        this.setState({errors, [name]: event.target.value, created: false});\r\n        if (event.target.files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // if user chose file\r\n        const file = event.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onloadend = () => {\r\n            // update state with new base64 encoded selected image\r\n            if(name === \"imageSelect\") {\r\n                this.setState({encodedImage: reader.result});\r\n            }\r\n            else {\r\n                this.setState({encodedInfoLabel: reader.result});\r\n            }\r\n        }\r\n        // read image\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    /**\r\n     * Clears image from state\r\n     * @param name img name\r\n     */\r\n    clearImage = (name) => {\r\n        const errors = {...this.state.errors};\r\n        if(name === \"imageSelect\") {\r\n            // delete errors of image input and its fields in state\r\n            delete errors[\"encodedImage\"];\r\n            this.setState({errors, encodedImage: null, imageSelect: \"\",});\r\n        }\r\n        else {\r\n            // delete errors of image input and its fields in state\r\n            delete errors[\"encodedInfoLabel\"];\r\n            this.setState({errors, encodedInfoLabel: null, infoLabelSelect: \"\",});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when info label text is chagned\r\n     * @param event input event\r\n     * @param editor input editor\r\n     */\r\n    onInfoLabelTextChange = (event, editor) => {\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"infoLabelText\"];\r\n        // update state with new value, no errors and closed alert of created exhibit\r\n        this.setState({infoLabelText: editor.getData(), created: false, errors});\r\n    }\r\n\r\n    /**\r\n     * Called when new exhibit is created\r\n     */\r\n    onClickCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCall: true});\r\n        // extract exhibit from state\r\n        const exhibit = {\r\n            name: this.state.name,\r\n            infoLabelText: this.state.infoLabelText,\r\n            buildingId: this.state.buildingId,\r\n            roomId: this.state.roomId,\r\n            showcaseId: this.state.showcaseId,\r\n            encodedImage: this.state.encodedImage,\r\n            encodedInfoLabel: this.state.encodedInfoLabel,\r\n        }\r\n\r\n        // send new exhibit to server\r\n        apiCalls.addExhibit(exhibit).then(response => {\r\n            let currBuildingId = this.state.buildingId;\r\n            let currRoomId = this.state.roomId;\r\n            let currShowcaseId = this.state.showcaseId;\r\n            this.setState({...this.initState}, () => this.setState({created: true, buildingId: currBuildingId, roomId: currRoomId, showcaseId: currShowcaseId}));\r\n        }).catch(error => {\r\n            // react on unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // react on errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCall: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * updates new info about selected building, room and showcase\r\n     * @param buildingId building id\r\n     * @param roomId room id\r\n     * @param showcaseId showcase id\r\n     */\r\n    updateLocation = (buildingId, roomId, showcaseId) => {\r\n        this.setState({buildingId, roomId, showcaseId});\r\n    }\r\n\r\n    /**\r\n     * renders page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            infoLabelText,\r\n            encodedImage,\r\n            imageSelect,\r\n            encodedInfoLabel,\r\n            infoLabelSelect,\r\n            pendingApiCall,\r\n            created,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // define disable submit value\r\n        let disabledSubmit = false;\r\n        if (name === \"\" || encodedInfoLabel === null) {\r\n            disabledSubmit = true;\r\n        }\r\n\r\n        // return page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <li className=\"breadcrumb-item active\">New Exhibit</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"New Exhibit\">Add a new exhibit with an information label for translation</PageInfo>\r\n\r\n                <form>\r\n\r\n                    {\r\n                        created &&\r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            Exhibit has been created\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"form-group\">\r\n                        <Input type=\"file\"\r\n                               onlyImage\r\n                               value={imageSelect}\r\n                               name=\"imageSelect\"\r\n                               label=\"Exhibit image\"\r\n                               placeholder=\"Select exhibit image\"\r\n                               onChange={this.onImageSelect}\r\n                               hasError={errors.encodedImage && true}\r\n                               error={errors.encodedImage}\r\n                        />\r\n\r\n                        {\r\n                            encodedImage &&\r\n                            <div>\r\n                                <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={encodedImage} alt=\"upload\" />\r\n                                <br />\r\n                                <button className=\"btn btn-danger btn-lg mt-2\" onClick={() => this.clearImage(\"imageSelect\")}>\r\n                                    <i className=\"fa fa-times\" /> Clear\r\n                                </button>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input type=\"file\"\r\n                               onlyImage\r\n                               value={infoLabelSelect}\r\n                               name=\"infoLabelSelect\"\r\n                               label=\"Information label*\"\r\n                               placeholder=\"Select information label\"\r\n                               onChange={this.onImageSelect}\r\n                               hasError={errors.encodedInfoLabel && true}\r\n                               error={errors.encodedInfoLabel}\r\n                        />\r\n\r\n                        {\r\n                            encodedInfoLabel &&\r\n                            <div>\r\n                                <img className=\"img-fluid mt-2\" src={encodedInfoLabel} alt=\"upload\" />\r\n                                <br />\r\n                                <button className=\"btn btn-danger btn-lg mt-2\" onClick={() => this.clearImage(\"infoLabelSelect\")}>\r\n                                    <i className=\"fa fa-times\" /> Clear\r\n                                </button>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name*\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label className=\"font-weight-bold\">Information label text</label>\r\n                        <CKEditor editor={ClassicEditor}\r\n                                  config={{removePlugins: ['Table', 'CKFinder', 'Link', 'TableToolbar', 'EasyImage', 'MediaEmbed', 'ImageCaption', 'ImageStyle', 'ImageToolbar', 'ImageUpload']}}\r\n                                  data={infoLabelText} onChange={this.onInfoLabelTextChange}/>\r\n                        {\r\n                            errors.infoLabelText &&\r\n                            <div className=\"text-danger\">\r\n                                <small>{errors.infoLabelText}</small>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <LocationPicker update={this.updateLocation} />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onClickCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCall || disabledSubmit}\r\n                                         pendingApiCall={pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> New exhibit\r\n                    </ButtonWithProgress>\r\n\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddExhibitPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {EXHIBITS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing exhibit of user's institution\r\n * @param props props\r\n */\r\nconst MyExhibitCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-xl-3\">\r\n                    <img className=\"img-fluid sizedImg img-thumbnail\" src={EXHIBITS_IMAGES_URL + props.image} alt=\"exhibit\" />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-8 col-xl-6 mt-3 mt-xl-0\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Creation date: </span>\r\n                        {props.createdAt}\r\n                    </div>\r\n\r\n                    {\r\n                        props.building &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Building: </span>\r\n                            {props.building.name}\r\n                        </div>\r\n                    }\r\n\r\n                    {\r\n                        props.room &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Room: </span>\r\n                            {props.room.name}\r\n                        </div>\r\n                    }\r\n\r\n                    {\r\n                        props.showcase &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Show-case: </span>\r\n                            {props.showcase.name}\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-4 col-xl-3 mt-3 mt-xl-0\">\r\n                    <Link exact to={\"/myInstitution/exhibits/\" + props.exhibitId} >\r\n                        <button type=\"button\" className=\"btn btn-info w-100\">\r\n                            <i className=\"fa fa-pencil\" /> Detail\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <button type=\"button\" className=\"btn btn-secondary w-100 mt-2\" onClick={() => props.onClickDownloadQRCode(props.exhibitId)}>\r\n                        <i className=\"fa fa-qrcode\" /> QR Code\r\n                    </button>\r\n                    <br />\r\n\r\n                    <ButtonWithProgress  onClick={() => props.onClickDelete(props.exhibitId)}\r\n                                         className=\"btn btn-danger w-100 mt-2\"\r\n                                         disabled={props.pendingApiCall}\r\n                                         pendingApiCall={props.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-times\" /> Delete\r\n                    </ButtonWithProgress>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default MyExhibitCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport MyExhibitCard from \"../components/MyExhibitCard\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page with all exhibits of an institution that user is managing\r\n */\r\nclass MyInstitutionExhibitsPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        exhibits: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * Called when user wants to delete exhibit\r\n     * @param exhibitId exhibit id\r\n     */\r\n    onClickDelete = (exhibitId) => {\r\n        // ask before delete\r\n        if(window.confirm(\"Do you really want to delete this exhibit?\")) {\r\n            // update api call for given exhibit\r\n            let newExhibits = [];\r\n            const {exhibits} = this.state;\r\n            for (let ex of exhibits) {\r\n                if(ex.exhibitId === exhibitId) {\r\n                    // set api call to true for deleted exhibit\r\n                    newExhibits.push({...ex, pendingApiCall: true});\r\n                }\r\n                else {\r\n                    newExhibits.push({...ex});\r\n                }\r\n            }\r\n            this.setState({exhibits: newExhibits});\r\n\r\n            // send delete message to server\r\n            apiCalls.deleteExhibit(exhibitId).then(response => {\r\n                newExhibits = [...this.state.exhibits];\r\n                newExhibits = newExhibits.filter(ex => ex.exhibitId !== exhibitId);\r\n\r\n                // if delete was successful update state\r\n                this.setState({exhibits: newExhibits});\r\n            }).catch(error => {\r\n                // handle unauthorized error\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch all institution exhibits from server\r\n        apiCalls.getAllExhibitsOfMyInstitution().then(response => {\r\n            const exhibits = response.data;\r\n            // set default properties for fetched exhibits\r\n            for(let ex of exhibits) {\r\n                ex.pendingApiCall = false;\r\n                ex.onClickDelete = this.onClickDelete;\r\n            }\r\n            this.setState({exhibits, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Called when user wants to download QR code for exhibit\r\n     * @param exhibitId\r\n     */\r\n    onClickDownloadQRCode = exhibitId => {\r\n        // download QR code from server\r\n        apiCalls.getQRCode(exhibitId).then(response => {\r\n            // create anchor with given image to start downloading\r\n            let encodedImage = response.data;\r\n            let a = document.createElement(\"a\");\r\n            a.href = \"data:image/png;base64,\" + encodedImage;\r\n            a.download = exhibitId + \".png\";\r\n            a.click();\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders page with institution exhibits\r\n     * @returns {JSX.Element} page with institution exhibits\r\n     */\r\n    render() {\r\n\r\n        // maps exhibits to exhibit cards\r\n        const exhibits = this.state.exhibits.map(ex =>\r\n            <MyExhibitCard key={ex.exhibitId} {...ex} onClickDownloadQRCode={this.onClickDownloadQRCode} />\r\n        );\r\n\r\n        // define page content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.exhibits.length === 0 ? <NoContentMessage text=\"There are no exhibits\"/> : exhibits;\r\n        }\r\n\r\n        // renders page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <li className=\"breadcrumb-item active\">Exhibits</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Exhibits\">Here you can manage exhibits and obtain their QR codes, which you can place in the exhibition</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MyInstitutionExhibitsPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport Input from \"../components/Input\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport {EXHIBITS_IMAGES_URL, INFO_LABELS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport {CKEditor} from \"@ckeditor/ckeditor5-react\";\r\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\r\nimport LocationPicker from \"../components/LocationPicker\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for updating exhibit\r\n */\r\nclass UpdateExhibitPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        exhibitId: 0,\r\n        name: \"\",\r\n        infoLabelText: \"\",\r\n        buildingId: null,\r\n        roomId: null,\r\n        showcaseId: null,\r\n        createdAt: \"\",\r\n        image: \"\",\r\n        encodedImage: null,\r\n        imageSelect: \"\",\r\n        infoLabel: null,\r\n        encodedInfoLabel: null,\r\n        infoLabelSelect: \"\",\r\n        pendingApiCallGetInstitution: false,\r\n        pendingApiCallUpdateInstitution: false,\r\n        pendingApiCallUpdateImage: false,\r\n        pendingApiCallUpdateInfoLabel: false,\r\n        exhibitUpdated: false,\r\n        imageUpdated: false,\r\n        infoLabelUpdated: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallGetInstitution: true})\r\n        // get exhibit info from server\r\n        apiCalls.getExhibit(this.props.match.params.exhibitId).then(response => {\r\n            const buildingId = response.data.building ? response.data.building.buildingId : null;\r\n            const roomId = response.data.room ? response.data.room.roomId : null;\r\n            const showcaseId = response.data.showcase ? response.data.showcase.showcaseId : null;\r\n            this.setState({...response.data, pendingApiCallGetInstitution: false, buildingId, roomId, showcaseId});\r\n        }).catch(error => {\r\n            // handle unauthenticated state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when image is selected\r\n     * @param event input event\r\n     * @param encoded encoded image prop name\r\n     * @param updated updated prop name\r\n     */\r\n    onImageSelect = (event, encoded, updated) => {\r\n        const errors = {...this.state.errors};\r\n        delete errors[encoded];\r\n        // update value in state and remove errors\r\n        this.setState({errors, [event.target.name]: event.target.value, [updated]: false});\r\n        if (event.target.files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const file = event.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onloadend = () => {\r\n            // set base64 encoded image to state\r\n            this.setState({[encoded]: reader.result});\r\n        }\r\n        // read image\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    /**\r\n     * clears image from state\r\n     * @param encode encoded image prop name\r\n     * @param select select image prop name\r\n     */\r\n    clearImage = (encode, select) => {\r\n        const errors = {...this.state.errors};\r\n        delete errors[encode];\r\n        // clear image fields and delete errors\r\n        this.setState({errors, [encode]: null, [select]: \"\"});\r\n    }\r\n\r\n    /**\r\n     * called when user submit exhibit image to be updated\r\n     */\r\n    onClickImageUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdateImage: true});\r\n        const img = { encodedImage: this.state.encodedImage }\r\n\r\n        // send request to server to update exhibit image\r\n        apiCalls.updateExhibitImage(this.state.exhibitId, img).then(response => {\r\n            this.setState({pendingApiCallUpdateImage: false, image: response.data.message, imageUpdated: true}, () => {\r\n                this.clearImage(\"encodedImage\", \"imageSelect\");\r\n            });\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle user input errors\r\n            this.handleApiError(apiError, \"pendingApiCallUpdateImage\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * handles error from http requests\r\n     * @param apiError error from request\r\n     * @param apiCall name of api call\r\n     */\r\n    handleApiError = (apiError, apiCall) => {\r\n        if (apiError.response.data && apiError.response.data.validationErrors) {\r\n            // define new page errors\r\n            let errors = {\r\n                ...this.state.errors,\r\n                ...apiError.response.data.validationErrors\r\n            };\r\n            // set errors in state\r\n            this.setState({\r\n                [apiCall]: false,\r\n                errors\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when user submits new exhibit info label image\r\n     */\r\n    onClickInfoImageUpdate = () => {\r\n        this.setState({pendingApiCallUpdateInfoLabel: true});\r\n        const img = { encodedImage: this.state.encodedInfoLabel }\r\n\r\n        // send updated info label to server\r\n        apiCalls.updateExhibitInfoLabelImage(this.state.exhibitId, img).then(response => {\r\n            this.setState({pendingApiCallUpdateInfoLabel: false, infoLabel: response.data.message, infoLabelUpdated: true}, () => {\r\n                this.clearImage(\"encodedInfoLabel\", \"infoLabelSelect\");\r\n            });\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle error from user input\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                let errors = {\r\n                    ...this.state.errors,\r\n                };\r\n                errors.encodedInfoLabel = apiError.response.data.validationErrors.encodedImage;\r\n                this.setState({pendingApiCallUpdateInfoLabel: false, errors});\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // set deleted errors and set value\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        this.setState({errors, [event.target.name]: event.target.value, exhibitUpdated: false});\r\n    }\r\n\r\n    /**\r\n     * called when value in info text editor is changed\r\n     * @param event input event\r\n     * @param editor ck editor\r\n     */\r\n    onInfoLabelTextChange = (event, editor) => {\r\n        // change value and delete errors\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"infoLabelText\"];\r\n        this.setState({infoLabelText: editor.getData(), exhibitUpdated: false, errors});\r\n    }\r\n\r\n    /**\r\n     * called when user wants to update info abou exhibit\r\n     */\r\n    onClickExhibitUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdateInstitution: true});\r\n        // extract exhibit from state\r\n        const exhibit = {\r\n            name: this.state.name,\r\n            infoLabelText: this.state.infoLabelText,\r\n            buildingId: this.state.buildingId,\r\n            roomId: this.state.roomId,\r\n            showcaseId: this.state.showcaseId,\r\n        }\r\n\r\n        // send update exhibit request to server\r\n        apiCalls.updateExhibit(this.state.exhibitId, exhibit).then(response => {\r\n            this.setState({exhibitUpdated: true, pendingApiCallUpdateInstitution: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle error in user input\r\n            this.handleApiError(apiError, \"pendingApiCallUpdateInstitution\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * updates new info about selected building, room and showcase\r\n     * @param buildingId building id\r\n     * @param roomId room id\r\n     * @param showcaseId showcase id\r\n     */\r\n    updateLocation = (buildingId, roomId, showcaseId) => {\r\n        this.setState({buildingId, roomId, showcaseId});\r\n    }\r\n\r\n    /**\r\n     * renders exhibit update page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            infoLabelText,\r\n            buildingId,\r\n            roomId,\r\n            showcaseId,\r\n            image,\r\n            encodedImage,\r\n            imageSelect,\r\n            infoLabel,\r\n            encodedInfoLabel,\r\n            infoLabelSelect,\r\n            pendingApiCallGetInstitution,\r\n            pendingApiCallUpdateInstitution,\r\n            pendingApiCallUpdateImage,\r\n            pendingApiCallUpdateInfoLabel,\r\n            exhibitUpdated,\r\n            imageUpdated,\r\n            infoLabelUpdated,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // define content\r\n        let content = <Spinner />;\r\n        if(!pendingApiCallGetInstitution) {\r\n            content = (\r\n                <div>\r\n                    <form className=\"mb-4\">\r\n                        {\r\n                            imageUpdated &&\r\n                            <div className=\"alert alert-success\" role=\"alert\">\r\n                                Exhibit image updated\r\n                            </div>\r\n                        }\r\n\r\n                        <div className=\"form-group\">\r\n                            <Input type=\"file\"\r\n                                   onlyImage\r\n                                   value={imageSelect}\r\n                                   name=\"imageSelect\"\r\n                                   label=\"Exhibit image\"\r\n                                   placeholder=\"Select exhibit image\"\r\n                                   onChange={(event) => this.onImageSelect(event, \"encodedImage\", \"imageUpdated\")}\r\n                                   hasError={errors.encodedImage && true}\r\n                                   error={errors.encodedImage}\r\n                            />\r\n\r\n                            {\r\n                                encodedImage ?\r\n                                    <div>\r\n                                        <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={encodedImage} alt=\"upload\" />\r\n                                        <br />\r\n                                        <button className=\"btn btn-danger btn-lg mt-2\" disabled={pendingApiCallUpdateImage} onClick={() => this.clearImage(\"encodedImage\", \"imageSelect\")}>\r\n                                            <i className=\"fa fa-times\" /> Clear\r\n                                        </button>\r\n                                        <ButtonWithProgress onClick={(e) => this.onClickImageUpdate(e)}\r\n                                                            className=\"btn btn-success btn-lg ml-2 mt-2\"\r\n                                                            disabled={pendingApiCallUpdateImage}\r\n                                                            pendingApiCall={pendingApiCallUpdateImage}\r\n                                                            hasChildren>\r\n                                            <i className=\"fa fa-paper-plane\" /> Update image\r\n                                        </ButtonWithProgress>\r\n                                    </div>\r\n                                    :\r\n                                    <div>\r\n                                        <img className=\"img-fluid sizedImg img-thumbnail mt-2\" src={EXHIBITS_IMAGES_URL + image} alt=\"upload\" />\r\n                                    </div>\r\n                            }\r\n                        </div>\r\n                    </form>\r\n\r\n                    <form className=\"mb-4\">\r\n                        {\r\n                            infoLabelUpdated &&\r\n                            <div className=\"alert alert-success\" role=\"alert\">\r\n                                Information label image updated\r\n                            </div>\r\n                        }\r\n\r\n                        <div className=\"form-group\">\r\n                            <Input type=\"file\"\r\n                                   onlyImage\r\n                                   value={infoLabelSelect}\r\n                                   name=\"infoLabelSelect\"\r\n                                   label=\"Information label image\"\r\n                                   placeholder=\"Select information label image\"\r\n                                   onChange={(event) => this.onImageSelect(event, \"encodedInfoLabel\", \"infoLabelUpdated\")}\r\n                                   hasError={errors.encodedInfoLabel && true}\r\n                                   error={errors.encodedInfoLabel}\r\n                            />\r\n\r\n                            {\r\n                                encodedInfoLabel ?\r\n                                    <div>\r\n                                        <img className=\"img-fluid mt-2\" src={encodedInfoLabel} alt=\"upload\" />\r\n                                        <br />\r\n                                        <button className=\"btn btn-danger btn-lg mt-2\" disabled={pendingApiCallUpdateInfoLabel} onClick={() => this.clearImage(\"encodedInfoLabel\", \"infoLabelSelect\")}>\r\n                                            <i className=\"fa fa-times\" /> Clear\r\n                                        </button>\r\n                                        <ButtonWithProgress onClick={(event) => {event.preventDefault(); this.onClickInfoImageUpdate();}}\r\n                                                            className=\"btn btn-success btn-lg ml-2 mt-2\"\r\n                                                            disabled={pendingApiCallUpdateImage}\r\n                                                            pendingApiCall={pendingApiCallUpdateImage}\r\n                                                            hasChildren>\r\n                                            <i className=\"fa fa-paper-plane\" /> Update information label image\r\n                                        </ButtonWithProgress>\r\n                                    </div>\r\n                                    :\r\n                                    <div>\r\n                                        <img className=\"img-fluid mt-2\" src={INFO_LABELS_IMAGES_URL + infoLabel} alt=\"upload\" />\r\n                                    </div>\r\n                            }\r\n                        </div>\r\n                    </form>\r\n\r\n                    <form className=\"mb-4\">\r\n                        {\r\n                            exhibitUpdated &&\r\n                            <div className=\"alert alert-success\" role=\"alert\">\r\n                                Exhibit information updated\r\n                            </div>\r\n                        }\r\n\r\n                        <div className=\"form-group\">\r\n                            <Input\r\n                                label=\"Name\"\r\n                                placeholder=\"Enter name\" name=\"name\" value={name}\r\n                                onChange={this.onChange}\r\n                                hasError={errors.name && true}\r\n                                error={errors.name}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label className=\"font-weight-bold\">Information label text</label>\r\n                            <CKEditor editor={ClassicEditor}\r\n                                      config={{removePlugins: ['Table', 'CKFinder', 'Link', 'TableToolbar', 'EasyImage', 'MediaEmbed', 'ImageCaption', 'ImageStyle', 'ImageToolbar', 'ImageUpload']}}\r\n                                      data={infoLabelText} onChange={this.onInfoLabelTextChange}/>\r\n                            {\r\n                                errors.infoLabelText &&\r\n                                <div className=\"text-danger\">\r\n                                    <small>{errors.infoLabelText}</small>\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <LocationPicker update={this.updateLocation} buildingId={buildingId} roomId={roomId} showcaseId={showcaseId} />\r\n                        </div>\r\n\r\n                        <ButtonWithProgress  onClick={(e) => this.onClickExhibitUpdate(e)}\r\n                                             className=\"btn btn-primary w-100 my-2\"\r\n                                             disabled={pendingApiCallUpdateInstitution || name === \"\"}\r\n                                             pendingApiCall={pendingApiCallUpdateInstitution}\r\n                                             hasChildren>\r\n                            <i className=\"fa fa-paper-plane\" /> Update exhibit\r\n                        </ButtonWithProgress>\r\n                    </form>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <BreadcrumbsLink to=\"/myInstitution/exhibits\" name=\"Exhibits\"/>\r\n                    <li className=\"breadcrumb-item active\">Exhibit</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Exhibit\">Here you can view and update the selected exhibit</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UpdateExhibitPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {INSTITUTIONS_IMAGES_URL} from \"../shared/sharedConstants\";\r\n\r\n/**\r\n * card for listing institutions\r\n * @param props props\r\n */\r\nconst InstitutinCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-xl-3\">\r\n                    <img className=\"img-fluid sizedImg img-thumbnail\" src={INSTITUTIONS_IMAGES_URL + props.image} alt=\"institution\" />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-8 col-xl-6\">\r\n                    <h3 className=\"card-title mt-3 mt-xl-0\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Address: </span>\r\n                        {props.address}\r\n                    </div>\r\n\r\n                    <div className=\"mt-2\">\r\n                        {props.description}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-4 col-xl-3\">\r\n                    <Link exact to={\"/institutions/\" + props.institutionId}>\r\n                        <button type=\"button\" className=\"btn btn-info btn-lg w-100 mt-3 mt-xl-0\">\r\n                            <i className=\"fa fa-bars\" /> Exhibits\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default InstitutinCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport InstitutionCard from \"../components/InstitutionCard\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page of all registered institutions for translators to choose\r\n */\r\nclass TranslateInstitutionsPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        institutions: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * called when page is moutned\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch institutions from the server\r\n        apiCalls.getAllInstitutions().then(response => {\r\n            this.setState({institutions: response.data, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders institutions page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map institutions to institution cards\r\n        const institutions = this.state.institutions.map(i =>\r\n            <InstitutionCard key={i.institutionId} {...i} />\r\n        );\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.institutions.length === 0 ? <NoContentMessage text=\"There are no institutions\"/> : institutions;\r\n        }\r\n\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <li className=\"breadcrumb-item active\">Translate - Institutions</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Institutions\">Choose the institution whose information labels you want to translate</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TranslateInstitutionsPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {EXHIBITS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport Select from \"react-select\";\r\n\r\n/**\r\n * card for listing exhibits for translating\r\n * @param props props\r\n */\r\nconst TranslateExhibitCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-xl-3\">\r\n                    <img className=\"img-fluid sizedImg img-thumbnail\" src={EXHIBITS_IMAGES_URL + props.image} alt=\"exhibit\" />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-8 col-xl-6\">\r\n                    <h3 className=\"card-title mt-3 mt-xl-0\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div className=\"mb-3 mt-4\">\r\n                        <Select options={props.languages.map(lan => {return {value: lan.languageId, label: lan.name};})}\r\n                                onChange={(event) => props.selectLang(props.exhibitId, event.value)} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-4 col-xl-3 mt-3 mt-xl-0\">\r\n                    <Link exact to={\"/institutions/\" + props.institutionId + \"/translate/\" + props.exhibitId + \"/\" + props.lang} className={props.buttonsDisabled && \"disabled-link\"}>\r\n                        <button type=\"button\" disabled={props.buttonsDisabled} className=\"btn btn-info btn-lg w-100\">\r\n                            <i className=\"fa fa-globe\" /> Translate\r\n                        </button>\r\n                    </Link>\r\n\r\n                    <Link exact to={\"/institutions/\" + props.institutionId + \"/rate/\" + props.exhibitId + \"/\" + props.lang} className={props.buttonsDisabled && \"disabled-link\"}>\r\n                        <button type=\"button\" disabled={props.buttonsDisabled} className=\"btn btn-primary mt-3 btn-lg w-100\">\r\n                            <i className=\"fa fa-thumbs-up\" /> Rate\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default TranslateExhibitCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport TranslateExhibitCard from \"../components/TranslateExhibitCard\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page containing exhibits to translate in allowed languages\r\n */\r\nclass TranslateExhibitPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        languages: [],\r\n        exhibits: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch exhibits and languages from server\r\n        apiCalls.getExhibitsTranslate(this.props.match.params.institutionId).then(response => {\r\n            let languages = response.data.languages;\r\n\r\n            // add default props to exhibits\r\n            let exhibits = response.data.exhibits;\r\n            for(let ex of exhibits) {\r\n                ex.buttonsDisabled = true;\r\n                ex.lang = -1;\r\n                ex.selectLang = this.selectLang;\r\n            }\r\n\r\n            this.setState({languages, exhibits, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Called when user selects language\r\n     * @param exhibitId exhibit id\r\n     * @param languageId language id\r\n     */\r\n    selectLang = (exhibitId, languageId) => {\r\n        let exhibits = [];\r\n        // update selected language for given exhibit in state\r\n        for(let ex of this.state.exhibits) {\r\n            if(ex.exhibitId !== exhibitId) {\r\n                exhibits.push(ex);\r\n            }\r\n            else {\r\n                // change language to value from param\r\n                exhibits.push({...ex, lang: languageId, buttonsDisabled: false});\r\n            }\r\n        }\r\n        this.setState({exhibits});\r\n    }\r\n\r\n    /**\r\n     * renders page with exhibits to translate to allowed languages\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map exhibits to translate exhibits cards\r\n        const exhibits = this.state.exhibits.map(ex =>\r\n            <TranslateExhibitCard key={ex.exhibitId} {...ex} languages={this.state.languages} institutionId={this.props.match.params.institutionId} />\r\n        );\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.exhibits.length === 0 ? <NoContentMessage text=\"There are no exhibits\"/>: exhibits;\r\n        }\r\n\r\n        // render pge\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/institutions\" name=\"Translate - Institutions\"/>\r\n                    <li className=\"breadcrumb-item active\">Exhibits</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Exhibits\">After selecting an exhibit and a language, you can start translating or rating translations</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TranslateExhibitPage;","import React from 'react';\r\n\r\n/**\r\n * Card for showing selected exhibit and language\r\n * @param props props\r\n */\r\nfunction ExhibitLanguageCard(props) {\r\n    return (\r\n        <div className=\"alert alert-info text-center mb-3\">\r\n            <h4 className=\"alert-heading\">{props.exhibitName}</h4>\r\n            <hr />\r\n            <p className=\"mb-0\">\r\n                <span className=\"font-weight-bold\">Language: </span>\r\n                {props.languageName}\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ExhibitLanguageCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport {INFO_LABELS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport parse from 'html-react-parser';\r\nimport {CKEditor} from \"@ckeditor/ckeditor5-react\";\r\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\r\nimport DOMPurify from 'dompurify';\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\nimport ExhibitLanguageCard from \"../components/ExhibitLanguageCard\";\r\n\r\n/**\r\n * page for creating new translations\r\n */\r\nclass NewTranslationPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        institutionId: this.props.match.params.institutionId,\r\n        exhibitId: this.props.match.params.exhibitId,\r\n        languageId: this.props.match.params.languageId,\r\n        exhibitName: \"\",\r\n        languageName: \"\",\r\n        infoLabelText: \"\",\r\n        infoLabel: null,\r\n        text: \"\",\r\n        pendingApiCallGetNewTranslation: false,\r\n        pendingApiCallCreateTranslation: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallGetNewTranslation: true})\r\n        // fetch translation details from the server\r\n        apiCalls.getNewTranslation(this.state.exhibitId, this.state.languageId).then(response => {\r\n            // set fetched details to page state\r\n            const {exhibitName, infoLabelText, infoLabel, text, languageName} = response.data;\r\n            this.setState({exhibitName, infoLabelText, infoLabel, text, languageName, pendingApiCallGetNewTranslation: false});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when translation is submitted\r\n     */\r\n    onTranslationCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallCreateTranslation: true});\r\n\r\n        // send translation to server\r\n        apiCalls.saveNewTranslation(this.state.exhibitId, this.state.languageId, {text: this.state.text}).then(response => {\r\n            this.setState({pendingApiCallCreateTranslation: false}, () => this.props.history.push(\"/institutions/\" + this.state.institutionId));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCallCreateTranslation: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called on value change in text editor\r\n     * @param event event\r\n     * @param editor ck editor\r\n     */\r\n    onTextChange = (event, editor) => {\r\n        // set value from editor to state\r\n        const errors = {...this.state.errors};\r\n        delete errors[\"text\"];\r\n        this.setState({text: editor.getData(), errors});\r\n    }\r\n\r\n    /**\r\n     * render new translation page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            institutionId,\r\n            exhibitName,\r\n            languageName,\r\n            infoLabelText,\r\n            infoLabel,\r\n            text,\r\n            pendingApiCallGetNewTranslation,\r\n            pendingApiCallCreateTranslation,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // return spinner if api call is processing\r\n        if (pendingApiCallGetNewTranslation) {\r\n            return (\r\n                <PageContentContainer>\r\n                    <Spinner />\r\n                </PageContentContainer>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/institutions\" name=\"Translate - Institutions\"/>\r\n                    <BreadcrumbsLink to={\"/institutions/\" + institutionId} name=\"Exhibits\"/>\r\n                    <li className=\"breadcrumb-item active\">New Translation</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"New Translation\">Create a new translation based on the information label</PageInfo>\r\n                <ExhibitLanguageCard exhibitName={exhibitName} languageName={languageName} />\r\n\r\n                <div className=\"text-center\">\r\n                    <img className=\"img-fluid mt-2\" src={INFO_LABELS_IMAGES_URL + infoLabel} alt=\"information label\" />\r\n                </div>\r\n\r\n                {\r\n                    (infoLabelText !== \"\") &&\r\n                    <div className=\"mt-4 bg-light border rounded p-2\">\r\n                        {parse(DOMPurify.sanitize(infoLabelText))}\r\n                    </div>\r\n                }\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"font-weight-bold\">Translated text</label>\r\n                        <CKEditor editor={ClassicEditor}\r\n                                  config={{removePlugins: ['Table', 'CKFinder', 'Link', 'TableToolbar', 'EasyImage', 'MediaEmbed', 'ImageCaption', 'ImageStyle', 'ImageToolbar', 'ImageUpload']}}\r\n                                  data={text} onChange={this.onTextChange}/>\r\n                        {\r\n                            errors.text &&\r\n                            <div className=\"text-danger\">\r\n                                <small>{errors.text}</small>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onTranslationCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallCreateTranslation || text === \"\"}\r\n                                         pendingApiCall={pendingApiCallCreateTranslation}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create translation\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default NewTranslationPage;","import React from 'react';\r\nimport parse from \"html-react-parser\";\r\nimport DOMPurify from 'dompurify';\r\n\r\n/**\r\n * card for listing translations to rate\r\n * @param props props\r\n */\r\nconst TranslatorRateTranslationCard = (props) => {\r\n    let cardStyle = \"card mb-4\"\r\n    if(props.isOfficial) {\r\n        cardStyle += \" bg-warning\";\r\n    }\r\n\r\n    let btnClass = \"btn btn-primary\";\r\n    if(!props.liked) {\r\n        btnClass = \"btn btn-secondary\";\r\n    }\r\n\r\n    return (\r\n        <div className={cardStyle}>\r\n            <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <h5>\r\n                            {props.authorUsername}\r\n                        </h5>\r\n                        <p>{props.createdAt}</p>\r\n                        {\r\n                            props.isOfficial &&\r\n                            <span className=\"font-weight-bold\">official</span>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"bg-light border rounded p-2\">\r\n                            {parse(DOMPurify.sanitize(props.translatedText))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-md-2\">\r\n                        <div className=\"d-flex justify-content-between mt-md-0 mt-3\">\r\n                            <div className=\"text-info mt-1\">\r\n                                <i className=\"fa fa-thumbs-up\" /> {props.likesCount + \"x\"}\r\n                            </div>\r\n\r\n                            <button onClick={() => props.onLikeChange(props.translationId)} type=\"button\" className={btnClass}>\r\n                                {\r\n                                    props.liked ?\r\n                                        <i className=\"fa fa-thumbs-up\" />\r\n                                        :\r\n                                        <i className=\"fa fa-thumbs-o-up\" />\r\n                                }\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TranslatorRateTranslationCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport {INFO_LABELS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport parse from \"html-react-parser\";\r\nimport TranslatorRateTranslationCard from \"../components/TranslatorRateTranslationCard\";\r\nimport DOMPurify from 'dompurify';\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\nimport ExhibitLanguageCard from \"../components/ExhibitLanguageCard\";\r\n\r\n/**\r\n * page for translators to rate translations of pair exhibit-language\r\n */\r\nclass TranslatorRatePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        institutionId: this.props.match.params.institutionId,\r\n        exhibitId: this.props.match.params.exhibitId,\r\n        languageId: this.props.match.params.languageId,\r\n        exhibit: null,\r\n        language: \"\",\r\n        translations: [],\r\n        pendingApiCall: true,\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch translations from server\r\n        apiCalls.getRateOverview(this.state.exhibitId, this.state.languageId).then(response => {\r\n            this.setState({exhibit: response.data.exhibit, language: response.data.language, translations: response.data.translations, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthenticated state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when suer likes/unlikes translation\r\n     * @param translationId translation id\r\n     */\r\n    onLikeChange = translationId => {\r\n        let newTranslations = [];\r\n        const {translations} = this.state;\r\n        let newValue;\r\n        for(let t of translations) {\r\n            if(t.translationId !== translationId) {\r\n                newTranslations.push(t);\r\n            }\r\n            else {\r\n                // set new like value\r\n                newValue = !t.liked;\r\n                if(newValue) {\r\n                    // if value is true increase count likes\r\n                    newTranslations.push({...t, liked: newValue, likesCount: t.likesCount + 1})\r\n                }\r\n                else {\r\n                    // if value is negative decrease count likes\r\n                    newTranslations.push({...t, liked: newValue, likesCount: t.likesCount - 1})\r\n                }\r\n            }\r\n        }\r\n        this.setState({translations: newTranslations});\r\n\r\n        // send request to set like/unlike to server\r\n        apiCalls.setLike(translationId, {value: newValue}).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders page for translators to rate translations of pair exhibit-language\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map translations to translation rate cards\r\n        const translations = this.state.translations.map(t =>\r\n            <TranslatorRateTranslationCard key={t.translationId} {...t} onLikeChange={this.onLikeChange}/>\r\n        );\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            const {name, infoLabel, infoLabelText} = this.state.exhibit;\r\n\r\n            content = (\r\n              <div>\r\n                  <ExhibitLanguageCard exhibitName={name} languageName={this.state.language} />\r\n\r\n                  <div className=\"text-center\">\r\n                      <img className=\"img-fluid mt-2\" src={INFO_LABELS_IMAGES_URL + infoLabel} alt=\"information label\" />\r\n                  </div>\r\n\r\n                  {\r\n                      (infoLabelText !== \"\") &&\r\n                      <div className=\"mt-4 bg-light border rounded p-2\">\r\n                          {parse(DOMPurify.sanitize(infoLabelText))}\r\n                      </div>\r\n                  }\r\n\r\n                  {\r\n                      translations.length === 0 ?\r\n                          <NoContentMessage classes=\"mt-5\" text=\"There are no translations\"/>\r\n                          :\r\n                          <div className=\"mt-3\">\r\n                              <div className=\"text-center mt-5 mb-4 translations-heading py-3 px-5 d-flex flex-column-reverse justify-content-center border rounded\">\r\n                                  <h2>Translations</h2>\r\n                              </div>\r\n                              {translations}\r\n                          </div>\r\n                  }\r\n              </div>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/institutions\" name=\"Translate - Institutions\"/>\r\n                    <BreadcrumbsLink to={\"/institutions/\" + this.state.institutionId} name=\"Exhibits\"/>\r\n                    <li className=\"breadcrumb-item active\">Rate Translations</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Rate Translations\">Here you can give likes to translations that you like best</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TranslatorRatePage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {EXHIBITS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport Select from \"react-select\";\r\n\r\n/**\r\n * card for listing exhibits to approve\r\n * @param props props\r\n */\r\nconst ApproveExhibitCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-xl-3\">\r\n                    <img className=\"img-fluid sizedImg img-thumbnail\" src={EXHIBITS_IMAGES_URL + props.image} alt=\"exhibit\" />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-8 col-xl-6 mt-3 mt-xl-0\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div className=\"mb-3 mt-4\">\r\n                        <Select options={props.languages.map(lan => {return {value: lan.languageId, label: lan.name};})}\r\n                                onChange={(event) => props.selectLang(props.exhibitId, event.value)} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-4 col-xl-3 mt-3 mt-xl-0\">\r\n                    <Link exact to={\"/approve/\" + props.exhibitId + \"/\" + props.lang} className={props.buttonDisabled && \"disabled-link\"}>\r\n                        <button type=\"button\" disabled={props.buttonDisabled} className=\"btn btn-primary btn-lg w-100\">\r\n                            <i className=\"fa fa-star\"/> Approve\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default ApproveExhibitCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport ApproveExhibitCard from \"../components/ApproveExhibitCard\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * Page for rendering exhibits where official text can be set\r\n */\r\nclass ApproveExhibitPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        languages: [],\r\n        exhibits: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * Called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // get exhibits to approve from server\r\n        apiCalls.getExhibitsApproveTranslations().then(response => {\r\n            let languages = response.data.languages;\r\n\r\n            // set default props to fetched exhibits\r\n            let exhibits = response.data.exhibits;\r\n            for(let ex of exhibits) {\r\n                ex.buttonDisabled = true;\r\n                ex.lang = -1;\r\n                ex.selectLang = this.selectLang;\r\n            }\r\n\r\n            this.setState({languages, exhibits, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when language is selected\r\n     * @param exhibitId exhibit id\r\n     * @param languageId language id\r\n     */\r\n    selectLang = (exhibitId, languageId) => {\r\n        let exhibits = [];\r\n        for(let ex of this.state.exhibits) {\r\n            if(ex.exhibitId !== exhibitId) {\r\n                exhibits.push(ex);\r\n            }\r\n            else {\r\n                // set language for exhibit\r\n                exhibits.push({...ex, lang: languageId, buttonDisabled: false});\r\n            }\r\n        }\r\n        // update state\r\n        this.setState({exhibits});\r\n    }\r\n\r\n    /**\r\n     * renders page with exhibits where official text can be set\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map exhibits to its view cards\r\n        const exhibits = this.state.exhibits.map(ex =>\r\n            <ApproveExhibitCard key={ex.exhibitId} {...ex} languages={this.state.languages} />\r\n        );\r\n\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            // if fetching data ended show fetched exhibits or message that there are none\r\n            content = this.state.exhibits.length === 0 ? <NoContentMessage text=\"There are no exhibits\"/> : exhibits;\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <li className=\"breadcrumb-item active\">Approve - Exhibits</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Exhibits\">After selecting an exhibit and a language, you will be able to select an official translation that will be displayed in the mobile application</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ApproveExhibitPage;","import React from 'react';\r\nimport parse from \"html-react-parser\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\nimport DOMPurify from 'dompurify';\r\n\r\n/**\r\n * card for listing translations to rate and set official\r\n * @param props props\r\n */\r\nconst OwnerRateTranslationCard = (props) => {\r\n    let cardStyle = \"card mb-4\"\r\n    if(props.isOfficial) {\r\n        cardStyle += \" bg-warning\";\r\n    }\r\n\r\n    let likeBtnClass = \"btn btn-primary\";\r\n    if(!props.liked) {\r\n        likeBtnClass = \"btn btn-secondary\";\r\n    }\r\n\r\n    let officialBtnClass = \"btn btn-success w-100 mt-3\";\r\n    if(!props.isOfficial) {\r\n        officialBtnClass = \"btn btn-secondary w-100 mt-3\";\r\n    }\r\n\r\n    return (\r\n        <div className={cardStyle}>\r\n            <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <h5>\r\n                            {props.authorUsername}\r\n                        </h5>\r\n                        <p>{props.createdAt}</p>\r\n                        {\r\n                            props.isOfficial &&\r\n                            <span className=\"font-weight-bold\">official</span>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"bg-light border rounded p-2\">\r\n                            {parse(DOMPurify.sanitize(props.translatedText))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-md-2 mt-md-0 mt-3\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                            <div className=\"text-info mt-1\">\r\n                                <i className=\"fa fa-thumbs-up\" /> {props.likesCount + \"x\"}\r\n                            </div>\r\n\r\n                            <button onClick={() => props.onLikeChange(props.translationId)} type=\"button\" className={likeBtnClass}>\r\n                                {\r\n                                    props.liked ?\r\n                                        <i className=\"fa fa-thumbs-up\" />\r\n                                        :\r\n                                        <i className=\"fa fa-thumbs-o-up\" />\r\n                                }\r\n                            </button>\r\n                        </div>\r\n\r\n                        <ButtonWithProgress  onClick={() => props.onOfficialChange(props.translationId)}\r\n                                             className={officialBtnClass}\r\n                                             disabled={props.pendingApiCallSetOfficial}\r\n                                             pendingApiCall={props.pendingApiCallSetOfficial}\r\n                                             hasChildren>\r\n                            {\r\n                                props.isOfficial ?\r\n                                    <div><i className=\"fa fa-star\" /> Official </div>\r\n                                    :\r\n                                    <div><i className=\"fa fa-star-o\" /> Official </div>\r\n                            }\r\n                        </ButtonWithProgress>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OwnerRateTranslationCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport {INFO_LABELS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport parse from \"html-react-parser\";\r\nimport OwnerRateTranslationCard from \"../components/OwnerRateTranslationCard\";\r\nimport DOMPurify from 'dompurify';\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\nimport ExhibitLanguageCard from \"../components/ExhibitLanguageCard\";\r\n\r\n/**\r\n * page for institution owner to pick official translation and like translations\r\n */\r\nclass OwnerRatePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        exhibitId: this.props.match.params.exhibitId,\r\n        languageId: this.props.match.params.languageId,\r\n        exhibit: null,\r\n        language: \"\",\r\n        translations: [],\r\n        pendingApiCall: true,\r\n    }\r\n\r\n    /**\r\n     * called when component is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch translation from server\r\n        apiCalls.getRateOverview(this.state.exhibitId, this.state.languageId).then(response => {\r\n            let translations = response.data.translations;\r\n            for(let t of translations) {\r\n                t.pendingApiCallSetOfficial = false;\r\n            }\r\n\r\n            // update page state with fetched translations\r\n            this.setState({exhibit: response.data.exhibit, language: response.data.language, translations, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when user likes/unlikes translation\r\n     * @param translationId translation id\r\n     */\r\n    onLikeChange = translationId => {\r\n        let newTranslations = [];\r\n        const {translations} = this.state;\r\n        let newValue;\r\n        // set new likes counts and if it is liked for translation that caused the call\r\n        for(let t of translations) {\r\n            if(t.translationId !== translationId) {\r\n                newTranslations.push(t);\r\n            }\r\n            else {\r\n                newValue = !t.liked;\r\n                if(newValue) {\r\n                    newTranslations.push({...t, liked: newValue, likesCount: t.likesCount + 1});\r\n                }\r\n                else {\r\n                    newTranslations.push({...t, liked: newValue, likesCount: t.likesCount - 1});\r\n                }\r\n            }\r\n        }\r\n        // update likes state\r\n        this.setState({translations: newTranslations});\r\n\r\n        // sends request to like/unlike translation to the server\r\n        apiCalls.setLike(translationId, {value: newValue}).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when official translation is changed\r\n     * @param translationId\r\n     */\r\n    onOfficialChange = translationId => {\r\n        let newTranslations = [];\r\n        const {translations} = this.state;\r\n        let newValue;\r\n        // update pending api call for translation that caused this\r\n        for(let t of translations) {\r\n            if(t.translationId !== translationId) {\r\n                newTranslations.push(t);\r\n            }\r\n            else {\r\n                newValue = !t.isOfficial;\r\n                newTranslations.push({...t, pendingApiCallSetOfficial: true});\r\n            }\r\n        }\r\n        this.setState({translations: newTranslations});\r\n\r\n        // send new value of official translation to server\r\n        apiCalls.setOfficial(translationId, {value: newValue}).then(response => {\r\n            // update official translation view\r\n            newTranslations = [];\r\n            const {translations} = this.state;\r\n            for(let t of translations) {\r\n                if(t.translationId !== translationId) {\r\n                    newTranslations.push({...t, isOfficial: false});\r\n                }\r\n                else {\r\n                    newTranslations.push({...t, pendingApiCallSetOfficial: false, isOfficial: newValue});\r\n                }\r\n            }\r\n            // set new state of official translation\r\n            this.setState({translations: newTranslations});\r\n        })\r\n        .catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders owner rate and select official translation page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map translations to rate translation cards\r\n        const translations = this.state.translations.map(t =>\r\n            <OwnerRateTranslationCard key={t.translationId} {...t} onLikeChange={this.onLikeChange} onOfficialChange={this.onOfficialChange}/>\r\n        );\r\n\r\n        let content = <Spinner/>;\r\n        // if there is no pending api call print translations\r\n        if (!this.state.pendingApiCall) {\r\n            const {name, infoLabel, infoLabelText} = this.state.exhibit;\r\n\r\n            content = (\r\n                <div>\r\n                    <ExhibitLanguageCard exhibitName={name} languageName={this.state.language} />\r\n\r\n                    <div className=\"text-center\">\r\n                        <img className=\"img-fluid mt-2\" src={INFO_LABELS_IMAGES_URL + infoLabel} alt=\"information label\" />\r\n                    </div>\r\n\r\n                    {\r\n                        (infoLabelText !== \"\") &&\r\n                        <div className=\"mt-4 bg-light border rounded p-2\">\r\n                            {parse(DOMPurify.sanitize(infoLabelText))}\r\n                        </div>\r\n                    }\r\n\r\n                    {\r\n                        translations.length === 0 ?\r\n                            <NoContentMessage classes=\"mt-5\" text=\"There are no translations\"/>\r\n                            :\r\n                            <div className=\"mt-3\">\r\n                                <div className=\"text-center mt-5 mb-4 translations-heading py-3 px-5 d-flex flex-column-reverse justify-content-center border rounded\">\r\n                                    <h2>Translations</h2>\r\n                                </div>\r\n                                {translations}\r\n                            </div>\r\n                    }\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/approve\" name=\"Approve - Exhibits\"/>\r\n                    <li className=\"breadcrumb-item active\">Approve Translations</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Approve Translations\">Here you can rate translations and select one that will be displayed in the mobile application (official translation)</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default OwnerRatePage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {EXHIBITS_IMAGES_URL} from \"../shared/sharedConstants\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing user's translation sequences\r\n * @param props props\r\n */\r\nconst MyTranslationSequenceCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-xl-3\">\r\n                    <img className=\"img-fluid sizedImg img-thumbnail\" src={EXHIBITS_IMAGES_URL + props.exhibitImage} alt=\"exhibit\" />\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-8 col-xl-6 mt-3 mt-xl-0\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.institutionName}\r\n                    </h3>\r\n\r\n                    <h5>\r\n                        Exhibit: {props.exhibitName}\r\n                    </h5>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Language: </span>\r\n                        {props.language}\r\n                    </div>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Latest activity: </span>\r\n                        {props.latestTranslationCreatedAt}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-12 col-md-4 col-xl-3 mt-3 mt-xl-0\">\r\n                    <Link exact to={\"/myTranslations/\" + props.exhibitId + \"/\" + props.languageId} >\r\n                        <button type=\"button\" className=\"btn btn-info w-100\">\r\n                            <i className=\"fa fa-bars\" /> Open\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <ButtonWithProgress  onClick={() => props.onClickDelete(props.exhibitId, props.languageId)}\r\n                                         className=\"btn btn-danger w-100 mt-2\"\r\n                                         disabled={props.pendingApiCall}\r\n                                         pendingApiCall={props.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-times\" /> Delete\r\n                    </ButtonWithProgress>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default MyTranslationSequenceCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport MyTranslationSequenceCard from \"../components/MyTranslationSequenceCard\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page with translator sequences of translation\r\n */\r\nclass MyTranslationsPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        sequences: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * Called when user wants to delete whole sequence\r\n     * @param exhibitId exhibit id\r\n     * @param languageId language id\r\n     */\r\n    onClickDelete = (exhibitId, languageId) => {\r\n        // ask before deleting sequence\r\n        if(window.confirm(\"Do you really want to delete this translation sequence?\")) {\r\n            // start api call for given deleted sequence\r\n            let newSequences = [];\r\n            const {sequences} = this.state;\r\n            for (let s of sequences) {\r\n                if(s.exhibitId === exhibitId && s.languageId === languageId) {\r\n                    // set pending api call to true for sequence that is deleted\r\n                    newSequences.push({...s, pendingApiCall: true});\r\n                }\r\n                else {\r\n                    newSequences.push(s);\r\n                }\r\n            }\r\n            this.setState({sequences: newSequences});\r\n\r\n            // request to server to delete sequence\r\n            apiCalls.deleteSequence(exhibitId, languageId).then(response => {\r\n                newSequences = [...this.state.sequences];\r\n                newSequences = newSequences.filter(s => s.exhibitId !== exhibitId || s.languageId !== languageId);\r\n\r\n                // update state without sequence\r\n                this.setState({sequences: newSequences});\r\n            }).catch(error => {\r\n                // handles unauthorized state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when pge is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch sequences from server\r\n        apiCalls.getMyTranslationSequences().then(response => {\r\n            const sequences = response.data;\r\n            for(let s of sequences) {\r\n                s.pendingApiCall = false;\r\n                s.onClickDelete = this.onClickDelete;\r\n            }\r\n            // update state with fetched sequences\r\n            this.setState({sequences, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders page with translation sequences\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n\r\n        // map sequences to sequence cards\r\n        const sequences = this.state.sequences.map((s, index) =>\r\n            <MyTranslationSequenceCard key={index} {...s} />\r\n        );\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.sequences.length === 0 ? <NoContentMessage text=\"There are no translation sequences\"/> : sequences;\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <li className=\"breadcrumb-item active\">Translation Sequences</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Translation Sequences\">Here you can manage sequences of translation versions for a given exhibit and language</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MyTranslationsPage;","import React from 'react';\r\nimport parse from \"html-react-parser\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\nimport DOMPurify from 'dompurify';\r\n\r\n/**\r\n * card for listing sequence translations\r\n * @param props props\r\n */\r\nconst MyTranslationCard = (props) => {\r\n    let cardStyle = \"card mb-4\"\r\n    if(props.isOfficial) {\r\n        cardStyle += \" bg-warning\";\r\n    }\r\n\r\n    return (\r\n        <div className={cardStyle}>\r\n            <div className=\"card-body\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <h4>\r\n                            {props.order + \".\"}\r\n                        </h4>\r\n                        <p>{props.createdAt}</p>\r\n                        {\r\n                            props.isOfficial &&\r\n                            <span className=\"font-weight-bold\">official</span>\r\n                        }\r\n                    </div>\r\n\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"bg-light border rounded p-2\">\r\n                            {parse(DOMPurify.sanitize(props.translatedText))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-md-2 mt-md-0 mt-2\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                            <div className=\"text-info mt-1\">\r\n                                <i className=\"fa fa-thumbs-up\" /> {props.likesCount + \"x\"}\r\n                            </div>\r\n                        </div>\r\n                        {\r\n                            props.index !== 0 &&\r\n                            <ButtonWithProgress  onClick={() => props.onRollback(props.translationId, props.index)}\r\n                                                 className=\"btn btn-danger w-100 mt-3 mb-2\"\r\n                                                 disabled={props.pendingApiCall}\r\n                                                 pendingApiCall={props.pendingApiCall}\r\n                                                 hasChildren>\r\n                                <i className=\"fa fa-times\" /> Rollback\r\n                            </ButtonWithProgress>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyTranslationCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport MyTranslationCard from \"../components/MyTranslationCard\";\r\nimport {Link} from \"react-router-dom\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page showing translations of one translation sequence\r\n */\r\nclass TranslationSequencePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        exhibitId: this.props.match.params.exhibitId,\r\n        languageId: this.props.match.params.languageId,\r\n        translations: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * called when user want to rollback to some point in translation sequence\r\n     * @param translationId translation id\r\n     * @param index index of translation\r\n     */\r\n    onRollback = (translationId, index) => {\r\n        // ask before rollback\r\n        if(window.confirm(\"Do you really want to rollback to this translation?\")) {\r\n            let newTranslations = [...this.state.translations];\r\n            newTranslations[index] = {...newTranslations[index], pendingApiCall: true}\r\n            this.setState({translations: newTranslations});\r\n\r\n            // send request to rollback to server\r\n            apiCalls.rollbackTranslation(translationId).then(response => {\r\n                let newTranslations = [...this.state.translations];\r\n                newTranslations[index] = {...newTranslations[index], pendingApiCall: false}\r\n                newTranslations = newTranslations.slice(index);\r\n                // update state with deleted translations\r\n                this.setState({translations: newTranslations});\r\n            }).catch(error => {\r\n                // handle unauthenticated state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch translations of sequence from server\r\n        apiCalls.getMyTranslationSequence(this.state.exhibitId, this.state.languageId).then(response => {\r\n            const translations = response.data;\r\n            for(let t of translations) {\r\n                t.pendingApiCall = false;\r\n                t.onRollback = this.onRollback;\r\n            }\r\n            // set fetched translations to state\r\n            this.setState({translations, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * renders transaltion sequence page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const translationsLength = this.state.translations.length;\r\n\r\n        // map translations to translation cards\r\n        const translations = this.state.translations.map((t, index) =>\r\n            <MyTranslationCard key={index} order={translationsLength - index} index={index} {...t} />\r\n        );\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = translationsLength === 0 ?\r\n                <NoContentMessage text=\"There are no translations\"/>\r\n                :\r\n                <>\r\n                    <Link exact to={\"/institutions/\" + this.state.translations[0].institutionId + \"/translate/\" + this.state.exhibitId + \"/\" + this.state.languageId}>\r\n                        <button type=\"button\" className=\"btn btn-success mb-4 btn-lg\">\r\n                            <i className=\"fa fa-globe\" /> Create New Version\r\n                        </button>\r\n                    </Link>\r\n                    {translations}\r\n                </>\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myTranslations\" name=\"Translation Sequences\"/>\r\n                    <li className=\"breadcrumb-item active\">Translation Sequence</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Translation Sequence\">Here you can view the translation history and also return your active translation to previous versions (rollback)</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TranslationSequencePage;","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n/**\r\n * one row in table representing system user\r\n * @param props props\r\n */\r\nfunction UserManagerRow(props) {\r\n    return (\r\n        <tr>\r\n            <td>{props.username}</td>\r\n            <td>{props.createdAt}</td>\r\n            <td>{props.email}</td>\r\n            <td>\r\n                <Link exact to={\"/users/\" + props.userId}>\r\n                    <button type=\"button\" className=\"btn btn-info w-100\">\r\n                        <i className=\"fa fa-search\" /> Detail\r\n                    </button>\r\n                </Link>\r\n            </td>\r\n        </tr>\r\n    );\r\n}\r\n\r\nexport default UserManagerRow;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport UserManagerRow from \"../components/UserManagerRow\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for managing users\r\n */\r\nclass UserManagerPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        users: [],\r\n        filtered: [],\r\n        pendingApiCall: false,\r\n        search: \"\",\r\n    };\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch users from server\r\n        apiCalls.getUsers().then(response => {\r\n            this.setState({users: response.data, filtered: response.data, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthenticated state\r\n            return handleError(error);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Called when user changes value in search field\r\n     * @param event input event\r\n     */\r\n    onSearchChange = (event) => {\r\n        const value = event.target.value;\r\n        if(this.state.search === \"\") {\r\n            // if search filed is empty show all users\r\n            let filtered = [...this.state.users];\r\n            this.setState({filtered, search: value});\r\n        }\r\n        else {\r\n            // if search field has text filter users\r\n            let filtered = this.state.users.filter(u => u.username.includes(value) || u.email.includes(value));\r\n            this.setState({filtered, search: value});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renders page for user management\r\n     * @returns {JSX.Element}\r\n     */\r\n    render() {\r\n        const {users, pendingApiCall, search, filtered} = this.state;\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!pendingApiCall) {\r\n            content = users.length === 0 ?\r\n                <NoContentMessage text=\"There are no users\"/>\r\n                :\r\n                <>\r\n                    <div className=\"input-group mb-3\">\r\n                        <input type=\"text\" className=\"form-control\" placeholder=\"Search user\" name=\"search\" value={search} onChange={this.onSearchChange} />\r\n                        <div className=\"input-group-append\">\r\n                                <span className=\"input-group-text\">\r\n                                    <i className=\"fa fa-search\" />\r\n                                </span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"table-responsive\">\r\n                        <table className=\"table table-dark table-striped table-bordered table-hover\">\r\n                            <thead className=\"thead-light\">\r\n                            <tr>\r\n                                <th scope=\"col\">Username</th>\r\n                                <th scope=\"col\">Registration date</th>\r\n                                <th scope=\"col\">E-mail</th>\r\n                                <th scope=\"col\">Detail</th>\r\n                            </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n                            {filtered.map(u => <UserManagerRow {...u} />)}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </>\r\n\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <li className=\"breadcrumb-item active\">User Manager</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"User Manager\">Here you can manage users of the translation system</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UserManagerPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport Input from \"../components/Input\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for viewing details about user\r\n */\r\nclass UserDetailPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        userId: this.props.match.params.userId,\r\n        username: \"\",\r\n        email: \"\",\r\n        createdAt: null,\r\n        isBanned: false,\r\n        isTranslator: true,\r\n        isInstitutionOwner: false,\r\n        institutionName: \"\",\r\n        pendingApiCall: true,\r\n        pendingApiCallUsernameUpdate: false,\r\n        pendingApiCallChangePassword: false,\r\n        pendingApiCallTranslator: false,\r\n        pendingApiCallBan: false,\r\n        pendingApiCallRemoveInstitution: false,\r\n        usernameUpdated: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // get user details from server\r\n        apiCalls.getUser(this.state.userId).then(response => {\r\n            const {\r\n                username,\r\n                email,\r\n                createdAt,\r\n                isBanned,\r\n                isTranslator,\r\n                isInstitutionOwner,\r\n                institutionName\r\n            } = response.data;\r\n\r\n            this.setState({username, email, createdAt, isBanned, isTranslator, isInstitutionOwner, institutionName, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * called when text inputs are changed\r\n     * @param event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors and set new value\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        this.setState({errors, usernameUpdated: false, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * handles error from http request\r\n     * @param apiError error\r\n     * @param apiCall api call name\r\n     */\r\n    handleApiError = (apiError, apiCall) => {\r\n        if (apiError.response.data && apiError.response.data.validationErrors) {\r\n            // add errors\r\n            let errors = {\r\n                ...this.state.errors,\r\n                ...apiError.response.data.validationErrors\r\n            };\r\n            this.setState({\r\n                [apiCall]: false,\r\n                errors\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when admin updates username\r\n     */\r\n    onClickUsernameUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUsernameUpdate: true});\r\n\r\n        // send request to server to update username\r\n        apiCalls.adminUpdateUsername(this.state.userId, {username: this.state.username}).then(response => {\r\n            this.setState({pendingApiCallUsernameUpdate: false, usernameUpdated: true});\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle input errors\r\n            this.handleApiError(apiError, \"pendingApiCallUsernameUpdate\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when admin wants to change user's password by sending it to mail\r\n     */\r\n    onPasswordChange = () => {\r\n        const {username, email} = this.state;\r\n        // ask before changing password\r\n        if(window.confirm(\"Do you really want to generate a new password for user \" + username + \" and send it to this e-mail: \" + email)) {\r\n            this.setState({pendingApiCallChangePassword: true});\r\n\r\n            // send request to change password by sending new password to user's mail\r\n            apiCalls.adminChangePassword(this.state.userId).then(response => {\r\n                this.setState({pendingApiCallChangePassword: false});\r\n            }).catch(error => {\r\n                // handle unauthorized state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when admin wants to change user's rights to translate\r\n     */\r\n    onTranslatorChange = () => {\r\n        const {userId, isTranslator} = this.state;\r\n        // ask before changing rights\r\n        if(window.confirm(\"Do you really want to change translation rights?\")) {\r\n            this.setState({pendingApiCallTranslator: true});\r\n\r\n            // send request to server to change user's translation rights\r\n            apiCalls.adminChangeTranslator(userId, {value: !isTranslator}).then(response => {\r\n                this.setState({pendingApiCallTranslator: false, isTranslator: !isTranslator});\r\n            }).catch(error => {\r\n                // handle unauthorized state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when admin wants to change user's ban\r\n     */\r\n    onBanChange = () => {\r\n        const {userId, isBanned} = this.state;\r\n        // ask before changing ban\r\n        if(window.confirm(\"Do you really want to change access rights?\")) {\r\n            this.setState({pendingApiCallBan: true});\r\n\r\n            // send request to change ban of user to server\r\n            apiCalls.adminChangeBan(userId, {value: !isBanned}).then(response => {\r\n                this.setState({pendingApiCallBan: false, isBanned: !isBanned});\r\n            }).catch(error => {\r\n                // handle unauthorized state\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when admin wants to remove institution from user\r\n     */\r\n    onInstitutionRemove = () => {\r\n        // ask before removing institution\r\n        const {userId, institutionName} = this.state;\r\n        if(window.confirm(\"Do you really want to remove managerial rights? It may cause deletion of this institution: \" + institutionName)) {\r\n            this.setState({pendingApiCallRemoveInstitution: true});\r\n\r\n            // send request to server to remove institution management to server\r\n            apiCalls.adminRemoveInstitution(userId).then(response => {\r\n                this.setState({pendingApiCallRemoveInstitution: false, isInstitutionOwner: false, institutionName: \"\"});\r\n            }).catch(error => {\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renders user details page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            username,\r\n            email,\r\n            createdAt,\r\n            isBanned,\r\n            isTranslator,\r\n            isInstitutionOwner,\r\n            institutionName,\r\n            pendingApiCall,\r\n            pendingApiCallUsernameUpdate,\r\n            pendingApiCallChangePassword,\r\n            pendingApiCallTranslator,\r\n            pendingApiCallBan,\r\n            pendingApiCallRemoveInstitution,\r\n            usernameUpdated,\r\n            errors\r\n        } = this.state;\r\n\r\n        // define content\r\n        let content = <Spinner/>;\r\n        if (!pendingApiCall) {\r\n            content =\r\n                <div>\r\n                    <div className=\"mb-4\">\r\n                        <span className=\"font-weight-bold\">Registration date: </span>\r\n                        {createdAt}\r\n                    </div>\r\n\r\n                    <form className=\"mb-4\">\r\n                        {\r\n                            usernameUpdated &&\r\n                            <div className=\"alert alert-success\" role=\"alert\">\r\n                                Username updated\r\n                            </div>\r\n                        }\r\n\r\n                        <div className=\"form-group\">\r\n                            <Input\r\n                                label=\"Username\"\r\n                                placeholder=\"Enter name\" name=\"username\" value={username}\r\n                                onChange={this.onChange}\r\n                                hasError={errors.username && true}\r\n                                error={errors.username}\r\n                            />\r\n                        </div>\r\n\r\n                        <ButtonWithProgress  onClick={(e) => this.onClickUsernameUpdate(e)}\r\n                                             className=\"btn btn-primary w-100 my-2\"\r\n                                             disabled={pendingApiCallUsernameUpdate || username === \"\"}\r\n                                             pendingApiCall={pendingApiCallUsernameUpdate}\r\n                                             hasChildren>\r\n                            <i className=\"fa fa-paper-plane\" /> Update username\r\n                        </ButtonWithProgress>\r\n                    </form>\r\n\r\n                    <div className=\"card thick-top-border border-dark no-rounded thick-side-borders my-rounded-top no-bottom-border\">\r\n                        <div className=\"card-body\">\r\n                            <h5>Password Change</h5>\r\n                            <p>Generate a new password and send it to an e-mail address: <span className=\"font-weight-bold\">{email}</span></p>\r\n                            <ButtonWithProgress  onClick={this.onPasswordChange}\r\n                                                 className=\"btn btn-danger btn-lg my-1\"\r\n                                                 disabled={pendingApiCallChangePassword}\r\n                                                 pendingApiCall={pendingApiCallChangePassword}\r\n                                                 hasChildren>\r\n                                <i className=\"fa fa-key\"/> Generate new password\r\n                            </ButtonWithProgress>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"card thick-side-borders border-dark no-rounded no-bottom-border\">\r\n                        <div className=\"card-body\">\r\n                            <h5>Translation Rights</h5>\r\n                            <p>Change user's right to translate</p>\r\n                            <ButtonWithProgress  onClick={this.onTranslatorChange}\r\n                                                 className={\"btn btn-lg my-1 \" + (isTranslator ? \"btn-primary\" : \"btn-secondary\")}\r\n                                                 disabled={pendingApiCallTranslator}\r\n                                                 pendingApiCall={pendingApiCallTranslator}\r\n                                                 hasChildren>\r\n                                <i className=\"fa fa-globe\"/> {isTranslator ? \"Translation rights on\" : \"Translation rights off\"}\r\n                            </ButtonWithProgress>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {\r\n                        isInstitutionOwner &&\r\n                        <div className=\"card thick-side-borders border-dark no-rounded no-bottom-border\">\r\n                            <div className=\"card-body\">\r\n                                <h5>Institution</h5>\r\n                                <p>The user is a manager of: <span className=\"font-weight-bold\">{institutionName}</span></p>\r\n                                <ButtonWithProgress  onClick={this.onInstitutionRemove}\r\n                                                     className=\"btn btn-lg my-1 btn-danger\"\r\n                                                     disabled={pendingApiCallRemoveInstitution}\r\n                                                     pendingApiCall={pendingApiCallRemoveInstitution}\r\n                                                     hasChildren>\r\n                                    <i className=\"fa fa-times\"/> Remove managerial rights\r\n                                </ButtonWithProgress>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"card thick-side-borders border-dark no-rounded thick-bottom-border my-rounded-bottom\">\r\n                        <div className=\"card-body\">\r\n                            <h5>Ban</h5>\r\n                            <p>Change user's access to the system</p>\r\n                            <ButtonWithProgress  onClick={this.onBanChange}\r\n                                                 className={\"btn btn-lg my-1 \" + (isBanned ? \"btn-danger\" : \"btn-primary\")}\r\n                                                 disabled={pendingApiCallBan}\r\n                                                 pendingApiCall={pendingApiCallBan}\r\n                                                 hasChildren>\r\n                                <i className=\"fa fa-user\"/> {isBanned ? \"Banned\" : \"Access allowed\"}\r\n                            </ButtonWithProgress>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/users\" name=\"User Manager\"/>\r\n                    <li className=\"breadcrumb-item active\">User Details</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"User Details\">Here you can manage users and set their rights</PageInfo>\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UserDetailPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing buildings of user's institution\r\n * @param props props\r\n */\r\nconst BuildingCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-9\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Creation date: </span>\r\n                        {props.createdAt}\r\n                    </div>\r\n\r\n                    {\r\n                        (props.description !== null && props.description !== \"\") &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Description: </span>\r\n                            {props.description}\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"col-md-3 mt-md-0 mt-3\">\r\n                    <Link exact to={\"/myInstitution/rooms/\" + props.buildingId}>\r\n                        <button type=\"button\" className=\"btn btn-primary w-100\">\r\n                            <i className=\"fa fa-bars\" /> Rooms\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <Link exact to={\"/myInstitution/buildings/\" + props.buildingId}>\r\n                        <button type=\"button\" className=\"btn btn-info w-100 mt-2\">\r\n                            <i className=\"fa fa-pencil\" /> Detail\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <ButtonWithProgress  onClick={() => props.onClickDelete(props.buildingId)}\r\n                                         className=\"btn btn-danger w-100 mt-2\"\r\n                                         disabled={props.pendingApiCall}\r\n                                         pendingApiCall={props.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-times\" /> Delete\r\n                    </ButtonWithProgress>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default BuildingCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport BuildingCard from \"../components/BuildingCard\";\r\nimport { Link } from \"react-router-dom\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page with all buildings of an institution that user is managing\r\n */\r\nclass BuildingsPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildings: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n\r\n    /**\r\n     * Called when user wants to delete building\r\n     * @param buildingId building id\r\n     */\r\n    onClickDelete = (buildingId) => {\r\n        // ask before delete\r\n        if(window.confirm(\"Do you really want to delete this building?\")) {\r\n            // update api call for given building\r\n            let newBuildings = [];\r\n            const {buildings} = this.state;\r\n            for (let b of buildings) {\r\n                if(b.buildingId === buildingId) {\r\n                    // set api call to true for deleted building\r\n                    newBuildings.push({...b, pendingApiCall: true});\r\n                }\r\n                else {\r\n                    newBuildings.push({...b});\r\n                }\r\n            }\r\n            this.setState({buildings: newBuildings});\r\n\r\n            // send delete message to server\r\n            apiCalls.deleteBuilding(buildingId).then(response => {\r\n                newBuildings = [...this.state.buildings];\r\n                newBuildings = newBuildings.filter(b => b.buildingId !== buildingId);\r\n\r\n                // if delete was successful update state\r\n                this.setState({buildings: newBuildings});\r\n            }).catch(error => {\r\n                // handle unauthorized error\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true})\r\n        // fetch all institution buildings from server\r\n        apiCalls.getBuildings().then(response => {\r\n            const buildings = response.data;\r\n            // set default properties for fetched buildings\r\n            for(let b of buildings) {\r\n                b.pendingApiCall = false;\r\n            }\r\n            this.setState({buildings, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders page with institution buildings\r\n     * @returns {JSX.Element} page with institution buildings\r\n     */\r\n    render() {\r\n\r\n        // maps buildings to building cards\r\n        const buildings = this.state.buildings.map(b =>\r\n            <BuildingCard key={b.buildingId} {...b} onClickDelete={this.onClickDelete}/>\r\n        );\r\n\r\n        // define page content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.buildings.length === 0 ? <NoContentMessage text=\"There are no buildings\"/> : buildings;\r\n        }\r\n\r\n        // renders page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <li className=\"breadcrumb-item active\">Buildings</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Buildings\">Here you can manage the institution's buildings to help visitors navigate</PageInfo>\r\n                <Link exact to=\"/myInstitution/buildings/addBuilding\">\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-success mb-4\">\r\n                        <i className=\"fa fa-plus-circle\" /> Add new building\r\n                    </button>\r\n                </Link>\r\n\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default BuildingsPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for creating new buildings\r\n */\r\nclass AddBuildingPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCall: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when new building is submitted\r\n     */\r\n    onBuildingCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCall: true});\r\n\r\n        // get description\r\n        let buildingDescription = this.state.description;\r\n        if(buildingDescription === \"\") {\r\n            buildingDescription = null;\r\n        }\r\n\r\n        // send building to server\r\n        apiCalls.saveBuilding({name: this.state.name, description: buildingDescription}).then(response => {\r\n            this.setState({pendingApiCall: false}, () => this.props.history.push(\"/myInstitution/buildings\"));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCall: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render add building page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCall,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <BreadcrumbsLink to=\"/myInstitution/buildings\" name=\"Buildings\"/>\r\n                    <li className=\"breadcrumb-item active\">New Building</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"New Building\">Add a new building belonging to your institution</PageInfo>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name*\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onBuildingCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCall || name === \"\"}\r\n                                         pendingApiCall={pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create building\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddBuildingPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for updating buildings\r\n */\r\nclass UpdateBuildingPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildingId: this.props.match.params.buildingId,\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCallGet: false,\r\n        pendingApiCallUpdate: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallGet: true})\r\n        // fetch building details from the server\r\n        apiCalls.getBuilding(this.state.buildingId).then(response => {\r\n            // set fetched details to page state\r\n            const {name, description} = response.data;\r\n            this.setState({name, description, pendingApiCallGet: false});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when updated building is submitted\r\n     */\r\n    onBuildingUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdate: true});\r\n\r\n        // get description\r\n        let buildingDescription = this.state.description;\r\n        if(buildingDescription === \"\") {\r\n            buildingDescription = null;\r\n        }\r\n\r\n        // send updated building to server\r\n        apiCalls.updateBuilding({name: this.state.name, description: buildingDescription}, this.state.buildingId).then(response => {\r\n            this.setState({pendingApiCallUpdate: false}, () => this.props.history.push(\"/myInstitution/buildings\"));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCallUpdate: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render update building page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCallGet,\r\n            pendingApiCallUpdate,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // return spinner if api call is processing\r\n        if (pendingApiCallGet) {\r\n            return (\r\n                <PageContentContainer>\r\n                    <Spinner />\r\n                </PageContentContainer>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <BreadcrumbsLink to=\"/myInstitution/buildings\" name=\"Buildings\"/>\r\n                    <li className=\"breadcrumb-item active\">Update Building</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Update Building\">Update information of selected building</PageInfo>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onBuildingUpdate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallUpdate || name === \"\"}\r\n                                         pendingApiCall={pendingApiCallUpdate}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Update building\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UpdateBuildingPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing rooms\r\n * @param props props\r\n */\r\nconst RoomCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-9\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Creation date: </span>\r\n                        {props.createdAt}\r\n                    </div>\r\n\r\n                    {\r\n                        (props.description !== null && props.description !== \"\") &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Description: </span>\r\n                            {props.description}\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"col-md-3 mt-md-0 mt-3\">\r\n                    <Link exact to={\"/myInstitution/showcases/\" + props.buildingId + \"/\" + props.roomId}>\r\n                        <button type=\"button\" className=\"btn btn-primary w-100\">\r\n                            <i className=\"fa fa-bars\" /> Show-cases\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <Link exact to={\"/myInstitution/rooms/\" + props.buildingId + \"/\" + props.roomId}>\r\n                        <button type=\"button\" className=\"btn btn-info w-100 mt-2\">\r\n                            <i className=\"fa fa-pencil\" /> Detail\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <ButtonWithProgress  onClick={() => props.onClickDelete(props.roomId)}\r\n                                         className=\"btn btn-danger w-100 mt-2\"\r\n                                         disabled={props.pendingApiCall}\r\n                                         pendingApiCall={props.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-times\" /> Delete\r\n                    </ButtonWithProgress>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default RoomCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport RoomCard from \"../components/RoomCard\";\r\nimport { Link } from \"react-router-dom\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page with all rooms of a building defined in url\r\n */\r\nclass RoomsPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildingId: this.props.match.params.buildingId,\r\n        rooms: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n\r\n    /**\r\n     * Called when user wants to delete room\r\n     * @param roomId room id\r\n     */\r\n    onClickDelete = (roomId) => {\r\n        // ask before delete\r\n        if(window.confirm(\"Do you really want to delete this room?\")) {\r\n            // update api call for given room\r\n            let newRooms = [];\r\n            const {rooms} = this.state;\r\n            for (let r of rooms) {\r\n                if(r.roomId === roomId) {\r\n                    // set api call to true for deleted room\r\n                    newRooms.push({...r, pendingApiCall: true});\r\n                }\r\n                else {\r\n                    newRooms.push({...r});\r\n                }\r\n            }\r\n            this.setState({rooms: newRooms});\r\n\r\n            // send delete message to server\r\n            apiCalls.deleteRoom(roomId).then(response => {\r\n                newRooms = [...this.state.rooms];\r\n                newRooms = newRooms.filter(r => r.roomId !== roomId);\r\n\r\n                // if delete was successful update state\r\n                this.setState({rooms: newRooms});\r\n            }).catch(error => {\r\n                // handle unauthorized error\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true});\r\n        // fetch all rooms from server\r\n        apiCalls.getRooms(this.state.buildingId).then(response => {\r\n            const rooms = response.data;\r\n            // set default properties for fetched rooms\r\n            for(let r of rooms) {\r\n                r.pendingApiCall = false;\r\n            }\r\n            this.setState({rooms, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders page with rooms\r\n     * @returns {JSX.Element} page with rooms\r\n     */\r\n    render() {\r\n\r\n        // maps rooms to room cards\r\n        const rooms = this.state.rooms.map(r =>\r\n            <RoomCard key={r.roomId} {...r} onClickDelete={this.onClickDelete}/>\r\n        );\r\n\r\n        // define page content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.rooms.length === 0 ? <NoContentMessage text=\"There are no rooms\"/> : rooms;\r\n        }\r\n\r\n        // renders page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <BreadcrumbsLink to=\"/myInstitution/buildings/\" name=\"Buildings\"/>\r\n                    <li className=\"breadcrumb-item active\">Rooms</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Rooms\">Here you can manage the institution's rooms to help visitors navigate</PageInfo>\r\n                <Link exact to={\"/myInstitution/rooms/\" + this.state.buildingId + \"/addRoom\"} >\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-success mb-4\">\r\n                        <i className=\"fa fa-plus-circle\" /> Add new room\r\n                    </button>\r\n                </Link>\r\n\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default RoomsPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for creating new rooms\r\n */\r\nclass AddRoomPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildingId: this.props.match.params.buildingId,\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCall: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when new room is submitted\r\n     */\r\n    onRoomCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCall: true});\r\n\r\n        // get description\r\n        let roomDescription = this.state.description;\r\n        if(roomDescription === \"\") {\r\n            roomDescription = null;\r\n        }\r\n\r\n        // send room to server\r\n        apiCalls.saveRoom({name: this.state.name, description: roomDescription}, this.state.buildingId).then(response => {\r\n            this.setState({pendingApiCall: false}, () => this.props.history.push(\"/myInstitution/rooms/\" + this.state.buildingId));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCall: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render add room page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCall,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <BreadcrumbsLink to=\"/myInstitution/buildings/\" name=\"Buildings\"/>\r\n                    <BreadcrumbsLink to={\"/myInstitution/rooms/\" + this.state.buildingId} name=\"Rooms\"/>\r\n                    <li className=\"breadcrumb-item active\">New Room</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"New Room\">Add a new room belonging to your institution</PageInfo>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name*\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onRoomCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCall || name === \"\"}\r\n                                         pendingApiCall={pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create room\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddRoomPage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for updating rooms\r\n */\r\nclass UpdateRoomPage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        roomId: this.props.match.params.roomId,\r\n        buildingId: this.props.match.params.buildingId,\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCallGet: false,\r\n        pendingApiCallUpdate: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallGet: true})\r\n        // fetch room details from the server\r\n        apiCalls.getRoom(this.state.roomId).then(response => {\r\n            // set fetched details to page state\r\n            const {name, description} = response.data;\r\n            this.setState({name, description, pendingApiCallGet: false});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when updated room is submitted\r\n     */\r\n    onRoomUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdate: true});\r\n\r\n        // get description\r\n        let roomDescription = this.state.description;\r\n        if(roomDescription === \"\") {\r\n            roomDescription = null;\r\n        }\r\n\r\n        // send updated room to server\r\n        apiCalls.updateRoom({name: this.state.name, description: roomDescription}, this.state.roomId).then(response => {\r\n            this.setState({pendingApiCallUpdate: false}, () => this.props.history.push(\"/myInstitution/rooms/\" + this.state.buildingId));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCallUpdate: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render update room page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCallGet,\r\n            pendingApiCallUpdate,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // return spinner if api call is processing\r\n        if (pendingApiCallGet) {\r\n            return (\r\n                <PageContentContainer>\r\n                    <Spinner />\r\n                </PageContentContainer>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <BreadcrumbsLink to=\"/myInstitution/buildings\" name=\"Buildings\"/>\r\n                    <BreadcrumbsLink to={\"/myInstitution/rooms/\" + this.state.buildingId} name=\"Rooms\"/>\r\n                    <li className=\"breadcrumb-item active\">Update Room</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Update Room\">Update information of selected room</PageInfo>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onRoomUpdate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallUpdate || name === \"\"}\r\n                                         pendingApiCall={pendingApiCallUpdate}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Update room\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UpdateRoomPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport ButtonWithProgress from \"./ButtonWithProgress\";\r\n\r\n/**\r\n * card for listing showcases\r\n * @param props props\r\n */\r\nconst ShowcaseCard = (props) => (\r\n    <div className=\"card mb-4\">\r\n        <div className=\"card-body\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-9\">\r\n                    <h3 className=\"card-title\">\r\n                        {props.name}\r\n                    </h3>\r\n\r\n                    <div>\r\n                        <span className=\"font-weight-bold\">Creation date: </span>\r\n                        {props.createdAt}\r\n                    </div>\r\n\r\n                    {\r\n                        (props.description !== null && props.description !== \"\") &&\r\n                        <div>\r\n                            <span className=\"font-weight-bold\">Description: </span>\r\n                            {props.description}\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"col-md-3 mt-md-0 mt-3\">\r\n                    <Link exact to={\"/myInstitution/showcases/\" + props.buildingId + \"/\" + props.roomId + \"/\" + props.showcaseId}>\r\n                        <button type=\"button\" className=\"btn btn-info w-100\">\r\n                            <i className=\"fa fa-pencil\" /> Detail\r\n                        </button>\r\n                    </Link>\r\n                    <br />\r\n\r\n                    <ButtonWithProgress  onClick={() => props.onClickDelete(props.showcaseId)}\r\n                                         className=\"btn btn-danger w-100 mt-2\"\r\n                                         disabled={props.pendingApiCall}\r\n                                         pendingApiCall={props.pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-times\" /> Delete\r\n                    </ButtonWithProgress>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default ShowcaseCard;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport ShowcaseCard from \"../components/ShowcaseCard\";\r\nimport { Link } from \"react-router-dom\";\r\nimport NoContentMessage from \"../components/NoContentMessage\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page with all showcases of a room defined in url\r\n */\r\nclass ShowcasePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildingId: this.props.match.params.buildingId,\r\n        roomId: this.props.match.params.roomId,\r\n        showcases: [],\r\n        pendingApiCall: false,\r\n    }\r\n\r\n    /**\r\n     * Called when user wants to delete showcase\r\n     * @param showcaseId showcase id\r\n     */\r\n    onClickDelete = (showcaseId) => {\r\n        // ask before delete\r\n        if(window.confirm(\"Do you really want to delete this show-case?\")) {\r\n            // update api call for given showcase\r\n            let newShowcases = [];\r\n            const {showcases} = this.state;\r\n            for (let s of showcases) {\r\n                if(s.showcaseId === showcaseId) {\r\n                    // set api call to true for deleted showcase\r\n                    newShowcases.push({...s, pendingApiCall: true});\r\n                }\r\n                else {\r\n                    newShowcases.push({...s});\r\n                }\r\n            }\r\n            this.setState({showcases: newShowcases});\r\n\r\n            // send delete message to server\r\n            apiCalls.deleteShowcase(showcaseId).then(response => {\r\n                newShowcases = [...this.state.showcases];\r\n                newShowcases = newShowcases.filter(s => s.showcaseId !== showcaseId);\r\n\r\n                // if delete was successful update state\r\n                this.setState({showcases: newShowcases});\r\n            }).catch(error => {\r\n                // handle unauthorized error\r\n                return handleError(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCall: true});\r\n        // fetch all showcases from server\r\n        apiCalls.getShowcases(this.state.roomId).then(response => {\r\n            const showcases = response.data;\r\n            // set default properties for fetched showcases\r\n            for(let s of showcases) {\r\n                s.pendingApiCall = false;\r\n            }\r\n            this.setState({showcases, pendingApiCall: false});\r\n        }).catch(error => {\r\n            // handle unauthorized error\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders page with showcases\r\n     * @returns {JSX.Element} page with showcases\r\n     */\r\n    render() {\r\n\r\n        // maps showcases to showcase cards\r\n        const showcases = this.state.showcases.map(s =>\r\n            <ShowcaseCard key={s.showcaseId} {...s} buildingId={this.state.buildingId} onClickDelete={this.onClickDelete}/>\r\n        );\r\n\r\n        // define page content\r\n        let content = <Spinner/>;\r\n        if (!this.state.pendingApiCall) {\r\n            content = this.state.showcases.length === 0 ? <NoContentMessage text=\"There are no show-cases\"/> : showcases;\r\n        }\r\n\r\n        // renders page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <BreadcrumbsLink to=\"/myInstitution/buildings/\" name=\"Buildings\"/>\r\n                    <BreadcrumbsLink to={\"/myInstitution/rooms/\" + this.state.buildingId} name=\"Rooms\"/>\r\n                    <li className=\"breadcrumb-item active\">Show-cases</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Show-cases\">Here you can manage the institution's show-cases to help visitors navigate</PageInfo>\r\n                <Link exact to={\"/myInstitution/showcases/\" + this.state.buildingId + \"/\" + this.state.roomId + \"/addShowcase\"} >\r\n                    <button type=\"button\" className=\"btn btn-lg mt-3 btn-success mb-4\">\r\n                        <i className=\"fa fa-plus-circle\" /> Add new show-case\r\n                    </button>\r\n                </Link>\r\n\r\n                {content}\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ShowcasePage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for creating new showcases\r\n */\r\nclass AddShowcasePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildingId: this.props.match.params.buildingId,\r\n        roomId: this.props.match.params.roomId,\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCall: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when new showcase is submitted\r\n     */\r\n    onShowcaseCreate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCall: true});\r\n\r\n        // get description\r\n        let showcaseDescription = this.state.description;\r\n        if(showcaseDescription === \"\") {\r\n            showcaseDescription = null;\r\n        }\r\n\r\n        // send showcase to server\r\n        apiCalls.saveShowcase({name: this.state.name, description: showcaseDescription}, this.state.roomId).then(response => {\r\n            this.setState({pendingApiCall: false}, () => this.props.history.push(\"/myInstitution/showcases/\" + this.state.buildingId + \"/\" + this.state.roomId));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCall: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render add showcase page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCall,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <BreadcrumbsLink to=\"/myInstitution/buildings/\" name=\"Buildings\"/>\r\n                    <BreadcrumbsLink to={\"/myInstitution/rooms/\" + this.state.buildingId} name=\"Rooms\"/>\r\n                    <BreadcrumbsLink to={\"/myInstitution/showcases/\" + this.state.buildingId + \"/\" + this.state.roomId} name=\"Show-cases\"/>\r\n                    <li className=\"breadcrumb-item active\">New Show-case</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"New Show-case\">Add a new show-case belonging to your institution</PageInfo>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name*\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onShowcaseCreate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCall || name === \"\"}\r\n                                         pendingApiCall={pendingApiCall}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Create show-case\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddShowcasePage;","import React, {Component} from 'react';\r\nimport * as apiCalls from \"../apiCalls/apiCalls\";\r\nimport handleError from \"../shared/failureHandler\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport Input from \"../components/Input\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport PageContentContainer from \"../components/PageContentContainer\";\r\nimport Breadcrumbs from \"../components/Breadcrumbs\";\r\nimport BreadcrumbsLink from \"../components/BreadcrumbsLink\";\r\nimport PageInfo from \"../components/PageInfo\";\r\n\r\n/**\r\n * page for updating showcases\r\n */\r\nclass UpdateShowcasePage extends Component {\r\n\r\n    /**\r\n     * current page state\r\n     */\r\n    state = {\r\n        buildingId: this.props.match.params.buildingId,\r\n        roomId: this.props.match.params.roomId,\r\n        showcaseId: this.props.match.params.showcaseId,\r\n        name: \"\",\r\n        description: \"\",\r\n        pendingApiCallGet: false,\r\n        pendingApiCallUpdate: false,\r\n        errors: {},\r\n    }\r\n\r\n    /**\r\n     * called when page is mounted\r\n     */\r\n    componentDidMount() {\r\n        this.setState({pendingApiCallGet: true});\r\n        // fetch showcase details from the server\r\n        apiCalls.getShowcase(this.state.showcaseId).then(response => {\r\n            // set fetched details to page state\r\n            const {name, description} = response.data;\r\n            this.setState({name, description, pendingApiCallGet: false});\r\n        }).catch(error => {\r\n            // handles unauthorized state\r\n            return handleError(error);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when updated showcase is submitted\r\n     */\r\n    onShowcaseUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({pendingApiCallUpdate: true});\r\n\r\n        // get description\r\n        let showcaseDescription = this.state.description;\r\n        if(showcaseDescription === \"\") {\r\n            showcaseDescription = null;\r\n        }\r\n\r\n        // send updated showcase to server\r\n        apiCalls.updateShowcase({name: this.state.name, description: showcaseDescription}, this.state.showcaseId).then(response => {\r\n            this.setState({pendingApiCallUpdate: false}, () => this.props.history.push(\"/myInstitution/showcases/\" + this.state.buildingId + \"/\" + this.state.roomId));\r\n        }).catch(error => {\r\n            // handle unauthorized state\r\n            return handleError(error);\r\n        }).catch(apiError => {\r\n            // handle errors in user input\r\n            let errors = {...this.state.errors};\r\n            if (apiError.response.data && apiError.response.data.validationErrors) {\r\n                errors = {...apiError.response.data.validationErrors}\r\n            }\r\n            this.setState({pendingApiCallUpdate: false, errors});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * called when text input is changed\r\n     * @param event input event\r\n     */\r\n    onChange = (event) => {\r\n        // delete errors for given input\r\n        const errors = {...this.state.errors};\r\n        delete errors[event.target.name];\r\n        // update state\r\n        this.setState({errors, [event.target.name]: event.target.value});\r\n    }\r\n\r\n    /**\r\n     * render update room page\r\n     * @returns {JSX.Element} page\r\n     */\r\n    render() {\r\n        const {\r\n            name,\r\n            description,\r\n            pendingApiCallGet,\r\n            pendingApiCallUpdate,\r\n            errors,\r\n        } = this.state;\r\n\r\n        // return spinner if api call is processing\r\n        if (pendingApiCallGet) {\r\n            return (\r\n                <PageContentContainer>\r\n                    <Spinner />\r\n                </PageContentContainer>\r\n            );\r\n        }\r\n\r\n        // render page\r\n        return (\r\n            <PageContentContainer>\r\n                <Breadcrumbs>\r\n                    <BreadcrumbsLink to=\"/myInstitution\" name=\"My Institution\"/>\r\n                    <BreadcrumbsLink to=\"/myInstitution/buildings/\" name=\"Buildings\"/>\r\n                    <BreadcrumbsLink to={\"/myInstitution/rooms/\" + this.state.buildingId} name=\"Rooms\"/>\r\n                    <BreadcrumbsLink to={\"/myInstitution/showcases/\" + this.state.buildingId + \"/\" + this.state.roomId} name=\"Show-cases\"/>\r\n                    <li className=\"breadcrumb-item active\">Update Show-cases</li>\r\n                </Breadcrumbs>\r\n\r\n                <PageInfo name=\"Update Show-case\">Update information of selected show-case</PageInfo>\r\n\r\n                <form className=\"mt-4\">\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Name\"\r\n                            placeholder=\"Enter name\" name=\"name\" value={name}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.name && true}\r\n                            error={errors.name}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <Input\r\n                            label=\"Description\" type=\"textarea\"\r\n                            placeholder=\"Enter description\" name=\"description\" value={description}\r\n                            onChange={this.onChange}\r\n                            hasError={errors.description && true}\r\n                            error={errors.description}\r\n                        />\r\n                    </div>\r\n\r\n                    <ButtonWithProgress  onClick={(e) => this.onShowcaseUpdate(e)}\r\n                                         className=\"btn btn-primary w-100 my-2\"\r\n                                         disabled={pendingApiCallUpdate || name === \"\"}\r\n                                         pendingApiCall={pendingApiCallUpdate}\r\n                                         hasChildren>\r\n                        <i className=\"fa fa-paper-plane\" /> Update show-case\r\n                    </ButtonWithProgress>\r\n                </form>\r\n            </PageContentContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UpdateShowcasePage;","export default __webpack_public_path__ + \"static/media/lang-icon.b14051ae.png\";","import React from 'react';\r\nimport langIcon from \"../assets/lang-icon.png\";\r\nimport institutionIcon from \"../assets/institution-icon.png\";\r\n\r\nfunction InfoPage(props) {\r\n    return (\r\n        <div className=\"bg-white\">\r\n            <div className=\"w-100 info-page-div\">\r\n                <div className=\"container h-100 d-flex align-items-bottom flex-column-reverse\">\r\n                    <h1 className=\"display-3 font-weight-bold text-white\">How does it work?</h1>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"container py-4 mt-5\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-12 col-md-6 d-flex justify-content-center\">\r\n                        <div className=\"d-flex flex-column-reverse justify-content-center\">\r\n                            <img alt=\"translate\" src={langIcon} className=\"img-fluid info-icon\"/>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-12 col-md-6 mt-5 mt-md-0 d-flex justify-content-center\">\r\n                        <div className=\"d-flex flex-column justify-content-center\">\r\n                            <div>\r\n                                <p className=\"h3 mb-3\">As a translator you can:</p>\r\n                                <ul>\r\n                                    <li>\r\n                                        <p className=\"h5\">\r\n                                            After selecting a cultural institution, an exhibit and a language in the <span className=\"font-weight-bold\">Translate</span> tab, you can translate the information label or give likes to the translations of other translators\r\n                                        </p>\r\n                                    </li>\r\n                                    <li>\r\n                                        <p className=\"h5\">\r\n                                            All your translations are being versioned, you can see all your translation sequences in the <span className=\"font-weight-bold\">My Translations</span> tab\r\n                                        </p>\r\n                                    </li>\r\n                                    <li>\r\n                                        <p className=\"h5\">\r\n                                            After clicking on the detail of a translation sequence, you will see all the translations of the sequence and you can use the <span className=\"font-weight-bold\">Rollback</span> button to return to a previous version\r\n                                        </p>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"row mt-5 mb-5\">\r\n                    <div className=\"col-12 col-md-6 d-flex justify-content-center\">\r\n                        <div className=\"d-flex flex-column justify-content-center\">\r\n                            <div>\r\n                                <p className=\"h3 mb-3\">As an institution administrator you can:</p>\r\n                                <ul>\r\n                                    <li>\r\n                                        <p className=\"h5\">\r\n                                            In the <span className=\"font-weight-bold\">My Institution</span> tab, you can create your own cultural institution and become its administrator\r\n                                        </p>\r\n                                    </li>\r\n                                    <li>\r\n                                        <p className=\"h5\">\r\n                                            In the <span className=\"font-weight-bold\">My Institution</span> tab, you can then click on <span className=\"font-weight-bold\">Languages</span> and add the languages you want for your visitors and the translators will translate informational labels into them\r\n                                        </p>\r\n                                    </li>\r\n                                    <li>\r\n                                        <p className=\"h5\">\r\n                                            From the <span className=\"font-weight-bold\">My Institution</span> tab, you can also add new exhibits and manage them\r\n                                        </p>\r\n                                    </li>\r\n                                    <li>\r\n                                        <p className=\"h5\">\r\n                                            In the <span className=\"font-weight-bold\">Approve</span> tab you can select an exhibit and a language and then choose the best translation that is available. It will be then displayed to visitors in the mobile application.\r\n                                        </p>\r\n                                    </li>\r\n                                    <li>\r\n                                        <p className=\"h5\">\r\n                                            When you view all the exhibits of your cultural institution, you can download images with <span className=\"font-weight-bold\">QR codes</span>, which you can then place in the exhibition. Visitors then scan them and see official translations\r\n                                        </p>\r\n                                    </li>\r\n                                    <li>\r\n                                        <p className=\"h5\">\r\n                                            From the <span className=\"font-weight-bold\">My Institution</span> tab, you can also add buildings, rooms and show-cases of your institution after clicking <span className=\"font-weight-bold\">Navigation</span> button. It will help visitors to orientate\r\n                                        </p>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-12 col-md-6 mt-5 mt-md-0 d-flex justify-content-center\">\r\n                        <div className=\"d-flex flex-column-reverse justify-content-center\">\r\n                            <img alt=\"institution\" src={institutionIcon} className=\"img-fluid info-icon\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default InfoPage;","export default \"data:image/png;base64,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eOF4Y7xwvAm8cLwxiDjeGC8cb4wXjjeBF443ByKON8YRxxvjheON8cLxJvDC8cYg4nhjvHC8MV443gReON4ciDjeGEccb4wXjjfGC8ebwAvHG4OI443xwvHGeOF4E3jheHMg4nhjHHG8MV443hgvHG8CLxxvDCKON8YLxxvjheNN4IXjzYGI441xxPHGeOF4Y7xwvAm8cLwxiDjeGC8cb4wXjjeBF443ByKON8YRxxvjheON8cLxJvDC8cYg4nhjvHC8MV443gReON4ciDjeGEccb4wXjjfGC8ebwAvHG4OI443xwvHGeOF4E3jheHMg4nhjHHG8MV443hgvHG8CLxxvDCKON8YLxxvjheNN4IXjzYGI441xxPHGeOF4Y7xwvAm8cLwxiDjeGC8cb4wXjjeBF443ByKON8YRxxvjheON8cLxJvDC8cYg4nhjvHC8MV443gReON4ciDjeGEccb4wXjjfGC8ebwAvHG4OI443xwvHGeOF4E3jheHMg4nhjHHG8MV443hgvHG8CLxxvDCKON8YLxxvjheNN4IXjzYGI441xxPHGeOF4Y7xwvAm8cLwxiDjeGC8cb4wXjjeBF443ByKON8YRxxvjheON8cLxJvDC8cYg4nhjvHC8MV443gReON4ciDjeGEccb4wXjjfGC8ebwAvHG4OI443xwvHGeOF4E3jheHMg4nhjHHG8MV443hgvHG8CLxxvDCKON8YLxxvjheNN4IXjzYGI441xxPHGeOF4Y7xwvAm8cLwxiDjeGC8cb4wXjjeBF443ByKON8YRxxvjheON8cLxJvDC8cYg4nhjvHC8MV443gReON4ciDjeGEccb4wXjjfGC8ebwAvHG4OI443xwvHGeOF4E3jheHMg4nhjHHG8MV443hgvHG8CLxxvDCKON8YLxxvjheNN4IXjzYGI441xxPHGeOF4Y7xwvAm8cLwxiDjeGC8cb4wXjjeBF443ByKON8YRxxvjheON8cLxJvDC8cYg4nhjvHC8MV443gReON4ciDjeGEccb4wXjjfGC8ebwAvHG4OI443xwvHGeOF4E3jheHMg4nhjHHG8MV443hgvHG8CLxxvDCKON8YLxxvjheNN4IXjzYGI441xxPHGeOF4Y7xwvAm8cLwxiDjeGC8cb4wXjjeBF443ByKON8YRxxvjheON8cLxJvDC8cYg4nhjvHC8MV443gReON4ciDjeGEccb4wXjnc9vA6QdNQ6/rcNJPn/1iz3l3S/GPfRa98i6bqOvX5O0l4d665Ue62k/dbxzIbr+O8eJGnLYPtjV79Z0lc6dvqPkvbvWHel2hmSHt+R14MlbR5sf+zq35Z0Q8dOz5T0uo51V6p9UNLDO/J6iKSNg+2PXf1GSd/o2OlxkvwrcdSytsiN1fmhkt4xVmeV9fNpSY8OjulUSYcEn5lL9Y9KekpwMhdI2j34zFyqnyzpFcHJXCZpl+Azc6l++DK0COEd//VBeGPMEd4YL4Q3xgvhjfGabG2ENxY6hDfGC+GN8UJ4Y7wmWxvhjYUO4Y3xQnhjvBDeGK/J1kZ4Y6FDeGO8EN4YL4Q3xmuytRHeWOgQ3hgvhDfGa9bC6y1Ox67Bw19QnxjjM5vaX5N0XnA2T5L0yOAzc6l+vaTzg5PZW9J2wWfmUt0HHC4JTmYfSQ8MPjOX6mZlZivFW/G6bt1bmMFYuxp2kHT1wqPkQQhAAALjENhR0jVDd4XwDk2Y9iEAgSkRQHinFC3GCgEIzIIAwjuLMDIJCEBgSgQQ3ilFi7FCAAKzIIDwziKMTAICEJgSAYR3StFirBCAwCwIILyzCCOTgAAEpkQA4Z1StBgrBCAwCwII7yzCyCQgAIEpEUB4pxQtxgoBCMyCAMI7izAyCQhAYEoEEN4pRYuxQgACsyCA8M4ijEwCAhCYEoHRhHeMdIPbS/rwlOgzVghAoEkCe0q6duiZOzvZbUN3Uq5s32iEfugCAhCAQB8Ct0v6fp8Gujxr4R28ky4DoQ4EIACBVgggvK1EmnlCAALVEEB4qwkFA4EABFohgPC2EmnmCQEIVEMA4a0mFAwEAhBohQDC20qkmScEIFANAYS3mlAwEAhAoBUCCG8rkWaeEIBANQQQ3mpCwUAgAIFWCCC8rUSaeUIAAtUQQHirCQUDgQAEWiGA8LYSaeYJAQhUQwDhrSYUDAQCEGiFAMLbSqSZJwQgUA0BC++N1YyGgUAAAhBogMD/AVizlVx0gz1hAAAAAElFTkSuQmCC\"","import React, {Component} from 'react';\nimport Layout from \"./components/Layout\"\nimport {Route, Switch, Redirect} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport HomePage from \"./pages/HomePage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport SignupPage from \"./pages/SignupPage\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport MyInstitutionPage from \"./pages/MyInstitutionPage\";\nimport AddLanguagesPage from \"./pages/AddLanguagesPage\";\nimport AddExhibitPage from \"./pages/AddExhibitPage\";\nimport MyInstitutionExhibitsPage from \"./pages/MyInstitutionExhibitsPage\";\nimport UpdateExhibitPage from \"./pages/UpdateExhibitPage\";\nimport TranslateInstitutionsPage from \"./pages/TranslateInstitutionsPage\";\nimport TranslateExhibitPage from \"./pages/TranslateExhibitPage\";\nimport NewTranslationPage from \"./pages/NewTranslationPage\";\nimport TranslatorRatePage from \"./pages/TranslatorRatePage\";\nimport ApproveExhibitPage from \"./pages/ApproveExhibitPage\";\nimport OwnerRatePage from \"./pages/OwnerRatePage\";\nimport MyTranslationsPage from \"./pages/MyTranslationsPage\";\nimport TranslationSequencePage from \"./pages/TranslationSequencePage\";\nimport UserManagerPage from \"./pages/UserManagerPage\";\nimport UserDetailPage from \"./pages/UserDetailPage\";\nimport BuildingsPage from \"./pages/BuildingsPage\";\nimport AddBuildingPage from \"./pages/AddBuildingPage\";\nimport UpdateBuildingPage from \"./pages/UpdateBuildingPage\";\nimport RoomsPage from \"./pages/RoomsPage\";\nimport AddRoomPage from \"./pages/AddRoomPage\";\nimport UpdateRoomPage from \"./pages/UpdateRoomPage\";\nimport ShowcasesPage from \"./pages/ShowcasesPage\";\nimport AddShowcasePage from \"./pages/AddShowcasePage\";\nimport UpdateShowcasePage from \"./pages/UpdateShowcasePage\";\nimport InfoPage from \"./pages/InfoPage\";\n\n\n/**\n * high level component representing whole app\n */\nclass App extends Component {\n\n  render() {\n    const {user} = this.props;\n\n    // all routes available in app with its authorization\n    let routes = (\n        <Switch>\n          <Route exact path=\"/\" component={HomePage}/>\n          <Route exact path=\"/info\" component={InfoPage}/>\n          <Route exact path=\"/login\" component={LoginPage}/>\n          <Route exact path=\"/signup\" component={SignupPage}/>\n          {user.isLoggedIn && <Route exact path=\"/profile\" component={ProfilePage} />}\n          {user.isLoggedIn && <Route exact path=\"/myInstitution\" component={MyInstitutionPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/addLanguages\" component={AddLanguagesPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/addExhibit\" component={AddExhibitPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/exhibits\" component={MyInstitutionExhibitsPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/exhibits/:exhibitId\" component={UpdateExhibitPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/approve\" component={ApproveExhibitPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/approve/:exhibitId/:languageId\" component={OwnerRatePage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/buildings\" component={BuildingsPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/buildings/addBuilding\" component={AddBuildingPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/buildings/:buildingId\" component={UpdateBuildingPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/rooms/:buildingId\" component={RoomsPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/rooms/:buildingId/addRoom\" component={AddRoomPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/rooms/:buildingId/:roomId\" component={UpdateRoomPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/showcases/:buildingId/:roomId\" component={ShowcasesPage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/showcases/:buildingId/:roomId/addShowcase\" component={AddShowcasePage} />}\n          {user.isInstitutionOwner && <Route exact path=\"/myInstitution/showcases/:buildingId/:roomId/:showcaseId\" component={UpdateShowcasePage} />}\n          {user.isTranslator && <Route exact path=\"/institutions\" component={TranslateInstitutionsPage} />}\n          {user.isTranslator && <Route exact path=\"/institutions/:institutionId\" component={TranslateExhibitPage} />}\n          {user.isTranslator && <Route exact path=\"/institutions/:institutionId/translate/:exhibitId/:languageId\" component={NewTranslationPage} />}\n          {user.isTranslator && <Route exact path=\"/institutions/:institutionId/rate/:exhibitId/:languageId\" component={TranslatorRatePage} />}\n          {user.isTranslator && <Route exact path=\"/myTranslations\" component={MyTranslationsPage} />}\n          {user.isTranslator && <Route exact path=\"/myTranslations/:exhibitId/:languageId\" component={TranslationSequencePage} />}\n          {user.isAdmin && <Route exact path=\"/users\" component={UserManagerPage} />}\n          {user.isAdmin && <Route exact path=\"/users/:userId\" component={UserDetailPage} />}\n          <Redirect to=\"/\"/>\n        </Switch>\n    );\n\n    // renders app\n    return (\n        <Layout>\n          {routes}\n        </Layout>\n    );\n  }\n}\n\n\n/**\n * maps redux state to props\n * @param state redux state\n */\nconst mapStateToProps = (state) => {\n  return {\n    user: state,\n  };\n}\n\nexport default connect(mapStateToProps)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {BrowserRouter} from \"react-router-dom\";\nimport store from \"./store/store\";\nimport {Provider} from \"react-redux\";\n\n/**\n * start point of application, renders web\n */\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <BrowserRouter>\n                <App />\n            </BrowserRouter>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);"],"sourceRoot":""}